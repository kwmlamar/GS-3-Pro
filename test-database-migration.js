console.log('Database Migration Status Check');
console.log('===============================');
console.log('');
console.log('The error you encountered indicates that the database migration has NOT been run yet.');
console.log('');
console.log('To fix this, please run the following SQL in your Supabase dashboard:');
console.log('');
console.log('-- Add new fields');
console.log('ALTER TABLE reports');
console.log('ADD COLUMN IF NOT EXISTS site_id INTEGER REFERENCES sites(id),');
console.log('ADD COLUMN IF NOT EXISTS entity_officer_id INTEGER REFERENCES entity_staff(id),');
console.log('ADD COLUMN IF NOT EXISTS security_officer_id INTEGER REFERENCES security_staff(id);');
console.log('');
console.log('-- Add indexes for better performance');
console.log('CREATE INDEX IF NOT EXISTS idx_reports_site_id ON reports(site_id);');
console.log('CREATE INDEX IF NOT EXISTS idx_reports_entity_officer_id ON reports(entity_officer_id);');
console.log('CREATE INDEX IF NOT EXISTS idx_reports_security_officer_id ON reports(security_officer_id);');
console.log('');
console.log('After running this migration:');
console.log('✅ The reports form will work with the new dropdown fields');
console.log('✅ The error will be resolved');
console.log('✅ You can use the enhanced filtering and officer selection features');
console.log('');
console.log('The application has been updated to handle both old and new database structures.');
console.log('It will automatically adapt based on whether the migration has been run.'); 