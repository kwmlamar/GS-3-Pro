function rv(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var St=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function V2(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}var nv={exports:{}},Xc={},iv={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ro=Symbol.for("react.element"),B2=Symbol.for("react.portal"),z2=Symbol.for("react.fragment"),U2=Symbol.for("react.strict_mode"),H2=Symbol.for("react.profiler"),q2=Symbol.for("react.provider"),W2=Symbol.for("react.context"),G2=Symbol.for("react.forward_ref"),K2=Symbol.for("react.suspense"),Y2=Symbol.for("react.memo"),Q2=Symbol.for("react.lazy"),d0=Symbol.iterator;function J2(e){return e===null||typeof e!="object"?null:(e=d0&&e[d0]||e["@@iterator"],typeof e=="function"?e:null)}var av={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ov=Object.assign,lv={};function Ki(e,t,s){this.props=e,this.context=t,this.refs=lv,this.updater=s||av}Ki.prototype.isReactComponent={};Ki.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ki.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cv(){}cv.prototype=Ki.prototype;function nm(e,t,s){this.props=e,this.context=t,this.refs=lv,this.updater=s||av}var im=nm.prototype=new cv;im.constructor=nm;ov(im,Ki.prototype);im.isPureReactComponent=!0;var u0=Array.isArray,dv=Object.prototype.hasOwnProperty,am={current:null},uv={key:!0,ref:!0,__self:!0,__source:!0};function hv(e,t,s){var n,i={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)dv.call(t,n)&&!uv.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(l===1)i.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Ro,type:e,key:a,ref:o,props:i,_owner:am.current}}function X2(e,t){return{$$typeof:Ro,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function om(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ro}function Z2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var h0=/\/+/g;function Jd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Z2(""+e.key):t.toString(36)}function Ml(e,t,s,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ro:case B2:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+Jd(o,0):n,u0(i)?(s="",e!=null&&(s=e.replace(h0,"$&/")+"/"),Ml(i,t,s,"",function(d){return d})):i!=null&&(om(i)&&(i=X2(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(h0,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",u0(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Jd(a,l);o+=Ml(a,t,s,c,i)}else if(c=J2(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Jd(a,l++),o+=Ml(a,t,s,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Xo(e,t,s){if(e==null)return e;var n=[],i=0;return Ml(e,n,"","",function(a){return t.call(s,a,i++)}),n}function e_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $t={current:null},Il={transition:null},t_={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Il,ReactCurrentOwner:am};function fv(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Xo,forEach:function(e,t,s){Xo(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Xo(e,function(){t++}),t},toArray:function(e){return Xo(e,function(t){return t})||[]},only:function(e){if(!om(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=Ki;ye.Fragment=z2;ye.Profiler=H2;ye.PureComponent=nm;ye.StrictMode=U2;ye.Suspense=K2;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t_;ye.act=fv;ye.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=ov({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=am.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)dv.call(t,c)&&!uv.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ro,type:e.type,key:i,ref:a,props:n,_owner:o}};ye.createContext=function(e){return e={$$typeof:W2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:q2,_context:e},e.Consumer=e};ye.createElement=hv;ye.createFactory=function(e){var t=hv.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:G2,render:e}};ye.isValidElement=om;ye.lazy=function(e){return{$$typeof:Q2,_payload:{_status:-1,_result:e},_init:e_}};ye.memo=function(e,t){return{$$typeof:Y2,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=Il.transition;Il.transition={};try{e()}finally{Il.transition=t}};ye.unstable_act=fv;ye.useCallback=function(e,t){return $t.current.useCallback(e,t)};ye.useContext=function(e){return $t.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return $t.current.useDeferredValue(e)};ye.useEffect=function(e,t){return $t.current.useEffect(e,t)};ye.useId=function(){return $t.current.useId()};ye.useImperativeHandle=function(e,t,s){return $t.current.useImperativeHandle(e,t,s)};ye.useInsertionEffect=function(e,t){return $t.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return $t.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return $t.current.useMemo(e,t)};ye.useReducer=function(e,t,s){return $t.current.useReducer(e,t,s)};ye.useRef=function(e){return $t.current.useRef(e)};ye.useState=function(e){return $t.current.useState(e)};ye.useSyncExternalStore=function(e,t,s){return $t.current.useSyncExternalStore(e,t,s)};ye.useTransition=function(){return $t.current.useTransition()};ye.version="18.3.1";iv.exports=ye;var f=iv.exports;const te=Vn(f),Zc=rv({__proto__:null,default:te},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_=f,r_=Symbol.for("react.element"),n_=Symbol.for("react.fragment"),i_=Object.prototype.hasOwnProperty,a_=s_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o_={key:!0,ref:!0,__self:!0,__source:!0};function mv(e,t,s){var n,i={},a=null,o=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)i_.call(t,n)&&!o_.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:r_,type:e,key:a,ref:o,props:i,_owner:a_.current}}Xc.Fragment=n_;Xc.jsx=mv;Xc.jsxs=mv;nv.exports=Xc;var r=nv.exports,mh={},pv={exports:{}},is={},xv={exports:{}},gv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,I){var z=L.length;L.push(I);e:for(;0<z;){var D=z-1>>>1,J=L[D];if(0<i(J,I))L[D]=I,L[z]=J,z=D;else break e}}function s(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var I=L[0],z=L.pop();if(z!==I){L[0]=z;e:for(var D=0,J=L.length,ne=J>>>1;D<ne;){var re=2*(D+1)-1,je=L[re],pe=re+1,le=L[pe];if(0>i(je,z))pe<J&&0>i(le,je)?(L[D]=le,L[pe]=z,D=pe):(L[D]=je,L[re]=z,D=re);else if(pe<J&&0>i(le,z))L[D]=le,L[pe]=z,D=pe;else break e}}return I}function i(L,I){var z=L.sortIndex-I.sortIndex;return z!==0?z:L.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,x=!1,v=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var I=s(d);I!==null;){if(I.callback===null)n(d);else if(I.startTime<=L)n(d),I.sortIndex=I.expirationTime,t(c,I);else break;I=s(d)}}function j(L){if(g=!1,b(L),!v)if(s(c)!==null)v=!0,T(S);else{var I=s(d);I!==null&&V(j,I.startTime-L)}}function S(L,I){v=!1,g&&(g=!1,p(_),_=-1),x=!0;var z=m;try{for(b(I),h=s(c);h!==null&&(!(h.expirationTime>I)||L&&!O());){var D=h.callback;if(typeof D=="function"){h.callback=null,m=h.priorityLevel;var J=D(h.expirationTime<=I);I=e.unstable_now(),typeof J=="function"?h.callback=J:h===s(c)&&n(c),b(I)}else n(c);h=s(c)}if(h!==null)var ne=!0;else{var re=s(d);re!==null&&V(j,re.startTime-I),ne=!1}return ne}finally{h=null,m=z,x=!1}}var R=!1,E=null,_=-1,A=5,P=-1;function O(){return!(e.unstable_now()-P<A)}function k(){if(E!==null){var L=e.unstable_now();P=L;var I=!0;try{I=E(!0,L)}finally{I?$():(R=!1,E=null)}}else R=!1}var $;if(typeof y=="function")$=function(){y(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,C=N.port2;N.port1.onmessage=k,$=function(){C.postMessage(null)}}else $=function(){w(k,0)};function T(L){E=L,R||(R=!0,$())}function V(L,I){_=w(function(){L(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,T(S))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(L){switch(m){case 1:case 2:case 3:var I=3;break;default:I=m}var z=m;m=I;try{return L()}finally{m=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,I){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=m;m=L;try{return I()}finally{m=z}},e.unstable_scheduleCallback=function(L,I,z){var D=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?D+z:D):z=D,L){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,L={id:u++,callback:I,priorityLevel:L,startTime:z,expirationTime:J,sortIndex:-1},z>D?(L.sortIndex=z,t(d,L),s(c)===null&&L===s(d)&&(g?(p(_),_=-1):g=!0,V(j,z-D))):(L.sortIndex=J,t(c,L),v||x||(v=!0,T(S))),L},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(L){var I=m;return function(){var z=m;m=I;try{return L.apply(this,arguments)}finally{m=z}}}})(gv);xv.exports=gv;var l_=xv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_=f,rs=l_;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yv=new Set,Za={};function Bn(e,t){Ai(e,t),Ai(e+"Capture",t)}function Ai(e,t){for(Za[e]=t,e=0;e<t.length;e++)yv.add(t[e])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=Object.prototype.hasOwnProperty,d_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f0={},m0={};function u_(e){return ph.call(m0,e)?!0:ph.call(f0,e)?!1:d_.test(e)?m0[e]=!0:(f0[e]=!0,!1)}function h_(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function f_(e,t,s,n){if(t===null||typeof t>"u"||h_(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lt(e,t,s,n,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xt[e]=new Lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xt[t]=new Lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xt[e]=new Lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xt[e]=new Lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xt[e]=new Lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xt[e]=new Lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xt[e]=new Lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xt[e]=new Lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xt[e]=new Lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var lm=/[\-:]([a-z])/g;function cm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lm,cm);xt[t]=new Lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lm,cm);xt[t]=new Lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lm,cm);xt[t]=new Lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xt[e]=new Lt(e,1,!1,e.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xt[e]=new Lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function dm(e,t,s,n){var i=xt.hasOwnProperty(t)?xt[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(f_(t,s,i,n)&&(s=null),n||i===null?u_(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):i.mustUseProperty?e[i.propertyName]=s===null?i.type===3?!1:"":s:(t=i.attributeName,n=i.attributeNamespace,s===null?e.removeAttribute(t):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var br=c_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zo=Symbol.for("react.element"),ai=Symbol.for("react.portal"),oi=Symbol.for("react.fragment"),um=Symbol.for("react.strict_mode"),xh=Symbol.for("react.profiler"),vv=Symbol.for("react.provider"),wv=Symbol.for("react.context"),hm=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),yh=Symbol.for("react.suspense_list"),fm=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),bv=Symbol.for("react.offscreen"),p0=Symbol.iterator;function aa(e){return e===null||typeof e!="object"?null:(e=p0&&e[p0]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Object.assign,Xd;function Ca(e){if(Xd===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Xd=t&&t[1]||""}return`
`+Xd+e}var Zd=!1;function eu(e,t){if(!e||Zd)return"";Zd=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Zd=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ca(e):""}function m_(e){switch(e.tag){case 5:return Ca(e.type);case 16:return Ca("Lazy");case 13:return Ca("Suspense");case 19:return Ca("SuspenseList");case 0:case 2:case 15:return e=eu(e.type,!1),e;case 11:return e=eu(e.type.render,!1),e;case 1:return e=eu(e.type,!0),e;default:return""}}function vh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case oi:return"Fragment";case ai:return"Portal";case xh:return"Profiler";case um:return"StrictMode";case gh:return"Suspense";case yh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wv:return(e.displayName||"Context")+".Consumer";case vv:return(e._context.displayName||"Context")+".Provider";case hm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fm:return t=e.displayName||null,t!==null?t:vh(e.type)||"Memo";case Pr:t=e._payload,e=e._init;try{return vh(e(t))}catch{}}return null}function p_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vh(t);case 8:return t===um?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function x_(e){var t=jv(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function el(e){e._valueTracker||(e._valueTracker=x_(e))}function Nv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=jv(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function rc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wh(e,t){var s=t.checked;return Ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function x0(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=Jr(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sv(e,t){t=t.checked,t!=null&&dm(e,"checked",t,!1)}function bh(e,t){Sv(e,t);var s=Jr(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jh(e,t.type,s):t.hasOwnProperty("defaultValue")&&jh(e,t.type,Jr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function g0(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function jh(e,t,s){(t!=="number"||rc(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ea=Array.isArray;function ji(e,t,s,n){if(e=e.options,t){t={};for(var i=0;i<s.length;i++)t["$"+s[i]]=!0;for(s=0;s<e.length;s++)i=t.hasOwnProperty("$"+e[s].value),e[s].selected!==i&&(e[s].selected=i),i&&n&&(e[s].defaultSelected=!0)}else{for(s=""+Jr(s),t=null,i=0;i<e.length;i++){if(e[i].value===s){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Nh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function y0(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(Q(92));if(Ea(s)){if(1<s.length)throw Error(Q(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Jr(s)}}function _v(e,t){var s=Jr(t.value),n=Jr(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function v0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Cv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var tl,Ev=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(tl=tl||document.createElement("div"),tl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=tl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function eo(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g_=["Webkit","ms","Moz","O"];Object.keys(Ra).forEach(function(e){g_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ra[t]=Ra[e]})});function kv(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Ra.hasOwnProperty(e)&&Ra[e]?(""+t).trim():t+"px"}function Tv(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=kv(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,i):e[s]=i}}var y_=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _h(e,t){if(t){if(y_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Ch(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eh=null;function mm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kh=null,Ni=null,Si=null;function w0(e){if(e=Lo(e)){if(typeof kh!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=nd(t),kh(e.stateNode,e.type,t))}}function Pv(e){Ni?Si?Si.push(e):Si=[e]:Ni=e}function Av(){if(Ni){var e=Ni,t=Si;if(Si=Ni=null,w0(e),t)for(e=0;e<t.length;e++)w0(t[e])}}function Rv(e,t){return e(t)}function Ov(){}var tu=!1;function $v(e,t,s){if(tu)return e(t,s);tu=!0;try{return Rv(e,t,s)}finally{tu=!1,(Ni!==null||Si!==null)&&(Ov(),Av())}}function to(e,t){var s=e.stateNode;if(s===null)return null;var n=nd(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Q(231,t,typeof s));return s}var Th=!1;if(hr)try{var oa={};Object.defineProperty(oa,"passive",{get:function(){Th=!0}}),window.addEventListener("test",oa,oa),window.removeEventListener("test",oa,oa)}catch{Th=!1}function v_(e,t,s,n,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var Oa=!1,nc=null,ic=!1,Ph=null,w_={onError:function(e){Oa=!0,nc=e}};function b_(e,t,s,n,i,a,o,l,c){Oa=!1,nc=null,v_.apply(w_,arguments)}function j_(e,t,s,n,i,a,o,l,c){if(b_.apply(this,arguments),Oa){if(Oa){var d=nc;Oa=!1,nc=null}else throw Error(Q(198));ic||(ic=!0,Ph=d)}}function zn(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Lv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b0(e){if(zn(e)!==e)throw Error(Q(188))}function N_(e){var t=e.alternate;if(!t){if(t=zn(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var s=e,n=t;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return b0(i),e;if(a===n)return b0(i),t;a=a.sibling}throw Error(Q(188))}if(s.return!==n.return)s=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o)throw Error(Q(189))}}if(s.alternate!==n)throw Error(Q(190))}if(s.tag!==3)throw Error(Q(188));return s.stateNode.current===s?e:t}function Dv(e){return e=N_(e),e!==null?Mv(e):null}function Mv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Mv(e);if(t!==null)return t;e=e.sibling}return null}var Iv=rs.unstable_scheduleCallback,j0=rs.unstable_cancelCallback,S_=rs.unstable_shouldYield,__=rs.unstable_requestPaint,Ze=rs.unstable_now,C_=rs.unstable_getCurrentPriorityLevel,pm=rs.unstable_ImmediatePriority,Fv=rs.unstable_UserBlockingPriority,ac=rs.unstable_NormalPriority,E_=rs.unstable_LowPriority,Vv=rs.unstable_IdlePriority,ed=null,Bs=null;function k_(e){if(Bs&&typeof Bs.onCommitFiberRoot=="function")try{Bs.onCommitFiberRoot(ed,e,void 0,(e.current.flags&128)===128)}catch{}}var Es=Math.clz32?Math.clz32:A_,T_=Math.log,P_=Math.LN2;function A_(e){return e>>>=0,e===0?32:31-(T_(e)/P_|0)|0}var sl=64,rl=4194304;function ka(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oc(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~i;l!==0?n=ka(l):(a&=o,a!==0&&(n=ka(a)))}else o=s&~i,o!==0?n=ka(o):a!==0&&(n=ka(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-Es(t),i=1<<s,n|=e[s],t&=~i;return n}function R_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O_(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Es(a),l=1<<o,c=i[o];c===-1?(!(l&s)||l&n)&&(i[o]=R_(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Ah(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bv(){var e=sl;return sl<<=1,!(sl&4194240)&&(sl=64),e}function su(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Oo(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Es(t),e[t]=s}function $_(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var i=31-Es(s),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,s&=~a}}function xm(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Es(s),i=1<<n;i&t|e[n]&t&&(e[n]|=t),s&=~i}}var Te=0;function zv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Uv,gm,Hv,qv,Wv,Rh=!1,nl=[],Ir=null,Fr=null,Vr=null,so=new Map,ro=new Map,Or=[],L_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function N0(e,t){switch(e){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":so.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ro.delete(t.pointerId)}}function la(e,t,s,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Lo(t),t!==null&&gm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function D_(e,t,s,n,i){switch(t){case"focusin":return Ir=la(Ir,e,t,s,n,i),!0;case"dragenter":return Fr=la(Fr,e,t,s,n,i),!0;case"mouseover":return Vr=la(Vr,e,t,s,n,i),!0;case"pointerover":var a=i.pointerId;return so.set(a,la(so.get(a)||null,e,t,s,n,i)),!0;case"gotpointercapture":return a=i.pointerId,ro.set(a,la(ro.get(a)||null,e,t,s,n,i)),!0}return!1}function Gv(e){var t=jn(e.target);if(t!==null){var s=zn(t);if(s!==null){if(t=s.tag,t===13){if(t=Lv(s),t!==null){e.blockedOn=t,Wv(e.priority,function(){Hv(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Oh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);Eh=n,s.target.dispatchEvent(n),Eh=null}else return t=Lo(s),t!==null&&gm(t),e.blockedOn=s,!1;t.shift()}return!0}function S0(e,t,s){Fl(e)&&s.delete(t)}function M_(){Rh=!1,Ir!==null&&Fl(Ir)&&(Ir=null),Fr!==null&&Fl(Fr)&&(Fr=null),Vr!==null&&Fl(Vr)&&(Vr=null),so.forEach(S0),ro.forEach(S0)}function ca(e,t){e.blockedOn===t&&(e.blockedOn=null,Rh||(Rh=!0,rs.unstable_scheduleCallback(rs.unstable_NormalPriority,M_)))}function no(e){function t(i){return ca(i,e)}if(0<nl.length){ca(nl[0],e);for(var s=1;s<nl.length;s++){var n=nl[s];n.blockedOn===e&&(n.blockedOn=null)}}for(Ir!==null&&ca(Ir,e),Fr!==null&&ca(Fr,e),Vr!==null&&ca(Vr,e),so.forEach(t),ro.forEach(t),s=0;s<Or.length;s++)n=Or[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Or.length&&(s=Or[0],s.blockedOn===null);)Gv(s),s.blockedOn===null&&Or.shift()}var _i=br.ReactCurrentBatchConfig,lc=!0;function I_(e,t,s,n){var i=Te,a=_i.transition;_i.transition=null;try{Te=1,ym(e,t,s,n)}finally{Te=i,_i.transition=a}}function F_(e,t,s,n){var i=Te,a=_i.transition;_i.transition=null;try{Te=4,ym(e,t,s,n)}finally{Te=i,_i.transition=a}}function ym(e,t,s,n){if(lc){var i=Oh(e,t,s,n);if(i===null)hu(e,t,n,cc,s),N0(e,n);else if(D_(i,e,t,s,n))n.stopPropagation();else if(N0(e,n),t&4&&-1<L_.indexOf(e)){for(;i!==null;){var a=Lo(i);if(a!==null&&Uv(a),a=Oh(e,t,s,n),a===null&&hu(e,t,n,cc,s),a===i)break;i=a}i!==null&&n.stopPropagation()}else hu(e,t,n,null,s)}}var cc=null;function Oh(e,t,s,n){if(cc=null,e=mm(n),e=jn(e),e!==null)if(t=zn(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Lv(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cc=e,null}function Kv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C_()){case pm:return 1;case Fv:return 4;case ac:case E_:return 16;case Vv:return 536870912;default:return 16}default:return 16}}var Lr=null,vm=null,Vl=null;function Yv(){if(Vl)return Vl;var e,t=vm,s=t.length,n,i="value"in Lr?Lr.value:Lr.textContent,a=i.length;for(e=0;e<s&&t[e]===i[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===i[a-n];n++);return Vl=i.slice(e,1<n?1-n:void 0)}function Bl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function il(){return!0}function _0(){return!1}function as(e){function t(s,n,i,a,o){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?il:_0,this.isPropagationStopped=_0,this}return Ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),t}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wm=as(Yi),$o=Ye({},Yi,{view:0,detail:0}),V_=as($o),ru,nu,da,td=Ye({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==da&&(da&&e.type==="mousemove"?(ru=e.screenX-da.screenX,nu=e.screenY-da.screenY):nu=ru=0,da=e),ru)},movementY:function(e){return"movementY"in e?e.movementY:nu}}),C0=as(td),B_=Ye({},td,{dataTransfer:0}),z_=as(B_),U_=Ye({},$o,{relatedTarget:0}),iu=as(U_),H_=Ye({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),q_=as(H_),W_=Ye({},Yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),G_=as(W_),K_=Ye({},Yi,{data:0}),E0=as(K_),Y_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=J_[e])?!!t[e]:!1}function bm(){return X_}var Z_=Ye({},$o,{key:function(e){if(e.key){var t=Y_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Q_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bm,charCode:function(e){return e.type==="keypress"?Bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),eC=as(Z_),tC=Ye({},td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k0=as(tC),sC=Ye({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bm}),rC=as(sC),nC=Ye({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),iC=as(nC),aC=Ye({},td,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oC=as(aC),lC=[9,13,27,32],jm=hr&&"CompositionEvent"in window,$a=null;hr&&"documentMode"in document&&($a=document.documentMode);var cC=hr&&"TextEvent"in window&&!$a,Qv=hr&&(!jm||$a&&8<$a&&11>=$a),T0=String.fromCharCode(32),P0=!1;function Jv(e,t){switch(e){case"keyup":return lC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var li=!1;function dC(e,t){switch(e){case"compositionend":return Xv(t);case"keypress":return t.which!==32?null:(P0=!0,T0);case"textInput":return e=t.data,e===T0&&P0?null:e;default:return null}}function uC(e,t){if(li)return e==="compositionend"||!jm&&Jv(e,t)?(e=Yv(),Vl=vm=Lr=null,li=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qv&&t.locale!=="ko"?null:t.data;default:return null}}var hC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hC[e.type]:t==="textarea"}function Zv(e,t,s,n){Pv(n),t=dc(t,"onChange"),0<t.length&&(s=new wm("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var La=null,io=null;function fC(e){dw(e,0)}function sd(e){var t=ui(e);if(Nv(t))return e}function mC(e,t){if(e==="change")return t}var ew=!1;if(hr){var au;if(hr){var ou="oninput"in document;if(!ou){var R0=document.createElement("div");R0.setAttribute("oninput","return;"),ou=typeof R0.oninput=="function"}au=ou}else au=!1;ew=au&&(!document.documentMode||9<document.documentMode)}function O0(){La&&(La.detachEvent("onpropertychange",tw),io=La=null)}function tw(e){if(e.propertyName==="value"&&sd(io)){var t=[];Zv(t,io,e,mm(e)),$v(fC,t)}}function pC(e,t,s){e==="focusin"?(O0(),La=t,io=s,La.attachEvent("onpropertychange",tw)):e==="focusout"&&O0()}function xC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sd(io)}function gC(e,t){if(e==="click")return sd(t)}function yC(e,t){if(e==="input"||e==="change")return sd(t)}function vC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ps=typeof Object.is=="function"?Object.is:vC;function ao(e,t){if(Ps(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!ph.call(t,i)||!Ps(e[i],t[i]))return!1}return!0}function $0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function L0(e,t){var s=$0(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=$0(s)}}function sw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rw(){for(var e=window,t=rc();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=rc(e.document)}return t}function Nm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wC(e){var t=rw(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&sw(s.ownerDocument.documentElement,s)){if(n!==null&&Nm(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=s.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=L0(s,a);var o=L0(s,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var bC=hr&&"documentMode"in document&&11>=document.documentMode,ci=null,$h=null,Da=null,Lh=!1;function D0(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Lh||ci==null||ci!==rc(n)||(n=ci,"selectionStart"in n&&Nm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Da&&ao(Da,n)||(Da=n,n=dc($h,"onSelect"),0<n.length&&(t=new wm("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=ci)))}function al(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var di={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},lu={},nw={};hr&&(nw=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function rd(e){if(lu[e])return lu[e];if(!di[e])return e;var t=di[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in nw)return lu[e]=t[s];return e}var iw=rd("animationend"),aw=rd("animationiteration"),ow=rd("animationstart"),lw=rd("transitionend"),cw=new Map,M0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(e,t){cw.set(e,t),Bn(t,[e])}for(var cu=0;cu<M0.length;cu++){var du=M0[cu],jC=du.toLowerCase(),NC=du[0].toUpperCase()+du.slice(1);rn(jC,"on"+NC)}rn(iw,"onAnimationEnd");rn(aw,"onAnimationIteration");rn(ow,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(lw,"onTransitionEnd");Ai("onMouseEnter",["mouseout","mouseover"]);Ai("onMouseLeave",["mouseout","mouseover"]);Ai("onPointerEnter",["pointerout","pointerover"]);Ai("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function I0(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,j_(n,t,void 0,e),e.currentTarget=null}function dw(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;I0(i,l,d),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;I0(i,l,d),a=c}}}if(ic)throw e=Ph,ic=!1,Ph=null,e}function Ie(e,t){var s=t[Vh];s===void 0&&(s=t[Vh]=new Set);var n=e+"__bubble";s.has(n)||(uw(t,e,2,!1),s.add(n))}function uu(e,t,s){var n=0;t&&(n|=4),uw(s,e,n,t)}var ol="_reactListening"+Math.random().toString(36).slice(2);function oo(e){if(!e[ol]){e[ol]=!0,yv.forEach(function(s){s!=="selectionchange"&&(SC.has(s)||uu(s,!1,e),uu(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ol]||(t[ol]=!0,uu("selectionchange",!1,t))}}function uw(e,t,s,n){switch(Kv(t)){case 1:var i=I_;break;case 4:i=F_;break;default:i=ym}s=i.bind(null,t,s,e),i=void 0,!Th||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,s,{capture:!0,passive:i}):e.addEventListener(t,s,!0):i!==void 0?e.addEventListener(t,s,{passive:i}):e.addEventListener(t,s,!1)}function hu(e,t,s,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=jn(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}$v(function(){var d=a,u=mm(s),h=[];e:{var m=cw.get(e);if(m!==void 0){var x=wm,v=e;switch(e){case"keypress":if(Bl(s)===0)break e;case"keydown":case"keyup":x=eC;break;case"focusin":v="focus",x=iu;break;case"focusout":v="blur",x=iu;break;case"beforeblur":case"afterblur":x=iu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=C0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=z_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=rC;break;case iw:case aw:case ow:x=q_;break;case lw:x=iC;break;case"scroll":x=V_;break;case"wheel":x=oC;break;case"copy":case"cut":case"paste":x=G_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=k0}var g=(t&4)!==0,w=!g&&e==="scroll",p=g?m!==null?m+"Capture":null:m;g=[];for(var y=d,b;y!==null;){b=y;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,p!==null&&(j=to(y,p),j!=null&&g.push(lo(y,j,b)))),w)break;y=y.return}0<g.length&&(m=new x(m,v,null,s,u),h.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&s!==Eh&&(v=s.relatedTarget||s.fromElement)&&(jn(v)||v[fr]))break e;if((x||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,x?(v=s.relatedTarget||s.toElement,x=d,v=v?jn(v):null,v!==null&&(w=zn(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=d),x!==v)){if(g=C0,j="onMouseLeave",p="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=k0,j="onPointerLeave",p="onPointerEnter",y="pointer"),w=x==null?m:ui(x),b=v==null?m:ui(v),m=new g(j,y+"leave",x,s,u),m.target=w,m.relatedTarget=b,j=null,jn(u)===d&&(g=new g(p,y+"enter",v,s,u),g.target=b,g.relatedTarget=w,j=g),w=j,x&&v)t:{for(g=x,p=v,y=0,b=g;b;b=Yn(b))y++;for(b=0,j=p;j;j=Yn(j))b++;for(;0<y-b;)g=Yn(g),y--;for(;0<b-y;)p=Yn(p),b--;for(;y--;){if(g===p||p!==null&&g===p.alternate)break t;g=Yn(g),p=Yn(p)}g=null}else g=null;x!==null&&F0(h,m,x,g,!1),v!==null&&w!==null&&F0(h,w,v,g,!0)}}e:{if(m=d?ui(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var S=mC;else if(A0(m))if(ew)S=yC;else{S=xC;var R=pC}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=gC);if(S&&(S=S(e,d))){Zv(h,S,s,u);break e}R&&R(e,m,d),e==="focusout"&&(R=m._wrapperState)&&R.controlled&&m.type==="number"&&jh(m,"number",m.value)}switch(R=d?ui(d):window,e){case"focusin":(A0(R)||R.contentEditable==="true")&&(ci=R,$h=d,Da=null);break;case"focusout":Da=$h=ci=null;break;case"mousedown":Lh=!0;break;case"contextmenu":case"mouseup":case"dragend":Lh=!1,D0(h,s,u);break;case"selectionchange":if(bC)break;case"keydown":case"keyup":D0(h,s,u)}var E;if(jm)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else li?Jv(e,s)&&(_="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(_="onCompositionStart");_&&(Qv&&s.locale!=="ko"&&(li||_!=="onCompositionStart"?_==="onCompositionEnd"&&li&&(E=Yv()):(Lr=u,vm="value"in Lr?Lr.value:Lr.textContent,li=!0)),R=dc(d,_),0<R.length&&(_=new E0(_,e,null,s,u),h.push({event:_,listeners:R}),E?_.data=E:(E=Xv(s),E!==null&&(_.data=E)))),(E=cC?dC(e,s):uC(e,s))&&(d=dc(d,"onBeforeInput"),0<d.length&&(u=new E0("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=E))}dw(h,t)})}function lo(e,t,s){return{instance:e,listener:t,currentTarget:s}}function dc(e,t){for(var s=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=to(e,s),a!=null&&n.unshift(lo(e,a,i)),a=to(e,t),a!=null&&n.push(lo(e,a,i))),e=e.return}return n}function Yn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function F0(e,t,s,n,i){for(var a=t._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,i?(c=to(s,a),c!=null&&o.unshift(lo(s,c,l))):i||(c=to(s,a),c!=null&&o.push(lo(s,c,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var _C=/\r\n?/g,CC=/\u0000|\uFFFD/g;function V0(e){return(typeof e=="string"?e:""+e).replace(_C,`
`).replace(CC,"")}function ll(e,t,s){if(t=V0(t),V0(e)!==t&&s)throw Error(Q(425))}function uc(){}var Dh=null,Mh=null;function Ih(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fh=typeof setTimeout=="function"?setTimeout:void 0,EC=typeof clearTimeout=="function"?clearTimeout:void 0,B0=typeof Promise=="function"?Promise:void 0,kC=typeof queueMicrotask=="function"?queueMicrotask:typeof B0<"u"?function(e){return B0.resolve(null).then(e).catch(TC)}:Fh;function TC(e){setTimeout(function(){throw e})}function fu(e,t){var s=t,n=0;do{var i=s.nextSibling;if(e.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){e.removeChild(i),no(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);no(t)}function Br(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function z0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Qi=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Qi,co="__reactProps$"+Qi,fr="__reactContainer$"+Qi,Vh="__reactEvents$"+Qi,PC="__reactListeners$"+Qi,AC="__reactHandles$"+Qi;function jn(e){var t=e[Fs];if(t)return t;for(var s=e.parentNode;s;){if(t=s[fr]||s[Fs]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=z0(e);e!==null;){if(s=e[Fs])return s;e=z0(e)}return t}e=s,s=e.parentNode}return null}function Lo(e){return e=e[Fs]||e[fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ui(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function nd(e){return e[co]||null}var Bh=[],hi=-1;function nn(e){return{current:e}}function Ve(e){0>hi||(e.current=Bh[hi],Bh[hi]=null,hi--)}function Le(e,t){hi++,Bh[hi]=e.current,e.current=t}var Xr={},_t=nn(Xr),Wt=nn(!1),An=Xr;function Ri(e,t){var s=e.type.contextTypes;if(!s)return Xr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Gt(e){return e=e.childContextTypes,e!=null}function hc(){Ve(Wt),Ve(_t)}function U0(e,t,s){if(_t.current!==Xr)throw Error(Q(168));Le(_t,t),Le(Wt,s)}function hw(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Q(108,p_(e)||"Unknown",i));return Ye({},s,n)}function fc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xr,An=_t.current,Le(_t,e),Le(Wt,Wt.current),!0}function H0(e,t,s){var n=e.stateNode;if(!n)throw Error(Q(169));s?(e=hw(e,t,An),n.__reactInternalMemoizedMergedChildContext=e,Ve(Wt),Ve(_t),Le(_t,e)):Ve(Wt),Le(Wt,s)}var tr=null,id=!1,mu=!1;function fw(e){tr===null?tr=[e]:tr.push(e)}function RC(e){id=!0,fw(e)}function an(){if(!mu&&tr!==null){mu=!0;var e=0,t=Te;try{var s=tr;for(Te=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}tr=null,id=!1}catch(i){throw tr!==null&&(tr=tr.slice(e+1)),Iv(pm,an),i}finally{Te=t,mu=!1}}return null}var fi=[],mi=0,mc=null,pc=0,cs=[],ds=0,Rn=null,nr=1,ir="";function mn(e,t){fi[mi++]=pc,fi[mi++]=mc,mc=e,pc=t}function mw(e,t,s){cs[ds++]=nr,cs[ds++]=ir,cs[ds++]=Rn,Rn=e;var n=nr;e=ir;var i=32-Es(n)-1;n&=~(1<<i),s+=1;var a=32-Es(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,nr=1<<32-Es(t)+i|s<<i|n,ir=a+e}else nr=1<<a|s<<i|n,ir=e}function Sm(e){e.return!==null&&(mn(e,1),mw(e,1,0))}function _m(e){for(;e===mc;)mc=fi[--mi],fi[mi]=null,pc=fi[--mi],fi[mi]=null;for(;e===Rn;)Rn=cs[--ds],cs[ds]=null,ir=cs[--ds],cs[ds]=null,nr=cs[--ds],cs[ds]=null}var ts=null,es=null,Ue=!1,Ss=null;function pw(e,t){var s=fs(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function q0(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ts=e,es=Br(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ts=e,es=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Rn!==null?{id:nr,overflow:ir}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=fs(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,ts=e,es=null,!0):!1;default:return!1}}function zh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Uh(e){if(Ue){var t=es;if(t){var s=t;if(!q0(e,t)){if(zh(e))throw Error(Q(418));t=Br(s.nextSibling);var n=ts;t&&q0(e,t)?pw(n,s):(e.flags=e.flags&-4097|2,Ue=!1,ts=e)}}else{if(zh(e))throw Error(Q(418));e.flags=e.flags&-4097|2,Ue=!1,ts=e}}}function W0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ts=e}function cl(e){if(e!==ts)return!1;if(!Ue)return W0(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ih(e.type,e.memoizedProps)),t&&(t=es)){if(zh(e))throw xw(),Error(Q(418));for(;t;)pw(e,t),t=Br(t.nextSibling)}if(W0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){es=Br(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}es=null}}else es=ts?Br(e.stateNode.nextSibling):null;return!0}function xw(){for(var e=es;e;)e=Br(e.nextSibling)}function Oi(){es=ts=null,Ue=!1}function Cm(e){Ss===null?Ss=[e]:Ss.push(e)}var OC=br.ReactCurrentBatchConfig;function ua(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Q(309));var n=s.stateNode}if(!n)throw Error(Q(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Q(284));if(!s._owner)throw Error(Q(290,e))}return e}function dl(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function G0(e){var t=e._init;return t(e._payload)}function gw(e){function t(p,y){if(e){var b=p.deletions;b===null?(p.deletions=[y],p.flags|=16):b.push(y)}}function s(p,y){if(!e)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function n(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function i(p,y){return p=qr(p,y),p.index=0,p.sibling=null,p}function a(p,y,b){return p.index=b,e?(b=p.alternate,b!==null?(b=b.index,b<y?(p.flags|=2,y):b):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,y,b,j){return y===null||y.tag!==6?(y=bu(b,p.mode,j),y.return=p,y):(y=i(y,b),y.return=p,y)}function c(p,y,b,j){var S=b.type;return S===oi?u(p,y,b.props.children,j,b.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pr&&G0(S)===y.type)?(j=i(y,b.props),j.ref=ua(p,y,b),j.return=p,j):(j=Kl(b.type,b.key,b.props,null,p.mode,j),j.ref=ua(p,y,b),j.return=p,j)}function d(p,y,b,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=ju(b,p.mode,j),y.return=p,y):(y=i(y,b.children||[]),y.return=p,y)}function u(p,y,b,j,S){return y===null||y.tag!==7?(y=kn(b,p.mode,j,S),y.return=p,y):(y=i(y,b),y.return=p,y)}function h(p,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=bu(""+y,p.mode,b),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zo:return b=Kl(y.type,y.key,y.props,null,p.mode,b),b.ref=ua(p,null,y),b.return=p,b;case ai:return y=ju(y,p.mode,b),y.return=p,y;case Pr:var j=y._init;return h(p,j(y._payload),b)}if(Ea(y)||aa(y))return y=kn(y,p.mode,b,null),y.return=p,y;dl(p,y)}return null}function m(p,y,b,j){var S=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(p,y,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zo:return b.key===S?c(p,y,b,j):null;case ai:return b.key===S?d(p,y,b,j):null;case Pr:return S=b._init,m(p,y,S(b._payload),j)}if(Ea(b)||aa(b))return S!==null?null:u(p,y,b,j,null);dl(p,b)}return null}function x(p,y,b,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(b)||null,l(y,p,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Zo:return p=p.get(j.key===null?b:j.key)||null,c(y,p,j,S);case ai:return p=p.get(j.key===null?b:j.key)||null,d(y,p,j,S);case Pr:var R=j._init;return x(p,y,b,R(j._payload),S)}if(Ea(j)||aa(j))return p=p.get(b)||null,u(y,p,j,S,null);dl(y,j)}return null}function v(p,y,b,j){for(var S=null,R=null,E=y,_=y=0,A=null;E!==null&&_<b.length;_++){E.index>_?(A=E,E=null):A=E.sibling;var P=m(p,E,b[_],j);if(P===null){E===null&&(E=A);break}e&&E&&P.alternate===null&&t(p,E),y=a(P,y,_),R===null?S=P:R.sibling=P,R=P,E=A}if(_===b.length)return s(p,E),Ue&&mn(p,_),S;if(E===null){for(;_<b.length;_++)E=h(p,b[_],j),E!==null&&(y=a(E,y,_),R===null?S=E:R.sibling=E,R=E);return Ue&&mn(p,_),S}for(E=n(p,E);_<b.length;_++)A=x(E,p,_,b[_],j),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?_:A.key),y=a(A,y,_),R===null?S=A:R.sibling=A,R=A);return e&&E.forEach(function(O){return t(p,O)}),Ue&&mn(p,_),S}function g(p,y,b,j){var S=aa(b);if(typeof S!="function")throw Error(Q(150));if(b=S.call(b),b==null)throw Error(Q(151));for(var R=S=null,E=y,_=y=0,A=null,P=b.next();E!==null&&!P.done;_++,P=b.next()){E.index>_?(A=E,E=null):A=E.sibling;var O=m(p,E,P.value,j);if(O===null){E===null&&(E=A);break}e&&E&&O.alternate===null&&t(p,E),y=a(O,y,_),R===null?S=O:R.sibling=O,R=O,E=A}if(P.done)return s(p,E),Ue&&mn(p,_),S;if(E===null){for(;!P.done;_++,P=b.next())P=h(p,P.value,j),P!==null&&(y=a(P,y,_),R===null?S=P:R.sibling=P,R=P);return Ue&&mn(p,_),S}for(E=n(p,E);!P.done;_++,P=b.next())P=x(E,p,_,P.value,j),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?_:P.key),y=a(P,y,_),R===null?S=P:R.sibling=P,R=P);return e&&E.forEach(function(k){return t(p,k)}),Ue&&mn(p,_),S}function w(p,y,b,j){if(typeof b=="object"&&b!==null&&b.type===oi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Zo:e:{for(var S=b.key,R=y;R!==null;){if(R.key===S){if(S=b.type,S===oi){if(R.tag===7){s(p,R.sibling),y=i(R,b.props.children),y.return=p,p=y;break e}}else if(R.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pr&&G0(S)===R.type){s(p,R.sibling),y=i(R,b.props),y.ref=ua(p,R,b),y.return=p,p=y;break e}s(p,R);break}else t(p,R);R=R.sibling}b.type===oi?(y=kn(b.props.children,p.mode,j,b.key),y.return=p,p=y):(j=Kl(b.type,b.key,b.props,null,p.mode,j),j.ref=ua(p,y,b),j.return=p,p=j)}return o(p);case ai:e:{for(R=b.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){s(p,y.sibling),y=i(y,b.children||[]),y.return=p,p=y;break e}else{s(p,y);break}else t(p,y);y=y.sibling}y=ju(b,p.mode,j),y.return=p,p=y}return o(p);case Pr:return R=b._init,w(p,y,R(b._payload),j)}if(Ea(b))return v(p,y,b,j);if(aa(b))return g(p,y,b,j);dl(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(s(p,y.sibling),y=i(y,b),y.return=p,p=y):(s(p,y),y=bu(b,p.mode,j),y.return=p,p=y),o(p)):s(p,y)}return w}var $i=gw(!0),yw=gw(!1),xc=nn(null),gc=null,pi=null,Em=null;function km(){Em=pi=gc=null}function Tm(e){var t=xc.current;Ve(xc),e._currentValue=t}function Hh(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function Ci(e,t){gc=e,Em=pi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ht=!0),e.firstContext=null)}function ps(e){var t=e._currentValue;if(Em!==e)if(e={context:e,memoizedValue:t,next:null},pi===null){if(gc===null)throw Error(Q(308));pi=e,gc.dependencies={lanes:0,firstContext:e}}else pi=pi.next=e;return t}var Nn=null;function Pm(e){Nn===null?Nn=[e]:Nn.push(e)}function vw(e,t,s,n){var i=t.interleaved;return i===null?(s.next=s,Pm(t)):(s.next=i.next,i.next=s),t.interleaved=s,mr(e,n)}function mr(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Ar=!1;function Am(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ww(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zr(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ce&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,mr(e,s)}return i=n.interleaved,i===null?(t.next=t,Pm(n)):(t.next=i.next,i.next=t),n.interleaved=t,mr(e,s)}function zl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,xm(e,s)}}function K0(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?i=a=t:a=a.next=t}else i=a=t;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function yc(e,t,s,n){var i=e.updateQueue;Ar=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,u=d=c=null,l=a;do{var m=l.lane,x=l.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,g=l;switch(m=t,x=s,g.tag){case 1:if(v=g.payload,typeof v=="function"){h=v.call(x,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,m=typeof v=="function"?v.call(x,h,m):v,m==null)break e;h=Ye({},h,m);break e;case 2:Ar=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=x,c=h):u=u.next=x,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);$n|=o,e.lanes=o,e.memoizedState=h}}function Y0(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(Q(191,i));i.call(n)}}}var Do={},zs=nn(Do),uo=nn(Do),ho=nn(Do);function Sn(e){if(e===Do)throw Error(Q(174));return e}function Rm(e,t){switch(Le(ho,t),Le(uo,e),Le(zs,Do),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sh(t,e)}Ve(zs),Le(zs,t)}function Li(){Ve(zs),Ve(uo),Ve(ho)}function bw(e){Sn(ho.current);var t=Sn(zs.current),s=Sh(t,e.type);t!==s&&(Le(uo,e),Le(zs,s))}function Om(e){uo.current===e&&(Ve(zs),Ve(uo))}var qe=nn(0);function vc(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pu=[];function $m(){for(var e=0;e<pu.length;e++)pu[e]._workInProgressVersionPrimary=null;pu.length=0}var Ul=br.ReactCurrentDispatcher,xu=br.ReactCurrentBatchConfig,On=0,Ge=null,st=null,ot=null,wc=!1,Ma=!1,fo=0,$C=0;function yt(){throw Error(Q(321))}function Lm(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ps(e[s],t[s]))return!1;return!0}function Dm(e,t,s,n,i,a){if(On=a,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ul.current=e===null||e.memoizedState===null?IC:FC,e=s(n,i),Ma){a=0;do{if(Ma=!1,fo=0,25<=a)throw Error(Q(301));a+=1,ot=st=null,t.updateQueue=null,Ul.current=VC,e=s(n,i)}while(Ma)}if(Ul.current=bc,t=st!==null&&st.next!==null,On=0,ot=st=Ge=null,wc=!1,t)throw Error(Q(300));return e}function Mm(){var e=fo!==0;return fo=0,e}function Ms(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ge.memoizedState=ot=e:ot=ot.next=e,ot}function xs(){if(st===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=ot===null?Ge.memoizedState:ot.next;if(t!==null)ot=t,st=e;else{if(e===null)throw Error(Q(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ot===null?Ge.memoizedState=ot=e:ot=ot.next=e}return ot}function mo(e,t){return typeof t=="function"?t(e):t}function gu(e){var t=xs(),s=t.queue;if(s===null)throw Error(Q(311));s.lastRenderedReducer=e;var n=st,i=n.baseQueue,a=s.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((On&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Ge.lanes|=u,$n|=u}d=d.next}while(d!==null&&d!==a);c===null?o=n:c.next=l,Ps(n,t.memoizedState)||(Ht=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){i=e;do a=i.lane,Ge.lanes|=a,$n|=a,i=i.next;while(i!==e)}else i===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function yu(e){var t=xs(),s=t.queue;if(s===null)throw Error(Q(311));s.lastRenderedReducer=e;var n=s.dispatch,i=s.pending,a=t.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Ps(a,t.memoizedState)||(Ht=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),s.lastRenderedState=a}return[a,n]}function jw(){}function Nw(e,t){var s=Ge,n=xs(),i=t(),a=!Ps(n.memoizedState,i);if(a&&(n.memoizedState=i,Ht=!0),n=n.queue,Im(Cw.bind(null,s,n,e),[e]),n.getSnapshot!==t||a||ot!==null&&ot.memoizedState.tag&1){if(s.flags|=2048,po(9,_w.bind(null,s,n,i,t),void 0,null),lt===null)throw Error(Q(349));On&30||Sw(s,t,i)}return i}function Sw(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function _w(e,t,s,n){t.value=s,t.getSnapshot=n,Ew(t)&&kw(e)}function Cw(e,t,s){return s(function(){Ew(t)&&kw(e)})}function Ew(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ps(e,s)}catch{return!0}}function kw(e){var t=mr(e,1);t!==null&&ks(t,e,1,-1)}function Q0(e){var t=Ms();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:e},t.queue=e,e=e.dispatch=MC.bind(null,Ge,e),[t.memoizedState,e]}function po(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function Tw(){return xs().memoizedState}function Hl(e,t,s,n){var i=Ms();Ge.flags|=e,i.memoizedState=po(1|t,s,void 0,n===void 0?null:n)}function ad(e,t,s,n){var i=xs();n=n===void 0?null:n;var a=void 0;if(st!==null){var o=st.memoizedState;if(a=o.destroy,n!==null&&Lm(n,o.deps)){i.memoizedState=po(t,s,a,n);return}}Ge.flags|=e,i.memoizedState=po(1|t,s,a,n)}function J0(e,t){return Hl(8390656,8,e,t)}function Im(e,t){return ad(2048,8,e,t)}function Pw(e,t){return ad(4,2,e,t)}function Aw(e,t){return ad(4,4,e,t)}function Rw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ow(e,t,s){return s=s!=null?s.concat([e]):null,ad(4,4,Rw.bind(null,t,e),s)}function Fm(){}function $w(e,t){var s=xs();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Lm(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function Lw(e,t){var s=xs();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Lm(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function Dw(e,t,s){return On&21?(Ps(s,t)||(s=Bv(),Ge.lanes|=s,$n|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ht=!0),e.memoizedState=s)}function LC(e,t){var s=Te;Te=s!==0&&4>s?s:4,e(!0);var n=xu.transition;xu.transition={};try{e(!1),t()}finally{Te=s,xu.transition=n}}function Mw(){return xs().memoizedState}function DC(e,t,s){var n=Hr(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Iw(e))Fw(t,s);else if(s=vw(e,t,s,n),s!==null){var i=Ot();ks(s,e,n,i),Vw(s,t,n)}}function MC(e,t,s){var n=Hr(e),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Iw(e))Fw(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,s);if(i.hasEagerState=!0,i.eagerState=l,Ps(l,o)){var c=t.interleaved;c===null?(i.next=i,Pm(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}s=vw(e,t,i,n),s!==null&&(i=Ot(),ks(s,e,n,i),Vw(s,t,n))}}function Iw(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function Fw(e,t){Ma=wc=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Vw(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,xm(e,s)}}var bc={readContext:ps,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},IC={readContext:ps,useCallback:function(e,t){return Ms().memoizedState=[e,t===void 0?null:t],e},useContext:ps,useEffect:J0,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Hl(4194308,4,Rw.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Hl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hl(4,2,e,t)},useMemo:function(e,t){var s=Ms();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=Ms();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=DC.bind(null,Ge,e),[n.memoizedState,e]},useRef:function(e){var t=Ms();return e={current:e},t.memoizedState=e},useState:Q0,useDebugValue:Fm,useDeferredValue:function(e){return Ms().memoizedState=e},useTransition:function(){var e=Q0(!1),t=e[0];return e=LC.bind(null,e[1]),Ms().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Ge,i=Ms();if(Ue){if(s===void 0)throw Error(Q(407));s=s()}else{if(s=t(),lt===null)throw Error(Q(349));On&30||Sw(n,t,s)}i.memoizedState=s;var a={value:s,getSnapshot:t};return i.queue=a,J0(Cw.bind(null,n,a,e),[e]),n.flags|=2048,po(9,_w.bind(null,n,a,s,t),void 0,null),s},useId:function(){var e=Ms(),t=lt.identifierPrefix;if(Ue){var s=ir,n=nr;s=(n&~(1<<32-Es(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=fo++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=$C++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},FC={readContext:ps,useCallback:$w,useContext:ps,useEffect:Im,useImperativeHandle:Ow,useInsertionEffect:Pw,useLayoutEffect:Aw,useMemo:Lw,useReducer:gu,useRef:Tw,useState:function(){return gu(mo)},useDebugValue:Fm,useDeferredValue:function(e){var t=xs();return Dw(t,st.memoizedState,e)},useTransition:function(){var e=gu(mo)[0],t=xs().memoizedState;return[e,t]},useMutableSource:jw,useSyncExternalStore:Nw,useId:Mw,unstable_isNewReconciler:!1},VC={readContext:ps,useCallback:$w,useContext:ps,useEffect:Im,useImperativeHandle:Ow,useInsertionEffect:Pw,useLayoutEffect:Aw,useMemo:Lw,useReducer:yu,useRef:Tw,useState:function(){return yu(mo)},useDebugValue:Fm,useDeferredValue:function(e){var t=xs();return st===null?t.memoizedState=e:Dw(t,st.memoizedState,e)},useTransition:function(){var e=yu(mo)[0],t=xs().memoizedState;return[e,t]},useMutableSource:jw,useSyncExternalStore:Nw,useId:Mw,unstable_isNewReconciler:!1};function bs(e,t){if(e&&e.defaultProps){t=Ye({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function qh(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:Ye({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var od={isMounted:function(e){return(e=e._reactInternals)?zn(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Ot(),i=Hr(e),a=lr(n,i);a.payload=t,s!=null&&(a.callback=s),t=zr(e,a,i),t!==null&&(ks(t,e,i,n),zl(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Ot(),i=Hr(e),a=lr(n,i);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=zr(e,a,i),t!==null&&(ks(t,e,i,n),zl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Ot(),n=Hr(e),i=lr(s,n);i.tag=2,t!=null&&(i.callback=t),t=zr(e,i,n),t!==null&&(ks(t,e,n,s),zl(t,e,n))}};function X0(e,t,s,n,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!ao(s,n)||!ao(i,a):!0}function Bw(e,t,s){var n=!1,i=Xr,a=t.contextType;return typeof a=="object"&&a!==null?a=ps(a):(i=Gt(t)?An:_t.current,n=t.contextTypes,a=(n=n!=null)?Ri(e,i):Xr),t=new t(s,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=od,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Z0(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&od.enqueueReplaceState(t,t.state,null)}function Wh(e,t,s,n){var i=e.stateNode;i.props=s,i.state=e.memoizedState,i.refs={},Am(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=ps(a):(a=Gt(t)?An:_t.current,i.context=Ri(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(qh(e,t,a,s),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&od.enqueueReplaceState(i,i.state,null),yc(e,s,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Di(e,t){try{var s="",n=t;do s+=m_(n),n=n.return;while(n);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function vu(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Gh(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var BC=typeof WeakMap=="function"?WeakMap:Map;function zw(e,t,s){s=lr(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Nc||(Nc=!0,rf=n),Gh(e,t)},s}function Uw(e,t,s){s=lr(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;s.payload=function(){return n(i)},s.callback=function(){Gh(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){Gh(e,t),typeof n!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function ex(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new BC;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(s)||(i.add(s),e=t4.bind(null,e,t,s),t.then(e,e))}function tx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sx(e,t,s,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=lr(-1,1),t.tag=2,zr(s,t,1))),s.lanes|=1),e)}var zC=br.ReactCurrentOwner,Ht=!1;function Pt(e,t,s,n){t.child=e===null?yw(t,null,s,n):$i(t,e.child,s,n)}function rx(e,t,s,n,i){s=s.render;var a=t.ref;return Ci(t,i),n=Dm(e,t,s,n,a,i),s=Mm(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,pr(e,t,i)):(Ue&&s&&Sm(t),t.flags|=1,Pt(e,t,n,i),t.child)}function nx(e,t,s,n,i){if(e===null){var a=s.type;return typeof a=="function"&&!Gm(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=a,Hw(e,t,a,n,i)):(e=Kl(s.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:ao,s(o,n)&&e.ref===t.ref)return pr(e,t,i)}return t.flags|=1,e=qr(a,n),e.ref=t.ref,e.return=t,t.child=e}function Hw(e,t,s,n,i){if(e!==null){var a=e.memoizedProps;if(ao(a,n)&&e.ref===t.ref)if(Ht=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(Ht=!0);else return t.lanes=e.lanes,pr(e,t,i)}return Kh(e,t,s,n,i)}function qw(e,t,s){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(gi,Xt),Xt|=s;else{if(!(s&1073741824))return e=a!==null?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(gi,Xt),Xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,Le(gi,Xt),Xt|=n}else a!==null?(n=a.baseLanes|s,t.memoizedState=null):n=s,Le(gi,Xt),Xt|=n;return Pt(e,t,i,s),t.child}function Ww(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Kh(e,t,s,n,i){var a=Gt(s)?An:_t.current;return a=Ri(t,a),Ci(t,i),s=Dm(e,t,s,n,a,i),n=Mm(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,pr(e,t,i)):(Ue&&n&&Sm(t),t.flags|=1,Pt(e,t,s,i),t.child)}function ix(e,t,s,n,i){if(Gt(s)){var a=!0;fc(t)}else a=!1;if(Ci(t,i),t.stateNode===null)ql(e,t),Bw(t,s,n),Wh(t,s,n,i),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=ps(d):(d=Gt(s)?An:_t.current,d=Ri(t,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Z0(t,o,n,d),Ar=!1;var m=t.memoizedState;o.state=m,yc(t,n,o,i),c=t.memoizedState,l!==n||m!==c||Wt.current||Ar?(typeof u=="function"&&(qh(t,s,u,n),c=t.memoizedState),(l=Ar||X0(t,s,l,n,m,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,ww(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:bs(t.type,l),o.props=d,h=t.pendingProps,m=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=ps(c):(c=Gt(s)?An:_t.current,c=Ri(t,c));var x=s.getDerivedStateFromProps;(u=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&Z0(t,o,n,c),Ar=!1,m=t.memoizedState,o.state=m,yc(t,n,o,i);var v=t.memoizedState;l!==h||m!==v||Wt.current||Ar?(typeof x=="function"&&(qh(t,s,x,n),v=t.memoizedState),(d=Ar||X0(t,s,d,n,m,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Yh(e,t,s,n,a,i)}function Yh(e,t,s,n,i,a){Ww(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&H0(t,s,!1),pr(e,t,a);n=t.stateNode,zC.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=$i(t,e.child,null,a),t.child=$i(t,null,l,a)):Pt(e,t,l,a),t.memoizedState=n.state,i&&H0(t,s,!0),t.child}function Gw(e){var t=e.stateNode;t.pendingContext?U0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&U0(e,t.context,!1),Rm(e,t.containerInfo)}function ax(e,t,s,n,i){return Oi(),Cm(i),t.flags|=256,Pt(e,t,s,n),t.child}var Qh={dehydrated:null,treeContext:null,retryLane:0};function Jh(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kw(e,t,s){var n=t.pendingProps,i=qe.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Le(qe,i&1),e===null)return Uh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=dd(o,n,0,null),e=kn(e,n,s,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Jh(s),t.memoizedState=Qh,e):Vm(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return UC(e,t,o,n,l,i,s);if(a){a=n.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=qr(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=qr(l,a):(a=kn(a,o,s,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?Jh(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~s,t.memoizedState=Qh,n}return a=e.child,e=a.sibling,n=qr(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Vm(e,t){return t=dd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ul(e,t,s,n){return n!==null&&Cm(n),$i(t,e.child,null,s),e=Vm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function UC(e,t,s,n,i,a,o){if(s)return t.flags&256?(t.flags&=-257,n=vu(Error(Q(422))),ul(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=dd({mode:"visible",children:n.children},i,0,null),a=kn(a,i,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&$i(t,e.child,null,o),t.child.memoizedState=Jh(o),t.memoizedState=Qh,a);if(!(t.mode&1))return ul(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(Q(419)),n=vu(a,n,void 0),ul(e,t,o,n)}if(l=(o&e.childLanes)!==0,Ht||l){if(n=lt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,mr(e,i),ks(n,e,i,-1))}return Wm(),n=vu(Error(Q(421))),ul(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=s4.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,es=Br(i.nextSibling),ts=t,Ue=!0,Ss=null,e!==null&&(cs[ds++]=nr,cs[ds++]=ir,cs[ds++]=Rn,nr=e.id,ir=e.overflow,Rn=t),t=Vm(t,n.children),t.flags|=4096,t)}function ox(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Hh(e.return,t,s)}function wu(e,t,s,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=i)}function Yw(e,t,s){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Pt(e,t,n.children,s),n=qe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ox(e,s,t);else if(e.tag===19)ox(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Le(qe,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(s=t.child,i=null;s!==null;)e=s.alternate,e!==null&&vc(e)===null&&(i=s),s=s.sibling;s=i,s===null?(i=t.child,t.child=null):(i=s.sibling,s.sibling=null),wu(t,!1,i,s,a);break;case"backwards":for(s=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&vc(e)===null){t.child=i;break}e=i.sibling,i.sibling=s,s=i,i=e}wu(t,!0,s,null,a);break;case"together":wu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ql(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,s=qr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=qr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function HC(e,t,s){switch(t.tag){case 3:Gw(t),Oi();break;case 5:bw(t);break;case 1:Gt(t.type)&&fc(t);break;case 4:Rm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Le(xc,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Le(qe,qe.current&1),t.flags|=128,null):s&t.child.childLanes?Kw(e,t,s):(Le(qe,qe.current&1),e=pr(e,t,s),e!==null?e.sibling:null);Le(qe,qe.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return Yw(e,t,s);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(qe,qe.current),n)break;return null;case 22:case 23:return t.lanes=0,qw(e,t,s)}return pr(e,t,s)}var Qw,Xh,Jw,Xw;Qw=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Xh=function(){};Jw=function(e,t,s,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Sn(zs.current);var a=null;switch(s){case"input":i=wh(e,i),n=wh(e,n),a=[];break;case"select":i=Ye({},i,{value:void 0}),n=Ye({},n,{value:void 0}),a=[];break;case"textarea":i=Nh(e,i),n=Nh(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=uc)}_h(s,n);var o;s=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Za.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(a||(a=[]),a.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Za.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ie("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}s&&(a=a||[]).push("style",s);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Xw=function(e,t,s,n){s!==n&&(t.flags|=4)};function ha(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var i=e.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function qC(e,t,s){var n=t.pendingProps;switch(_m(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Gt(t.type)&&hc(),vt(t),null;case 3:return n=t.stateNode,Li(),Ve(Wt),Ve(_t),$m(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(cl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ss!==null&&(of(Ss),Ss=null))),Xh(e,t),vt(t),null;case 5:Om(t);var i=Sn(ho.current);if(s=t.type,e!==null&&t.stateNode!=null)Jw(e,t,s,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Q(166));return vt(t),null}if(e=Sn(zs.current),cl(t)){n=t.stateNode,s=t.type;var a=t.memoizedProps;switch(n[Fs]=t,n[co]=a,e=(t.mode&1)!==0,s){case"dialog":Ie("cancel",n),Ie("close",n);break;case"iframe":case"object":case"embed":Ie("load",n);break;case"video":case"audio":for(i=0;i<Ta.length;i++)Ie(Ta[i],n);break;case"source":Ie("error",n);break;case"img":case"image":case"link":Ie("error",n),Ie("load",n);break;case"details":Ie("toggle",n);break;case"input":x0(n,a),Ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ie("invalid",n);break;case"textarea":y0(n,a),Ie("invalid",n)}_h(s,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&ll(n.textContent,l,e),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&ll(n.textContent,l,e),i=["children",""+l]):Za.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ie("scroll",n)}switch(s){case"input":el(n),g0(n,a,!0);break;case"textarea":el(n),v0(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=uc)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cv(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[Fs]=t,e[co]=n,Qw(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ch(s,n),s){case"dialog":Ie("cancel",e),Ie("close",e),i=n;break;case"iframe":case"object":case"embed":Ie("load",e),i=n;break;case"video":case"audio":for(i=0;i<Ta.length;i++)Ie(Ta[i],e);i=n;break;case"source":Ie("error",e),i=n;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),i=n;break;case"details":Ie("toggle",e),i=n;break;case"input":x0(e,n),i=wh(e,n),Ie("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Ye({},n,{value:void 0}),Ie("invalid",e);break;case"textarea":y0(e,n),i=Nh(e,n),Ie("invalid",e);break;default:i=n}_h(s,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Tv(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ev(e,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&eo(e,c):typeof c=="number"&&eo(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Za.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ie("scroll",e):c!=null&&dm(e,a,c,o))}switch(s){case"input":el(e),g0(e,n,!1);break;case"textarea":el(e),v0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Jr(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?ji(e,!!n.multiple,a,!1):n.defaultValue!=null&&ji(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=uc)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)Xw(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Q(166));if(s=Sn(ho.current),Sn(zs.current),cl(t)){if(n=t.stateNode,s=t.memoizedProps,n[Fs]=t,(a=n.nodeValue!==s)&&(e=ts,e!==null))switch(e.tag){case 3:ll(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ll(n.nodeValue,s,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Fs]=t,t.stateNode=n}return vt(t),null;case 13:if(Ve(qe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&es!==null&&t.mode&1&&!(t.flags&128))xw(),Oi(),t.flags|=98560,a=!1;else if(a=cl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(Q(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Q(317));a[Fs]=t}else Oi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),a=!1}else Ss!==null&&(of(Ss),Ss=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||qe.current&1?rt===0&&(rt=3):Wm())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return Li(),Xh(e,t),e===null&&oo(t.stateNode.containerInfo),vt(t),null;case 10:return Tm(t.type._context),vt(t),null;case 17:return Gt(t.type)&&hc(),vt(t),null;case 19:if(Ve(qe),a=t.memoizedState,a===null)return vt(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)ha(a,!1);else{if(rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=vc(e),o!==null){for(t.flags|=128,ha(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)a=s,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Le(qe,qe.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ze()>Mi&&(t.flags|=128,n=!0,ha(a,!1),t.lanes=4194304)}else{if(!n)if(e=vc(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),ha(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ue)return vt(t),null}else 2*Ze()-a.renderingStartTime>Mi&&s!==1073741824&&(t.flags|=128,n=!0,ha(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(s=a.last,s!==null?s.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,s=qe.current,Le(qe,n?s&1|2:s&1),t):(vt(t),null);case 22:case 23:return qm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Xt&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function WC(e,t){switch(_m(t),t.tag){case 1:return Gt(t.type)&&hc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Li(),Ve(Wt),Ve(_t),$m(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Om(t),null;case 13:if(Ve(qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));Oi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(qe),null;case 4:return Li(),null;case 10:return Tm(t.type._context),null;case 22:case 23:return qm(),null;case 24:return null;default:return null}}var hl=!1,bt=!1,GC=typeof WeakSet=="function"?WeakSet:Set,se=null;function xi(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Je(e,t,n)}else s.current=null}function Zh(e,t,s){try{s()}catch(n){Je(e,t,n)}}var lx=!1;function KC(e,t){if(Dh=lc,e=rw(),Nm(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var x;h!==s||i!==0&&h.nodeType!==3||(l=o+i),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(x=h.firstChild)!==null;)m=h,h=x;for(;;){if(h===e)break t;if(m===s&&++d===i&&(l=o),m===a&&++u===n&&(c=o),(x=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=x}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Mh={focusedElem:e,selectionRange:s},lc=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,w=v.memoizedState,p=t.stateNode,y=p.getSnapshotBeforeUpdate(t.elementType===t.type?g:bs(t.type,g),w);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(j){Je(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return v=lx,lx=!1,v}function Ia(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Zh(t,s,a)}i=i.next}while(i!==n)}}function ld(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function ef(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Zw(e){var t=e.alternate;t!==null&&(e.alternate=null,Zw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fs],delete t[co],delete t[Vh],delete t[PC],delete t[AC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function eb(e){return e.tag===5||e.tag===3||e.tag===4}function cx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||eb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tf(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=uc));else if(n!==4&&(e=e.child,e!==null))for(tf(e,t,s),e=e.sibling;e!==null;)tf(e,t,s),e=e.sibling}function sf(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(sf(e,t,s),e=e.sibling;e!==null;)sf(e,t,s),e=e.sibling}var ft=null,js=!1;function Sr(e,t,s){for(s=s.child;s!==null;)tb(e,t,s),s=s.sibling}function tb(e,t,s){if(Bs&&typeof Bs.onCommitFiberUnmount=="function")try{Bs.onCommitFiberUnmount(ed,s)}catch{}switch(s.tag){case 5:bt||xi(s,t);case 6:var n=ft,i=js;ft=null,Sr(e,t,s),ft=n,js=i,ft!==null&&(js?(e=ft,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):ft.removeChild(s.stateNode));break;case 18:ft!==null&&(js?(e=ft,s=s.stateNode,e.nodeType===8?fu(e.parentNode,s):e.nodeType===1&&fu(e,s),no(e)):fu(ft,s.stateNode));break;case 4:n=ft,i=js,ft=s.stateNode.containerInfo,js=!0,Sr(e,t,s),ft=n,js=i;break;case 0:case 11:case 14:case 15:if(!bt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Zh(s,t,o),i=i.next}while(i!==n)}Sr(e,t,s);break;case 1:if(!bt&&(xi(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Je(s,t,l)}Sr(e,t,s);break;case 21:Sr(e,t,s);break;case 22:s.mode&1?(bt=(n=bt)||s.memoizedState!==null,Sr(e,t,s),bt=n):Sr(e,t,s);break;default:Sr(e,t,s)}}function dx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new GC),t.forEach(function(n){var i=r4.bind(null,e,n);s.has(n)||(s.add(n),n.then(i,i))})}}function vs(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ft=l.stateNode,js=!1;break e;case 3:ft=l.stateNode.containerInfo,js=!0;break e;case 4:ft=l.stateNode.containerInfo,js=!0;break e}l=l.return}if(ft===null)throw Error(Q(160));tb(a,o,i),ft=null,js=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Je(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)sb(t,e),t=t.sibling}function sb(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),Ds(e),n&4){try{Ia(3,e,e.return),ld(3,e)}catch(g){Je(e,e.return,g)}try{Ia(5,e,e.return)}catch(g){Je(e,e.return,g)}}break;case 1:vs(t,e),Ds(e),n&512&&s!==null&&xi(s,s.return);break;case 5:if(vs(t,e),Ds(e),n&512&&s!==null&&xi(s,s.return),e.flags&32){var i=e.stateNode;try{eo(i,"")}catch(g){Je(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=s!==null?s.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Sv(i,a),Ch(l,o);var d=Ch(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?Tv(i,h):u==="dangerouslySetInnerHTML"?Ev(i,h):u==="children"?eo(i,h):dm(i,u,h,d)}switch(l){case"input":bh(i,a);break;case"textarea":_v(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?ji(i,!!a.multiple,x,!1):m!==!!a.multiple&&(a.defaultValue!=null?ji(i,!!a.multiple,a.defaultValue,!0):ji(i,!!a.multiple,a.multiple?[]:"",!1))}i[co]=a}catch(g){Je(e,e.return,g)}}break;case 6:if(vs(t,e),Ds(e),n&4){if(e.stateNode===null)throw Error(Q(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Je(e,e.return,g)}}break;case 3:if(vs(t,e),Ds(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{no(t.containerInfo)}catch(g){Je(e,e.return,g)}break;case 4:vs(t,e),Ds(e);break;case 13:vs(t,e),Ds(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Um=Ze())),n&4&&dx(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(bt=(d=bt)||u,vs(t,e),bt=d):vs(t,e),Ds(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(se=e,u=e.child;u!==null;){for(h=se=u;se!==null;){switch(m=se,x=m.child,m.tag){case 0:case 11:case 14:case 15:Ia(4,m,m.return);break;case 1:xi(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,s=m.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Je(n,s,g)}}break;case 5:xi(m,m.return);break;case 22:if(m.memoizedState!==null){hx(h);continue}}x!==null?(x.return=m,se=x):hx(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=kv("display",o))}catch(g){Je(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Je(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),Ds(e),n&4&&dx(e);break;case 21:break;default:vs(t,e),Ds(e)}}function Ds(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(eb(s)){var n=s;break e}s=s.return}throw Error(Q(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(eo(i,""),n.flags&=-33);var a=cx(e);sf(e,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=cx(e);tf(e,l,o);break;default:throw Error(Q(161))}}catch(c){Je(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function YC(e,t,s){se=e,rb(e)}function rb(e,t,s){for(var n=(e.mode&1)!==0;se!==null;){var i=se,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||hl;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||bt;l=hl;var d=bt;if(hl=o,(bt=c)&&!d)for(se=i;se!==null;)o=se,c=o.child,o.tag===22&&o.memoizedState!==null?fx(i):c!==null?(c.return=o,se=c):fx(i);for(;a!==null;)se=a,rb(a),a=a.sibling;se=i,hl=l,bt=d}ux(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,se=a):ux(e)}}function ux(e){for(;se!==null;){var t=se;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bt||ld(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!bt)if(s===null)n.componentDidMount();else{var i=t.elementType===t.type?s.memoizedProps:bs(t.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Y0(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Y0(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&no(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}bt||t.flags&512&&ef(t)}catch(m){Je(t,t.return,m)}}if(t===e){se=null;break}if(s=t.sibling,s!==null){s.return=t.return,se=s;break}se=t.return}}function hx(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var s=t.sibling;if(s!==null){s.return=t.return,se=s;break}se=t.return}}function fx(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{ld(4,t)}catch(c){Je(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){Je(t,i,c)}}var a=t.return;try{ef(t)}catch(c){Je(t,a,c)}break;case 5:var o=t.return;try{ef(t)}catch(c){Je(t,o,c)}}}catch(c){Je(t,t.return,c)}if(t===e){se=null;break}var l=t.sibling;if(l!==null){l.return=t.return,se=l;break}se=t.return}}var QC=Math.ceil,jc=br.ReactCurrentDispatcher,Bm=br.ReactCurrentOwner,ms=br.ReactCurrentBatchConfig,Ce=0,lt=null,tt=null,pt=0,Xt=0,gi=nn(0),rt=0,xo=null,$n=0,cd=0,zm=0,Fa=null,zt=null,Um=0,Mi=1/0,Js=null,Nc=!1,rf=null,Ur=null,fl=!1,Dr=null,Sc=0,Va=0,nf=null,Wl=-1,Gl=0;function Ot(){return Ce&6?Ze():Wl!==-1?Wl:Wl=Ze()}function Hr(e){return e.mode&1?Ce&2&&pt!==0?pt&-pt:OC.transition!==null?(Gl===0&&(Gl=Bv()),Gl):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Kv(e.type)),e):1}function ks(e,t,s,n){if(50<Va)throw Va=0,nf=null,Error(Q(185));Oo(e,s,n),(!(Ce&2)||e!==lt)&&(e===lt&&(!(Ce&2)&&(cd|=s),rt===4&&$r(e,pt)),Kt(e,n),s===1&&Ce===0&&!(t.mode&1)&&(Mi=Ze()+500,id&&an()))}function Kt(e,t){var s=e.callbackNode;O_(e,t);var n=oc(e,e===lt?pt:0);if(n===0)s!==null&&j0(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&j0(s),t===1)e.tag===0?RC(mx.bind(null,e)):fw(mx.bind(null,e)),kC(function(){!(Ce&6)&&an()}),s=null;else{switch(zv(n)){case 1:s=pm;break;case 4:s=Fv;break;case 16:s=ac;break;case 536870912:s=Vv;break;default:s=ac}s=ub(s,nb.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function nb(e,t){if(Wl=-1,Gl=0,Ce&6)throw Error(Q(327));var s=e.callbackNode;if(Ei()&&e.callbackNode!==s)return null;var n=oc(e,e===lt?pt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=_c(e,n);else{t=n;var i=Ce;Ce|=2;var a=ab();(lt!==e||pt!==t)&&(Js=null,Mi=Ze()+500,En(e,t));do try{ZC();break}catch(l){ib(e,l)}while(1);km(),jc.current=a,Ce=i,tt!==null?t=0:(lt=null,pt=0,t=rt)}if(t!==0){if(t===2&&(i=Ah(e),i!==0&&(n=i,t=af(e,i))),t===1)throw s=xo,En(e,0),$r(e,n),Kt(e,Ze()),s;if(t===6)$r(e,n);else{if(i=e.current.alternate,!(n&30)&&!JC(i)&&(t=_c(e,n),t===2&&(a=Ah(e),a!==0&&(n=a,t=af(e,a))),t===1))throw s=xo,En(e,0),$r(e,n),Kt(e,Ze()),s;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Q(345));case 2:pn(e,zt,Js);break;case 3:if($r(e,n),(n&130023424)===n&&(t=Um+500-Ze(),10<t)){if(oc(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ot(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Fh(pn.bind(null,e,zt,Js),t);break}pn(e,zt,Js);break;case 4:if($r(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-Es(n);a=1<<o,o=t[o],o>i&&(i=o),n&=~a}if(n=i,n=Ze()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*QC(n/1960))-n,10<n){e.timeoutHandle=Fh(pn.bind(null,e,zt,Js),n);break}pn(e,zt,Js);break;case 5:pn(e,zt,Js);break;default:throw Error(Q(329))}}}return Kt(e,Ze()),e.callbackNode===s?nb.bind(null,e):null}function af(e,t){var s=Fa;return e.current.memoizedState.isDehydrated&&(En(e,t).flags|=256),e=_c(e,t),e!==2&&(t=zt,zt=s,t!==null&&of(t)),e}function of(e){zt===null?zt=e:zt.push.apply(zt,e)}function JC(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],a=i.getSnapshot;i=i.value;try{if(!Ps(a(),i))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $r(e,t){for(t&=~zm,t&=~cd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Es(t),n=1<<s;e[s]=-1,t&=~n}}function mx(e){if(Ce&6)throw Error(Q(327));Ei();var t=oc(e,0);if(!(t&1))return Kt(e,Ze()),null;var s=_c(e,t);if(e.tag!==0&&s===2){var n=Ah(e);n!==0&&(t=n,s=af(e,n))}if(s===1)throw s=xo,En(e,0),$r(e,t),Kt(e,Ze()),s;if(s===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pn(e,zt,Js),Kt(e,Ze()),null}function Hm(e,t){var s=Ce;Ce|=1;try{return e(t)}finally{Ce=s,Ce===0&&(Mi=Ze()+500,id&&an())}}function Ln(e){Dr!==null&&Dr.tag===0&&!(Ce&6)&&Ei();var t=Ce;Ce|=1;var s=ms.transition,n=Te;try{if(ms.transition=null,Te=1,e)return e()}finally{Te=n,ms.transition=s,Ce=t,!(Ce&6)&&an()}}function qm(){Xt=gi.current,Ve(gi)}function En(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,EC(s)),tt!==null)for(s=tt.return;s!==null;){var n=s;switch(_m(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&hc();break;case 3:Li(),Ve(Wt),Ve(_t),$m();break;case 5:Om(n);break;case 4:Li();break;case 13:Ve(qe);break;case 19:Ve(qe);break;case 10:Tm(n.type._context);break;case 22:case 23:qm()}s=s.return}if(lt=e,tt=e=qr(e.current,null),pt=Xt=t,rt=0,xo=null,zm=cd=$n=0,zt=Fa=null,Nn!==null){for(t=0;t<Nn.length;t++)if(s=Nn[t],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,a=s.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}s.pending=n}Nn=null}return e}function ib(e,t){do{var s=tt;try{if(km(),Ul.current=bc,wc){for(var n=Ge.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}wc=!1}if(On=0,ot=st=Ge=null,Ma=!1,fo=0,Bm.current=null,s===null||s.return===null){rt=1,xo=t,tt=null;break}e:{var a=e,o=s.return,l=s,c=t;if(t=pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=tx(o);if(x!==null){x.flags&=-257,sx(x,o,l,a,t),x.mode&1&&ex(a,d,t),t=x,c=d;var v=t.updateQueue;if(v===null){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}else{if(!(t&1)){ex(a,d,t),Wm();break e}c=Error(Q(426))}}else if(Ue&&l.mode&1){var w=tx(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),sx(w,o,l,a,t),Cm(Di(c,l));break e}}a=c=Di(c,l),rt!==4&&(rt=2),Fa===null?Fa=[a]:Fa.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var p=zw(a,c,t);K0(a,p);break e;case 1:l=c;var y=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ur===null||!Ur.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=Uw(a,l,t);K0(a,j);break e}}a=a.return}while(a!==null)}lb(s)}catch(S){t=S,tt===s&&s!==null&&(tt=s=s.return);continue}break}while(1)}function ab(){var e=jc.current;return jc.current=bc,e===null?bc:e}function Wm(){(rt===0||rt===3||rt===2)&&(rt=4),lt===null||!($n&268435455)&&!(cd&268435455)||$r(lt,pt)}function _c(e,t){var s=Ce;Ce|=2;var n=ab();(lt!==e||pt!==t)&&(Js=null,En(e,t));do try{XC();break}catch(i){ib(e,i)}while(1);if(km(),Ce=s,jc.current=n,tt!==null)throw Error(Q(261));return lt=null,pt=0,rt}function XC(){for(;tt!==null;)ob(tt)}function ZC(){for(;tt!==null&&!S_();)ob(tt)}function ob(e){var t=db(e.alternate,e,Xt);e.memoizedProps=e.pendingProps,t===null?lb(e):tt=t,Bm.current=null}function lb(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=WC(s,t),s!==null){s.flags&=32767,tt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,tt=null;return}}else if(s=qC(s,t,Xt),s!==null){tt=s;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);rt===0&&(rt=5)}function pn(e,t,s){var n=Te,i=ms.transition;try{ms.transition=null,Te=1,e4(e,t,s,n)}finally{ms.transition=i,Te=n}return null}function e4(e,t,s,n){do Ei();while(Dr!==null);if(Ce&6)throw Error(Q(327));s=e.finishedWork;var i=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var a=s.lanes|s.childLanes;if($_(e,a),e===lt&&(tt=lt=null,pt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||fl||(fl=!0,ub(ac,function(){return Ei(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=ms.transition,ms.transition=null;var o=Te;Te=1;var l=Ce;Ce|=4,Bm.current=null,KC(e,s),sb(s,e),wC(Mh),lc=!!Dh,Mh=Dh=null,e.current=s,YC(s),__(),Ce=l,Te=o,ms.transition=a}else e.current=s;if(fl&&(fl=!1,Dr=e,Sc=i),a=e.pendingLanes,a===0&&(Ur=null),k_(s.stateNode),Kt(e,Ze()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)i=t[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(Nc)throw Nc=!1,e=rf,rf=null,e;return Sc&1&&e.tag!==0&&Ei(),a=e.pendingLanes,a&1?e===nf?Va++:(Va=0,nf=e):Va=0,an(),null}function Ei(){if(Dr!==null){var e=zv(Sc),t=ms.transition,s=Te;try{if(ms.transition=null,Te=16>e?16:e,Dr===null)var n=!1;else{if(e=Dr,Dr=null,Sc=0,Ce&6)throw Error(Q(331));var i=Ce;for(Ce|=4,se=e.current;se!==null;){var a=se,o=a.child;if(se.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(se=d;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:Ia(8,u,a)}var h=u.child;if(h!==null)h.return=u,se=h;else for(;se!==null;){u=se;var m=u.sibling,x=u.return;if(Zw(u),u===d){se=null;break}if(m!==null){m.return=x,se=m;break}se=x}}}var v=a.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}se=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,se=o;else e:for(;se!==null;){if(a=se,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ia(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,se=p;break e}se=a.return}}var y=e.current;for(se=y;se!==null;){o=se;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,se=b;else e:for(o=y;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ld(9,l)}}catch(S){Je(l,l.return,S)}if(l===o){se=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,se=j;break e}se=l.return}}if(Ce=i,an(),Bs&&typeof Bs.onPostCommitFiberRoot=="function")try{Bs.onPostCommitFiberRoot(ed,e)}catch{}n=!0}return n}finally{Te=s,ms.transition=t}}return!1}function px(e,t,s){t=Di(s,t),t=zw(e,t,1),e=zr(e,t,1),t=Ot(),e!==null&&(Oo(e,1,t),Kt(e,t))}function Je(e,t,s){if(e.tag===3)px(e,e,s);else for(;t!==null;){if(t.tag===3){px(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ur===null||!Ur.has(n))){e=Di(s,e),e=Uw(t,e,1),t=zr(t,e,1),e=Ot(),t!==null&&(Oo(t,1,e),Kt(t,e));break}}t=t.return}}function t4(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=Ot(),e.pingedLanes|=e.suspendedLanes&s,lt===e&&(pt&s)===s&&(rt===4||rt===3&&(pt&130023424)===pt&&500>Ze()-Um?En(e,0):zm|=s),Kt(e,t)}function cb(e,t){t===0&&(e.mode&1?(t=rl,rl<<=1,!(rl&130023424)&&(rl=4194304)):t=1);var s=Ot();e=mr(e,t),e!==null&&(Oo(e,t,s),Kt(e,s))}function s4(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),cb(e,s)}function r4(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(t),cb(e,s)}var db;db=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wt.current)Ht=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Ht=!1,HC(e,t,s);Ht=!!(e.flags&131072)}else Ht=!1,Ue&&t.flags&1048576&&mw(t,pc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ql(e,t),e=t.pendingProps;var i=Ri(t,_t.current);Ci(t,s),i=Dm(null,t,n,e,i,s);var a=Mm();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gt(n)?(a=!0,fc(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Am(t),i.updater=od,t.stateNode=i,i._reactInternals=t,Wh(t,n,e,s),t=Yh(null,t,n,!0,a,s)):(t.tag=0,Ue&&a&&Sm(t),Pt(null,t,i,s),t=t.child),t;case 16:n=t.elementType;e:{switch(ql(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=i4(n),e=bs(n,e),i){case 0:t=Kh(null,t,n,e,s);break e;case 1:t=ix(null,t,n,e,s);break e;case 11:t=rx(null,t,n,e,s);break e;case 14:t=nx(null,t,n,bs(n.type,e),s);break e}throw Error(Q(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:bs(n,i),Kh(e,t,n,i,s);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:bs(n,i),ix(e,t,n,i,s);case 3:e:{if(Gw(t),e===null)throw Error(Q(387));n=t.pendingProps,a=t.memoizedState,i=a.element,ww(e,t),yc(t,n,null,s);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Di(Error(Q(423)),t),t=ax(e,t,n,s,i);break e}else if(n!==i){i=Di(Error(Q(424)),t),t=ax(e,t,n,s,i);break e}else for(es=Br(t.stateNode.containerInfo.firstChild),ts=t,Ue=!0,Ss=null,s=yw(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Oi(),n===i){t=pr(e,t,s);break e}Pt(e,t,n,s)}t=t.child}return t;case 5:return bw(t),e===null&&Uh(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,Ih(n,i)?o=null:a!==null&&Ih(n,a)&&(t.flags|=32),Ww(e,t),Pt(e,t,o,s),t.child;case 6:return e===null&&Uh(t),null;case 13:return Kw(e,t,s);case 4:return Rm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=$i(t,null,n,s):Pt(e,t,n,s),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:bs(n,i),rx(e,t,n,i,s);case 7:return Pt(e,t,t.pendingProps,s),t.child;case 8:return Pt(e,t,t.pendingProps.children,s),t.child;case 12:return Pt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Le(xc,n._currentValue),n._currentValue=o,a!==null)if(Ps(a.value,o)){if(a.children===i.children&&!Wt.current){t=pr(e,t,s);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=lr(-1,s&-s),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),Hh(a.return,s,t),l.lanes|=s;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Q(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Hh(o,s,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Pt(e,t,i.children,s),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ci(t,s),i=ps(i),n=n(i),t.flags|=1,Pt(e,t,n,s),t.child;case 14:return n=t.type,i=bs(n,t.pendingProps),i=bs(n.type,i),nx(e,t,n,i,s);case 15:return Hw(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:bs(n,i),ql(e,t),t.tag=1,Gt(n)?(e=!0,fc(t)):e=!1,Ci(t,s),Bw(t,n,i),Wh(t,n,i,s),Yh(null,t,n,!0,e,s);case 19:return Yw(e,t,s);case 22:return qw(e,t,s)}throw Error(Q(156,t.tag))};function ub(e,t){return Iv(e,t)}function n4(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(e,t,s,n){return new n4(e,t,s,n)}function Gm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function i4(e){if(typeof e=="function")return Gm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hm)return 11;if(e===fm)return 14}return 2}function qr(e,t){var s=e.alternate;return s===null?(s=fs(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Kl(e,t,s,n,i,a){var o=2;if(n=e,typeof e=="function")Gm(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case oi:return kn(s.children,i,a,t);case um:o=8,i|=8;break;case xh:return e=fs(12,s,t,i|2),e.elementType=xh,e.lanes=a,e;case gh:return e=fs(13,s,t,i),e.elementType=gh,e.lanes=a,e;case yh:return e=fs(19,s,t,i),e.elementType=yh,e.lanes=a,e;case bv:return dd(s,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vv:o=10;break e;case wv:o=9;break e;case hm:o=11;break e;case fm:o=14;break e;case Pr:o=16,n=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=fs(o,s,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function kn(e,t,s,n){return e=fs(7,e,n,t),e.lanes=s,e}function dd(e,t,s,n){return e=fs(22,e,n,t),e.elementType=bv,e.lanes=s,e.stateNode={isHidden:!1},e}function bu(e,t,s){return e=fs(6,e,null,t),e.lanes=s,e}function ju(e,t,s){return t=fs(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function a4(e,t,s,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=su(0),this.expirationTimes=su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Km(e,t,s,n,i,a,o,l,c){return e=new a4(e,t,s,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=fs(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Am(a),e}function o4(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ai,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function hb(e){if(!e)return Xr;e=e._reactInternals;e:{if(zn(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var s=e.type;if(Gt(s))return hw(e,s,t)}return t}function fb(e,t,s,n,i,a,o,l,c){return e=Km(s,n,!0,e,i,a,o,l,c),e.context=hb(null),s=e.current,n=Ot(),i=Hr(s),a=lr(n,i),a.callback=t??null,zr(s,a,i),e.current.lanes=i,Oo(e,i,n),Kt(e,n),e}function ud(e,t,s,n){var i=t.current,a=Ot(),o=Hr(i);return s=hb(s),t.context===null?t.context=s:t.pendingContext=s,t=lr(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=zr(i,t,o),e!==null&&(ks(e,i,o,a),zl(e,i,o)),o}function Cc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Ym(e,t){xx(e,t),(e=e.alternate)&&xx(e,t)}function l4(){return null}var mb=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qm(e){this._internalRoot=e}hd.prototype.render=Qm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));ud(e,t,null,null)};hd.prototype.unmount=Qm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ln(function(){ud(null,e,null,null)}),t[fr]=null}};function hd(e){this._internalRoot=e}hd.prototype.unstable_scheduleHydration=function(e){if(e){var t=qv();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Or.length&&t!==0&&t<Or[s].priority;s++);Or.splice(s,0,e),s===0&&Gv(e)}};function Jm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gx(){}function c4(e,t,s,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=Cc(o);a.call(d)}}var o=fb(t,n,e,0,null,!1,!1,"",gx);return e._reactRootContainer=o,e[fr]=o.current,oo(e.nodeType===8?e.parentNode:e),Ln(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var d=Cc(c);l.call(d)}}var c=Km(e,0,!1,null,null,!1,!1,"",gx);return e._reactRootContainer=c,e[fr]=c.current,oo(e.nodeType===8?e.parentNode:e),Ln(function(){ud(t,c,s,n)}),c}function md(e,t,s,n,i){var a=s._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Cc(o);l.call(c)}}ud(t,o,e,i)}else o=c4(s,t,e,i,n);return Cc(o)}Uv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ka(t.pendingLanes);s!==0&&(xm(t,s|1),Kt(t,Ze()),!(Ce&6)&&(Mi=Ze()+500,an()))}break;case 13:Ln(function(){var n=mr(e,1);if(n!==null){var i=Ot();ks(n,e,1,i)}}),Ym(e,1)}};gm=function(e){if(e.tag===13){var t=mr(e,134217728);if(t!==null){var s=Ot();ks(t,e,134217728,s)}Ym(e,134217728)}};Hv=function(e){if(e.tag===13){var t=Hr(e),s=mr(e,t);if(s!==null){var n=Ot();ks(s,e,t,n)}Ym(e,t)}};qv=function(){return Te};Wv=function(e,t){var s=Te;try{return Te=e,t()}finally{Te=s}};kh=function(e,t,s){switch(t){case"input":if(bh(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var i=nd(n);if(!i)throw Error(Q(90));Nv(n),bh(n,i)}}}break;case"textarea":_v(e,s);break;case"select":t=s.value,t!=null&&ji(e,!!s.multiple,t,!1)}};Rv=Hm;Ov=Ln;var d4={usingClientEntryPoint:!1,Events:[Lo,ui,nd,Pv,Av,Hm]},fa={findFiberByHostInstance:jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u4={bundleType:fa.bundleType,version:fa.version,rendererPackageName:fa.rendererPackageName,rendererConfig:fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:br.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dv(e),e===null?null:e.stateNode},findFiberByHostInstance:fa.findFiberByHostInstance||l4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{ed=ml.inject(u4),Bs=ml}catch{}}is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d4;is.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jm(t))throw Error(Q(200));return o4(e,t,null,s)};is.createRoot=function(e,t){if(!Jm(e))throw Error(Q(299));var s=!1,n="",i=mb;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Km(e,1,!1,null,null,s,!1,n,i),e[fr]=t.current,oo(e.nodeType===8?e.parentNode:e),new Qm(t)};is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=Dv(t),e=e===null?null:e.stateNode,e};is.flushSync=function(e){return Ln(e)};is.hydrate=function(e,t,s){if(!fd(t))throw Error(Q(200));return md(null,e,t,!0,s)};is.hydrateRoot=function(e,t,s){if(!Jm(e))throw Error(Q(405));var n=s!=null&&s.hydratedSources||null,i=!1,a="",o=mb;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=fb(t,null,e,1,s??null,i,!1,a,o),e[fr]=t.current,oo(e),n)for(e=0;e<n.length;e++)s=n[e],i=s._getVersion,i=i(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,i]:t.mutableSourceEagerHydrationData.push(s,i);return new hd(t)};is.render=function(e,t,s){if(!fd(t))throw Error(Q(200));return md(null,e,t,!1,s)};is.unmountComponentAtNode=function(e){if(!fd(e))throw Error(Q(40));return e._reactRootContainer?(Ln(function(){md(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0):!1};is.unstable_batchedUpdates=Hm;is.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!fd(s))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return md(e,t,s,!1,n)};is.version="18.3.1-next-f1338f8080-20240426";function pb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pb)}catch(e){console.error(e)}}pb(),pv.exports=is;var on=pv.exports;const xb=Vn(on);var yx=on;mh.createRoot=yx.createRoot,mh.hydrateRoot=yx.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function go(){return go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},go.apply(this,arguments)}var Mr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mr||(Mr={}));const vx="popstate";function h4(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:o,hash:l}=n.location;return lf("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:Ec(i)}return m4(t,s,null,e)}function Ke(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function f4(){return Math.random().toString(36).substr(2,8)}function wx(e,t){return{usr:e.state,key:e.key,idx:t}}function lf(e,t,s,n){return s===void 0&&(s=null),go({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ji(t):t,{state:s,key:t&&t.key||n||f4()})}function Ec(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ji(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function m4(e,t,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l=Mr.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(go({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Mr.Pop;let w=u(),p=w==null?null:w-d;d=w,c&&c({action:l,location:g.location,delta:p})}function m(w,p){l=Mr.Push;let y=lf(g.location,w,p);s&&s(y,w),d=u()+1;let b=wx(y,d),j=g.createHref(y);try{o.pushState(b,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(j)}a&&c&&c({action:l,location:g.location,delta:1})}function x(w,p){l=Mr.Replace;let y=lf(g.location,w,p);s&&s(y,w),d=u();let b=wx(y,d),j=g.createHref(y);o.replaceState(b,"",j),a&&c&&c({action:l,location:g.location,delta:0})}function v(w){let p=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof w=="string"?w:Ec(w);return y=y.replace(/ $/,"%20"),Ke(p,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,p)}let g={get action(){return l},get location(){return e(i,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(vx,h),c=w,()=>{i.removeEventListener(vx,h),c=null}},createHref(w){return t(i,w)},createURL:v,encodeLocation(w){let p=v(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:x,go(w){return o.go(w)}};return g}var bx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(bx||(bx={}));function p4(e,t,s){return s===void 0&&(s="/"),x4(e,t,s,!1)}function x4(e,t,s,n){let i=typeof t=="string"?Ji(t):t,a=Ii(i.pathname||"/",s);if(a==null)return null;let o=yb(e);g4(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=k4(a);l=C4(o[c],d,n)}return l}function yb(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Wr([n,c.relativePath]),u=s.concat(c);a.children&&a.children.length>0&&(Ke(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),yb(a.children,t,u,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:S4(d,a.index),routesMeta:u})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of vb(a.path))i(a,o,c)}),t}function vb(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=vb(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function g4(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:_4(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const y4=/^:[\w-]+$/,v4=3,w4=2,b4=1,j4=10,N4=-2,jx=e=>e==="*";function S4(e,t){let s=e.split("/"),n=s.length;return s.some(jx)&&(n+=N4),t&&(n+=w4),s.filter(i=>!jx(i)).reduce((i,a)=>i+(y4.test(a)?v4:a===""?b4:j4),n)}function _4(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function C4(e,t,s){s===void 0&&(s=!1);let{routesMeta:n}=e,i={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=a==="/"?t:t.slice(a.length)||"/",h=kc({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&s&&!n[n.length-1].route.index&&(h=kc({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Wr([a,h.pathname]),pathnameBase:R4(Wr([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=Wr([a,h.pathnameBase]))}return o}function kc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=E4(e.path,e.caseSensitive,e.end),i=t.match(s);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:m,isOptional:x}=u;if(m==="*"){let g=l[h]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[h];return x&&!v?d[m]=void 0:d[m]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function E4(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),gb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function k4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ii(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function T4(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:i=""}=typeof e=="string"?Ji(e):e;return{pathname:s?s.startsWith("/")?s:P4(s,t):t,search:O4(n),hash:$4(i)}}function P4(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Nu(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function A4(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Xm(e,t){let s=A4(e);return t?s.map((n,i)=>i===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Zm(e,t,s,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Ji(e):(i=go({},e),Ke(!i.pathname||!i.pathname.includes("?"),Nu("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),Nu("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),Nu("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=s;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=T4(i,l),d=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Wr=e=>e.join("/").replace(/\/\/+/g,"/"),R4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function L4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const wb=["post","put","patch","delete"];new Set(wb);const D4=["get",...wb];new Set(D4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},yo.apply(this,arguments)}const pd=f.createContext(null),bb=f.createContext(null),jr=f.createContext(null),xd=f.createContext(null),Nr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),jb=f.createContext(null);function M4(e,t){let{relative:s}=t===void 0?{}:t;Xi()||Ke(!1);let{basename:n,navigator:i}=f.useContext(jr),{hash:a,pathname:o,search:l}=gd(e,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:Wr([n,o])),i.createHref({pathname:c,search:l,hash:a})}function Xi(){return f.useContext(xd)!=null}function ln(){return Xi()||Ke(!1),f.useContext(xd).location}function Nb(e){f.useContext(jr).static||f.useLayoutEffect(e)}function Mo(){let{isDataRoute:e}=f.useContext(Nr);return e?X4():I4()}function I4(){Xi()||Ke(!1);let e=f.useContext(pd),{basename:t,future:s,navigator:n}=f.useContext(jr),{matches:i}=f.useContext(Nr),{pathname:a}=ln(),o=JSON.stringify(Xm(i,s.v7_relativeSplatPath)),l=f.useRef(!1);return Nb(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=Zm(d,JSON.parse(o),a,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Wr([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,o,a,e])}const F4=f.createContext(null);function V4(e){let t=f.useContext(Nr).outlet;return t&&f.createElement(F4.Provider,{value:e},t)}function gd(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=f.useContext(jr),{matches:i}=f.useContext(Nr),{pathname:a}=ln(),o=JSON.stringify(Xm(i,n.v7_relativeSplatPath));return f.useMemo(()=>Zm(e,JSON.parse(o),a,s==="path"),[e,o,a,s])}function B4(e,t){return z4(e,t)}function z4(e,t,s,n){Xi()||Ke(!1);let{navigator:i}=f.useContext(jr),{matches:a}=f.useContext(Nr),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=ln(),u;if(t){var h;let w=typeof t=="string"?Ji(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||Ke(!1),u=w}else u=d;let m=u.pathname||"/",x=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=p4(e,{pathname:x}),g=G4(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Wr([c,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Wr([c,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,s,n);return t&&g?f.createElement(xd.Provider,{value:{location:yo({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Mr.Pop}},g):g}function U4(){let e=J4(),t=L4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),s?f.createElement("pre",{style:i},s):null,a)}const H4=f.createElement(U4,null);class q4 extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?f.createElement(Nr.Provider,{value:this.props.routeContext},f.createElement(jb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function W4(e){let{routeContext:t,match:s,children:n}=e,i=f.useContext(pd);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),f.createElement(Nr.Provider,{value:t},n)}function G4(e,t,s,n){var i;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var a;if(!s)return null;if(s.errors)e=s.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(i=s)==null?void 0:i.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Ke(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:x}=s,v=h.route.loader&&m[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||v){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,m)=>{let x,v=!1,g=null,w=null;s&&(x=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||H4,c&&(d<0&&m===0?(Z4("route-fallback",!1),v=!0,w=null):d===m&&(v=!0,w=h.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,m+1)),y=()=>{let b;return x?b=g:v?b=w:h.route.Component?b=f.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,f.createElement(W4,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:s!=null},children:b})};return s&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(q4,{location:s.location,revalidation:s.revalidation,component:g,error:x,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}var Sb=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Sb||{}),Tc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Tc||{});function K4(e){let t=f.useContext(pd);return t||Ke(!1),t}function Y4(e){let t=f.useContext(bb);return t||Ke(!1),t}function Q4(e){let t=f.useContext(Nr);return t||Ke(!1),t}function _b(e){let t=Q4(),s=t.matches[t.matches.length-1];return s.route.id||Ke(!1),s.route.id}function J4(){var e;let t=f.useContext(jb),s=Y4(Tc.UseRouteError),n=_b(Tc.UseRouteError);return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function X4(){let{router:e}=K4(Sb.UseNavigateStable),t=_b(Tc.UseNavigateStable),s=f.useRef(!1);return Nb(()=>{s.current=!0}),f.useCallback(function(i,a){a===void 0&&(a={}),s.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,yo({fromRouteId:t},a)))},[e,t])}const Nx={};function Z4(e,t,s){!t&&!Nx[e]&&(Nx[e]=!0)}function eE(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function cf(e){let{to:t,replace:s,state:n,relative:i}=e;Xi()||Ke(!1);let{future:a,static:o}=f.useContext(jr),{matches:l}=f.useContext(Nr),{pathname:c}=ln(),d=Mo(),u=Zm(t,Xm(l,a.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(h),{replace:s,state:n,relative:i}),[d,h,i,s,n]),null}function Cb(e){return V4(e.context)}function Se(e){Ke(!1)}function tE(e){let{basename:t="/",children:s=null,location:n,navigationType:i=Mr.Pop,navigator:a,static:o=!1,future:l}=e;Xi()&&Ke(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:a,static:o,future:yo({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=Ji(n));let{pathname:u="/",search:h="",hash:m="",state:x=null,key:v="default"}=n,g=f.useMemo(()=>{let w=Ii(u,c);return w==null?null:{location:{pathname:w,search:h,hash:m,state:x,key:v},navigationType:i}},[c,u,h,m,x,v,i]);return g==null?null:f.createElement(jr.Provider,{value:d},f.createElement(xd.Provider,{children:s,value:g}))}function sE(e){let{children:t,location:s}=e;return B4(df(t),s)}new Promise(()=>{});function df(e,t){t===void 0&&(t=[]);let s=[];return f.Children.forEach(e,(n,i)=>{if(!f.isValidElement(n))return;let a=[...t,i];if(n.type===f.Fragment){s.push.apply(s,df(n.props.children,a));return}n.type!==Se&&Ke(!1),!n.props.index||!n.props.children||Ke(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=df(n.props.children,a)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pc(){return Pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Pc.apply(this,arguments)}function Eb(e,t){if(e==null)return{};var s={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(s[i]=e[i]);return s}function rE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nE(e,t){return e.button===0&&(!t||t==="_self")&&!rE(e)}const iE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],aE=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],oE="6";try{window.__reactRouterVersion=oE}catch{}const lE=f.createContext({isTransitioning:!1}),cE="startTransition",Sx=Zc[cE];function dE(e){let{basename:t,children:s,future:n,window:i}=e,a=f.useRef();a.current==null&&(a.current=h4({window:i,v5Compat:!0}));let o=a.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=f.useCallback(h=>{d&&Sx?Sx(()=>c(h)):c(h)},[c,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.useEffect(()=>eE(n),[n]),f.createElement(tE,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const uE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Io=f.forwardRef(function(t,s){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,m=Eb(t,iE),{basename:x}=f.useContext(jr),v,g=!1;if(typeof d=="string"&&hE.test(d)&&(v=d,uE))try{let b=new URL(window.location.href),j=d.startsWith("//")?new URL(b.protocol+d):new URL(d),S=Ii(j.pathname,x);j.origin===b.origin&&S!=null?d=S+j.search+j.hash:g=!0}catch{}let w=M4(d,{relative:i}),p=pE(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:i,viewTransition:h});function y(b){n&&n(b),b.defaultPrevented||p(b)}return f.createElement("a",Pc({},m,{href:v||w,onClick:g||a?n:y,ref:s,target:c}))}),fE=f.forwardRef(function(t,s){let{"aria-current":n="page",caseSensitive:i=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:d,children:u}=t,h=Eb(t,aE),m=gd(c,{relative:h.relative}),x=ln(),v=f.useContext(bb),{navigator:g,basename:w}=f.useContext(jr),p=v!=null&&xE(m)&&d===!0,y=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,b=x.pathname,j=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(b=b.toLowerCase(),j=j?j.toLowerCase():null,y=y.toLowerCase()),j&&w&&(j=Ii(j,w)||j);const S=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let R=b===y||!o&&b.startsWith(y)&&b.charAt(S)==="/",E=j!=null&&(j===y||!o&&j.startsWith(y)&&j.charAt(y.length)==="/"),_={isActive:R,isPending:E,isTransitioning:p},A=R?n:void 0,P;typeof a=="function"?P=a(_):P=[a,R?"active":null,E?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(_):l;return f.createElement(Io,Pc({},h,{"aria-current":A,className:P,ref:s,style:O,to:c,viewTransition:d}),typeof u=="function"?u(_):u)});var uf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(uf||(uf={}));var _x;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_x||(_x={}));function mE(e){let t=f.useContext(pd);return t||Ke(!1),t}function pE(e,t){let{target:s,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,c=Mo(),d=ln(),u=gd(e,{relative:o});return f.useCallback(h=>{if(nE(h,s)){h.preventDefault();let m=n!==void 0?n:Ec(d)===Ec(u);c(e,{replace:m,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,c,u,n,i,s,e,a,o,l])}function xE(e,t){t===void 0&&(t={});let s=f.useContext(lE);s==null&&Ke(!1);let{basename:n}=mE(uf.useViewTransitionState),i=gd(e,{relative:t.relative});if(!s.isTransitioning)return!1;let a=Ii(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=Ii(s.nextLocation.pathname,n)||s.nextLocation.pathname;return kc(i.pathname,o)!=null||kc(i.pathname,a)!=null}var kb={exports:{}},gE="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yE=gE,vE=yE;function Tb(){}function Pb(){}Pb.resetWarningCache=Tb;var wE=function(){function e(n,i,a,o,l,c){if(c!==vE){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Pb,resetWarningCache:Tb};return s.PropTypes=s,s};kb.exports=wE();var bE=kb.exports;const Be=Vn(bE);function jE(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var Ab=f,NE=jE(Ab);function Cx(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function SE(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var _E=!!(typeof window<"u"&&window.document&&window.document.createElement);function CE(e,t,s){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof s<"u"&&typeof s!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(i){return i.displayName||i.name||"Component"}return function(a){if(typeof a!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],l;function c(){l=e(o.map(function(u){return u.props})),d.canUseDOM?t(l):s&&(l=s(l))}var d=function(u){SE(h,u);function h(){return u.apply(this,arguments)||this}h.peek=function(){return l},h.rewind=function(){if(h.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var v=l;return l=void 0,o=[],v};var m=h.prototype;return m.UNSAFE_componentWillMount=function(){o.push(this),c()},m.componentDidUpdate=function(){c()},m.componentWillUnmount=function(){var v=o.indexOf(this);o.splice(v,1),c()},m.render=function(){return NE.createElement(a,this.props)},h}(Ab.PureComponent);return Cx(d,"displayName","SideEffect("+n(a)+")"),Cx(d,"canUseDOM",_E),d}}var EE=CE;const kE=Vn(EE);var TE=typeof Element<"u",PE=typeof Map=="function",AE=typeof Set=="function",RE=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Yl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,n,i;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(n=s;n--!==0;)if(!Yl(e[n],t[n]))return!1;return!0}var a;if(PE&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;for(a=e.entries();!(n=a.next()).done;)if(!Yl(n.value[1],t.get(n.value[0])))return!1;return!0}if(AE&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(RE&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(s=e.length,s!=t.length)return!1;for(n=s;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(TE&&e instanceof Element)return!1;for(n=s;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!Yl(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var OE=function(t,s){try{return Yl(t,s)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const $E=Vn(OE);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ex=Object.getOwnPropertySymbols,LE=Object.prototype.hasOwnProperty,DE=Object.prototype.propertyIsEnumerable;function ME(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function IE(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},s=0;s<10;s++)t["_"+String.fromCharCode(s)]=s;var n=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var FE=IE()?Object.assign:function(e,t){for(var s,n=ME(e),i,a=1;a<arguments.length;a++){s=Object(arguments[a]);for(var o in s)LE.call(s,o)&&(n[o]=s[o]);if(Ex){i=Ex(s);for(var l=0;l<i.length;l++)DE.call(s,i[l])&&(n[i[l]]=s[i[l]])}}return n};const VE=Vn(FE);var Tn={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},fe={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(fe).map(function(e){return fe[e]});var ze={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Ac={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},vo={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},BE=Object.keys(Ac).reduce(function(e,t){return e[Ac[t]]=t,e},{}),zE=[fe.NOSCRIPT,fe.SCRIPT,fe.STYLE],Cs="data-react-helmet",UE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HE=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},qE=function(){function e(t,s){for(var n=0;n<s.length;n++){var i=s[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},WE=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},kx=function(e,t){var s={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s},GE=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},hf=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return s===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},KE=function(t){var s=ki(t,fe.TITLE),n=ki(t,vo.TITLE_TEMPLATE);if(n&&s)return n.replace(/%s/g,function(){return Array.isArray(s)?s.join(""):s});var i=ki(t,vo.DEFAULT_TITLE);return s||i||void 0},YE=function(t){return ki(t,vo.ON_CHANGE_CLIENT_STATE)||function(){}},Su=function(t,s){return s.filter(function(n){return typeof n[t]<"u"}).map(function(n){return n[t]}).reduce(function(n,i){return Bt({},n,i)},{})},QE=function(t,s){return s.filter(function(n){return typeof n[fe.BASE]<"u"}).map(function(n){return n[fe.BASE]}).reverse().reduce(function(n,i){if(!n.length)for(var a=Object.keys(i),o=0;o<a.length;o++){var l=a[o],c=l.toLowerCase();if(t.indexOf(c)!==-1&&i[c])return n.concat(i)}return n},[])},ma=function(t,s,n){var i={};return n.filter(function(a){return Array.isArray(a[t])?!0:(typeof a[t]<"u"&&ek("Helmet: "+t+' should be of type "Array". Instead found type "'+UE(a[t])+'"'),!1)}).map(function(a){return a[t]}).reverse().reduce(function(a,o){var l={};o.filter(function(m){for(var x=void 0,v=Object.keys(m),g=0;g<v.length;g++){var w=v[g],p=w.toLowerCase();s.indexOf(p)!==-1&&!(x===ze.REL&&m[x].toLowerCase()==="canonical")&&!(p===ze.REL&&m[p].toLowerCase()==="stylesheet")&&(x=p),s.indexOf(w)!==-1&&(w===ze.INNER_HTML||w===ze.CSS_TEXT||w===ze.ITEM_PROP)&&(x=w)}if(!x||!m[x])return!1;var y=m[x].toLowerCase();return i[x]||(i[x]={}),l[x]||(l[x]={}),i[x][y]?!1:(l[x][y]=!0,!0)}).reverse().forEach(function(m){return a.push(m)});for(var c=Object.keys(l),d=0;d<c.length;d++){var u=c[d],h=VE({},i[u],l[u]);i[u]=h}return a},[]).reverse()},ki=function(t,s){for(var n=t.length-1;n>=0;n--){var i=t[n];if(i.hasOwnProperty(s))return i[s]}return null},JE=function(t){return{baseTag:QE([ze.HREF,ze.TARGET],t),bodyAttributes:Su(Tn.BODY,t),defer:ki(t,vo.DEFER),encode:ki(t,vo.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Su(Tn.HTML,t),linkTags:ma(fe.LINK,[ze.REL,ze.HREF],t),metaTags:ma(fe.META,[ze.NAME,ze.CHARSET,ze.HTTPEQUIV,ze.PROPERTY,ze.ITEM_PROP],t),noscriptTags:ma(fe.NOSCRIPT,[ze.INNER_HTML],t),onChangeClientState:YE(t),scriptTags:ma(fe.SCRIPT,[ze.SRC,ze.INNER_HTML],t),styleTags:ma(fe.STYLE,[ze.CSS_TEXT],t),title:KE(t),titleAttributes:Su(Tn.TITLE,t)}},ff=function(){var e=Date.now();return function(t){var s=Date.now();s-e>16?(e=s,t(s)):setTimeout(function(){ff(t)},0)}}(),Tx=function(t){return clearTimeout(t)},XE=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||ff:global.requestAnimationFrame||ff,ZE=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Tx:global.cancelAnimationFrame||Tx,ek=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},pa=null,tk=function(t){pa&&ZE(pa),t.defer?pa=XE(function(){Px(t,function(){pa=null})}):(Px(t),pa=null)},Px=function(t,s){var n=t.baseTag,i=t.bodyAttributes,a=t.htmlAttributes,o=t.linkTags,l=t.metaTags,c=t.noscriptTags,d=t.onChangeClientState,u=t.scriptTags,h=t.styleTags,m=t.title,x=t.titleAttributes;mf(fe.BODY,i),mf(fe.HTML,a),sk(m,x);var v={baseTag:Qn(fe.BASE,n),linkTags:Qn(fe.LINK,o),metaTags:Qn(fe.META,l),noscriptTags:Qn(fe.NOSCRIPT,c),scriptTags:Qn(fe.SCRIPT,u),styleTags:Qn(fe.STYLE,h)},g={},w={};Object.keys(v).forEach(function(p){var y=v[p],b=y.newTags,j=y.oldTags;b.length&&(g[p]=b),j.length&&(w[p]=v[p].oldTags)}),s&&s(),d(t,g,w)},Rb=function(t){return Array.isArray(t)?t.join(""):t},sk=function(t,s){typeof t<"u"&&document.title!==t&&(document.title=Rb(t)),mf(fe.TITLE,s)},mf=function(t,s){var n=document.getElementsByTagName(t)[0];if(n){for(var i=n.getAttribute(Cs),a=i?i.split(","):[],o=[].concat(a),l=Object.keys(s),c=0;c<l.length;c++){var d=l[c],u=s[d]||"";n.getAttribute(d)!==u&&n.setAttribute(d,u),a.indexOf(d)===-1&&a.push(d);var h=o.indexOf(d);h!==-1&&o.splice(h,1)}for(var m=o.length-1;m>=0;m--)n.removeAttribute(o[m]);a.length===o.length?n.removeAttribute(Cs):n.getAttribute(Cs)!==l.join(",")&&n.setAttribute(Cs,l.join(","))}},Qn=function(t,s){var n=document.head||document.querySelector(fe.HEAD),i=n.querySelectorAll(t+"["+Cs+"]"),a=Array.prototype.slice.call(i),o=[],l=void 0;return s&&s.length&&s.forEach(function(c){var d=document.createElement(t);for(var u in c)if(c.hasOwnProperty(u))if(u===ze.INNER_HTML)d.innerHTML=c.innerHTML;else if(u===ze.CSS_TEXT)d.styleSheet?d.styleSheet.cssText=c.cssText:d.appendChild(document.createTextNode(c.cssText));else{var h=typeof c[u]>"u"?"":c[u];d.setAttribute(u,h)}d.setAttribute(Cs,"true"),a.some(function(m,x){return l=x,d.isEqualNode(m)})?a.splice(l,1):o.push(d)}),a.forEach(function(c){return c.parentNode.removeChild(c)}),o.forEach(function(c){return n.appendChild(c)}),{oldTags:a,newTags:o}},Ob=function(t){return Object.keys(t).reduce(function(s,n){var i=typeof t[n]<"u"?n+'="'+t[n]+'"':""+n;return s?s+" "+i:i},"")},rk=function(t,s,n,i){var a=Ob(n),o=Rb(s);return a?"<"+t+" "+Cs+'="true" '+a+">"+hf(o,i)+"</"+t+">":"<"+t+" "+Cs+'="true">'+hf(o,i)+"</"+t+">"},nk=function(t,s,n){return s.reduce(function(i,a){var o=Object.keys(a).filter(function(d){return!(d===ze.INNER_HTML||d===ze.CSS_TEXT)}).reduce(function(d,u){var h=typeof a[u]>"u"?u:u+'="'+hf(a[u],n)+'"';return d?d+" "+h:h},""),l=a.innerHTML||a.cssText||"",c=zE.indexOf(t)===-1;return i+"<"+t+" "+Cs+'="true" '+o+(c?"/>":">"+l+"</"+t+">")},"")},$b=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,i){return n[Ac[i]||i]=t[i],n},s)},ik=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,i){return n[BE[i]||i]=t[i],n},s)},ak=function(t,s,n){var i,a=(i={key:s},i[Cs]=!0,i),o=$b(n,a);return[te.createElement(fe.TITLE,o,s)]},ok=function(t,s){return s.map(function(n,i){var a,o=(a={key:i},a[Cs]=!0,a);return Object.keys(n).forEach(function(l){var c=Ac[l]||l;if(c===ze.INNER_HTML||c===ze.CSS_TEXT){var d=n.innerHTML||n.cssText;o.dangerouslySetInnerHTML={__html:d}}else o[c]=n[l]}),te.createElement(t,o)})},Ks=function(t,s,n){switch(t){case fe.TITLE:return{toComponent:function(){return ak(t,s.title,s.titleAttributes)},toString:function(){return rk(t,s.title,s.titleAttributes,n)}};case Tn.BODY:case Tn.HTML:return{toComponent:function(){return $b(s)},toString:function(){return Ob(s)}};default:return{toComponent:function(){return ok(t,s)},toString:function(){return nk(t,s,n)}}}},Lb=function(t){var s=t.baseTag,n=t.bodyAttributes,i=t.encode,a=t.htmlAttributes,o=t.linkTags,l=t.metaTags,c=t.noscriptTags,d=t.scriptTags,u=t.styleTags,h=t.title,m=h===void 0?"":h,x=t.titleAttributes;return{base:Ks(fe.BASE,s,i),bodyAttributes:Ks(Tn.BODY,n,i),htmlAttributes:Ks(Tn.HTML,a,i),link:Ks(fe.LINK,o,i),meta:Ks(fe.META,l,i),noscript:Ks(fe.NOSCRIPT,c,i),script:Ks(fe.SCRIPT,d,i),style:Ks(fe.STYLE,u,i),title:Ks(fe.TITLE,{title:m,titleAttributes:x},i)}},lk=function(t){var s,n;return n=s=function(i){WE(a,i);function a(){return HE(this,a),GE(this,i.apply(this,arguments))}return a.prototype.shouldComponentUpdate=function(l){return!$E(this.props,l)},a.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case fe.SCRIPT:case fe.NOSCRIPT:return{innerHTML:c};case fe.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},a.prototype.flattenArrayTypeChildren=function(l){var c,d=l.child,u=l.arrayTypeChildren,h=l.newChildProps,m=l.nestedChildren;return Bt({},u,(c={},c[d.type]=[].concat(u[d.type]||[],[Bt({},h,this.mapNestedChildrenToProps(d,m))]),c))},a.prototype.mapObjectTypeChildren=function(l){var c,d,u=l.child,h=l.newProps,m=l.newChildProps,x=l.nestedChildren;switch(u.type){case fe.TITLE:return Bt({},h,(c={},c[u.type]=x,c.titleAttributes=Bt({},m),c));case fe.BODY:return Bt({},h,{bodyAttributes:Bt({},m)});case fe.HTML:return Bt({},h,{htmlAttributes:Bt({},m)})}return Bt({},h,(d={},d[u.type]=Bt({},m),d))},a.prototype.mapArrayTypeChildrenToProps=function(l,c){var d=Bt({},c);return Object.keys(l).forEach(function(u){var h;d=Bt({},d,(h={},h[u]=l[u],h))}),d},a.prototype.warnOnInvalidChildren=function(l,c){return!0},a.prototype.mapChildrenToProps=function(l,c){var d=this,u={};return te.Children.forEach(l,function(h){if(!(!h||!h.props)){var m=h.props,x=m.children,v=kx(m,["children"]),g=ik(v);switch(d.warnOnInvalidChildren(h,x),h.type){case fe.LINK:case fe.META:case fe.NOSCRIPT:case fe.SCRIPT:case fe.STYLE:u=d.flattenArrayTypeChildren({child:h,arrayTypeChildren:u,newChildProps:g,nestedChildren:x});break;default:c=d.mapObjectTypeChildren({child:h,newProps:c,newChildProps:g,nestedChildren:x});break}}}),c=this.mapArrayTypeChildrenToProps(u,c),c},a.prototype.render=function(){var l=this.props,c=l.children,d=kx(l,["children"]),u=Bt({},d);return c&&(u=this.mapChildrenToProps(c,u)),te.createElement(t,u)},qE(a,null,[{key:"canUseDOM",set:function(l){t.canUseDOM=l}}]),a}(te.Component),s.propTypes={base:Be.object,bodyAttributes:Be.object,children:Be.oneOfType([Be.arrayOf(Be.node),Be.node]),defaultTitle:Be.string,defer:Be.bool,encodeSpecialCharacters:Be.bool,htmlAttributes:Be.object,link:Be.arrayOf(Be.object),meta:Be.arrayOf(Be.object),noscript:Be.arrayOf(Be.object),onChangeClientState:Be.func,script:Be.arrayOf(Be.object),style:Be.arrayOf(Be.object),title:Be.string,titleAttributes:Be.object,titleTemplate:Be.string},s.defaultProps={defer:!0,encodeSpecialCharacters:!0},s.peek=t.peek,s.rewind=function(){var i=t.rewind();return i||(i=Lb({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},n},ck=function(){return null},dk=kE(JE,tk,Lb)(ck),wo=lk(dk);wo.renderStatic=wo.rewind;function Pe(e,t,{checkForDefaultPrevented:s=!0}={}){return function(i){if(e==null||e(i),s===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Ax(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Db(...e){return t=>{let s=!1;const n=e.map(i=>{const a=Ax(i,t);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():Ax(e[i],null)}}}}function Yt(...e){return f.useCallback(Db(...e),e)}function uk(e,t){const s=f.createContext(t),n=a=>{const{children:o,...l}=a,c=f.useMemo(()=>l,Object.values(l));return r.jsx(s.Provider,{value:c,children:o})};n.displayName=e+"Provider";function i(a){const o=f.useContext(s);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,i]}function Un(e,t=[]){let s=[];function n(a,o){const l=f.createContext(o),c=s.length;s=[...s,o];const d=h=>{var p;const{scope:m,children:x,...v}=h,g=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,w=f.useMemo(()=>v,Object.values(v));return r.jsx(g.Provider,{value:w,children:x})};d.displayName=a+"Provider";function u(h,m){var g;const x=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,v=f.useContext(x);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=s.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[n,hk(i,...t)]}function hk(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}function bo(e){const t=mk(e),s=f.forwardRef((n,i)=>{const{children:a,...o}=n,l=f.Children.toArray(a),c=l.find(xk);if(c){const d=c.props.children,u=l.map(h=>h===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:i,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}var fk=bo("Slot");function mk(e){const t=f.forwardRef((s,n)=>{const{children:i,...a}=s;if(f.isValidElement(i)){const o=yk(i),l=gk(a,i.props);return i.type!==f.Fragment&&(l.ref=n?Db(n,o):o),f.cloneElement(i,l)}return f.Children.count(i)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var pk=Symbol("radix.slottable");function xk(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===pk}function gk(e,t){const s={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?s[n]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(s[n]=i):n==="style"?s[n]={...i,...a}:n==="className"&&(s[n]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function yk(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function Mb(e){const t=e+"CollectionProvider",[s,n]=Un(t),[i,a]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:w,children:p}=g,y=te.useRef(null),b=te.useRef(new Map).current;return r.jsx(i,{scope:w,itemMap:b,collectionRef:y,children:p})};o.displayName=t;const l=e+"CollectionSlot",c=bo(l),d=te.forwardRef((g,w)=>{const{scope:p,children:y}=g,b=a(l,p),j=Yt(w,b.collectionRef);return r.jsx(c,{ref:j,children:y})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",m=bo(u),x=te.forwardRef((g,w)=>{const{scope:p,children:y,...b}=g,j=te.useRef(null),S=Yt(w,j),R=a(u,p);return te.useEffect(()=>(R.itemMap.set(j,{ref:j,...b}),()=>void R.itemMap.delete(j))),r.jsx(m,{[h]:"",ref:S,children:y})});x.displayName=u;function v(g){const w=a(e+"CollectionConsumer",g);return te.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((R,E)=>b.indexOf(R.ref.current)-b.indexOf(E.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:d,ItemSlot:x},v,n]}var vk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Re=vk.reduce((e,t)=>{const s=bo(`Primitive.${t}`),n=f.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Ib(e,t){e&&on.flushSync(()=>e.dispatchEvent(t))}function As(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...s)=>{var n;return(n=t.current)==null?void 0:n.call(t,...s)},[])}function wk(e,t=globalThis==null?void 0:globalThis.document){const s=As(e);f.useEffect(()=>{const n=i=>{i.key==="Escape"&&s(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[s,t])}var bk="DismissableLayer",pf="dismissableLayer.update",jk="dismissableLayer.pointerDownOutside",Nk="dismissableLayer.focusOutside",Rx,Fb=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ep=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=f.useContext(Fb),[u,h]=f.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=f.useState({}),v=Yt(t,E=>h(E)),g=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),p=g.indexOf(w),y=u?g.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=y>=p,S=_k(E=>{const _=E.target,A=[...d.branches].some(P=>P.contains(_));!j||A||(i==null||i(E),o==null||o(E),E.defaultPrevented||l==null||l())},m),R=Ck(E=>{const _=E.target;[...d.branches].some(P=>P.contains(_))||(a==null||a(E),o==null||o(E),E.defaultPrevented||l==null||l())},m);return wk(E=>{y===d.layers.size-1&&(n==null||n(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},m),f.useEffect(()=>{if(u)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Rx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Ox(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Rx)}},[u,m,s,d]),f.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Ox())},[u,d]),f.useEffect(()=>{const E=()=>x({});return document.addEventListener(pf,E),()=>document.removeEventListener(pf,E)},[]),r.jsx(Re.div,{...c,ref:v,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:Pe(e.onFocusCapture,R.onFocusCapture),onBlurCapture:Pe(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Pe(e.onPointerDownCapture,S.onPointerDownCapture)})});ep.displayName=bk;var Sk="DismissableLayerBranch",Vb=f.forwardRef((e,t)=>{const s=f.useContext(Fb),n=f.useRef(null),i=Yt(t,n);return f.useEffect(()=>{const a=n.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),r.jsx(Re.div,{...e,ref:i})});Vb.displayName=Sk;function _k(e,t=globalThis==null?void 0:globalThis.document){const s=As(e),n=f.useRef(!1),i=f.useRef(()=>{});return f.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){Bb(jk,s,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}function Ck(e,t=globalThis==null?void 0:globalThis.document){const s=As(e),n=f.useRef(!1);return f.useEffect(()=>{const i=a=>{a.target&&!n.current&&Bb(Nk,s,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Ox(){const e=new CustomEvent(pf);document.dispatchEvent(e)}function Bb(e,t,s,{discrete:n}){const i=s.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&i.addEventListener(e,t,{once:!0}),n?Ib(i,a):i.dispatchEvent(a)}var Ek=ep,kk=Vb,qs=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},Tk="Portal",tp=f.forwardRef((e,t)=>{var l;const{container:s,...n}=e,[i,a]=f.useState(!1);qs(()=>a(!0),[]);const o=s||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?xb.createPortal(r.jsx(Re.div,{...n,ref:t}),o):null});tp.displayName=Tk;function Pk(e,t){return f.useReducer((s,n)=>t[s][n]??s,e)}var Zi=e=>{const{present:t,children:s}=e,n=Ak(t),i=typeof s=="function"?s({present:n.isPresent}):f.Children.only(s),a=Yt(n.ref,Rk(i));return typeof s=="function"||n.isPresent?f.cloneElement(i,{ref:a}):null};Zi.displayName="Presence";function Ak(e){const[t,s]=f.useState(),n=f.useRef(null),i=f.useRef(e),a=f.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Pk(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=pl(n.current);a.current=l==="mounted"?d:"none"},[l]),qs(()=>{const d=n.current,u=i.current;if(u!==e){const m=a.current,x=pl(d);e?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==x?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),qs(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=x=>{const g=pl(n.current).includes(x.animationName);if(x.target===t&&g&&(c("ANIMATION_END"),!i.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=x=>{x.target===t&&(a.current=pl(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(d=>{n.current=d?getComputedStyle(d):null,s(d)},[])}}function pl(e){return(e==null?void 0:e.animationName)||"none"}function Rk(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Ok=Zc[" useInsertionEffect ".trim().toString()]||qs;function Fo({prop:e,defaultProp:t,onChange:s=()=>{},caller:n}){const[i,a,o]=$k({defaultProp:t,onChange:s}),l=e!==void 0,c=l?e:i;{const u=f.useRef(e!==void 0);f.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=f.useCallback(u=>{var h;if(l){const m=Lk(u)?u(e):u;m!==e&&((h=o.current)==null||h.call(o,m))}else a(u)},[l,e,a,o]);return[c,d]}function $k({defaultProp:e,onChange:t}){const[s,n]=f.useState(e),i=f.useRef(s),a=f.useRef(t);return Ok(()=>{a.current=t},[t]),f.useEffect(()=>{var o;i.current!==s&&((o=a.current)==null||o.call(a,s),i.current=s)},[s,i]),[s,n,a]}function Lk(e){return typeof e=="function"}var Dk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Mk="VisuallyHidden",sp=f.forwardRef((e,t)=>r.jsx(Re.span,{...e,ref:t,style:{...Dk,...e.style}}));sp.displayName=Mk;var rp="ToastProvider",[np,Ik,Fk]=Mb("Toast"),[zb,U7]=Un("Toast",[Fk]),[Vk,yd]=zb(rp),Ub=e=>{const{__scopeToast:t,label:s="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=f.useState(null),[d,u]=f.useState(0),h=f.useRef(!1),m=f.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${rp}\`. Expected non-empty \`string\`.`),r.jsx(np.Provider,{scope:t,children:r.jsx(Vk,{scope:t,label:s,duration:n,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>u(x=>x+1),[]),onToastRemove:f.useCallback(()=>u(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};Ub.displayName=rp;var Hb="ToastViewport",Bk=["F8"],xf="toast.viewportPause",gf="toast.viewportResume",qb=f.forwardRef((e,t)=>{const{__scopeToast:s,hotkey:n=Bk,label:i="Notifications ({hotkey})",...a}=e,o=yd(Hb,s),l=Ik(s),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),h=f.useRef(null),m=Yt(t,h,o.onViewportChange),x=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;f.useEffect(()=>{const w=p=>{var b;n.length!==0&&n.every(j=>p[j]||p.code===j)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),f.useEffect(()=>{const w=c.current,p=h.current;if(v&&w&&p){const y=()=>{if(!o.isClosePausedRef.current){const R=new CustomEvent(xf);p.dispatchEvent(R),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const R=new CustomEvent(gf);p.dispatchEvent(R),o.isClosePausedRef.current=!1}},j=R=>{!w.contains(R.relatedTarget)&&b()},S=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",y),w.addEventListener("focusout",j),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",S),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",j),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",S),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[v,o.isClosePausedRef]);const g=f.useCallback(({tabbingDirection:w})=>{const y=l().map(b=>{const j=b.ref.current,S=[j,...eT(j)];return w==="forwards"?S:S.reverse()});return(w==="forwards"?y.reverse():y).flat()},[l]);return f.useEffect(()=>{const w=h.current;if(w){const p=y=>{var S,R,E;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const _=document.activeElement,A=y.shiftKey;if(y.target===w&&A){(S=d.current)==null||S.focus();return}const k=g({tabbingDirection:A?"backwards":"forwards"}),$=k.findIndex(N=>N===_);_u(k.slice($+1))?y.preventDefault():A?(R=d.current)==null||R.focus():(E=u.current)==null||E.focus()}};return w.addEventListener("keydown",p),()=>w.removeEventListener("keydown",p)}},[l,g]),r.jsxs(kk,{ref:c,role:"region","aria-label":i.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&r.jsx(yf,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});_u(w)}}),r.jsx(np.Slot,{scope:s,children:r.jsx(Re.ol,{tabIndex:-1,...a,ref:m})}),v&&r.jsx(yf,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});_u(w)}})]})});qb.displayName=Hb;var Wb="ToastFocusProxy",yf=f.forwardRef((e,t)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...i}=e,a=yd(Wb,s);return r.jsx(sp,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&n()}})});yf.displayName=Wb;var Vo="Toast",zk="toast.swipeStart",Uk="toast.swipeMove",Hk="toast.swipeCancel",qk="toast.swipeEnd",Gb=f.forwardRef((e,t)=>{const{forceMount:s,open:n,defaultOpen:i,onOpenChange:a,...o}=e,[l,c]=Fo({prop:n,defaultProp:i??!0,onChange:a,caller:Vo});return r.jsx(Zi,{present:s||l,children:r.jsx(Kk,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:As(e.onPause),onResume:As(e.onResume),onSwipeStart:Pe(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Pe(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Gb.displayName=Vo;var[Wk,Gk]=zb(Vo,{onClose(){}}),Kk=f.forwardRef((e,t)=>{const{__scopeToast:s,type:n="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:x,...v}=e,g=yd(Vo,s),[w,p]=f.useState(null),y=Yt(t,N=>p(N)),b=f.useRef(null),j=f.useRef(null),S=i||g.duration,R=f.useRef(0),E=f.useRef(S),_=f.useRef(0),{onToastAdd:A,onToastRemove:P}=g,O=As(()=>{var C;(w==null?void 0:w.contains(document.activeElement))&&((C=g.viewport)==null||C.focus()),o()}),k=f.useCallback(N=>{!N||N===1/0||(window.clearTimeout(_.current),R.current=new Date().getTime(),_.current=window.setTimeout(O,N))},[O]);f.useEffect(()=>{const N=g.viewport;if(N){const C=()=>{k(E.current),d==null||d()},T=()=>{const V=new Date().getTime()-R.current;E.current=E.current-V,window.clearTimeout(_.current),c==null||c()};return N.addEventListener(xf,T),N.addEventListener(gf,C),()=>{N.removeEventListener(xf,T),N.removeEventListener(gf,C)}}},[g.viewport,S,c,d,k]),f.useEffect(()=>{a&&!g.isClosePausedRef.current&&k(S)},[a,S,g.isClosePausedRef,k]),f.useEffect(()=>(A(),()=>P()),[A,P]);const $=f.useMemo(()=>w?ej(w):null,[w]);return g.viewport?r.jsxs(r.Fragment,{children:[$&&r.jsx(Yk,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),r.jsx(Wk,{scope:s,onClose:O,children:on.createPortal(r.jsx(np.ItemSlot,{scope:s,children:r.jsx(Ek,{asChild:!0,onEscapeKeyDown:Pe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Re.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Pe(e.onKeyDown,N=>{N.key==="Escape"&&(l==null||l(N.nativeEvent),N.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Pe(e.onPointerDown,N=>{N.button===0&&(b.current={x:N.clientX,y:N.clientY})}),onPointerMove:Pe(e.onPointerMove,N=>{if(!b.current)return;const C=N.clientX-b.current.x,T=N.clientY-b.current.y,V=!!j.current,L=["left","right"].includes(g.swipeDirection),I=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,z=L?I(0,C):0,D=L?0:I(0,T),J=N.pointerType==="touch"?10:2,ne={x:z,y:D},re={originalEvent:N,delta:ne};V?(j.current=ne,xl(Uk,h,re,{discrete:!1})):$x(ne,g.swipeDirection,J)?(j.current=ne,xl(zk,u,re,{discrete:!1}),N.target.setPointerCapture(N.pointerId)):(Math.abs(C)>J||Math.abs(T)>J)&&(b.current=null)}),onPointerUp:Pe(e.onPointerUp,N=>{const C=j.current,T=N.target;if(T.hasPointerCapture(N.pointerId)&&T.releasePointerCapture(N.pointerId),j.current=null,b.current=null,C){const V=N.currentTarget,L={originalEvent:N,delta:C};$x(C,g.swipeDirection,g.swipeThreshold)?xl(qk,x,L,{discrete:!0}):xl(Hk,m,L,{discrete:!0}),V.addEventListener("click",I=>I.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Yk=e=>{const{__scopeToast:t,children:s,...n}=e,i=yd(Vo,t),[a,o]=f.useState(!1),[l,c]=f.useState(!1);return Xk(()=>o(!0)),f.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(tp,{asChild:!0,children:r.jsx(sp,{...n,children:a&&r.jsxs(r.Fragment,{children:[i.label," ",s]})})})},Qk="ToastTitle",Kb=f.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e;return r.jsx(Re.div,{...n,ref:t})});Kb.displayName=Qk;var Jk="ToastDescription",Yb=f.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e;return r.jsx(Re.div,{...n,ref:t})});Yb.displayName=Jk;var Qb="ToastAction",Jb=f.forwardRef((e,t)=>{const{altText:s,...n}=e;return s.trim()?r.jsx(Zb,{altText:s,asChild:!0,children:r.jsx(ip,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Qb}\`. Expected non-empty \`string\`.`),null)});Jb.displayName=Qb;var Xb="ToastClose",ip=f.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e,i=Gk(Xb,s);return r.jsx(Zb,{asChild:!0,children:r.jsx(Re.button,{type:"button",...n,ref:t,onClick:Pe(e.onClick,i.onClose)})})});ip.displayName=Xb;var Zb=f.forwardRef((e,t)=>{const{__scopeToast:s,altText:n,...i}=e;return r.jsx(Re.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function ej(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),Zk(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...ej(n))}}),t}function xl(e,t,s,{discrete:n}){const i=s.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});t&&i.addEventListener(e,t,{once:!0}),n?Ib(i,a):i.dispatchEvent(a)}var $x=(e,t,s=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),a=n>i;return t==="left"||t==="right"?a&&n>s:!a&&i>s};function Xk(e=()=>{}){const t=As(e);qs(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[t])}function Zk(e){return e.nodeType===e.ELEMENT_NODE}function eT(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function _u(e){const t=document.activeElement;return e.some(s=>s===t?!0:(s.focus(),document.activeElement!==t))}var tT=Ub,tj=qb,sj=Gb,rj=Kb,nj=Yb,ij=Jb,aj=ip;function oj(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(s=oj(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function lj(){for(var e,t,s=0,n="",i=arguments.length;s<i;s++)(e=arguments[s])&&(t=oj(e))&&(n&&(n+=" "),n+=t);return n}const Lx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Dx=lj,vd=(e,t)=>s=>{var n;if((t==null?void 0:t.variants)==null)return Dx(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(d=>{const u=s==null?void 0:s[d],h=a==null?void 0:a[d];if(u===null)return null;const m=Lx(u)||Lx(h);return i[d][m]}),l=s&&Object.entries(s).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:m,...x}=u;return Object.entries(x).every(v=>{let[g,w]=v;return Array.isArray(w)?w.includes({...a,...l}[g]):{...a,...l}[g]===w})?[...d,h,m]:d},[]);return Dx(e,o,c,s==null?void 0:s.class,s==null?void 0:s.className)};var sT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q=(e,t)=>{const s=f.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,children:l,...c},d)=>f.createElement("svg",{ref:d,...sT,width:i,height:i,stroke:n,strokeWidth:o?Number(a)*24/Number(i):a,className:`lucide lucide-${rT(e)}`,...c},[...t.map(([u,h])=>f.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return s.displayName=`${e}`,s},cj=q("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Gr=q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ut=q("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Rc=q("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),ap=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Mx=q("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),ni=q("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),nT=q("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Kr=q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ix=q("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),iT=q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),op=q("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Fx=q("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),cr=q("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),sr=q("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),dj=q("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),aT=q("CalendarCheck2",[["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]),Oc=q("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),oT=q("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]),Rs=q("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ba=q("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),lT=q("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),nt=q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),cT=q("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),dT=q("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),uj=q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),uT=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Cu=q("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),Bo=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),wd=q("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),hT=q("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),fT=q("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),mT=q("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),hj=q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Vx=q("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Fi=q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),pT=q("FileArchive",[["path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2",key:"1u864v"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]),bd=q("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),Bx=q("FileQuestion",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),He=q("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),xT=q("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),fj=q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Eu=q("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),gT=q("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),yT=q("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),vf=q("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),mt=q("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),vT=q("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),mj=q("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]),wT=q("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),bT=q("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),pj=q("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),jT=q("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),xj=q("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),NT=q("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),zx=q("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),gj=q("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),ST=q("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),ct=q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),_T=q("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]),CT=q("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),ET=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Vi=q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),qt=q("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),kT=q("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),TT=q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),yj=q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),lp=q("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),PT=q("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Ux=q("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),wf=q("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),Ts=q("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Ql=q("Nfc",[["path",{d:"M6 8.32a7.43 7.43 0 0 1 0 7.36",key:"9iaqei"}],["path",{d:"M9.46 6.21a11.76 11.76 0 0 1 0 11.58",key:"1yha7l"}],["path",{d:"M12.91 4.1a15.91 15.91 0 0 1 .01 15.8",key:"4iu2gk"}],["path",{d:"M16.37 2a20.16 20.16 0 0 1 0 20",key:"sap9u2"}]]),vj=q("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),AT=q("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),gs=q("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),RT=q("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),Dn=q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),wj=q("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),OT=q("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),it=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Hx=q("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),$T=q("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),LT=q("RadioTower",[["path",{d:"M4.9 16.1C1 12.2 1 5.8 4.9 1.9",key:"s0qx1y"}],["path",{d:"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5",key:"1idnkw"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}],["path",{d:"M16.2 4.8c2 2 2.26 5.11.8 7.47",key:"ojru2q"}],["path",{d:"M19.1 1.9a9.96 9.96 0 0 1 0 14.1",key:"rhi7fg"}],["path",{d:"M9.5 18h5",key:"mfy3pd"}],["path",{d:"m8 22 4-11 4 11",key:"25yftu"}]]),qx=q("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),DT=q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ii=q("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ys=q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ct=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),MT=q("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Bi=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),IT=q("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),FT=q("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),bj=q("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),jo=q("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Rt=q("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),VT=q("Siren",[["path",{d:"M7 12a5 5 0 0 1 5-5v0a5 5 0 0 1 5 5v6H7v-6Z",key:"rmc51c"}],["path",{d:"M5 20a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v2H5v-2Z",key:"yyvmjy"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]]),jj=q("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),BT=q("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),_s=q("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),bf=q("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),zT=q("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),vn=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),cp=q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),UT=q("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]),ku=q("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Mn=q("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Nj=q("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Pn=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ae=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Tu=q("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),HT=q("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Dt=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jf=q("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function qT(){for(var e=0,t,s,n="";e<arguments.length;)(t=arguments[e++])&&(s=Sj(t))&&(n&&(n+=" "),n+=s);return n}function Sj(e){if(typeof e=="string")return e;for(var t,s="",n=0;n<e.length;n++)e[n]&&(t=Sj(e[n]))&&(s&&(s+=" "),s+=t);return s}var dp="-";function WT(e){var t=KT(e),s=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,i=n===void 0?{}:n;function a(l){var c=l.split(dp);return c[0]===""&&c.length!==1&&c.shift(),_j(c,t)||GT(l)}function o(l,c){var d=s[l]||[];return c&&i[l]?[].concat(d,i[l]):d}return{getClassGroupId:a,getConflictingClassGroupIds:o}}function _j(e,t){var o;if(e.length===0)return t.classGroupId;var s=e[0],n=t.nextPart.get(s),i=n?_j(e.slice(1),n):void 0;if(i)return i;if(t.validators.length!==0){var a=e.join(dp);return(o=t.validators.find(function(l){var c=l.validator;return c(a)}))==null?void 0:o.classGroupId}}var Wx=/^\[(.+)\]$/;function GT(e){if(Wx.test(e)){var t=Wx.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}}function KT(e){var t=e.theme,s=e.prefix,n={nextPart:new Map,validators:[]},i=QT(Object.entries(e.classGroups),s);return i.forEach(function(a){var o=a[0],l=a[1];Nf(l,n,o,t)}),n}function Nf(e,t,s,n){e.forEach(function(i){if(typeof i=="string"){var a=i===""?t:Gx(t,i);a.classGroupId=s;return}if(typeof i=="function"){if(YT(i)){Nf(i(n),t,s,n);return}t.validators.push({validator:i,classGroupId:s});return}Object.entries(i).forEach(function(o){var l=o[0],c=o[1];Nf(c,Gx(t,l),s,n)})})}function Gx(e,t){var s=e;return t.split(dp).forEach(function(n){s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s}function YT(e){return e.isThemeGetter}function QT(e,t){return t?e.map(function(s){var n=s[0],i=s[1],a=i.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],d=l[1];return[t+c,d]})):o});return[n,a]}):e}function JT(e){if(e<1)return{get:function(){},set:function(){}};var t=0,s=new Map,n=new Map;function i(a,o){s.set(a,o),t++,t>e&&(t=0,n=s,s=new Map)}return{get:function(o){var l=s.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return i(o,l),l},set:function(o,l){s.has(o)?s.set(o,l):i(o,l)}}}var Cj="!";function XT(e){var t=e.separator||":",s=t.length===1,n=t[0],i=t.length;return function(o){for(var l=[],c=0,d=0,u,h=0;h<o.length;h++){var m=o[h];if(c===0){if(m===n&&(s||o.slice(h,h+i)===t)){l.push(o.slice(d,h)),d=h+i;continue}if(m==="/"){u=h;continue}}m==="["?c++:m==="]"&&c--}var x=l.length===0?o:o.substring(d),v=x.startsWith(Cj),g=v?x.substring(1):x,w=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:v,baseClassName:g,maybePostfixModifierPosition:w}}}function ZT(e){if(e.length<=1)return e;var t=[],s=[];return e.forEach(function(n){var i=n[0]==="[";i?(t.push.apply(t,s.sort().concat([n])),s=[]):s.push(n)}),t.push.apply(t,s.sort()),t}function eP(e){return{cache:JT(e.cacheSize),splitModifiers:XT(e),...WT(e)}}var tP=/\s+/;function sP(e,t){var s=t.splitModifiers,n=t.getClassGroupId,i=t.getConflictingClassGroupIds,a=new Set;return e.trim().split(tP).map(function(o){var l=s(o),c=l.modifiers,d=l.hasImportantModifier,u=l.baseClassName,h=l.maybePostfixModifierPosition,m=n(h?u.substring(0,h):u),x=!!h;if(!m){if(!h)return{isTailwindClass:!1,originalClassName:o};if(m=n(u),!m)return{isTailwindClass:!1,originalClassName:o};x=!1}var v=ZT(c).join(":"),g=d?v+Cj:v;return{isTailwindClass:!0,modifierId:g,classGroupId:m,originalClassName:o,hasPostfixModifier:x}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,d=o.hasPostfixModifier,u=l+c;return a.has(u)?!1:(a.add(u),i(c,d).forEach(function(h){return a.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function rP(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var n,i,a,o=l;function l(d){var u=t[0],h=t.slice(1),m=h.reduce(function(x,v){return v(x)},u());return n=eP(m),i=n.cache.get,a=n.cache.set,o=c,c(d)}function c(d){var u=i(d);if(u)return u;var h=sP(d,n);return a(d,h),h}return function(){return o(qT.apply(null,arguments))}}function Me(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var Ej=/^\[(?:([a-z-]+):)?(.+)\]$/i,nP=/^\d+\/\d+$/,iP=new Set(["px","full","screen"]),aP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lP=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ws(e){return _n(e)||iP.has(e)||nP.test(e)||Sf(e)}function Sf(e){return Hn(e,"length",mP)}function cP(e){return Hn(e,"size",kj)}function dP(e){return Hn(e,"position",kj)}function uP(e){return Hn(e,"url",pP)}function gl(e){return Hn(e,"number",_n)}function _n(e){return!Number.isNaN(Number(e))}function hP(e){return e.endsWith("%")&&_n(e.slice(0,-1))}function xa(e){return Kx(e)||Hn(e,"number",Kx)}function ve(e){return Ej.test(e)}function ga(){return!0}function _r(e){return aP.test(e)}function fP(e){return Hn(e,"",xP)}function Hn(e,t,s){var n=Ej.exec(e);return n?n[1]?n[1]===t:s(n[2]):!1}function mP(e){return oP.test(e)}function kj(){return!1}function pP(e){return e.startsWith("url(")}function Kx(e){return Number.isInteger(Number(e))}function xP(e){return lP.test(e)}function gP(){var e=Me("colors"),t=Me("spacing"),s=Me("blur"),n=Me("brightness"),i=Me("borderColor"),a=Me("borderRadius"),o=Me("borderSpacing"),l=Me("borderWidth"),c=Me("contrast"),d=Me("grayscale"),u=Me("hueRotate"),h=Me("invert"),m=Me("gap"),x=Me("gradientColorStops"),v=Me("gradientColorStopPositions"),g=Me("inset"),w=Me("margin"),p=Me("opacity"),y=Me("padding"),b=Me("saturate"),j=Me("scale"),S=Me("sepia"),R=Me("skew"),E=Me("space"),_=Me("translate"),A=function(){return["auto","contain","none"]},P=function(){return["auto","hidden","clip","visible","scroll"]},O=function(){return["auto",ve,t]},k=function(){return[ve,t]},$=function(){return["",ws]},N=function(){return["auto",_n,ve]},C=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},T=function(){return["solid","dashed","dotted","double","none"]},V=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},L=function(){return["start","end","center","between","around","evenly","stretch"]},I=function(){return["","0",ve]},z=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},D=function(){return[_n,gl]},J=function(){return[_n,ve]};return{cacheSize:500,theme:{colors:[ga],spacing:[ws],blur:["none","",_r,ve],brightness:D(),borderColor:[e],borderRadius:["none","","full",_r,ve],borderSpacing:k(),borderWidth:$(),contrast:D(),grayscale:I(),hueRotate:J(),invert:I(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[hP,Sf],inset:O(),margin:O(),opacity:D(),padding:k(),saturate:D(),scale:D(),sepia:I(),skew:J(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",ve]}],container:["container"],columns:[{columns:[_r]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(C(),[ve])}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xa]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ve]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",xa]}],"grid-cols":[{"grid-cols":[ga]}],"col-start-end":[{col:["auto",{span:["full",xa]},ve]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[ga]}],"row-start-end":[{row:["auto",{span:[xa]},ve]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ve]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(L())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(L(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(L(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ve,t]}],"min-w":[{"min-w":["min","max","fit",ve,ws]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[_r]},_r,ve]}],h:[{h:[ve,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ve,ws]}],"max-h":[{"max-h":[ve,t,"min","max","fit"]}],"font-size":[{text:["base",_r,Sf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gl]}],"font-family":[{font:[ga]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ve]}],"line-clamp":[{"line-clamp":["none",_n,gl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ve,ws]}],"list-image":[{"list-image":["none",ve]}],"list-style-type":[{list:["none","disc","decimal",ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(T(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ws]}],"underline-offset":[{"underline-offset":["auto",ve,ws]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(C(),[dP])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},uP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[].concat(T(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:T()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(T())}],"outline-offset":[{"outline-offset":[ve,ws]}],"outline-w":[{outline:[ws]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[ws]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",_r,fP]}],"shadow-color":[{shadow:[ga]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":V()}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",_r,ve]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ve]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",ve]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[xa,ve]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ve]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ws,gl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var yP=rP(gP);function de(...e){return yP(lj(e))}const vP=tT,Tj=te.forwardRef(({className:e,...t},s)=>r.jsx(tj,{ref:s,className:de("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Tj.displayName=tj.displayName;const wP=vd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Pj=te.forwardRef(({className:e,variant:t,...s},n)=>r.jsx(sj,{ref:n,className:de(wP({variant:t}),e),...s}));Pj.displayName=sj.displayName;const bP=te.forwardRef(({className:e,...t},s)=>r.jsx(ij,{ref:s,className:de("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));bP.displayName=ij.displayName;const Aj=te.forwardRef(({className:e,...t},s)=>r.jsx(aj,{ref:s,className:de("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Dt,{className:"h-4 w-4"})}));Aj.displayName=aj.displayName;const Rj=te.forwardRef(({className:e,...t},s)=>r.jsx(rj,{ref:s,className:de("text-sm font-semibold",e),...t}));Rj.displayName=rj.displayName;const Oj=te.forwardRef(({className:e,...t},s)=>r.jsx(nj,{ref:s,className:de("text-sm opacity-90",e),...t}));Oj.displayName=nj.displayName;const jP=3,NP=1e6,ar={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let Pu=0;function SP(){return Pu=(Pu+1)%Number.MAX_SAFE_INTEGER,Pu.toString()}const Au=new Map,Yx=e=>{if(Au.has(e))return;const t=setTimeout(()=>{Au.delete(e),za({type:ar.REMOVE_TOAST,toastId:e})},NP);Au.set(e,t)},_P=(e,t)=>{switch(t.type){case ar.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,jP)};case ar.UPDATE_TOAST:return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case ar.DISMISS_TOAST:{const{toastId:s}=t;return s?Yx(s):e.toasts.forEach(n=>{Yx(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===s||s===void 0?{...n,open:!1}:n)}}case ar.REMOVE_TOAST:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};default:return e}},Jl=[];let Xl={toasts:[]};function za(e){Xl=_P(Xl,e),Jl.forEach(t=>{t(Xl)})}function CP(e){const t=SP(),s=i=>za({type:ar.UPDATE_TOAST,toast:{...i,id:t}}),n=()=>za({type:ar.DISMISS_TOAST,toastId:t});return za({type:ar.ADD_TOAST,toast:{...e,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:s}}function ue(){const[e,t]=te.useState(Xl);return te.useEffect(()=>(Jl.push(t),()=>{const s=Jl.indexOf(t);s>-1&&Jl.splice(s,1)}),[e]),{...e,toast:CP,dismiss:s=>za({type:ar.DISMISS_TOAST,toastId:s})}}function EP(){const{toasts:e}=ue();return r.jsxs(vP,{children:[e.map(function({id:t,title:s,description:n,action:i,...a}){return r.jsxs(Pj,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[s&&r.jsx(Rj,{children:s}),n&&r.jsx(Oj,{children:n})]}),i,r.jsx(Aj,{})]},t)}),r.jsx(Tj,{})]})}const $j=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),jd=f.createContext({}),Nd=f.createContext(null),Sd=typeof document<"u",up=Sd?f.useLayoutEffect:f.useEffect,Lj=f.createContext({strict:!1}),hp=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),kP="framerAppearId",Dj="data-"+hp(kP);function TP(e,t,s,n){const{visualElement:i}=f.useContext(jd),a=f.useContext(Lj),o=f.useContext(Nd),l=f.useContext($j).reducedMotion,c=f.useRef();n=n||a.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:i,props:s,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;f.useInsertionEffect(()=>{d&&d.update(s,o)});const u=f.useRef(!!(s[Dj]&&!window.HandoffComplete));return up(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),f.useEffect(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}function yi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function PP(e,t,s){return f.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):yi(s)&&(s.current=n))},[t])}function No(e){return typeof e=="string"||Array.isArray(e)}function _d(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const fp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mp=["initial",...fp];function Cd(e){return _d(e.animate)||mp.some(t=>No(e[t]))}function Mj(e){return!!(Cd(e)||e.variants)}function AP(e,t){if(Cd(e)){const{initial:s,animate:n}=e;return{initial:s===!1||No(s)?s:void 0,animate:No(n)?n:void 0}}return e.inherit!==!1?t:{}}function RP(e){const{initial:t,animate:s}=AP(e,f.useContext(jd));return f.useMemo(()=>({initial:t,animate:s}),[Qx(t),Qx(s)])}function Qx(e){return Array.isArray(e)?e.join(" "):e}const Jx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},So={};for(const e in Jx)So[e]={isEnabled:t=>Jx[e].some(s=>!!t[s])};function OP(e){for(const t in e)So[t]={...So[t],...e[t]}}const pp=f.createContext({}),Ij=f.createContext({}),$P=Symbol.for("motionComponentSymbol");function LP({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:n,Component:i}){e&&OP(e);function a(l,c){let d;const u={...f.useContext($j),...l,layoutId:DP(l)},{isStatic:h}=u,m=RP(l),x=n(l,h);if(!h&&Sd){m.visualElement=TP(i,x,u,t);const v=f.useContext(Ij),g=f.useContext(Lj).strict;m.visualElement&&(d=m.visualElement.loadFeatures(u,g,e,v))}return f.createElement(jd.Provider,{value:m},d&&m.visualElement?f.createElement(d,{visualElement:m.visualElement,...u}):null,s(i,l,PP(x,m.visualElement,c),x,h,m.visualElement))}const o=f.forwardRef(a);return o[$P]=i,o}function DP({layoutId:e}){const t=f.useContext(pp).id;return t&&e!==void 0?t+"-"+e:e}function MP(e){function t(n,i={}){return LP(e(n,i))}if(typeof Proxy>"u")return t;const s=new Map;return new Proxy(t,{get:(n,i)=>(s.has(i)||s.set(i,t(i)),s.get(i))})}const IP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xp(e){return typeof e!="string"||e.includes("-")?!1:!!(IP.indexOf(e)>-1||/[A-Z]/.test(e))}const $c={};function FP(e){Object.assign($c,e)}const zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qn=new Set(zo);function Fj(e,{layout:t,layoutId:s}){return qn.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!$c[e]||e==="opacity")}const Qt=e=>!!(e&&e.getVelocity),VP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BP=zo.length;function zP(e,{enableHardwareAcceleration:t=!0,allowTransformNone:s=!0},n,i){let a="";for(let o=0;o<BP;o++){const l=zo[o];if(e[l]!==void 0){const c=VP[l]||l;a+=`${c}(${e[l]}) `}}return t&&!e.z&&(a+="translateZ(0)"),a=a.trim(),i?a=i(e,n?"":a):s&&n&&(a="none"),a}const Vj=e=>t=>typeof t=="string"&&t.startsWith(e),Bj=Vj("--"),_f=Vj("var(--"),UP=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,HP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Zr=(e,t,s)=>Math.min(Math.max(s,e),t),Wn={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ua={...Wn,transform:e=>Zr(0,1,e)},yl={...Wn,default:1},Ha=e=>Math.round(e*1e5)/1e5,Ed=/(-)?([\d]*\.?[\d])+/g,zj=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,qP=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Uo(e){return typeof e=="string"}const Ho=e=>({test:t=>Uo(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Er=Ho("deg"),Us=Ho("%"),ce=Ho("px"),WP=Ho("vh"),GP=Ho("vw"),Xx={...Us,parse:e=>Us.parse(e)/100,transform:e=>Us.transform(e*100)},Zx={...Wn,transform:Math.round},Uj={borderWidth:ce,borderTopWidth:ce,borderRightWidth:ce,borderBottomWidth:ce,borderLeftWidth:ce,borderRadius:ce,radius:ce,borderTopLeftRadius:ce,borderTopRightRadius:ce,borderBottomRightRadius:ce,borderBottomLeftRadius:ce,width:ce,maxWidth:ce,height:ce,maxHeight:ce,size:ce,top:ce,right:ce,bottom:ce,left:ce,padding:ce,paddingTop:ce,paddingRight:ce,paddingBottom:ce,paddingLeft:ce,margin:ce,marginTop:ce,marginRight:ce,marginBottom:ce,marginLeft:ce,rotate:Er,rotateX:Er,rotateY:Er,rotateZ:Er,scale:yl,scaleX:yl,scaleY:yl,scaleZ:yl,skew:Er,skewX:Er,skewY:Er,distance:ce,translateX:ce,translateY:ce,translateZ:ce,x:ce,y:ce,z:ce,perspective:ce,transformPerspective:ce,opacity:Ua,originX:Xx,originY:Xx,originZ:ce,zIndex:Zx,fillOpacity:Ua,strokeOpacity:Ua,numOctaves:Zx};function gp(e,t,s,n){const{style:i,vars:a,transform:o,transformOrigin:l}=e;let c=!1,d=!1,u=!0;for(const h in t){const m=t[h];if(Bj(h)){a[h]=m;continue}const x=Uj[h],v=HP(m,x);if(qn.has(h)){if(c=!0,o[h]=v,!u)continue;m!==(x.default||0)&&(u=!1)}else h.startsWith("origin")?(d=!0,l[h]=v):i[h]=v}if(t.transform||(c||n?i.transform=zP(e.transform,s,u,n):i.transform&&(i.transform="none")),d){const{originX:h="50%",originY:m="50%",originZ:x=0}=l;i.transformOrigin=`${h} ${m} ${x}`}}const yp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Hj(e,t,s){for(const n in t)!Qt(t[n])&&!Fj(n,s)&&(e[n]=t[n])}function KP({transformTemplate:e},t,s){return f.useMemo(()=>{const n=yp();return gp(n,t,{enableHardwareAcceleration:!s},e),Object.assign({},n.vars,n.style)},[t])}function YP(e,t,s){const n=e.style||{},i={};return Hj(i,n,e),Object.assign(i,KP(e,t,s)),e.transformValues?e.transformValues(i):i}function QP(e,t,s){const n={},i=YP(e,t,s);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const JP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||JP.has(e)}let qj=e=>!Lc(e);function XP(e){e&&(qj=t=>t.startsWith("on")?!Lc(t):e(t))}try{XP(require("@emotion/is-prop-valid").default)}catch{}function ZP(e,t,s){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(qj(i)||s===!0&&Lc(i)||!t&&!Lc(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}function eg(e,t,s){return typeof e=="string"?e:ce.transform(t+s*e)}function e5(e,t,s){const n=eg(t,e.x,e.width),i=eg(s,e.y,e.height);return`${n} ${i}`}const t5={offset:"stroke-dashoffset",array:"stroke-dasharray"},s5={offset:"strokeDashoffset",array:"strokeDasharray"};function r5(e,t,s=1,n=0,i=!0){e.pathLength=1;const a=i?t5:s5;e[a.offset]=ce.transform(-n);const o=ce.transform(t),l=ce.transform(s);e[a.array]=`${o} ${l}`}function vp(e,{attrX:t,attrY:s,attrScale:n,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,h,m){if(gp(e,d,u,m),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:x,style:v,dimensions:g}=e;x.transform&&(g&&(v.transform=x.transform),delete x.transform),g&&(i!==void 0||a!==void 0||v.transform)&&(v.transformOrigin=e5(g,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(x.x=t),s!==void 0&&(x.y=s),n!==void 0&&(x.scale=n),o!==void 0&&r5(x,o,l,c,!1)}const Wj=()=>({...yp(),attrs:{}}),wp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function n5(e,t,s,n){const i=f.useMemo(()=>{const a=Wj();return vp(a,t,{enableHardwareAcceleration:!1},wp(n),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};Hj(a,e.style,e),i.style={...a,...i.style}}return i}function i5(e=!1){return(s,n,i,{latestValues:a},o)=>{const c=(xp(s)?n5:QP)(n,a,o,s),u={...ZP(n,typeof s=="string",e),...c,ref:i},{children:h}=n,m=f.useMemo(()=>Qt(h)?h.get():h,[h]);return f.createElement(s,{...u,children:m})}}function Gj(e,{style:t,vars:s},n,i){Object.assign(e.style,t,i&&i.getProjectionStyles(n));for(const a in s)e.style.setProperty(a,s[a])}const Kj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Yj(e,t,s,n){Gj(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(Kj.has(i)?i:hp(i),t.attrs[i])}function bp(e,t){const{style:s}=e,n={};for(const i in s)(Qt(s[i])||t.style&&Qt(t.style[i])||Fj(i,e))&&(n[i]=s[i]);return n}function Qj(e,t){const s=bp(e,t);for(const n in e)if(Qt(e[n])||Qt(t[n])){const i=zo.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[i]=e[n]}return s}function jp(e,t,s,n={},i={}){return typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,i)),t}function Jj(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const Dc=e=>Array.isArray(e),a5=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),o5=e=>Dc(e)?e[e.length-1]||0:e;function Zl(e){const t=Qt(e)?e.get():e;return a5(t)?t.toValue():t}function l5({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:s},n,i,a){const o={latestValues:c5(n,i,a,e),renderState:t()};return s&&(o.mount=l=>s(n,l,o)),o}const Xj=e=>(t,s)=>{const n=f.useContext(jd),i=f.useContext(Nd),a=()=>l5(e,t,n,i);return s?a():Jj(a)};function c5(e,t,s,n){const i={},a=n(e,{});for(const m in a)i[m]=Zl(a[m]);let{initial:o,animate:l}=e;const c=Cd(e),d=Mj(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!_d(h)&&(Array.isArray(h)?h:[h]).forEach(x=>{const v=jp(e,x);if(!v)return;const{transitionEnd:g,transition:w,...p}=v;for(const y in p){let b=p[y];if(Array.isArray(b)){const j=u?b.length-1:0;b=b[j]}b!==null&&(i[y]=b)}for(const y in g)i[y]=g[y]}),i}const Xe=e=>e;class tg{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const s=this.order.indexOf(t);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function d5(e){let t=new tg,s=new tg,n=0,i=!1,a=!1;const o=new WeakSet,l={schedule:(c,d=!1,u=!1)=>{const h=u&&i,m=h?t:s;return d&&o.add(c),m.add(c)&&h&&i&&(n=t.order.length),c},cancel:c=>{s.remove(c),o.delete(c)},process:c=>{if(i){a=!0;return}if(i=!0,[t,s]=[s,t],s.clear(),n=t.order.length,n)for(let d=0;d<n;d++){const u=t.order[d];u(c),o.has(u)&&(l.schedule(u),e())}i=!1,a&&(a=!1,l.process(c))}};return l}const vl=["prepare","read","update","preRender","render","postRender"],u5=40;function h5(e,t){let s=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=vl.reduce((h,m)=>(h[m]=d5(()=>s=!0),h),{}),o=h=>a[h].process(i),l=()=>{const h=performance.now();s=!1,i.delta=n?1e3/60:Math.max(Math.min(h-i.timestamp,u5),1),i.timestamp=h,i.isProcessing=!0,vl.forEach(o),i.isProcessing=!1,s&&t&&(n=!1,e(l))},c=()=>{s=!0,n=!0,i.isProcessing||e(l)};return{schedule:vl.reduce((h,m)=>{const x=a[m];return h[m]=(v,g=!1,w=!1)=>(s||c(),x.schedule(v,g,w)),h},{}),cancel:h=>vl.forEach(m=>a[m].cancel(h)),state:i,steps:a}}const{schedule:De,cancel:xr,state:wt,steps:Ru}=h5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xe,!0),f5={useVisualState:Xj({scrapeMotionValuesFromProps:Qj,createRenderState:Wj,onMount:(e,t,{renderState:s,latestValues:n})=>{De.read(()=>{try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),De.render(()=>{vp(s,n,{enableHardwareAcceleration:!1},wp(t.tagName),e.transformTemplate),Yj(t,s)})}})},m5={useVisualState:Xj({scrapeMotionValuesFromProps:bp,createRenderState:yp})};function p5(e,{forwardMotionProps:t=!1},s,n){return{...xp(e)?f5:m5,preloadedFeatures:s,useRender:i5(t),createVisualElement:n,Component:e}}function or(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}const Zj=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function kd(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const x5=e=>t=>Zj(t)&&e(t,kd(t));function dr(e,t,s,n){return or(e,t,x5(s),n)}const g5=(e,t)=>s=>t(e(s)),Yr=(...e)=>e.reduce(g5);function e1(e){let t=null;return()=>{const s=()=>{t=null};return t===null?(t=e,s):!1}}const sg=e1("dragHorizontal"),rg=e1("dragVertical");function t1(e){let t=!1;if(e==="y")t=rg();else if(e==="x")t=sg();else{const s=sg(),n=rg();s&&n?t=()=>{s(),n()}:(s&&s(),n&&n())}return t}function s1(){const e=t1(!0);return e?(e(),!1):!0}class cn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function ng(e,t){const s="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),i=(a,o)=>{if(a.pointerType==="touch"||s1())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&De.update(()=>l[n](a,o))};return dr(e.current,s,i,{passive:!e.getProps()[n]})}class y5 extends cn{mount(){this.unmount=Yr(ng(this.node,!0),ng(this.node,!1))}unmount(){}}class v5 extends cn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yr(or(this.node.current,"focus",()=>this.onFocus()),or(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const r1=(e,t)=>t?e===t?!0:r1(e,t.parentElement):!1;function Ou(e,t){if(!t)return;const s=new PointerEvent("pointer"+e);t(s,kd(s))}class w5 extends cn{constructor(){super(...arguments),this.removeStartListeners=Xe,this.removeEndListeners=Xe,this.removeAccessibleListeners=Xe,this.startPointerPress=(t,s)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),a=dr(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:h}=this.node.getProps();De.update(()=>{!h&&!r1(this.node.current,l.target)?u&&u(l,c):d&&d(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),o=dr(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Yr(a,o),this.startPress(t,s)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Ou("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&De.update(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=or(this.node.current,"keyup",o),Ou("down",(l,c)=>{this.startPress(l,c)})},s=or(this.node.current,"keydown",t),n=()=>{this.isPressing&&Ou("cancel",(a,o)=>this.cancelPress(a,o))},i=or(this.node.current,"blur",n);this.removeAccessibleListeners=Yr(s,i)}}startPress(t,s){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&De.update(()=>n(t,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!s1()}cancelPress(t,s){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&De.update(()=>n(t,s))}mount(){const t=this.node.getProps(),s=dr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=or(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Yr(s,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Cf=new WeakMap,$u=new WeakMap,b5=e=>{const t=Cf.get(e.target);t&&t(e)},j5=e=>{e.forEach(b5)};function N5({root:e,...t}){const s=e||document;$u.has(s)||$u.set(s,{});const n=$u.get(s),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(j5,{root:e,...t})),n[i]}function S5(e,t,s){const n=N5(t);return Cf.set(e,s),n.observe(e),()=>{Cf.delete(e),n.unobserve(e)}}const _5={some:0,all:1};class C5 extends cn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:i="some",once:a}=t,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:_5[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(c)};return S5(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(E5(t,s))&&this.startObserver()}unmount(){}}function E5({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const k5={inView:{Feature:C5},tap:{Feature:w5},focus:{Feature:v5},hover:{Feature:y5}};function n1(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}function T5(e){const t={};return e.values.forEach((s,n)=>t[n]=s.get()),t}function P5(e){const t={};return e.values.forEach((s,n)=>t[n]=s.getVelocity()),t}function Td(e,t,s){const n=e.getProps();return jp(n,t,s!==void 0?s:n.custom,T5(e),P5(e))}let A5=Xe,Np=Xe;const Qr=e=>e*1e3,ur=e=>e/1e3,R5={current:!1},i1=e=>Array.isArray(e)&&typeof e[0]=="number";function a1(e){return!!(!e||typeof e=="string"&&o1[e]||i1(e)||Array.isArray(e)&&e.every(a1))}const Pa=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,o1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pa([0,.65,.55,1]),circOut:Pa([.55,0,1,.45]),backIn:Pa([.31,.01,.66,-.59]),backOut:Pa([.33,1.53,.69,.99])};function l1(e){if(e)return i1(e)?Pa(e):Array.isArray(e)?e.map(l1):o1[e]}function O5(e,t,s,{delay:n=0,duration:i,repeat:a=0,repeatType:o="loop",ease:l,times:c}={}){const d={[t]:s};c&&(d.offset=c);const u=l1(l);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:n,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function $5(e,{repeat:t,repeatType:s="loop"}){const n=t&&s!=="loop"&&t%2===1?0:e.length-1;return e[n]}const c1=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,L5=1e-7,D5=12;function M5(e,t,s,n,i){let a,o,l=0;do o=t+(s-t)/2,a=c1(o,n,i)-e,a>0?s=o:t=o;while(Math.abs(a)>L5&&++l<D5);return o}function qo(e,t,s,n){if(e===t&&s===n)return Xe;const i=a=>M5(a,0,1,e,s);return a=>a===0||a===1?a:c1(i(a),t,n)}const I5=qo(.42,0,1,1),F5=qo(0,0,.58,1),d1=qo(.42,0,.58,1),V5=e=>Array.isArray(e)&&typeof e[0]!="number",u1=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,h1=e=>t=>1-e(1-t),Sp=e=>1-Math.sin(Math.acos(e)),f1=h1(Sp),B5=u1(Sp),m1=qo(.33,1.53,.69,.99),_p=h1(m1),z5=u1(_p),U5=e=>(e*=2)<1?.5*_p(e):.5*(2-Math.pow(2,-10*(e-1))),H5={linear:Xe,easeIn:I5,easeInOut:d1,easeOut:F5,circIn:Sp,circInOut:B5,circOut:f1,backIn:_p,backInOut:z5,backOut:m1,anticipate:U5},ig=e=>{if(Array.isArray(e)){Np(e.length===4);const[t,s,n,i]=e;return qo(t,s,n,i)}else if(typeof e=="string")return H5[e];return e},Cp=(e,t)=>s=>!!(Uo(s)&&qP.test(s)&&s.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(s,t)),p1=(e,t,s)=>n=>{if(!Uo(n))return n;const[i,a,o,l]=n.match(Ed);return{[e]:parseFloat(i),[t]:parseFloat(a),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},q5=e=>Zr(0,255,e),Lu={...Wn,transform:e=>Math.round(q5(e))},Cn={test:Cp("rgb","red"),parse:p1("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+Lu.transform(e)+", "+Lu.transform(t)+", "+Lu.transform(s)+", "+Ha(Ua.transform(n))+")"};function W5(e){let t="",s="",n="",i="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,s+=s,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Ef={test:Cp("#"),parse:W5,transform:Cn.transform},vi={test:Cp("hsl","hue"),parse:p1("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+Us.transform(Ha(t))+", "+Us.transform(Ha(s))+", "+Ha(Ua.transform(n))+")"},Tt={test:e=>Cn.test(e)||Ef.test(e)||vi.test(e),parse:e=>Cn.test(e)?Cn.parse(e):vi.test(e)?vi.parse(e):Ef.parse(e),transform:e=>Uo(e)?e:e.hasOwnProperty("red")?Cn.transform(e):vi.transform(e)},We=(e,t,s)=>-s*e+s*t+e;function Du(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function G5({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let i=0,a=0,o=0;if(!t)i=a=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;i=Du(c,l,e+1/3),a=Du(c,l,e),o=Du(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}const Mu=(e,t,s)=>{const n=e*e;return Math.sqrt(Math.max(0,s*(t*t-n)+n))},K5=[Ef,Cn,vi],Y5=e=>K5.find(t=>t.test(e));function ag(e){const t=Y5(e);let s=t.parse(e);return t===vi&&(s=G5(s)),s}const x1=(e,t)=>{const s=ag(e),n=ag(t),i={...s};return a=>(i.red=Mu(s.red,n.red,a),i.green=Mu(s.green,n.green,a),i.blue=Mu(s.blue,n.blue,a),i.alpha=We(s.alpha,n.alpha,a),Cn.transform(i))};function Q5(e){var t,s;return isNaN(e)&&Uo(e)&&(((t=e.match(Ed))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(zj))===null||s===void 0?void 0:s.length)||0)>0}const g1={regex:UP,countKey:"Vars",token:"${v}",parse:Xe},y1={regex:zj,countKey:"Colors",token:"${c}",parse:Tt.parse},v1={regex:Ed,countKey:"Numbers",token:"${n}",parse:Wn.parse};function Iu(e,{regex:t,countKey:s,token:n,parse:i}){const a=e.tokenised.match(t);a&&(e["num"+s]=a.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...a.map(i)))}function Mc(e){const t=e.toString(),s={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&Iu(s,g1),Iu(s,y1),Iu(s,v1),s}function w1(e){return Mc(e).values}function b1(e){const{values:t,numColors:s,numVars:n,tokenised:i}=Mc(e),a=t.length;return o=>{let l=i;for(let c=0;c<a;c++)c<n?l=l.replace(g1.token,o[c]):c<n+s?l=l.replace(y1.token,Tt.transform(o[c])):l=l.replace(v1.token,Ha(o[c]));return l}}const J5=e=>typeof e=="number"?0:e;function X5(e){const t=w1(e);return b1(e)(t.map(J5))}const en={test:Q5,parse:w1,createTransformer:b1,getAnimatableNone:X5},j1=(e,t)=>s=>`${s>0?t:e}`;function N1(e,t){return typeof e=="number"?s=>We(e,t,s):Tt.test(e)?x1(e,t):e.startsWith("var(")?j1(e,t):_1(e,t)}const S1=(e,t)=>{const s=[...e],n=s.length,i=e.map((a,o)=>N1(a,t[o]));return a=>{for(let o=0;o<n;o++)s[o]=i[o](a);return s}},Z5=(e,t)=>{const s={...e,...t},n={};for(const i in s)e[i]!==void 0&&t[i]!==void 0&&(n[i]=N1(e[i],t[i]));return i=>{for(const a in n)s[a]=n[a](i);return s}},_1=(e,t)=>{const s=en.createTransformer(t),n=Mc(e),i=Mc(t);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?Yr(S1(n.values,i.values),s):j1(e,t)},_o=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n},og=(e,t)=>s=>We(e,t,s);function eA(e){return typeof e=="number"?og:typeof e=="string"?Tt.test(e)?x1:_1:Array.isArray(e)?S1:typeof e=="object"?Z5:og}function tA(e,t,s){const n=[],i=s||eA(e[0]),a=e.length-1;for(let o=0;o<a;o++){let l=i(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Xe:t;l=Yr(c,l)}n.push(l)}return n}function C1(e,t,{clamp:s=!0,ease:n,mixer:i}={}){const a=e.length;if(Np(a===t.length),a===1)return()=>t[0];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=tA(t,n,i),l=o.length,c=d=>{let u=0;if(l>1)for(;u<e.length-2&&!(d<e[u+1]);u++);const h=_o(e[u],e[u+1],d);return o[u](h)};return s?d=>c(Zr(e[0],e[a-1],d)):c}function sA(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const i=_o(0,t,n);e.push(We(s,1,i))}}function rA(e){const t=[0];return sA(t,e.length-1),t}function nA(e,t){return e.map(s=>s*t)}function iA(e,t){return e.map(()=>t||d1).splice(0,e.length-1)}function Ic({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const i=V5(n)?n.map(ig):ig(n),a={done:!1,value:t[0]},o=nA(s&&s.length===t.length?s:rA(t),e),l=C1(o,t,{ease:Array.isArray(i)?i:iA(t,i)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}function E1(e,t){return t?e*(1e3/t):0}const aA=5;function k1(e,t,s){const n=Math.max(t-aA,0);return E1(s-e(n),t-n)}const Fu=.001,oA=.01,lg=10,lA=.05,cA=1;function dA({duration:e=800,bounce:t=.25,velocity:s=0,mass:n=1}){let i,a;A5(e<=Qr(lg));let o=1-t;o=Zr(lA,cA,o),e=Zr(oA,lg,ur(e)),o<1?(i=d=>{const u=d*o,h=u*e,m=u-s,x=kf(d,o),v=Math.exp(-h);return Fu-m/x*v},a=d=>{const h=d*o*e,m=h*s+s,x=Math.pow(o,2)*Math.pow(d,2)*e,v=Math.exp(-h),g=kf(Math.pow(d,2),o);return(-i(d)+Fu>0?-1:1)*((m-x)*v)/g}):(i=d=>{const u=Math.exp(-d*e),h=(d-s)*e+1;return-Fu+u*h},a=d=>{const u=Math.exp(-d*e),h=(s-d)*(e*e);return u*h});const l=5/e,c=hA(i,a,l);if(e=Qr(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:e}}}const uA=12;function hA(e,t,s){let n=s;for(let i=1;i<uA;i++)n=n-e(n)/t(n);return n}function kf(e,t){return e*Math.sqrt(1-t*t)}const fA=["duration","bounce"],mA=["stiffness","damping","mass"];function cg(e,t){return t.some(s=>e[s]!==void 0)}function pA(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!cg(e,mA)&&cg(e,fA)){const s=dA(e);t={...t,...s,mass:1},t.isResolvedFromDuration=!0}return t}function T1({keyframes:e,restDelta:t,restSpeed:s,...n}){const i=e[0],a=e[e.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=pA({...n,velocity:-ur(n.velocity||0)}),x=h||0,v=c/(2*Math.sqrt(l*d)),g=a-i,w=ur(Math.sqrt(l/d)),p=Math.abs(g)<5;s||(s=p?.01:2),t||(t=p?.005:.5);let y;if(v<1){const b=kf(w,v);y=j=>{const S=Math.exp(-v*w*j);return a-S*((x+v*w*g)/b*Math.sin(b*j)+g*Math.cos(b*j))}}else if(v===1)y=b=>a-Math.exp(-w*b)*(g+(x+w*g)*b);else{const b=w*Math.sqrt(v*v-1);y=j=>{const S=Math.exp(-v*w*j),R=Math.min(b*j,300);return a-S*((x+v*w*g)*Math.sinh(R)+b*g*Math.cosh(R))/b}}return{calculatedDuration:m&&u||null,next:b=>{const j=y(b);if(m)o.done=b>=u;else{let S=x;b!==0&&(v<1?S=k1(y,b,j):S=0);const R=Math.abs(S)<=s,E=Math.abs(a-j)<=t;o.done=R&&E}return o.value=o.done?a:j,o}}}function dg({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],m={done:!1,value:h},x=_=>l!==void 0&&_<l||c!==void 0&&_>c,v=_=>l===void 0?c:c===void 0||Math.abs(l-_)<Math.abs(c-_)?l:c;let g=s*t;const w=h+g,p=o===void 0?w:o(w);p!==w&&(g=p-h);const y=_=>-g*Math.exp(-_/n),b=_=>p+y(_),j=_=>{const A=y(_),P=b(_);m.done=Math.abs(A)<=d,m.value=m.done?p:P};let S,R;const E=_=>{x(m.value)&&(S=_,R=T1({keyframes:[m.value,v(m.value)],velocity:k1(b,_,m.value),damping:i,stiffness:a,restDelta:d,restSpeed:u}))};return E(0),{calculatedDuration:null,next:_=>{let A=!1;return!R&&S===void 0&&(A=!0,j(_),E(_)),S!==void 0&&_>S?R.next(_-S):(!A&&j(_),m)}}}const xA=e=>{const t=({timestamp:s})=>e(s);return{start:()=>De.update(t,!0),stop:()=>xr(t),now:()=>wt.isProcessing?wt.timestamp:performance.now()}},ug=2e4;function hg(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<ug;)t+=s,n=e.next(t);return t>=ug?1/0:t}const gA={decay:dg,inertia:dg,tween:Ic,keyframes:Ic,spring:T1};function Fc({autoplay:e=!0,delay:t=0,driver:s=xA,keyframes:n,type:i="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:u,onUpdate:h,...m}){let x=1,v=!1,g,w;const p=()=>{w=new Promise(D=>{g=D})};p();let y;const b=gA[i]||Ic;let j;b!==Ic&&typeof n[0]!="number"&&(j=C1([0,100],n,{clamp:!1}),n=[0,100]);const S=b({...m,keyframes:n});let R;l==="mirror"&&(R=b({...m,keyframes:[...n].reverse(),velocity:-(m.velocity||0)}));let E="idle",_=null,A=null,P=null;S.calculatedDuration===null&&a&&(S.calculatedDuration=hg(S));const{calculatedDuration:O}=S;let k=1/0,$=1/0;O!==null&&(k=O+o,$=k*(a+1)-o);let N=0;const C=D=>{if(A===null)return;x>0&&(A=Math.min(A,D)),x<0&&(A=Math.min(D-$/x,A)),_!==null?N=_:N=Math.round(D-A)*x;const J=N-t*(x>=0?1:-1),ne=x>=0?J<0:J>$;N=Math.max(J,0),E==="finished"&&_===null&&(N=$);let re=N,je=S;if(a){const B=Math.min(N,$)/k;let X=Math.floor(B),ae=B%1;!ae&&B>=1&&(ae=1),ae===1&&X--,X=Math.min(X,a+1),!!(X%2)&&(l==="reverse"?(ae=1-ae,o&&(ae-=o/k)):l==="mirror"&&(je=R)),re=Zr(0,1,ae)*k}const pe=ne?{done:!1,value:n[0]}:je.next(re);j&&(pe.value=j(pe.value));let{done:le}=pe;!ne&&O!==null&&(le=x>=0?N>=$:N<=0);const Ne=_===null&&(E==="finished"||E==="running"&&le);return h&&h(pe.value),Ne&&L(),pe},T=()=>{y&&y.stop(),y=void 0},V=()=>{E="idle",T(),g(),p(),A=P=null},L=()=>{E="finished",u&&u(),T(),g()},I=()=>{if(v)return;y||(y=s(C));const D=y.now();c&&c(),_!==null?A=D-_:(!A||E==="finished")&&(A=D),E==="finished"&&p(),P=A,_=null,E="running",y.start()};e&&I();const z={then(D,J){return w.then(D,J)},get time(){return ur(N)},set time(D){D=Qr(D),N=D,_!==null||!y||x===0?_=D:A=y.now()-D/x},get duration(){const D=S.calculatedDuration===null?hg(S):S.calculatedDuration;return ur(D)},get speed(){return x},set speed(D){D===x||!y||(x=D,z.time=ur(N))},get state(){return E},play:I,pause:()=>{E="paused",_=N},stop:()=>{v=!0,E!=="idle"&&(E="idle",d&&d(),V())},cancel:()=>{P!==null&&C(P),V()},complete:()=>{E="finished"},sample:D=>(A=0,C(D))};return z}function yA(e){let t;return()=>(t===void 0&&(t=e()),t)}const vA=yA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),wA=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),wl=10,bA=2e4,jA=(e,t)=>t.type==="spring"||e==="backgroundColor"||!a1(t.ease);function NA(e,t,{onUpdate:s,onComplete:n,...i}){if(!(vA()&&wA.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,l,c,d=!1;const u=()=>{c=new Promise(b=>{l=b})};u();let{keyframes:h,duration:m=300,ease:x,times:v}=i;if(jA(t,i)){const b=Fc({...i,repeat:0,delay:0});let j={done:!1,value:h[0]};const S=[];let R=0;for(;!j.done&&R<bA;)j=b.sample(R),S.push(j.value),R+=wl;v=void 0,h=S,m=R-wl,x="linear"}const g=O5(e.owner.current,t,h,{...i,duration:m,ease:x,times:v}),w=()=>{d=!1,g.cancel()},p=()=>{d=!0,De.update(w),l(),u()};return g.onfinish=()=>{d||(e.set($5(h,i)),n&&n(),p())},{then(b,j){return c.then(b,j)},attachTimeline(b){return g.timeline=b,g.onfinish=null,Xe},get time(){return ur(g.currentTime||0)},set time(b){g.currentTime=Qr(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return ur(m)},play:()=>{o||(g.play(),xr(w))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const j=Fc({...i,autoplay:!1});e.setWithVelocity(j.sample(b-wl).value,j.sample(b).value,wl)}p()},complete:()=>{d||g.finish()},cancel:p}}function SA({keyframes:e,delay:t,onUpdate:s,onComplete:n}){const i=()=>(s&&s(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Xe,pause:Xe,stop:Xe,then:a=>(a(),Promise.resolve()),cancel:Xe,complete:Xe});return t?Fc({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const _A={type:"spring",stiffness:500,damping:25,restSpeed:10},CA=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),EA={type:"keyframes",duration:.8},kA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TA=(e,{keyframes:t})=>t.length>2?EA:qn.has(e)?e.startsWith("scale")?CA(t[1]):_A:kA,Tf=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(en.test(t)||t==="0")&&!t.startsWith("url(")),PA=new Set(["brightness","contrast","saturate","opacity"]);function AA(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(Ed)||[];if(!n)return e;const i=s.replace(n,"");let a=PA.has(t)?1:0;return n!==s&&(a*=100),t+"("+a+i+")"}const RA=/([a-z-]*)\(.*?\)/g,Pf={...en,getAnimatableNone:e=>{const t=e.match(RA);return t?t.map(AA).join(" "):e}},OA={...Uj,color:Tt,backgroundColor:Tt,outlineColor:Tt,fill:Tt,stroke:Tt,borderColor:Tt,borderTopColor:Tt,borderRightColor:Tt,borderBottomColor:Tt,borderLeftColor:Tt,filter:Pf,WebkitFilter:Pf},Ep=e=>OA[e];function P1(e,t){let s=Ep(e);return s!==Pf&&(s=en),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const A1=e=>/^0[^.\s]+$/.test(e);function $A(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||A1(e)}function LA(e,t,s,n){const i=Tf(t,s);let a;Array.isArray(s)?a=[...s]:a=[null,s];const o=n.from!==void 0?n.from:e.get();let l;const c=[];for(let d=0;d<a.length;d++)a[d]===null&&(a[d]=d===0?o:a[d-1]),$A(a[d])&&c.push(d),typeof a[d]=="string"&&a[d]!=="none"&&a[d]!=="0"&&(l=a[d]);if(i&&c.length&&l)for(let d=0;d<c.length;d++){const u=c[d];a[u]=P1(t,l)}return a}function DA({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}function kp(e,t){return e[t]||e.default||e}const MA={skipAnimations:!1},Tp=(e,t,s,n={})=>i=>{const a=kp(n,e)||{},o=a.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Qr(o);const c=LA(t,e,s,a),d=c[0],u=c[c.length-1],h=Tf(e,d),m=Tf(e,u);let x={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...a,delay:-l,onUpdate:v=>{t.set(v),a.onUpdate&&a.onUpdate(v)},onComplete:()=>{i(),a.onComplete&&a.onComplete()}};if(DA(a)||(x={...x,...TA(e,x)}),x.duration&&(x.duration=Qr(x.duration)),x.repeatDelay&&(x.repeatDelay=Qr(x.repeatDelay)),!h||!m||R5.current||a.type===!1||MA.skipAnimations)return SA(x);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const v=NA(t,e,x);if(v)return v}return Fc(x)};function Vc(e){return!!(Qt(e)&&e.add)}const R1=e=>/^\-?\d*\.?\d+$/.test(e);function Pp(e,t){e.indexOf(t)===-1&&e.push(t)}function Ap(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class Rp{constructor(){this.subscriptions=[]}add(t){return Pp(this.subscriptions,t),()=>Ap(this.subscriptions,t)}notify(t,s,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,s,n);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const IA=e=>!isNaN(parseFloat(e));class FA{constructor(t,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,i=!0)=>{this.prev=this.current,this.current=n;const{delta:a,timestamp:o}=wt;this.lastUpdated!==o&&(this.timeDelta=a,this.lastUpdated=o,De.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>De.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=IA(this.current),this.owner=s.owner}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Rp);const n=this.events[t].add(s);return t==="change"?()=>{n(),De.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,n){this.set(s),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?E1(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zi(e,t){return new FA(e,t)}const O1=e=>t=>t.test(e),VA={test:e=>e==="auto",parse:e=>e},$1=[Wn,ce,Us,Er,GP,WP,VA],ya=e=>$1.find(O1(e)),BA=[...$1,Tt,en],zA=e=>BA.find(O1(e));function UA(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,zi(s))}function HA(e,t){const s=Td(e,t);let{transitionEnd:n={},transition:i={},...a}=s?e.makeTargetAnimatable(s,!1):{};a={...a,...n};for(const o in a){const l=o5(a[o]);UA(e,o,l)}}function qA(e,t,s){var n,i;const a=Object.keys(t).filter(l=>!e.hasValue(l)),o=a.length;if(o)for(let l=0;l<o;l++){const c=a[l],d=t[c];let u=null;Array.isArray(d)&&(u=d[0]),u===null&&(u=(i=(n=s[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&i!==void 0?i:t[c]),u!=null&&(typeof u=="string"&&(R1(u)||A1(u))?u=parseFloat(u):!zA(u)&&en.test(d)&&(u=P1(c,d)),e.addValue(c,zi(u,{owner:e})),s[c]===void 0&&(s[c]=u),u!==null&&e.setBaseTarget(c,u))}}function WA(e,t){return t?(t[e]||t.default||t).from:void 0}function GA(e,t,s){const n={};for(const i in e){const a=WA(i,t);if(a!==void 0)n[i]=a;else{const o=s.getValue(i);o&&(n[i]=o.get())}}return n}function KA({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function YA(e,t){const s=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}else return s!==t}function L1(e,t,{delay:s=0,transitionOverride:n,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(a=n);const d=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const m=e.getValue(h),x=l[h];if(!m||x===void 0||u&&KA(u,h))continue;const v={delay:s,elapsed:0,...kp(a||{},h)};if(window.HandoffAppearAnimations){const p=e.getProps()[Dj];if(p){const y=window.HandoffAppearAnimations(p,h,m,De);y!==null&&(v.elapsed=y,v.isHandoff=!0)}}let g=!v.isHandoff&&!YA(m,x);if(v.type==="spring"&&(m.getVelocity()||v.velocity)&&(g=!1),m.animation&&(g=!1),g)continue;m.start(Tp(h,m,x,e.shouldReduceMotion&&qn.has(h)?{type:!1}:v));const w=m.animation;Vc(c)&&(c.add(h),w.then(()=>c.remove(h))),d.push(w)}return o&&Promise.all(d).then(()=>{o&&HA(e,o)}),d}function Af(e,t,s={}){const n=Td(e,t,s.custom);let{transition:i=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(i=s.transitionOverride);const a=n?()=>Promise.all(L1(e,n,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=i;return QA(e,t,d+c,u,h,s)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>d())}else return Promise.all([a(),o(s.delay)])}function QA(e,t,s=0,n=0,i=1,a){const o=[],l=(e.variantChildren.size-1)*n,c=i===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(e.variantChildren).sort(JA).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(Af(d,t,{...a,delay:s+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function JA(e,t){return e.sortNodePosition(t)}function XA(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(a=>Af(e,a,s));n=Promise.all(i)}else if(typeof t=="string")n=Af(e,t,s);else{const i=typeof t=="function"?Td(e,t,s.custom):t;n=Promise.all(L1(e,i,s))}return n.then(()=>e.notify("AnimationComplete",t))}const ZA=[...fp].reverse(),eR=fp.length;function tR(e){return t=>Promise.all(t.map(({animation:s,options:n})=>XA(e,s,n)))}function sR(e){let t=tR(e);const s=nR();let n=!0;const i=(c,d)=>{const u=Td(e,d);if(u){const{transition:h,transitionEnd:m,...x}=u;c={...c,...x,...m}}return c};function a(c){t=c(e)}function o(c,d){const u=e.getProps(),h=e.getVariantContext(!0)||{},m=[],x=new Set;let v={},g=1/0;for(let p=0;p<eR;p++){const y=ZA[p],b=s[y],j=u[y]!==void 0?u[y]:h[y],S=No(j),R=y===d?b.isActive:null;R===!1&&(g=p);let E=j===h[y]&&j!==u[y]&&S;if(E&&n&&e.manuallyAnimateOnMount&&(E=!1),b.protectedKeys={...v},!b.isActive&&R===null||!j&&!b.prevProp||_d(j)||typeof j=="boolean")continue;let A=rR(b.prevProp,j)||y===d&&b.isActive&&!E&&S||p>g&&S,P=!1;const O=Array.isArray(j)?j:[j];let k=O.reduce(i,{});R===!1&&(k={});const{prevResolvedValues:$={}}=b,N={...$,...k},C=T=>{A=!0,x.has(T)&&(P=!0,x.delete(T)),b.needsAnimating[T]=!0};for(const T in N){const V=k[T],L=$[T];if(v.hasOwnProperty(T))continue;let I=!1;Dc(V)&&Dc(L)?I=!n1(V,L):I=V!==L,I?V!==void 0?C(T):x.add(T):V!==void 0&&x.has(T)?C(T):b.protectedKeys[T]=!0}b.prevProp=j,b.prevResolvedValues=k,b.isActive&&(v={...v,...k}),n&&e.blockInitialAnimation&&(A=!1),A&&(!E||P)&&m.push(...O.map(T=>({animation:T,options:{type:y,...c}})))}if(x.size){const p={};x.forEach(y=>{const b=e.getBaseTarget(y);b!==void 0&&(p[y]=b)}),m.push({animation:p})}let w=!!m.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(m):Promise.resolve()}function l(c,d,u){var h;if(s[c].isActive===d)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(x=>{var v;return(v=x.animationState)===null||v===void 0?void 0:v.setActive(c,d)}),s[c].isActive=d;const m=o(u,c);for(const x in s)s[x].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>s}}function rR(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!n1(t,e):!1}function un(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nR(){return{animate:un(!0),whileInView:un(),whileHover:un(),whileTap:un(),whileDrag:un(),whileFocus:un(),exit:un()}}class iR extends cn{constructor(t){super(t),t.animationState||(t.animationState=sR(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),_d(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let aR=0;class oR extends cn{constructor(){super(...arguments),this.id=aR++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const a=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});s&&!t&&a.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const lR={animation:{Feature:iR},exit:{Feature:oR}},fg=(e,t)=>Math.abs(e-t);function cR(e,t){const s=fg(e.x,t.x),n=fg(e.y,t.y);return Math.sqrt(s**2+n**2)}class D1{constructor(t,s,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Bu(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,x=cR(h.offset,{x:0,y:0})>=3;if(!m&&!x)return;const{point:v}=h,{timestamp:g}=wt;this.history.push({...v,timestamp:g});const{onStart:w,onMove:p}=this.handlers;m||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Vu(m,this.transformPagePoint),De.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:x,onSessionEnd:v,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Bu(h.type==="pointercancel"?this.lastMoveEventInfo:Vu(m,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,w),v&&v(h,w)},!Zj(t))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=n,this.contextWindow=i||window;const o=kd(t),l=Vu(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=wt;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=s;u&&u(t,Bu(l,this.history)),this.removeListeners=Yr(dr(this.contextWindow,"pointermove",this.handlePointerMove),dr(this.contextWindow,"pointerup",this.handlePointerUp),dr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),xr(this.updatePoint)}}function Vu(e,t){return t?{point:t(e.point)}:e}function mg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Bu({point:e},t){return{point:e,delta:mg(e,M1(t)),offset:mg(e,dR(t)),velocity:uR(t,.1)}}function dR(e){return e[0]}function M1(e){return e[e.length-1]}function uR(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const i=M1(e);for(;s>=0&&(n=e[s],!(i.timestamp-n.timestamp>Qr(t)));)s--;if(!n)return{x:0,y:0};const a=ur(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ns(e){return e.max-e.min}function Rf(e,t=0,s=.01){return Math.abs(e-t)<=s}function pg(e,t,s,n=.5){e.origin=n,e.originPoint=We(t.min,t.max,e.origin),e.scale=ns(s)/ns(t),(Rf(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=We(s.min,s.max,e.origin)-e.originPoint,(Rf(e.translate)||isNaN(e.translate))&&(e.translate=0)}function qa(e,t,s,n){pg(e.x,t.x,s.x,n?n.originX:void 0),pg(e.y,t.y,s.y,n?n.originY:void 0)}function xg(e,t,s){e.min=s.min+t.min,e.max=e.min+ns(t)}function hR(e,t,s){xg(e.x,t.x,s.x),xg(e.y,t.y,s.y)}function gg(e,t,s){e.min=t.min-s.min,e.max=e.min+ns(t)}function Wa(e,t,s){gg(e.x,t.x,s.x),gg(e.y,t.y,s.y)}function fR(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?We(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?We(s,e,n.max):Math.min(e,s)),e}function yg(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function mR(e,{top:t,left:s,bottom:n,right:i}){return{x:yg(e.x,s,i),y:yg(e.y,t,n)}}function vg(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function pR(e,t){return{x:vg(e.x,t.x),y:vg(e.y,t.y)}}function xR(e,t){let s=.5;const n=ns(e),i=ns(t);return i>n?s=_o(t.min,t.max-n,e.min):n>i&&(s=_o(e.min,e.max-i,t.min)),Zr(0,1,s)}function gR(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Of=.35;function yR(e=Of){return e===!1?e=0:e===!0&&(e=Of),{x:wg(e,"left","right"),y:wg(e,"top","bottom")}}function wg(e,t,s){return{min:bg(e,t),max:bg(e,s)}}function bg(e,t){return typeof e=="number"?e:e[t]||0}const jg=()=>({translate:0,scale:1,origin:0,originPoint:0}),wi=()=>({x:jg(),y:jg()}),Ng=()=>({min:0,max:0}),et=()=>({x:Ng(),y:Ng()});function ls(e){return[e("x"),e("y")]}function I1({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function vR({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function wR(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function zu(e){return e===void 0||e===1}function $f({scale:e,scaleX:t,scaleY:s}){return!zu(e)||!zu(t)||!zu(s)}function xn(e){return $f(e)||F1(e)||e.z||e.rotate||e.rotateX||e.rotateY}function F1(e){return Sg(e.x)||Sg(e.y)}function Sg(e){return e&&e!=="0%"}function Bc(e,t,s){const n=e-s,i=t*n;return s+i}function _g(e,t,s,n,i){return i!==void 0&&(e=Bc(e,i,n)),Bc(e,s,n)+t}function Lf(e,t=0,s=1,n,i){e.min=_g(e.min,t,s,n,i),e.max=_g(e.max,t,s,n,i)}function V1(e,{x:t,y:s}){Lf(e.x,t.translate,t.scale,t.originPoint),Lf(e.y,s.translate,s.scale,s.originPoint)}function bR(e,t,s,n=!1){const i=s.length;if(!i)return;t.x=t.y=1;let a,o;for(let l=0;l<i;l++){a=s[l],o=a.projectionDelta;const c=a.instance;c&&c.style&&c.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&bi(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,V1(e,o)),n&&xn(a.latestValues)&&bi(e,a.latestValues))}t.x=Cg(t.x),t.y=Cg(t.y)}function Cg(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Rr(e,t){e.min=e.min+t,e.max=e.max+t}function Eg(e,t,[s,n,i]){const a=t[i]!==void 0?t[i]:.5,o=We(e.min,e.max,a);Lf(e,t[s],t[n],o,t.scale)}const jR=["x","scaleX","originX"],NR=["y","scaleY","originY"];function bi(e,t){Eg(e.x,t,jR),Eg(e.y,t,NR)}function B1(e,t){return I1(wR(e.getBoundingClientRect(),t))}function SR(e,t,s){const n=B1(e,s),{scroll:i}=t;return i&&(Rr(n.x,i.offset.x),Rr(n.y,i.offset.y)),n}const z1=({current:e})=>e?e.ownerDocument.defaultView:null,_R=new WeakMap;class CR{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=et(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(kd(u,"page").point)},a=(u,h)=>{const{drag:m,dragPropagation:x,onDragStart:v}=this.getProps();if(m&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=t1(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ls(w=>{let p=this.getAxisMotionValue(w).get()||0;if(Us.test(p)){const{projection:y}=this.visualElement;if(y&&y.layout){const b=y.layout.layoutBox[w];b&&(p=ns(b)*(parseFloat(p)/100))}}this.originPoint[w]=p}),v&&De.update(()=>v(u,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:x,onDirectionLock:v,onDrag:g}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:w}=h;if(x&&this.currentDirection===null){this.currentDirection=ER(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),g&&g(u,h)},l=(u,h)=>this.stop(u,h),c=()=>ls(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new D1(t,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:z1(this.visualElement)})}stop(t,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&De.update(()=>a(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:i}=this.getProps();if(!n||!bl(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=fR(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;s&&yi(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=mR(i.layoutBox,s):this.constraints=!1,this.elastic=yR(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ls(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=gR(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!yi(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=SR(n,i.root,this.visualElement.getTransformPagePoint());let o=pR(i.layout.layoutBox,a);if(s){const l=s(vR(o));this.hasMutatedConstraints=!!l,l&&(o=I1(l))}return o}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ls(u=>{if(!bl(u,s,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const m=i?200:1e6,x=i?40:1e7,v={type:"inertia",velocity:n?t[u]:0,bounceStiffness:m,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(u,v)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return n.start(Tp(t,n,0,s))}stopAnimation(){ls(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ls(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),i=n[s];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ls(s=>{const{drag:n}=this.getProps();if(!bl(s,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(s);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[s];a.set(t[s]-We(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!yi(s)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ls(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();i[o]=xR({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ls(o=>{if(!bl(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(We(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;_R.set(this.visualElement,this);const t=this.visualElement.current,s=dr(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();yi(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();const o=or(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ls(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),s(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=Of,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function bl(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function ER(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class kR extends cn{constructor(t){super(t),this.removeGroupControls=Xe,this.removeListeners=Xe,this.controls=new CR(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xe}unmount(){this.removeGroupControls(),this.removeListeners()}}const kg=e=>(t,s)=>{e&&De.update(()=>e(t,s))};class TR extends cn{constructor(){super(...arguments),this.removePointerDownListener=Xe}onPointerDown(t){this.session=new D1(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:z1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:kg(t),onStart:kg(s),onMove:n,onEnd:(a,o)=>{delete this.session,i&&De.update(()=>i(a,o))}}}mount(){this.removePointerDownListener=dr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function PR(){const e=f.useContext(Nd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:n}=e,i=f.useId();return f.useEffect(()=>n(i),[]),!t&&s?[!1,()=>s&&s(i)]:[!0]}const ec={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Tg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const va={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ce.test(e))e=parseFloat(e);else return e;const s=Tg(e,t.target.x),n=Tg(e,t.target.y);return`${s}% ${n}%`}},AR={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,i=en.parse(e);if(i.length>5)return n;const a=en.createTransformer(e),o=typeof i[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;i[0+o]/=l,i[1+o]/=c;const d=We(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}};class RR extends te.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=t;FP(OR),a&&(s.group&&s.group.add(a),n&&n.register&&i&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),ec.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:i,isPresent:a}=this.props,o=n.projection;return o&&(o.isPresent=a,i||t.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||De.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function U1(e){const[t,s]=PR(),n=f.useContext(pp);return te.createElement(RR,{...e,layoutGroup:n,switchLayoutGroup:f.useContext(Ij),isPresent:t,safeToRemove:s})}const OR={borderRadius:{...va,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:va,borderTopRightRadius:va,borderBottomLeftRadius:va,borderBottomRightRadius:va,boxShadow:AR},H1=["TopLeft","TopRight","BottomLeft","BottomRight"],$R=H1.length,Pg=e=>typeof e=="string"?parseFloat(e):e,Ag=e=>typeof e=="number"||ce.test(e);function LR(e,t,s,n,i,a){i?(e.opacity=We(0,s.opacity!==void 0?s.opacity:1,DR(n)),e.opacityExit=We(t.opacity!==void 0?t.opacity:1,0,MR(n))):a&&(e.opacity=We(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let o=0;o<$R;o++){const l=`border${H1[o]}Radius`;let c=Rg(t,l),d=Rg(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Ag(c)===Ag(d)?(e[l]=Math.max(We(Pg(c),Pg(d),n),0),(Us.test(d)||Us.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||s.rotate)&&(e.rotate=We(t.rotate||0,s.rotate||0,n))}function Rg(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const DR=q1(0,.5,f1),MR=q1(.5,.95,Xe);function q1(e,t,s){return n=>n<e?0:n>t?1:s(_o(e,t,n))}function Og(e,t){e.min=t.min,e.max=t.max}function os(e,t){Og(e.x,t.x),Og(e.y,t.y)}function $g(e,t,s,n,i){return e-=t,e=Bc(e,1/s,n),i!==void 0&&(e=Bc(e,1/i,n)),e}function IR(e,t=0,s=1,n=.5,i,a=e,o=e){if(Us.test(t)&&(t=parseFloat(t),t=We(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=We(a.min,a.max,n);e===a&&(l-=t),e.min=$g(e.min,t,s,l,i),e.max=$g(e.max,t,s,l,i)}function Lg(e,t,[s,n,i],a,o){IR(e,t[s],t[n],t[i],t.scale,a,o)}const FR=["x","scaleX","originX"],VR=["y","scaleY","originY"];function Dg(e,t,s,n){Lg(e.x,t,FR,s?s.x:void 0,n?n.x:void 0),Lg(e.y,t,VR,s?s.y:void 0,n?n.y:void 0)}function Mg(e){return e.translate===0&&e.scale===1}function W1(e){return Mg(e.x)&&Mg(e.y)}function BR(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function G1(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Ig(e){return ns(e.x)/ns(e.y)}class zR{constructor(){this.members=[]}add(t){Pp(this.members,t),t.scheduleRender()}remove(t){if(Ap(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(i=>t===i);if(s===0)return!1;let n;for(let i=s;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Fg(e,t,s){let n="";const i=e.x.translate/t.x,a=e.y.translate/t.y;if((i||a)&&(n=`translate3d(${i}px, ${a}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{rotate:c,rotateX:d,rotateY:u}=s;c&&(n+=`rotate(${c}deg) `),d&&(n+=`rotateX(${d}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const UR=(e,t)=>e.depth-t.depth;class HR{constructor(){this.children=[],this.isDirty=!1}add(t){Pp(this.children,t),this.isDirty=!0}remove(t){Ap(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(UR),this.isDirty=!1,this.children.forEach(t)}}function qR(e,t){const s=performance.now(),n=({timestamp:i})=>{const a=i-s;a>=t&&(xr(n),e(a-t))};return De.read(n,!0),()=>xr(n)}function WR(e){window.MotionDebug&&window.MotionDebug.record(e)}function GR(e){return e instanceof SVGElement&&e.tagName!=="svg"}function KR(e,t,s){const n=Qt(e)?e:zi(e);return n.start(Tp("",n,t,s)),n.animation}const Vg=["","X","Y","Z"],YR={visibility:"hidden"},Bg=1e3;let QR=0;const gn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function K1({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},l=t==null?void 0:t()){this.id=QR++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,gn.totalNodes=gn.resolvedTargetDeltas=gn.recalculatedProjection=0,this.nodes.forEach(ZR),this.nodes.forEach(n3),this.nodes.forEach(i3),this.nodes.forEach(e3),WR(gn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new HR)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Rp),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=GR(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let h;const m=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=qR(m,250),ec.hasAnimatedSinceResize&&(ec.hasAnimatedSinceResize=!1,this.nodes.forEach(Ug))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:x,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||d3,{onLayoutAnimationStart:w,onLayoutAnimationComplete:p}=u.getProps(),y=!this.targetLayout||!G1(this.targetLayout,v)||x,b=!m&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const j={...kp(g,"layout"),onPlay:w,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else m||Ug(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,xr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(a3),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zg);return}this.isUpdating||this.nodes.forEach(s3),this.isUpdating=!1,this.nodes.forEach(r3),this.nodes.forEach(JR),this.nodes.forEach(XR),this.clearAllSnapshots();const l=performance.now();wt.delta=Zr(0,1e3/60,l-wt.timestamp),wt.timestamp=l,wt.isProcessing=!0,Ru.update.process(wt),Ru.preRender.process(wt),Ru.render.process(wt),wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(t3),this.sharedNodes.forEach(o3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,De.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){De.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:s(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!W1(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||xn(this.latestValues)||u)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),u3(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return et();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Rr(l.x,c.offset.x),Rr(l.y,c.offset.y)),l}removeElementScroll(o){const l=et();os(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;if(d!==this.root&&u&&h.layoutScroll){if(u.isRoot){os(l,o);const{scroll:m}=this.root;m&&(Rr(l.x,-m.offset.x),Rr(l.y,-m.offset.y))}Rr(l.x,u.offset.x),Rr(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const c=et();os(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&bi(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),xn(u.latestValues)&&bi(c,u.latestValues)}return xn(this.latestValues)&&bi(c,this.latestValues),c}removeTransform(o){const l=et();os(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!xn(d.latestValues))continue;$f(d.latestValues)&&d.updateSnapshot();const u=et(),h=d.measurePageBox();os(u,h),Dg(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return xn(this.latestValues)&&Dg(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=wt.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=et(),this.relativeTargetOrigin=et(),Wa(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),os(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=et(),this.targetWithTransforms=et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):os(this.target,this.layout.layoutBox),V1(this.target,this.targetDelta)):os(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=et(),this.relativeTargetOrigin=et(),Wa(this.relativeTargetOrigin,this.target,x.target),os(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}gn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$f(this.parent.latestValues)||F1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===wt.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;os(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,x=this.treeScale.y;bR(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:v}=l;if(!v){this.projectionTransform&&(this.projectionDelta=wi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=wi(),this.projectionDeltaWithTransform=wi());const g=this.projectionTransform;qa(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=Fg(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==m||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),gn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=wi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=et(),x=c?c.source:void 0,v=this.layout?this.layout.source:void 0,g=x!==v,w=this.getStack(),p=!w||w.members.length<=1,y=!!(g&&!p&&this.options.crossfade===!0&&!this.path.some(c3));this.animationProgress=0;let b;this.mixTargetDelta=j=>{const S=j/1e3;Hg(h.x,o.x,S),Hg(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wa(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),l3(this.relativeTarget,this.relativeTargetOrigin,m,S),b&&BR(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=et()),os(b,this.relativeTarget)),g&&(this.animationValues=u,LR(u,d,this.latestValues,S,y,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(xr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=De.update(()=>{ec.hasAnimatedSinceResize=!0,this.currentAnimation=KR(0,Bg,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Bg),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Y1(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||et();const h=ns(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=ns(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}os(l,c),bi(l,u),qa(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new zR),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let u=0;u<Vg.length;u++){const h="rotate"+Vg[u];c[h]&&(d[h]=c[h],o.setStaticValue(h,0))}o.render();for(const u in d)o.setStaticValue(u,d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return YR;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Zl(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Zl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!xn(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=Fg(this.projectionDeltaWithTransform,this.treeScale,m),u&&(d.transform=u(m,d.transform));const{x,y:v}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${v.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const g in $c){if(m[g]===void 0)continue;const{correct:w,applyTo:p}=$c[g],y=d.transform==="none"?m[g]:w(m[g],h);if(p){const b=p.length;for(let j=0;j<b;j++)d[p[j]]=y}else d[g]=y}return this.options.layoutId&&(d.pointerEvents=h===this?Zl(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(zg),this.root.sharedNodes.clear()}}}function JR(e){e.updateLayout()}function XR(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:a}=e.options,o=s.source!==e.layout.source;a==="size"?ls(h=>{const m=o?s.measuredBox[h]:s.layoutBox[h],x=ns(m);m.min=n[h].min,m.max=m.min+x}):Y1(a,s.layoutBox,n)&&ls(h=>{const m=o?s.measuredBox[h]:s.layoutBox[h],x=ns(n[h]);m.max=m.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+x)});const l=wi();qa(l,n,s.layoutBox);const c=wi();o?qa(c,e.applyTransform(i,!0),s.measuredBox):qa(c,n,s.layoutBox);const d=!W1(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:x}=h;if(m&&x){const v=et();Wa(v,s.layoutBox,m.layoutBox);const g=et();Wa(g,n,x.layoutBox),G1(v,g)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function ZR(e){gn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function e3(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function t3(e){e.clearSnapshot()}function zg(e){e.clearMeasurements()}function s3(e){e.isLayoutDirty=!1}function r3(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ug(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function n3(e){e.resolveTargetDelta()}function i3(e){e.calcProjection()}function a3(e){e.resetRotation()}function o3(e){e.removeLeadSnapshot()}function Hg(e,t,s){e.translate=We(t.translate,0,s),e.scale=We(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function qg(e,t,s,n){e.min=We(t.min,s.min,n),e.max=We(t.max,s.max,n)}function l3(e,t,s,n){qg(e.x,t.x,s.x,n),qg(e.y,t.y,s.y,n)}function c3(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const d3={duration:.45,ease:[.4,0,.1,1]},Wg=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Gg=Wg("applewebkit/")&&!Wg("chrome/")?Math.round:Xe;function Kg(e){e.min=Gg(e.min),e.max=Gg(e.max)}function u3(e){Kg(e.x),Kg(e.y)}function Y1(e,t,s){return e==="position"||e==="preserve-aspect"&&!Rf(Ig(t),Ig(s),.2)}const h3=K1({attachResizeListener:(e,t)=>or(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Uu={current:void 0},Q1=K1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Uu.current){const e=new h3({});e.mount(window),e.setOptions({layoutScroll:!0}),Uu.current=e}return Uu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),f3={pan:{Feature:TR},drag:{Feature:kR,ProjectionNode:Q1,MeasureLayout:U1}},m3=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function p3(e){const t=m3.exec(e);if(!t)return[,];const[,s,n]=t;return[s,n]}function Df(e,t,s=1){const[n,i]=p3(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const o=a.trim();return R1(o)?parseFloat(o):o}else return _f(i)?Df(i,t,s+1):i}function x3(e,{...t},s){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:s};s&&(s={...s}),e.values.forEach(i=>{const a=i.get();if(!_f(a))return;const o=Df(a,n);o&&i.set(o)});for(const i in t){const a=t[i];if(!_f(a))continue;const o=Df(a,n);o&&(t[i]=o,s||(s={}),s[i]===void 0&&(s[i]=a))}return{target:t,transitionEnd:s}}const g3=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),J1=e=>g3.has(e),y3=e=>Object.keys(e).some(J1),Yg=e=>e===Wn||e===ce,Qg=(e,t)=>parseFloat(e.split(", ")[t]),Jg=(e,t)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/);if(i)return Qg(i[1],t);{const a=n.match(/^matrix\((.+)\)$/);return a?Qg(a[1],e):0}},v3=new Set(["x","y","z"]),w3=zo.filter(e=>!v3.has(e));function b3(e){const t=[];return w3.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Ui={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Jg(4,13),y:Jg(5,14)};Ui.translateX=Ui.x;Ui.translateY=Ui.y;const j3=(e,t,s)=>{const n=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),{display:o}=a,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),s.forEach(d=>{l[d]=Ui[d](n,a)}),t.render();const c=t.measureViewportBox();return s.forEach(d=>{const u=t.getValue(d);u&&u.jump(l[d]),e[d]=Ui[d](c,a)}),e},N3=(e,t,s={},n={})=>{t={...t},n={...n};const i=Object.keys(t).filter(J1);let a=[],o=!1;const l=[];if(i.forEach(c=>{const d=e.getValue(c);if(!e.hasValue(c))return;let u=s[c],h=ya(u);const m=t[c];let x;if(Dc(m)){const v=m.length,g=m[0]===null?1:0;u=m[g],h=ya(u);for(let w=g;w<v&&m[w]!==null;w++)x?Np(ya(m[w])===x):x=ya(m[w])}else x=ya(m);if(h!==x)if(Yg(h)&&Yg(x)){const v=d.get();typeof v=="string"&&d.set(parseFloat(v)),typeof m=="string"?t[c]=parseFloat(m):Array.isArray(m)&&x===ce&&(t[c]=m.map(parseFloat))}else h!=null&&h.transform&&(x!=null&&x.transform)&&(u===0||m===0)?u===0?d.set(x.transform(u)):t[c]=h.transform(m):(o||(a=b3(e),o=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],d.jump(m))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=j3(t,e,l);return a.length&&a.forEach(([u,h])=>{e.getValue(u).set(h)}),e.render(),Sd&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:n}}else return{target:t,transitionEnd:n}};function S3(e,t,s,n){return y3(t)?N3(e,t,s,n):{target:t,transitionEnd:n}}const _3=(e,t,s,n)=>{const i=x3(e,t,n);return t=i.target,n=i.transitionEnd,S3(e,t,s,n)},Mf={current:null},X1={current:!1};function C3(){if(X1.current=!0,!!Sd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Mf.current=e.matches;e.addListener(t),t()}else Mf.current=!1}function E3(e,t,s){const{willChange:n}=t;for(const i in t){const a=t[i],o=s[i];if(Qt(a))e.addValue(i,a),Vc(n)&&n.add(i);else if(Qt(o))e.addValue(i,zi(a,{owner:e})),Vc(n)&&n.remove(i);else if(o!==a)if(e.hasValue(i)){const l=e.getValue(i);!l.hasAnimated&&l.set(a)}else{const l=e.getStaticValue(i);e.addValue(i,zi(l!==void 0?l:a,{owner:e}))}}for(const i in s)t[i]===void 0&&e.removeValue(i);return t}const Xg=new WeakMap,Z1=Object.keys(So),k3=Z1.length,Zg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],T3=mp.length;class P3{constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>De.render(this.render,!1,!0);const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Cd(s),this.isVariantNode=Mj(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(s,{});for(const h in u){const m=u[h];l[h]!==void 0&&Qt(m)&&(m.set(l[h],!1),Vc(d)&&d.add(h))}}scrapeMotionValuesFromProps(t,s){return{}}mount(t){this.current=t,Xg.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),X1.current||C3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xg.delete(this.current),this.projection&&this.projection.unmount(),xr(this.notifyUpdate),xr(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,s){const n=qn.has(t),i=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&De.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),a()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...s},n,i,a){let o,l;for(let c=0;c<k3;c++){const d=Z1[c],{isEnabled:u,Feature:h,ProjectionNode:m,MeasureLayout:x}=So[d];m&&(o=m),u(s)&&(!this.features[d]&&h&&(this.features[d]=new h(this)),x&&(l=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:x}=s;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!u||h&&yi(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:a,layoutScroll:m,layoutRoot:x})}return l}updateFeatures(){for(const t in this.features){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):et()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}makeTargetAnimatable(t,s=!0){return this.makeTargetAnimatableFromInstance(t,this.props,s)}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<Zg.length;n++){const i=Zg[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a=t["on"+i];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=E3(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const s={};for(let n=0;n<T3;n++){const i=mp[n],a=this.props[i];(No(a)||a===!1)&&(s[i]=a)}return s}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){s!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,s)),this.values.set(t,s),this.latestValues[t]=s.get()}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=zi(s,{owner:this}),this.addValue(t,n)),n}readValue(t){var s;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:n}=this.props,i=typeof n=="string"||typeof n=="object"?(s=jp(this.props,n))===null||s===void 0?void 0:s[t]:void 0;if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Qt(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Rp),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class eN extends P3{sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:s,...n},{transformValues:i},a){let o=GA(n,t||{},this);if(i&&(s&&(s=i(s)),n&&(n=i(n)),o&&(o=i(o))),a){qA(this,n,o);const l=_3(this,n,o,s);s=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:s,...n}}}function A3(e){return window.getComputedStyle(e)}class R3 extends eN{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,s){if(qn.has(s)){const n=Ep(s);return n&&n.default||0}else{const n=A3(t),i=(Bj(s)?n.getPropertyValue(s):n[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:s}){return B1(t,s)}build(t,s,n,i){gp(t,s,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,s){return bp(t,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Qt(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(t,s,n,i){Gj(t,s,n,i)}}class O3 extends eN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(qn.has(s)){const n=Ep(s);return n&&n.default||0}return s=Kj.has(s)?s:hp(s),t.getAttribute(s)}measureInstanceViewportBox(){return et()}scrapeMotionValuesFromProps(t,s){return Qj(t,s)}build(t,s,n,i){vp(t,s,n,this.isSVGTag,i.transformTemplate)}renderInstance(t,s,n,i){Yj(t,s,n,i)}mount(t){this.isSVGTag=wp(t.tagName),super.mount(t)}}const $3=(e,t)=>xp(e)?new O3(t,{enableHardwareAcceleration:!1}):new R3(t,{enableHardwareAcceleration:!0}),L3={layout:{ProjectionNode:Q1,MeasureLayout:U1}},D3={...lR,...k5,...f3,...L3},W=MP((e,t)=>p5(e,t,D3,$3));function tN(){const e=f.useRef(!1);return up(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function M3(){const e=tN(),[t,s]=f.useState(0),n=f.useCallback(()=>{e.current&&s(t+1)},[t]);return[f.useCallback(()=>De.postRender(n),[n]),t]}class I3 extends f.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function F3({children:e,isPresent:t}){const s=f.useId(),n=f.useRef(null),i=f.useRef({width:0,height:0,top:0,left:0});return f.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=i.current;if(t||!n.current||!a||!o)return;n.current.dataset.motionPopId=s;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),f.createElement(I3,{isPresent:t,childRef:n,sizeRef:i},f.cloneElement(e,{ref:n}))}const Hu=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=Jj(V3),c=f.useId(),d=f.useMemo(()=>({id:c,initial:t,isPresent:s,custom:i,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;n&&n()},register:u=>(l.set(u,!1),()=>l.delete(u))}),a?void 0:[s]);return f.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[s]),f.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),o==="popLayout"&&(e=f.createElement(F3,{isPresent:s},e)),f.createElement(Nd.Provider,{value:d},e)};function V3(){return new Map}function B3(e){return f.useEffect(()=>()=>e(),[])}const yn=e=>e.key||"";function z3(e,t){e.forEach(s=>{const n=yn(s);t.set(n,s)})}function U3(e){const t=[];return f.Children.forEach(e,s=>{f.isValidElement(s)&&t.push(s)}),t}const jt=({children:e,custom:t,initial:s=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=f.useContext(pp).forceRender||M3()[0],c=tN(),d=U3(e);let u=d;const h=f.useRef(new Map).current,m=f.useRef(u),x=f.useRef(new Map).current,v=f.useRef(!0);if(up(()=>{v.current=!1,z3(d,x),m.current=u}),B3(()=>{v.current=!0,x.clear(),h.clear()}),v.current)return f.createElement(f.Fragment,null,u.map(y=>f.createElement(Hu,{key:yn(y),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:a,mode:o},y)));u=[...u];const g=m.current.map(yn),w=d.map(yn),p=g.length;for(let y=0;y<p;y++){const b=g[y];w.indexOf(b)===-1&&!h.has(b)&&h.set(b,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((y,b)=>{if(w.indexOf(b)!==-1)return;const j=x.get(b);if(!j)return;const S=g.indexOf(b);let R=y;if(!R){const E=()=>{h.delete(b);const _=Array.from(x.keys()).filter(A=>!w.includes(A));if(_.forEach(A=>x.delete(A)),m.current=d.filter(A=>{const P=yn(A);return P===b||_.includes(P)}),!h.size){if(c.current===!1)return;l(),n&&n()}};R=f.createElement(Hu,{key:yn(j),isPresent:!1,onExitComplete:E,custom:t,presenceAffectsLayout:a,mode:o},j),h.set(b,R)}u.splice(S,0,R)}),u=u.map(y=>{const b=y.key;return h.has(b)?y:f.createElement(Hu,{key:yn(y),isPresent:!0,presenceAffectsLayout:a,mode:o},y)}),f.createElement(f.Fragment,null,h.size?u:u.map(y=>f.cloneElement(y)))},wa=["admin","supervisor","operations_manager","consultant","hybrid_employee","client_poc","executive"],jl=["admin","supervisor","operations_manager","consultant","hybrid_employee"],ey=["client_poc","admin"],qu=["executive","admin"],Nl=["admin"],Wu=["admin","operations_manager"],hn=["admin","supervisor","operations_manager"],H3=[{icon:xj,label:"Dashboard",path:"/",roles:wa},{icon:Ts,label:"Hierarchy Builder",path:"/sites",roles:[...jl,...qu]},{icon:He,label:"Reports Hub",path:"/reports",roles:wa},{icon:Ql,label:"NFC/GPS Tags",path:"/nfc",roles:[...hn,"hybrid_employee"]},{icon:Oc,label:"Scheduling",path:"/scheduling",roles:hn},{icon:jo,label:"Assessments",path:"/assessments",roles:hn},{icon:cr,label:"Security Companies",path:"/security-companies",roles:Wu},{icon:Ae,label:"Security Staff",path:"/employees",roles:hn},{icon:sr,label:"Entity Staff",path:"/entity-staff",roles:hn},{icon:Mn,label:"Performance",path:"/performance",roles:hn},{icon:Rc,label:"Archive",path:"/archive",roles:hn},{icon:bj,label:"Health & Safety",path:"/health-safety",roles:[...jl,...qu]},{icon:mt,label:"Training",path:"/training",roles:[...jl,...ey]},{icon:op,label:"Live Classes",path:"/live-classes",roles:[...jl,...ey]},{icon:ut,label:"Incidents",path:"/reports/incidents",roles:wa},{icon:pT,label:"Observations",path:"/reports/observations",roles:wa},{icon:nT,label:"Analytics",path:"/analytics",roles:[...Wu,...qu]},{icon:LT,label:"Communications",path:"/messaging",roles:wa},{icon:mj,label:"ISO Compliance",path:"/iso",roles:[...Wu,"consultant"]},{icon:yT,label:"App Integrations",path:"/external-app",roles:Nl},{icon:_T,label:"Login Management",path:"/login-management",roles:Nl},{icon:Bi,label:"Admin Settings",path:"/admin-settings",roles:Nl},{icon:wd,label:"Developer Portal",path:"/developer",roles:Nl}],q3=({isOpen:e,userRole:t,toggleSidebar:s})=>{const n=H3.filter(l=>t&&l.roles.includes(t)),i={open:{x:0,transition:{type:"spring",stiffness:120,damping:20}},closed:{x:"-100%",transition:{type:"spring",stiffness:120,damping:20}}},a=({isActive:l})=>de("flex items-center space-x-3 px-3 py-2.5 rounded-lg transition-all duration-200 ease-in-out font-medium text-sm group",l?"bg-gradient-to-r from-sky-600 to-indigo-700 text-white shadow-md scale-105":"text-slate-300 hover:bg-slate-700/70 hover:text-sky-300 hover:scale-105 transform"),o=l=>de("w-5 h-5 group-hover:text-sky-300 transition-colors",l&&"text-white");return r.jsxs(W.aside,{variants:i,initial:"closed",animate:e?"open":"closed",className:"w-64 h-screen p-4 space-y-4 nav-blur flex flex-col fixed top-0 left-0 z-40 lg:z-auto overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between mb-5 flex-shrink-0",children:[r.jsxs(Io,{to:"/",className:"flex items-center space-x-2 p-2",children:[r.jsx("img",{alt:"GS-3 SecureOps Pro Logo Favicon",className:"h-8 w-8 filter brightness-0 invert",src:"https://images.unsplash.com/photo-1575821104894-b683ce7525ff"}),r.jsx("span",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-slate-300 via-slate-100 to-sky-300",children:"SecureOps"})]}),r.jsx("button",{onClick:s,className:"lg:hidden text-slate-400 hover:text-white p-2",children:r.jsx(Dt,{className:"w-5 h-5"})})]}),r.jsx("nav",{className:"flex-1 space-y-1.5 overflow-y-auto scrollbar-thin",children:n.map(l=>r.jsx(fE,{to:l.path,end:l.path==="/",className:a,children:({isActive:c})=>r.jsxs(r.Fragment,{children:[r.jsx(l.icon,{className:o(c)}),r.jsx("span",{children:l.label})]})},l.label))}),r.jsx("div",{className:"mt-auto pt-4 border-t border-slate-700/60 flex-shrink-0",children:r.jsxs("p",{className:"text-xs text-center text-slate-500 mt-4",children:["© ",new Date().getFullYear()," GS-3 SecureOps Pro.",r.jsx("br",{}),"All rights reserved. Domain: gs-3.pro"]})})]})},W3=vd("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=te.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...i},a)=>{const o=n?fk:"button";return r.jsx(o,{className:de(W3({variant:t,size:s,className:e})),ref:a,...i})});F.displayName="Button";const ee=te.forwardRef(({className:e,type:t,...s},n)=>r.jsx("input",{type:t,className:de("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));ee.displayName="Input";var sN={exports:{}},rN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hi=f;function G3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var K3=typeof Object.is=="function"?Object.is:G3,Y3=Hi.useState,Q3=Hi.useEffect,J3=Hi.useLayoutEffect,X3=Hi.useDebugValue;function Z3(e,t){var s=t(),n=Y3({inst:{value:s,getSnapshot:t}}),i=n[0].inst,a=n[1];return J3(function(){i.value=s,i.getSnapshot=t,Gu(i)&&a({inst:i})},[e,s,t]),Q3(function(){return Gu(i)&&a({inst:i}),e(function(){Gu(i)&&a({inst:i})})},[e]),X3(s),s}function Gu(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!K3(e,s)}catch{return!0}}function eO(e,t){return t()}var tO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?eO:Z3;rN.useSyncExternalStore=Hi.useSyncExternalStore!==void 0?Hi.useSyncExternalStore:tO;sN.exports=rN;var sO=sN.exports;function rO(){return sO.useSyncExternalStore(nO,()=>!0,()=>!1)}function nO(){return()=>{}}var Op="Avatar",[iO,q7]=Un(Op),[aO,nN]=iO(Op),iN=f.forwardRef((e,t)=>{const{__scopeAvatar:s,...n}=e,[i,a]=f.useState("idle");return r.jsx(aO,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:r.jsx(Re.span,{...n,ref:t})})});iN.displayName=Op;var aN="AvatarImage",oN=f.forwardRef((e,t)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:i=()=>{},...a}=e,o=nN(aN,s),l=oO(n,a),c=As(d=>{i(d),o.onImageLoadingStatusChange(d)});return qs(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?r.jsx(Re.img,{...a,ref:t,src:n}):null});oN.displayName=aN;var lN="AvatarFallback",cN=f.forwardRef((e,t)=>{const{__scopeAvatar:s,delayMs:n,...i}=e,a=nN(lN,s),[o,l]=f.useState(n===void 0);return f.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?r.jsx(Re.span,{...i,ref:t}):null});cN.displayName=lN;function ty(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function oO(e,{referrerPolicy:t,crossOrigin:s}){const n=rO(),i=f.useRef(null),a=(()=>n?(i.current||(i.current=new window.Image),i.current):null)(),[o,l]=f.useState(()=>ty(a,e));return qs(()=>{l(ty(a,e))},[a,e]),qs(()=>{const c=h=>()=>{l(h)};if(!a)return;const d=c("loaded"),u=c("error");return a.addEventListener("load",d),a.addEventListener("error",u),t&&(a.referrerPolicy=t),typeof s=="string"&&(a.crossOrigin=s),()=>{a.removeEventListener("load",d),a.removeEventListener("error",u)}},[a,s,t]),o}var dN=iN,uN=oN,hN=cN;const fN=te.forwardRef(({className:e,...t},s)=>r.jsx(dN,{ref:s,className:de("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));fN.displayName=dN.displayName;const lO=te.forwardRef(({className:e,...t},s)=>r.jsx(uN,{ref:s,className:de("aspect-square h-full w-full",e),...t}));lO.displayName=uN.displayName;const mN=te.forwardRef(({className:e,...t},s)=>r.jsx(hN,{ref:s,className:de("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));mN.displayName=hN.displayName;const cO="modulepreload",dO=function(e){return"/"+e},sy={},Wo=function(t,s,n){if(!s||s.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(s.map(a=>{if(a=dO(a),a in sy)return;sy[a]=!0;const o=a.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===a&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":cO,o||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},uO=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Wo(()=>Promise.resolve().then(()=>Od),void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class $p extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class hO extends $p{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ry extends $p{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ny extends $p{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var If;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(If||(If={}));var fO=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class mO{constructor(t,{headers:s={},customFetch:n,region:i=If.Any}={}){this.url=t,this.headers=s,this.region=i,this.fetch=uO(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return fO(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:u}).catch(g=>{throw new hO(g)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new ry(h);if(!h.ok)throw new ny(h);let x=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return x==="application/json"?v=yield h.json():x==="application/octet-stream"?v=yield h.blob():x==="text/event-stream"?v=h:x==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof ny||i instanceof ry?i.context:void 0}}})}}var Ut={},Lp={},Pd={},Go={},Ad={},Rd={},pO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qi=pO();const xO=qi.fetch,gO=qi.fetch.bind(qi),yO=qi.Headers,vO=qi.Request,wO=qi.Response,Od=Object.freeze(Object.defineProperty({__proto__:null,Headers:yO,Request:vO,Response:wO,default:gO,fetch:xO},Symbol.toStringTag,{value:"Module"})),bO=V2(Od);var $d={};Object.defineProperty($d,"__esModule",{value:!0});let jO=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};$d.default=jO;var pN=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rd,"__esModule",{value:!0});const NO=pN(bO),SO=pN($d);let _O=class{constructor(t){var s,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(s=t.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=NO.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=new Headers(this.headers),this.headers.set(t,s),this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c,d;let u=null,h=null,m=null,x=a.status,v=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&p&&p.length>1&&(m=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,x=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const w=await a.text();try{u=JSON.parse(w),Array.isArray(u)&&a.status===404&&(h=[],u=null,x=200,v="OK")}catch{a.status===404&&w===""?(x=204,v="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,x=200,v="OK"),u&&this.shouldThrowOnError)throw new SO.default(u)}return{error:u,data:h,count:m,status:x,statusText:v}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,s)}returns(){return this}overrideTypes(){return this}};Rd.default=_O;var CO=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ad,"__esModule",{value:!0});const EO=CO(Rd);let kO=class extends EO.default{select(t){let s=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:s=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,s,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:s=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,s?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Ad.default=kO;var TO=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Go,"__esModule",{value:!0});const PO=TO(Ad);let AO=class extends PO.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const n=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${o}.${s}`),this}match(t){return Object.entries(t).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(t,s,n){return this.url.searchParams.append(t,`not.${s}.${n}`),this}or(t,{foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,s,n){return this.url.searchParams.append(t,`${s}.${n}`),this}};Go.default=AO;var RO=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pd,"__esModule",{value:!0});const ba=RO(Go);let OO=class{constructor(t,{headers:s={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(s),this.schema=n,this.fetch=i}select(t,{head:s=!1,count:n}={}){const i=s?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new ba.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:s,defaultToNull:n=!0}={}){var i;const a="POST";if(s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ba.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:s,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new ba.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:s}={}){var n;const i="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new ba.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var s;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new ba.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Pd.default=OO;var xN=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lp,"__esModule",{value:!0});const $O=xN(Pd),LO=xN(Go);let DO=class gN{constructor(t,{headers:s={},schema:n,fetch:i}={}){this.url=t,this.headers=new Headers(s),this.schemaName=n,this.fetch=i}from(t){const s=new URL(`${this.url}/${t}`);return new $O.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new gN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:n=!1,get:i=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;n||i?(l=n?"HEAD":"GET",Object.entries(s).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",d=s);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new LO.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Lp.default=DO;var ea=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.PostgrestError=Ut.PostgrestBuilder=Ut.PostgrestTransformBuilder=Ut.PostgrestFilterBuilder=Ut.PostgrestQueryBuilder=Ut.PostgrestClient=void 0;const yN=ea(Lp);Ut.PostgrestClient=yN.default;const vN=ea(Pd);Ut.PostgrestQueryBuilder=vN.default;const wN=ea(Go);Ut.PostgrestFilterBuilder=wN.default;const bN=ea(Ad);Ut.PostgrestTransformBuilder=bN.default;const jN=ea(Rd);Ut.PostgrestBuilder=jN.default;const NN=ea($d);Ut.PostgrestError=NN.default;var MO=Ut.default={PostgrestClient:yN.default,PostgrestQueryBuilder:vN.default,PostgrestFilterBuilder:wN.default,PostgrestTransformBuilder:bN.default,PostgrestBuilder:jN.default,PostgrestError:NN.default};const{PostgrestClient:IO,PostgrestQueryBuilder:J7,PostgrestFilterBuilder:X7,PostgrestTransformBuilder:Z7,PostgrestBuilder:e8,PostgrestError:t8}=MO;function FO(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const VO=FO(),BO="2.12.1",zO=`realtime-js/${BO}`,UO="1.0.0",SN=1e4,HO=1e3;var Ga;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ga||(Ga={}));var ht;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ht||(ht={}));var Ns;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ns||(Ns={}));var Ff;(function(e){e.websocket="websocket"})(Ff||(Ff={}));var wn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(wn||(wn={}));class qO{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const i=s.getUint8(1),a=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+i));o=o+i;const c=n.decode(t.slice(o,o+a));o=o+a;const d=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class _N{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $e;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})($e||($e={}));const iy=(e,t,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,o)=>(a[o]=WO(o,e,t,i),a),{})},WO=(e,t,s,n)=>{const i=t.find(l=>l.name===e),a=i==null?void 0:i.type,o=s[e];return a&&!n.includes(a)?CN(a,o):Vf(o)},CN=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return QO(t,s)}switch(e){case $e.bool:return GO(t);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return KO(t);case $e.json:case $e.jsonb:return YO(t);case $e.timestamp:return JO(t);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:return Vf(t);default:return Vf(t)}},Vf=e=>e,GO=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},KO=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},YO=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},QO=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,s);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>CN(t,l))}return e},JO=e=>typeof e=="string"?e.replace(" ","T"):e,EN=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Ku{constructor(t,s,n={},i=SN){this.channel=t,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ay;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ay||(ay={}));class Ka{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ka.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=Ka.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ka.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,i){const a=this.cloneDeep(t),o=this.transformState(s),l={},c={};return this.map(a,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=a[d];if(h){const m=u.map(w=>w.presence_ref),x=h.map(w=>w.presence_ref),v=u.filter(w=>x.indexOf(w.presence_ref)<0),g=h.filter(w=>m.indexOf(w.presence_ref)<0);v.length>0&&(l[d]=v),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(a,{joins:l,leaves:c},n,i)}static syncDiff(t,s,n,i){const{joins:a,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(x=>x.presence_ref),m=u.filter(x=>h.indexOf(x.presence_ref)<0);t[l].unshift(...m)}n(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,i(l,d,c),d.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const i=t[n];return"metas"in i?s[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):s[n]=i,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var oy;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(oy||(oy={}));var zc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zc||(zc={}));var Xs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xs||(Xs={}));class Dp{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Ku(this,Ns.join,this.params,this.timeout),this.rejoinTimer=new _N(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ns.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Ka(this),this.broadcastEndpointURL=EN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[zc.PRESENCE],u={},h={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Xs.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Xs.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:m})=>{var x;if(this.socket.setAuth(),m===void 0){t==null||t(Xs.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,g=(x=v==null?void 0:v.length)!==null&&x!==void 0?x:0,w=[];for(let p=0;p<g;p++){const y=v[p],{filter:{event:b,schema:j,table:S,filter:R}}=y,E=m&&m[p];if(E&&E.event===b&&E.schema===j&&E.table===S&&E.filter===R)w.push(Object.assign(Object.assign({},y),{id:E.id}));else{this.unsubscribe(),this.state=ht.errored,t==null||t(Xs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(Xs.SUBSCRIBED);return}}).receive("error",m=>{this.state=ht.errored,t==null||t(Xs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this.state===ht.joined&&t===zc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,s,n)}async send(t,s={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ht.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ns.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Ku(this,Ns.leave,{},t),n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,s,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(a),o}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ku(this,t,s,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var i,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Ns;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,s,n);if(s&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var v,g,w;return((v=x.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(g=x.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(x=>x.callback(m,n)):(a=this.bindings[o])===null||a===void 0||a.filter(x=>{var v,g,w,p,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const j=x.id,S=(v=x.filter)===null||v===void 0?void 0:v.event;return j&&((g=s.ids)===null||g===void 0?void 0:g.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const j=(y=(p=x==null?void 0:x.filter)===null||p===void 0?void 0:p.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return j==="*"||j===((b=s==null?void 0:s.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:g,table:w,commit_timestamp:p,type:y,errors:b}=v;m=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:p,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(v))}x.callback(m,n)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const i=t.toLocaleLowerCase(),a={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Dp.isEqual(i.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ns.close,{},t)}_onError(t){this._on(Ns.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=iy(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=iy(t.columns,t.old_record)),s}}const ly=()=>{},XO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZO{constructor(t,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=SN,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ly,this.ref=0,this.logger=ly,this.conn=null,this.sendBuffer=[],this.serializer=new qO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>Wo(()=>import("./index-cad25d0c.js"),[]).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Ff.websocket}`,this.httpEndpoint=EN(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(a,o)=>o(JSON.stringify(a)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _N(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=VO),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection(),setTimeout(()=>{this.setAuth().catch(t=>{this.log("error","error setting auth",t)})},0)}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:UO}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ga.connecting:return wn.Connecting;case Ga.open:return wn.Open;case Ga.closing:return wn.Closing;default:return wn.Closed}}isConnected(){return this.connectionState()===wn.Open}channel(t,s={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Dp(`realtime:${t}`,s,this);return this.channels.push(a),a}}push(t){const{topic:s,event:n,payload:i,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:zO};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ns.access_token,{access_token:s})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(HO,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:n,event:i,payload:a,ref:o}=s;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(i,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ns.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${t}${n}${i}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([XO],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class Mp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function at(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class e$ extends Mp{constructor(t,s,n){super(t),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Bf extends Mp{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var t$=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const kN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Wo(()=>Promise.resolve().then(()=>Od),void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},s$=()=>t$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wo(()=>Promise.resolve().then(()=>Od),void 0)).Response:Response}),zf=e=>{if(Array.isArray(e))return e.map(s=>zf(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=zf(n)}),t},r$=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Gn=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const Yu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),n$=(e,t,s)=>Gn(void 0,void 0,void 0,function*(){const n=yield s$();e instanceof n&&!(s!=null&&s.noResolveJson)?e.json().then(i=>{const a=e.status||500,o=(i==null?void 0:i.statusCode)||a+"";t(new e$(Yu(i),a,o))}).catch(i=>{t(new Bf(Yu(i),i))}):t(new Bf(Yu(e),e))}),i$=(e,t,s,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(r$(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),s))};function Ko(e,t,s,n,i,a){return Gn(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(s,i$(t,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>n$(c,l,n))})})}function Uc(e,t,s,n){return Gn(this,void 0,void 0,function*(){return Ko(e,"GET",t,s,n)})}function Zs(e,t,s,n,i){return Gn(this,void 0,void 0,function*(){return Ko(e,"POST",t,n,i,s)})}function Uf(e,t,s,n,i){return Gn(this,void 0,void 0,function*(){return Ko(e,"PUT",t,n,i,s)})}function a$(e,t,s,n){return Gn(this,void 0,void 0,function*(){return Ko(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function TN(e,t,s,n,i){return Gn(this,void 0,void 0,function*(){return Ko(e,"DELETE",t,n,i,s)})}var It=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const o$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l${constructor(t,s={},n,i){this.url=t,this.headers=s,this.bucketId=n,this.fetch=kN(i)}uploadOrUpdate(t,s,n,i){return It(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},cy),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(t=="PUT"?Uf:Zs)(this.fetch,`${this.url}/object/${u}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(at(a))return{data:null,error:a};throw a}})}upload(t,s,n){return It(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,i){return It(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:cy.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield Uf(this.fetch,l.toString(),c,{headers:u});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(at(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return It(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const a=yield Zs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Mp("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(at(n))return{data:null,error:n};throw n}})}update(t,s,n){return It(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return It(this,void 0,void 0,function*(){try{return{data:yield Zs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(at(i))return{data:null,error:i};throw i}})}copy(t,s,n){return It(this,void 0,void 0,function*(){try{return{data:{path:(yield Zs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(at(i))return{data:null,error:i};throw i}})}createSignedUrl(t,s,n){return It(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield Zs(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(at(i))return{data:null,error:i};throw i}})}createSignedUrls(t,s,n){return It(this,void 0,void 0,function*(){try{const i=yield Zs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(at(i))return{data:null,error:i};throw i}})}download(t,s){return It(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Uc(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(at(l))return{data:null,error:l};throw l}})}info(t){return It(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield Uc(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:zf(n),error:null}}catch(n){if(at(n))return{data:null,error:n};throw n}})}exists(t){return It(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield a$(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(at(n)&&n instanceof Bf){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),i=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&i.push(a);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return It(this,void 0,void 0,function*(){try{return{data:yield TN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(at(s))return{data:null,error:s};throw s}})}list(t,s,n){return It(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},o$),s),{prefix:t||""});return{data:yield Zs(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(at(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const c$="2.10.1",d$={"X-Client-Info":`storage-js/${c$}`};var Jn=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class u${constructor(t,s={},n,i){const a=new URL(t);if(i!=null&&i.useNewHostname){const o=/supabase\.(co|in|red)$/.test(a.hostname),l="/storage";o&&!a.hostname.includes("storage.supabase.")&&a.pathname.startsWith(l)&&(a.pathname=a.pathname.substring(l.length),a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},d$),s),this.fetch=kN(n)}listBuckets(){return Jn(this,void 0,void 0,function*(){try{return{data:yield Uc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(at(t))return{data:null,error:t};throw t}})}getBucket(t){return Jn(this,void 0,void 0,function*(){try{return{data:yield Uc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(at(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Jn(this,void 0,void 0,function*(){try{return{data:yield Zs(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(at(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return Jn(this,void 0,void 0,function*(){try{return{data:yield Uf(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(at(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Jn(this,void 0,void 0,function*(){try{return{data:yield Zs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(at(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Jn(this,void 0,void 0,function*(){try{return{data:yield TN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(at(s))return{data:null,error:s};throw s}})}}class h$ extends u${constructor(t,s={},n,i){super(t,s,n,i)}from(t){return new l$(this.url,this.headers,t,this.fetch)}}const f$="2.30.0",m$={"X-Client-Info":`supabase-js/${f$}`};var Hf={exports:{}};(function(e,t){var s=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof St<"u"&&St,n=function(){function a(){this.fetch=!1,this.DOMException=s.DOMException}return a.prototype=s,new a}();(function(a){(function(o){var l=typeof a<"u"&&a||typeof self<"u"&&self||typeof St<"u"&&St||{},c={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function d(C){return C&&DataView.prototype.isPrototypeOf(C)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(C){return C&&u.indexOf(Object.prototype.toString.call(C))>-1};function m(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||C==="")throw new TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function x(C){return typeof C!="string"&&(C=String(C)),C}function v(C){var T={next:function(){var V=C.shift();return{done:V===void 0,value:V}}};return c.iterable&&(T[Symbol.iterator]=function(){return T}),T}function g(C){this.map={},C instanceof g?C.forEach(function(T,V){this.append(V,T)},this):Array.isArray(C)?C.forEach(function(T){if(T.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+T.length);this.append(T[0],T[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(T){this.append(T,C[T])},this)}g.prototype.append=function(C,T){C=m(C),T=x(T);var V=this.map[C];this.map[C]=V?V+", "+T:T},g.prototype.delete=function(C){delete this.map[m(C)]},g.prototype.get=function(C){return C=m(C),this.has(C)?this.map[C]:null},g.prototype.has=function(C){return this.map.hasOwnProperty(m(C))},g.prototype.set=function(C,T){this.map[m(C)]=x(T)},g.prototype.forEach=function(C,T){for(var V in this.map)this.map.hasOwnProperty(V)&&C.call(T,this.map[V],V,this)},g.prototype.keys=function(){var C=[];return this.forEach(function(T,V){C.push(V)}),v(C)},g.prototype.values=function(){var C=[];return this.forEach(function(T){C.push(T)}),v(C)},g.prototype.entries=function(){var C=[];return this.forEach(function(T,V){C.push([V,T])}),v(C)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(C){if(!C._noBody){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}}function p(C){return new Promise(function(T,V){C.onload=function(){T(C.result)},C.onerror=function(){V(C.error)}})}function y(C){var T=new FileReader,V=p(T);return T.readAsArrayBuffer(C),V}function b(C){var T=new FileReader,V=p(T),L=/charset=([A-Za-z0-9_-]+)/.exec(C.type),I=L?L[1]:"utf-8";return T.readAsText(C,I),V}function j(C){for(var T=new Uint8Array(C),V=new Array(T.length),L=0;L<T.length;L++)V[L]=String.fromCharCode(T[L]);return V.join("")}function S(C){if(C.slice)return C.slice(0);var T=new Uint8Array(C.byteLength);return T.set(new Uint8Array(C)),T.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(C){this.bodyUsed=this.bodyUsed,this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:c.blob&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:c.formData&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():c.arrayBuffer&&c.blob&&d(C)?(this._bodyArrayBuffer=S(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||h(C))?this._bodyArrayBuffer=S(C):this._bodyText=C=Object.prototype.toString.call(C):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var C=w(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var C=w(this);return C||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var C=w(this);if(C)return C;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function _(C){var T=C.toUpperCase();return E.indexOf(T)>-1?T:C}function A(C,T){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T=T||{};var V=T.body;if(C instanceof A){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,T.headers||(this.headers=new g(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,!V&&C._bodyInit!=null&&(V=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new g(T.headers)),this.method=_(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal||function(){if("AbortController"in l){var z=new AbortController;return z.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&V)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(V),(this.method==="GET"||this.method==="HEAD")&&(T.cache==="no-store"||T.cache==="no-cache")){var L=/([?&])_=[^&]*/;if(L.test(this.url))this.url=this.url.replace(L,"$1_="+new Date().getTime());else{var I=/\?/;this.url+=(I.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function P(C){var T=new FormData;return C.trim().split("&").forEach(function(V){if(V){var L=V.split("="),I=L.shift().replace(/\+/g," "),z=L.join("=").replace(/\+/g," ");T.append(decodeURIComponent(I),decodeURIComponent(z))}}),T}function O(C){var T=new g,V=C.replace(/\r?\n[\t ]+/g," ");return V.split("\r").map(function(L){return L.indexOf(`
`)===0?L.substr(1,L.length):L}).forEach(function(L){var I=L.split(":"),z=I.shift().trim();if(z){var D=I.join(":").trim();try{T.append(z,D)}catch(J){console.warn("Response "+J.message)}}}),T}R.call(A.prototype);function k(C,T){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=T.statusText===void 0?"":""+T.statusText,this.headers=new g(T.headers),this.url=T.url||"",this._initBody(C)}R.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},k.error=function(){var C=new k(null,{status:200,statusText:""});return C.ok=!1,C.status=0,C.type="error",C};var $=[301,302,303,307,308];k.redirect=function(C,T){if($.indexOf(T)===-1)throw new RangeError("Invalid status code");return new k(null,{status:T,headers:{location:C}})},o.DOMException=l.DOMException;try{new o.DOMException}catch{o.DOMException=function(T,V){this.message=T,this.name=V;var L=Error(T);this.stack=L.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function N(C,T){return new Promise(function(V,L){var I=new A(C,T);if(I.signal&&I.signal.aborted)return L(new o.DOMException("Aborted","AbortError"));var z=new XMLHttpRequest;function D(){z.abort()}z.onload=function(){var re={statusText:z.statusText,headers:O(z.getAllResponseHeaders()||"")};I.url.indexOf("file://")===0&&(z.status<200||z.status>599)?re.status=200:re.status=z.status,re.url="responseURL"in z?z.responseURL:re.headers.get("X-Request-URL");var je="response"in z?z.response:z.responseText;setTimeout(function(){V(new k(je,re))},0)},z.onerror=function(){setTimeout(function(){L(new TypeError("Network request failed"))},0)},z.ontimeout=function(){setTimeout(function(){L(new TypeError("Network request timed out"))},0)},z.onabort=function(){setTimeout(function(){L(new o.DOMException("Aborted","AbortError"))},0)};function J(re){try{return re===""&&l.location.href?l.location.href:re}catch{return re}}if(z.open(I.method,J(I.url),!0),I.credentials==="include"?z.withCredentials=!0:I.credentials==="omit"&&(z.withCredentials=!1),"responseType"in z&&(c.blob?z.responseType="blob":c.arrayBuffer&&(z.responseType="arraybuffer")),T&&typeof T.headers=="object"&&!(T.headers instanceof g||l.Headers&&T.headers instanceof l.Headers)){var ne=[];Object.getOwnPropertyNames(T.headers).forEach(function(re){ne.push(m(re)),z.setRequestHeader(re,x(T.headers[re]))}),I.headers.forEach(function(re,je){ne.indexOf(je)===-1&&z.setRequestHeader(je,re)})}else I.headers.forEach(function(re,je){z.setRequestHeader(je,re)});I.signal&&(I.signal.addEventListener("abort",D),z.onreadystatechange=function(){z.readyState===4&&I.signal.removeEventListener("abort",D)}),z.send(typeof I._bodyInit>"u"?null:I._bodyInit)})}return N.polyfill=!0,l.fetch||(l.fetch=N,l.Headers=g,l.Request=A,l.Response=k),o.Headers=g,o.Request=A,o.Response=k,o.fetch=N,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=s.fetch?s:n;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})(Hf,Hf.exports);var Ip=Hf.exports;const PN=Vn(Ip),p$=rv({__proto__:null,default:PN},[Ip]);var x$=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const g$=e=>{let t;return e?t=e:typeof fetch>"u"?t=PN:t=fetch,(...s)=>t(...s)},y$=()=>typeof Headers>"u"?Ip.Headers:Headers,v$=(e,t,s)=>{const n=g$(s),i=y$();return(a,o)=>x$(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new i(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:d}))})};function w$(e){return e.replace(/\/$/,"")}function b$(e,t){const{db:s,auth:n,realtime:i,global:a}=e,{db:o,auth:l,realtime:c,global:d}=t;return{db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},d),a)}}function j$(e){return Math.round(Date.now()/1e3)+e}function N$(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Qs=()=>typeof document<"u",fn={tested:!1,writable:!1},tc=()=>{if(!Qs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fn.tested)return fn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fn.tested=!0,fn.writable=!0}catch{fn.tested=!0,fn.writable=!1}return fn.writable};function Ft(e,t){var s;t||(t=((s=window==null?void 0:window.location)===null||s===void 0?void 0:s.href)||""),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)"),i=n.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const AN=e=>{let t;return e?t=e:typeof fetch>"u"?t=async(...s)=>await(await Wo(()=>Promise.resolve().then(()=>p$),void 0)).fetch(...s):t=fetch,(...s)=>t(...s)},S$=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ja=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Sl=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Qu=async(e,t)=>{await e.removeItem(t)};function _$(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",n,i,a,o,l,c,d,u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)o=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),d=t.indexOf(e.charAt(u++)),n=o<<2|l>>4,i=(l&15)<<4|c>>2,a=(c&3)<<6|d,s=s+String.fromCharCode(n),c!=64&&i!=0&&(s=s+String.fromCharCode(i)),d!=64&&a!=0&&(s=s+String.fromCharCode(a));return s}class Ld{constructor(){this.promise=new Ld.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Ld.promiseConstructor=Promise;function dy(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=e.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=s[1];return JSON.parse(_$(n))}function C$(e){return new Promise(t=>{setTimeout(()=>t(null),e)})}function E$(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function k$(e){return("0"+e.toString(16)).substr(-2)}function _l(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let a=0;a<56;a++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,k$).join("")}async function T$(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}function P$(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cl(e){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await T$(e);return P$(t)}const A$="__stack_guard__",R$="__",O$=/__stack_guard__([a-zA-Z0-9_-]+)__/;let uy=!1,Fp;function qf(e){var t,s;Fp();let n;try{throw new Error}catch(a){n=a}const i=(s=(t=n.stack)===null||t===void 0?void 0:t.split(`
`))!==null&&s!==void 0?s:[];for(let a=0;a<i.length;a+=1){const l=i[a].match(O$);if(l&&l[1]===e)return!0}return!1}async function Wf(e,t){await Fp();const s=`${A$}${e}${R$}`;return await{[s]:async()=>await t()}[s]()}Fp=async()=>{uy||(uy=!0,await Wf("ENV_CHECK",async()=>{const e=qf("ENV_CHECK");return e||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),e}))};class Vp extends Error{constructor(t,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s}}function _e(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class $$ extends Vp{constructor(t,s){super(t,s),this.name="AuthApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function L$(e){return _e(e)&&e.name==="AuthApiError"}class RN extends Vp{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class ta extends Vp{constructor(t,s,n){super(t),this.name=s,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Xn extends ta{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Ju extends ta{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class El extends ta{constructor(t){super(t,"AuthInvalidCredentialsError",400)}}class Ys extends ta{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xu extends ta{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gf extends ta{constructor(t,s){super(t,"AuthRetryableFetchError",s)}}function hy(e){return _e(e)&&e.name==="AuthRetryableFetchError"}var D$=globalThis&&globalThis.__rest||function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};const Aa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),M$=[502,503,504];async function fy(e){if(!S$(e))throw new Gf(Aa(e),0);if(M$.includes(e.status))throw new Gf(Aa(e),e.status);let t;try{t=await e.json()}catch(s){throw new RN(Aa(s),s)}throw new $$(Aa(t),e.status||500)}const I$=(e,t,s,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function ke(e,t,s,n){var i;const a=Object.assign({},n==null?void 0:n.headers);n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await F$(e,t,s+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function F$(e,t,s,n,i,a){const o=I$(t,n,i,a);let l;try{l=await e(s,o)}catch(c){throw console.error(c),new Gf(Aa(c),0)}if(l.ok||await fy(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await fy(c)}}function Cr(e){var t;let s=null;U$(e)&&(s=Object.assign({},e),s.expires_at=j$(e.expires_in));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function bn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function V$(e){return{data:e,error:null}}function B$(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:a}=e,o=D$(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function z$(e){return e}function U$(e){return e.access_token&&e.refresh_token&&e.expires_in}var H$=globalThis&&globalThis.__rest||function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s};class q${constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=AN(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await ke(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:bn})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=H$(t,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:B$,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(_e(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await ke(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:bn})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,i,a,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:z$});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(_e(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await ke(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:bn})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await ke(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:bn})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){try{return await ke(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:bn})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:s,error:n}=await ke(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await ke(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}}const W$="2.43.1",G$="http://localhost:9999",K$="supabase.auth.token",Y$={"X-Client-Info":`gotrue-js/${W$}`},my=10,py={getItem:e=>tc()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{tc()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{tc()&&globalThis.localStorage.removeItem(e)}};function Q$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}Q$();const J$={url:G$,storageKey:K$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Y$,flowType:"implicit",debug:!1},kl=30*1e3,xy=3;class Co{constructor(t){var s;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=Co.nextInstanceID,Co.nextInstanceID+=1,this.instanceID>0&&Qs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},J$),t);if(this.logDebugMessages=n.debug,this.inMemorySession=null,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.persistSession=n.persistSession,this.storage=n.storage||py,this.admin=new q$({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=AN(n.fetch),this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===py&&!tc()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),Qs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...t),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=Wf("_initialize",async()=>{try{const t=Qs()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:n}=await this._getSessionFromUrl(t);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return _e(t)?{error:t}:{error:new RN("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(t){var s,n,i;try{await this._removeSession();let a;if("email"in t){const{email:u,password:h,options:m}=t;let x=null,v=null;if(this.flowType==="pkce"){const g=_l();await ja(this.storage,`${this.storageKey}-code-verifier`,g),x=await Cl(g),v=g===x?"plain":"s256"}a=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:x,code_challenge_method:v},xform:Cr})}else if("phone"in t){const{phone:u,password:h,options:m}=t;a=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Cr})}else throw new El("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(_e(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{await this._removeSession();let s;if("email"in t){const{email:a,password:o,options:l}=t;s=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cr})}else if("phone"in t){const{phone:a,password:o,options:l}=t;s=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cr})}else throw new El("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ju}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:i})}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,i,a;return await this._removeSession(),await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){const s=await Sl(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:i}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Cr});return await Qu(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ju}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:i})}async signInWithIdToken(t){await this._removeSession();try{const{options:s,provider:n,token:i,access_token:a,nonce:o}=t,l=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Cr}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ju}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,i,a,o;try{if(await this._removeSession(),"email"in t){const{email:l,options:c}=t;let d=null,u=null;if(this.flowType==="pkce"){const m=_l();await ja(this.storage,`${this.storageKey}-code-verifier`,m),d=await Cl(m),u=m===d?"plain":"s256"}const{error:h}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new El("You must provide either an email or phone number.")}catch(l){if(_e(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var s,n;try{t.type!=="email_change"&&t.type!=="phone_change"&&await this._removeSession();const{data:i,error:a}=await ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:(s=t.options)===null||s===void 0?void 0:s.captchaToken}}),redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,xform:Cr});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var s,n,i;try{return await this._removeSession(),await ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:V$})}catch(a){if(_e(a))return{data:null,error:a};throw a}}async reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new Xn;const{error:i}=await ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(_e(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{t.type!="email_change"&&t.type!="phone_change"&&await this._removeSession();const s=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:o}=await ke(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:o,error:l}=await ke(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new El("You must provide either an email or phone number and a type")}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return this._useSession(async t=>t)}async _useSession(t){return await Wf("_useSession",async()=>{const s=await this.__loadSession();return await t(s)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!qf("_useSession"))throw new Error("Please use #_useSession()");qf("_initialize")||await this.initializePromise;try{let t=null;if(this.persistSession){const a=await Sl(this.storage,this.storageKey);this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else t=this.inMemorySession,this._debug("#getSession()","session from memory",t);if(!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s)return{data:{session:t},error:null};const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){try{return await this._useSession(async s=>{var n,i;if(!t){const{data:a,error:o}=s;if(o)throw o;t=(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0}return await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:bn})})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Xn;const o=i.session,{data:l,error:c}=await ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:t,jwt:o.access_token,xform:bn});if(c)throw c;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return dy(t)}async setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Xn;const s=Date.now()/1e3;let n=s,i=!0,a=null;const o=dy(t.access_token);if(o.exp&&(n=o.exp,i=n<=s),i){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this.getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(s){if(_e(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:o,error:l}=s;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Xn;const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromUrl(t){try{if(!Qs())throw new Ys("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ys("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Xu("Not a valid PKCE flow url.");if(t){const w=Ft("code");if(!w)throw new Xu("No code detected.");const{data:p,error:y}=await this.exchangeCodeForSession(w);if(y)throw y;if(!p.session)throw new Xu("No session detected.");let b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:p.session,redirectType:null},error:null}}const s=Ft("error_description");if(s){const w=Ft("error_code");if(!w)throw new Ys("No error_code detected.");const p=Ft("error");throw p?new Ys(s,{error:p,code:w}):new Ys("No error detected.")}const n=Ft("provider_token"),i=Ft("provider_refresh_token"),a=Ft("access_token");if(!a)throw new Ys("No access_token detected.");const o=Ft("expires_in");if(!o)throw new Ys("No expires_in detected.");const l=Ft("refresh_token");if(!l)throw new Ys("No refresh_token detected.");const c=Ft("token_type");if(!c)throw new Ys("No token_type detected.");const u=Math.round(Date.now()/1e3)+parseInt(o),{data:h,error:m}=await this.getUser(a);if(m)throw m;const x=h.user,v={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:parseInt(o),expires_at:u,refresh_token:l,token_type:c,user:x},g=Ft("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:v,redirectType:g},error:null}}catch(s){if(_e(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){return Qs()&&(!!Ft("access_token")||!!Ft("error_description"))}async _isPKCEFlow(){const t=await Sl(this.storage,`${this.storageKey}-code-verifier`);return!!Ft("code")&&!!t}async signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:a}=s;if(a)return{error:a};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(L$(l)&&(l.status===404||l.status===401)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Qu(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(t){const s=N$(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),this._emitInitialSession(s),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,i;try{const{data:{session:a},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,s={}){let n=null,i=null;if(this.flowType==="pkce"){const a=_l();await ja(this.storage,`${this.storageKey}-code-verifier`,a),n=await Cl(a),i=a===n?"plain":"s256"}try{return await ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if(_e(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await E$(async i=>(await C$(i*200),this._debug(s,"refreshing attempt",i),await ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Cr})),(i,a,o)=>o&&o.error&&hy(o.error)&&Date.now()+(i+1)*200-n<kl)}catch(n){if(this._debug(s,"error",n),_e(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),Qs()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Sl(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)<i+my;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${my}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),hy(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new Xn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ld;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new Xn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),_e(a)){const o={session:null,error:a};return(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,s,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,s)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.persistSession||(this.inMemorySession=t),this.persistSession&&t.expires_at&&await this._persistSession(t)}_persistSession(t){return this._debug("#_persistSession()",t),ja(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await Qu(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),kl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/kl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${kl}ms, refresh threshold is ${xy} ticks`),i<=xy&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){this._debug(`#_onVisibilityChanged(${t})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(t||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const i=_l();await ja(this.storage,`${this.storageKey}-code-verifier`,i);const a=await Cl(i),o=i===a?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",a,"method",o);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;return a?{data:null,error:a}:await ke(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,i;const{data:a,error:o}=s;if(o)return{data:null,error:o};const{data:l,error:c}=await ke(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _verify(t){try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;if(a)return{data:null,error:a};const{data:o,error:l}=await ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _challenge(t){try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;return a?{data:null,error:a}:await ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(t==null?void 0:t.factors)||[],i=n.filter(a=>a.factor_type==="totp"&&a.status==="verified");return{data:{all:n,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async t=>{var s,n;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}})}}Co.nextInstanceID=0;class X$ extends Co{constructor(t){super(t)}}var Z$=globalThis&&globalThis.__awaiter||function(e,t,s,n){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const eL={headers:m$},tL={schema:"public"},sL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rL={};class nL{constructor(t,s,n){var i,a,o,l,c,d,u,h;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const m=w$(t);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const x=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,v={db:tL,realtime:rL,auth:Object.assign(Object.assign({},sL),{storageKey:x}),global:eL},g=b$(n??{},v);this.storageKey=(a=(i=g.auth)===null||i===void 0?void 0:i.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=(o=g.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,(d=g.global)===null||d===void 0?void 0:d.fetch),this.fetch=v$(s,this._getAccessToken.bind(this),(u=g.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new IO(`${m}/rest/v1`,{headers:this.headers,schema:(h=g.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new mO(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new h$(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}rpc(t,s={},n){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return Z$(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:a,flowType:o,debug:l},c,d){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new X$({url:this.authUrl,headers:Object.assign(Object.assign({},u),c),storageKey:a,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:i,flowType:o,debug:l,fetch:d})}_initRealtimeClient(t){return new ZO(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iL=(e,t,s)=>new nL(e,t,s),aL="https://mvwvshrmufwssjbatcxq.supabase.co",oL="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im12d3ZzaHJtdWZ3c3NqYmF0Y3hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MDQ4MDgsImV4cCI6MjA2NTI4MDgwOH0.3iA_rlSR9fhNeyjRXKYxBm4E4qPchCsoRmWy28ou-eo",M=iL(aL,oL),lL=({onMenuClick:e,userRole:t})=>{const{toast:s}=ue(),n=Mo(),i=async()=>{const{error:c}=await M.auth.signOut();c?s({variant:"destructive",title:"Logout Failed",description:c.message}):(s({title:"Logged Out",description:"You have been successfully logged out."}),n(0))},a=c=>{c.preventDefault(),s({title:"🚧 Search Not Implemented",description:"This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},o=()=>{s({title:"🚧 Notifications Not Implemented",description:"This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},l=()=>{s({title:"🚧 Profile Not Implemented",description:"This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})};return r.jsx(W.header,{initial:{y:-60,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:120,damping:20},className:"glass-effect border-b border-slate-700/50 px-4 sm:px-6 py-3 sticky top-0 z-30",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[r.jsx(F,{variant:"ghost",size:"icon",onClick:e,className:"text-slate-300 hover:text-white hover:bg-slate-700/50 lg:hidden",children:r.jsx(TT,{className:"w-5 h-5"})}),r.jsxs("form",{onSubmit:a,className:"relative hidden sm:block",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),r.jsx(ee,{placeholder:"Global Search...",className:"pl-10 w-64 md:w-80 bg-slate-700/30 border-slate-600 text-white placeholder:text-slate-400 focus:ring-blue-500 focus:border-blue-500 rounded-lg"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[r.jsxs(F,{variant:"ghost",size:"icon",onClick:o,className:"text-slate-300 hover:text-white hover:bg-slate-700/50 relative rounded-full",children:[r.jsx(iT,{className:"w-5 h-5"}),r.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-slate-800 animate-pulse"})]}),t==="admin"&&r.jsx(Io,{to:"/admin-settings",children:r.jsx(F,{variant:"ghost",size:"icon",className:"text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-full",title:"Admin Settings",children:r.jsx(Bi,{className:"w-5 h-5"})})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(fN,{onClick:l,className:"w-8 h-8 cursor-pointer hover:opacity-80 transition-opacity",children:r.jsx(mN,{className:"bg-gradient-to-br from-blue-600 to-purple-700 text-white text-xs",children:r.jsx(Pn,{className:"w-4 h-4"})})}),t&&r.jsx("span",{className:"text-xs text-slate-400 hidden md:inline",children:t.replace(/_/g," ").split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ")})]}),r.jsx(F,{variant:"ghost",size:"icon",onClick:i,className:"text-slate-300 hover:text-red-400 hover:bg-red-500/20 rounded-full",title:"Logout",children:r.jsx(ET,{className:"w-5 h-5"})})]})]})})},cL=250,dL=100,uL=800,hL=600,fL=()=>{const[e,t]=f.useState(!0),[s,n]=f.useState(!1),[i,a]=f.useState({x:window.innerWidth-370,y:50}),[o,l]=f.useState({width:350,height:180}),[c,d]=f.useState([]),{toast:u}=ue(),h=f.useRef(null),[m,x]=f.useState(!1);f.useEffect(()=>{const p=async()=>{try{const{data:b,error:j}=await M.from("notifications").select("id, message, type, ticker_status, created_at").in("ticker_status",["red","yellow","orange","green"]).order("created_at",{ascending:!1}).limit(10);if(j){console.error("Error fetching ticker alerts:",j),u({variant:"destructive",title:"Ticker Error",description:"Could not load alerts."});return}const S=b.map(R=>{let E=Gr,_="bg-slate-700/80 hover:bg-slate-600/80";switch(R.ticker_status){case"red":E=Gr,_="bg-red-500/80 hover:bg-red-400/80";break;case"yellow":case"orange":E=ut,_="bg-yellow-500/80 hover:bg-yellow-400/80";break;case"green":E=nt,_="bg-green-500/80 hover:bg-green-400/80";break;default:E=Gr}return{...R,icon:E,color:_}});d(S)}catch(b){console.error("Ticker fetch exception:",b),u({variant:"destructive",title:"Ticker Exception",description:"An error occurred while fetching alerts."})}};p();const y=M.channel("realtime-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},b=>{p()}).subscribe();return()=>{M.removeChannel(y)}},[u]);const v=p=>{u({title:`Alert: ${p.type||"Notification"}`,description:p.message,variant:p.ticker_status==="red"?"destructive":"default"})},g=(p,y)=>{m&&l(b=>({width:Math.min(uL,Math.max(cL,b.width+y.delta.x)),height:Math.min(hL,Math.max(dL,b.height+y.delta.y))}))},w=(p,y)=>{a(b=>({x:Math.max(0,Math.min(window.innerWidth-o.width,b.x+y.delta.x)),y:Math.max(0,Math.min(window.innerHeight-o.height,b.y+y.delta.y))}))};return e?r.jsxs(W.div,{ref:h,style:{position:"fixed",left:i.x,top:i.y,width:o.width,height:o.height,zIndex:1e3},className:"glass-effect rounded-xl shadow-2xl flex flex-col overflow-hidden border border-slate-700/50",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:260,damping:20},children:[r.jsxs(W.div,{drag:!0,dragConstraints:{left:0,top:0,right:window.innerWidth-o.width,bottom:window.innerHeight-o.height},dragMomentum:!1,onDrag:w,className:"flex items-center justify-between p-2.5 border-b border-slate-700/30 bg-slate-800/50 cursor-move",children:[r.jsx("span",{className:"text-xs font-semibold text-sky-300 uppercase tracking-wider",children:"Live Alerts"}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(F,{variant:"ghost",size:"icon",className:"w-5 h-5 text-slate-400 hover:text-sky-300 focus:outline-none focus:ring-1 focus:ring-sky-500",onClick:p=>{p.stopPropagation(),n(!s)},children:s?r.jsx(PT,{className:"w-3 h-3"}):r.jsx(kT,{className:"w-3 h-3"})}),r.jsx(F,{variant:"ghost",size:"icon",className:"w-5 h-5 text-slate-400 hover:text-red-400 focus:outline-none focus:ring-1 focus:ring-red-500",onClick:p=>{p.stopPropagation(),t(!1)},children:r.jsx(Dt,{className:"w-3 h-3"})})]})]}),r.jsx("div",{className:"flex-1 p-2.5 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-800/50",children:r.jsxs(jt,{children:[c.length===0&&r.jsxs(W.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full text-slate-500 text-xs",children:[r.jsx(nt,{className:"w-6 h-6 mb-1"}),"No active alerts."]}),c.slice(0,s?10:Math.floor((o.height-60)/40)||1).map((p,y)=>r.jsxs(W.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-50},transition:{type:"spring",stiffness:300,damping:30,delay:y*.05},className:de("flex items-center space-x-2 p-1.5 rounded-md mb-1.5 cursor-pointer transition-all duration-150 ease-in-out",p.color,"text-white shadow-sm hover:shadow-md"),onClick:()=>v(p),children:[r.jsx(p.icon,{className:"w-3.5 h-3.5 flex-shrink-0"}),r.jsx("span",{className:"text-xs truncate",title:p.message,children:p.message})]},p.id||y))]})}),r.jsx(W.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:0,onDragStart:()=>x(!0),onDragEnd:()=>x(!1),onDrag:g,className:"absolute bottom-0 right-0 w-5 h-5 cursor-se-resize flex items-center justify-center text-slate-500 hover:text-sky-300",title:"Resize Ticker",children:r.jsx(vT,{className:"w-3 h-3 transform rotate-45"})})]}):null},mL=({userRole:e})=>{const[t,s]=f.useState(window.innerWidth>1024),n=ln();return f.useEffect(()=>{const i=()=>{window.innerWidth<=1024?s(!1):s(!0)};return window.addEventListener("resize",i),i(),()=>window.removeEventListener("resize",i)},[]),f.useEffect(()=>{window.innerWidth<=1024&&s(!1)},[n]),r.jsxs("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-slate-900 to-black",children:[r.jsx(q3,{isOpen:t,userRole:e,toggleSidebar:()=>s(!t)}),r.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ease-in-out ${t&&window.innerWidth>1024?"lg:ml-64":"ml-0"}`,children:[r.jsx(lL,{onMenuClick:()=>s(!t),userRole:e}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 sm:p-6 lg:p-8",children:r.jsx(Cb,{})})]}),e&&e!=="client_poc"&&r.jsx(fL,{})]})},H=te.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:de("ios-card text-card-foreground",e),...t}));H.displayName="Card";const K=te.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:de("flex flex-col space-y-1.5 p-6",e),...t}));K.displayName="CardHeader";const Y=te.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:de("text-2xl font-semibold leading-none tracking-tight",e),...t}));Y.displayName="CardTitle";const he=te.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:de("text-sm text-muted-foreground",e),...t}));he.displayName="CardDescription";const U=te.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:de("p-6 pt-0",e),...t}));U.displayName="CardContent";const pL=te.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:de("flex items-center p-6 pt-0",e),...t}));pL.displayName="CardFooter";const xL=({userRole:e})=>{const{toast:t}=ue(),s=Mo(),[n,i]=f.useState([]),[a,o]=f.useState([]),[l,c]=f.useState(!0),[d,u]=f.useState("User");f.useEffect(()=>{e?(async()=>{c(!0);let v=[{id:"sites",title:"Active Facilities",value:"0",icon:qt,change:"+0",color:"text-blue-400",roles:["admin","supervisor","operations_manager","executive","client_poc"]},{id:"regions",title:"Managed Regions",value:"0",icon:Ts,change:"+0",color:"text-purple-400",roles:["admin","operations_manager","executive"]},{id:"officers",title:"Total Officers",value:"0",icon:Ae,change:"+0",color:"text-green-400",roles:["admin","supervisor","operations_manager","executive"]},{id:"alerts",title:"Active Alerts",value:"0",icon:ut,change:"0",color:"text-yellow-400",roles:["admin","supervisor","operations_manager","executive","hybrid_employee"]},{id:"compliance",title:"Compliance",value:"0%",icon:nt,change:"+0%",color:"text-emerald-400",roles:["admin","operations_manager","executive","consultant"]}];try{const{data:{user:g}}=await M.auth.getUser();if(g){const{data:A}=await M.from("users").select("full_name").eq("auth_user_id",g.id).single();A&&u(A.full_name||"User")}const w=[M.from("sites").select("*",{count:"exact",head:!0}).eq("type","site"),M.from("sites").select("*",{count:"exact",head:!0}).eq("type","region"),M.from("users").select("*",{count:"exact",head:!0}).neq("role","client_poc"),M.from("notifications").select("*",{count:"exact",head:!0}).eq("read",!1).neq("ticker_status","green")],[p,y,b,j]=await Promise.all(w);v=v.map(A=>{var P,O,k,$;return A.id==="sites"?{...A,value:((P=p.count)==null?void 0:P.toString())??"0"}:A.id==="regions"?{...A,value:((O=y.count)==null?void 0:O.toString())??"0"}:A.id==="officers"?{...A,value:((k=b.count)==null?void 0:k.toString())??"0"}:A.id==="alerts"?{...A,value:(($=j.count)==null?void 0:$.toString())??"0"}:A.id==="compliance"?{...A,value:"98%"}:A});const S=v.filter(A=>e&&A.roles.includes(e));i(S);const{data:R,error:E}=await M.from("notifications").select("id, message, created_at, type, ticker_status").order("created_at",{ascending:!1}).limit(5);if(E)throw E;const _=R.map(A=>({id:A.id,message:A.message,time:new Date(A.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:A.ticker_status==="red"?"critical":A.ticker_status==="yellow"||A.ticker_status==="orange"?"warning":A.type==="training_alert"?"info":"success",type:A.type}));o(_)}catch{t({variant:"destructive",title:"Dashboard Error",description:"Failed to load some dashboard data."})}finally{c(!1)}})():c(!1)},[e,t]);const h=()=>{const x=new Date().getHours();return x<12?"Good Morning":x<18?"Good Afternoon":"Good Evening"},m=[{label:"New Report",icon:He,roles:["admin","supervisor","operations_manager","hybrid_employee"],path:"/reports/list"},{label:"View Schedule",icon:Oc,roles:["admin","supervisor","operations_manager","hybrid_employee"],path:"/scheduling"},{label:"Manage Hierarchy",icon:Ts,roles:["admin","operations_manager","executive"],path:"/sites"},{label:"Client Portal",icon:cr,roles:["client_poc"],path:"/"}].filter(x=>e&&x.roles.includes(e));return l?r.jsxs("div",{className:"min-h-[calc(100vh-150px)] flex flex-col items-center justify-center text-white p-4",children:[r.jsx("img",{alt:"GS-3 SecureOps Pro Logo loading",className:"w-24 h-24 mb-4 animate-pulse",src:"https://images.unsplash.com/photo-1575821104894-b683ce7525ff"}),r.jsx("p",{className:"text-slate-300",children:"Loading Dashboard Data..."}),r.jsx("div",{className:"mt-6 w-12 h-12 border-4 border-dashed rounded-full animate-spin border-blue-400"})]}):e?r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[r.jsxs("h1",{className:"text-3xl font-bold text-white",children:[h(),", ",d,"!"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Here's your operational overview for today."})]}),n.length>0&&r.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-${Math.min(n.length,5)} gap-6`,children:n.map((x,v)=>r.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:v*.05},children:r.jsx(H,{className:"ios-card hover-lift",children:r.jsx(U,{className:"p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:x.title}),r.jsx("p",{className:"text-2xl font-bold text-white",children:x.value}),x.change&&r.jsxs("p",{className:`text-xs ${x.color} flex items-center mt-1`,children:[r.jsx(cp,{className:"w-3 h-3 mr-1"}),x.change]})]}),r.jsx("div",{className:"p-2.5 rounded-lg bg-gradient-to-br from-slate-700/50 to-slate-800/50",children:r.jsx(x.icon,{className:`w-5 h-5 ${x.color}`})})]})})})},x.id))}),m.length>0&&r.jsxs(W.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:"Quick Actions"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:m.map(x=>r.jsxs(F,{variant:"outline",className:"glass-button justify-start text-left h-auto py-2.5 px-3 hover-lift",onClick:()=>x.path?s(x.path):t({title:"🚧 Feature Not Implemented"}),children:[r.jsx(x.icon,{className:"w-4 h-4 mr-2 text-blue-400 flex-shrink-0"}),r.jsx("span",{className:"text-xs text-gray-200",children:x.label})]},x.label))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(W.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:r.jsxs(H,{className:"ios-card h-full",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(cj,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Recent Activities"})]})}),r.jsx(U,{children:a.length>0?r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-hide",children:a.map(x=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full mt-1.5 flex-shrink-0 ${x.status==="critical"?"bg-red-500 animate-ping":x.status==="success"?"bg-green-500":x.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white text-sm",children:x.message}),r.jsxs("p",{className:"text-gray-400 text-xs mt-0.5 flex items-center",children:[r.jsx(Bo,{className:"w-3 h-3 mr-1"}),x.time," - ",r.jsx("span",{className:"ml-1 capitalize",children:x.type.replace(/_/g," ")})]})]})]},x.id))}):r.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent activities to display."})})]})}),r.jsx(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:r.jsxs(H,{className:"ios-card h-full",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Rt,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"System Status"})]})}),r.jsx(U,{children:r.jsx("div",{className:"space-y-3",children:[{name:"Core Systems",status:"Operational",color:"green"},{name:"NFC Network",status:"Online",color:"green"},{name:"Training Platform",status:e==="admin"?"Maintenance":"Operational",color:e==="admin"?"yellow":"green"},{name:"Analytics Engine",status:"Active",color:"green"},{name:"Database Connection",status:"Secure",color:"green"}].map(x=>r.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-slate-800/40",children:[r.jsx("span",{className:"text-white text-sm",children:x.name}),r.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full bg-${x.color}-500/20 text-${x.color}-400`,children:x.status})]},x.name))})})]})})]})]}):r.jsxs("div",{className:"min-h-[calc(100vh-150px)] flex flex-col items-center justify-center text-white p-4 text-center",children:[r.jsx("img",{alt:"GS-3 SecureOps Pro Logo",className:"w-28 h-28 mb-5",src:"https://images.unsplash.com/photo-1590456744140-d196318f23cf"}),r.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Welcome to SecureOps Pro"}),r.jsx("p",{className:"text-slate-400 mb-6 max-w-md",children:"Your advanced security management platform. Please log in to access your personalized dashboard and operational tools."})]})};var gL=Zc[" useId ".trim().toString()]||(()=>{}),yL=0;function Ya(e){const[t,s]=f.useState(gL());return qs(()=>{e||s(n=>n??String(yL++))},[e]),e||(t?`radix-${t}`:"")}var vL=f.createContext(void 0);function ON(e){const t=f.useContext(vL);return e||t||"ltr"}var Zu="rovingFocusGroup.onEntryFocus",wL={bubbles:!1,cancelable:!0},Yo="RovingFocusGroup",[Kf,$N,bL]=Mb(Yo),[jL,LN]=Un(Yo,[bL]),[NL,SL]=jL(Yo),DN=f.forwardRef((e,t)=>r.jsx(Kf.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Kf.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(_L,{...e,ref:t})})}));DN.displayName=Yo;var _L=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,m=f.useRef(null),x=Yt(t,m),v=ON(a),[g,w]=Fo({prop:o,defaultProp:l??null,onChange:c,caller:Yo}),[p,y]=f.useState(!1),b=As(d),j=$N(s),S=f.useRef(!1),[R,E]=f.useState(0);return f.useEffect(()=>{const _=m.current;if(_)return _.addEventListener(Zu,b),()=>_.removeEventListener(Zu,b)},[b]),r.jsx(NL,{scope:s,orientation:n,dir:v,loop:i,currentTabStopId:g,onItemFocus:f.useCallback(_=>w(_),[w]),onItemShiftTab:f.useCallback(()=>y(!0),[]),onFocusableItemAdd:f.useCallback(()=>E(_=>_+1),[]),onFocusableItemRemove:f.useCallback(()=>E(_=>_-1),[]),children:r.jsx(Re.div,{tabIndex:p||R===0?-1:0,"data-orientation":n,...h,ref:x,style:{outline:"none",...e.style},onMouseDown:Pe(e.onMouseDown,()=>{S.current=!0}),onFocus:Pe(e.onFocus,_=>{const A=!S.current;if(_.target===_.currentTarget&&A&&!p){const P=new CustomEvent(Zu,wL);if(_.currentTarget.dispatchEvent(P),!P.defaultPrevented){const O=j().filter(T=>T.focusable),k=O.find(T=>T.active),$=O.find(T=>T.id===g),C=[k,$,...O].filter(Boolean).map(T=>T.ref.current);FN(C,u)}}S.current=!1}),onBlur:Pe(e.onBlur,()=>y(!1))})})}),MN="RovingFocusGroupItem",IN=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:i=!1,tabStopId:a,children:o,...l}=e,c=Ya(),d=a||c,u=SL(MN,s),h=u.currentTabStopId===d,m=$N(s),{onFocusableItemAdd:x,onFocusableItemRemove:v,currentTabStopId:g}=u;return f.useEffect(()=>{if(n)return x(),()=>v()},[n,x,v]),r.jsx(Kf.ItemSlot,{scope:s,id:d,focusable:n,active:i,children:r.jsx(Re.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:Pe(e.onMouseDown,w=>{n?u.onItemFocus(d):w.preventDefault()}),onFocus:Pe(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:Pe(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const p=kL(w,u.orientation,u.dir);if(p!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=m().filter(j=>j.focusable).map(j=>j.ref.current);if(p==="last")b.reverse();else if(p==="prev"||p==="next"){p==="prev"&&b.reverse();const j=b.indexOf(w.currentTarget);b=u.loop?TL(b,j+1):b.slice(j+1)}setTimeout(()=>FN(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});IN.displayName=MN;var CL={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function EL(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function kL(e,t,s){const n=EL(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return CL[n]}function FN(e,t=!1){const s=document.activeElement;for(const n of e)if(n===s||(n.focus({preventScroll:t}),document.activeElement!==s))return}function TL(e,t){return e.map((s,n)=>e[(t+n)%e.length])}var PL=DN,AL=IN,Dd="Tabs",[RL,s8]=Un(Dd,[LN]),VN=LN(),[OL,Bp]=RL(Dd),BN=f.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=ON(l),[h,m]=Fo({prop:n,onChange:i,defaultProp:a??"",caller:Dd});return r.jsx(OL,{scope:s,baseId:Ya(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:c,children:r.jsx(Re.div,{dir:u,"data-orientation":o,...d,ref:t})})});BN.displayName=Dd;var zN="TabsList",UN=f.forwardRef((e,t)=>{const{__scopeTabs:s,loop:n=!0,...i}=e,a=Bp(zN,s),o=VN(s);return r.jsx(PL,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:r.jsx(Re.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});UN.displayName=zN;var HN="TabsTrigger",qN=f.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,disabled:i=!1,...a}=e,o=Bp(HN,s),l=VN(s),c=KN(o.baseId,n),d=YN(o.baseId,n),u=n===o.value;return r.jsx(AL,{asChild:!0,...l,focusable:!i,active:u,children:r.jsx(Re.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:Pe(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:Pe(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:Pe(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(n)})})})});qN.displayName=HN;var WN="TabsContent",GN=f.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,forceMount:i,children:a,...o}=e,l=Bp(WN,s),c=KN(l.baseId,n),d=YN(l.baseId,n),u=n===l.value,h=f.useRef(u);return f.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),r.jsx(Zi,{present:i||u,children:({present:m})=>r.jsx(Re.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&a})})});GN.displayName=WN;function KN(e,t){return`${e}-trigger-${t}`}function YN(e,t){return`${e}-content-${t}`}var $L=BN,QN=UN,JN=qN,XN=GN;const Et=$L,gt=te.forwardRef(({className:e,...t},s)=>r.jsx(QN,{ref:s,className:de("inline-flex h-auto items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));gt.displayName=QN.displayName;const ie=te.forwardRef(({className:e,...t},s)=>r.jsx(JN,{ref:s,className:de("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ie.displayName=JN.displayName;const oe=te.forwardRef(({className:e,...t},s)=>r.jsx(XN,{ref:s,className:de("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));oe.displayName=XN.displayName;const Hc={async getAssessments(e={}){try{let t=M.from("assessments").select("*").order("scheduled_date",{ascending:!1});e.status&&(t=t.eq("status",e.status)),e.priority&&(t=t.eq("priority",e.priority)),e.assessment_type&&(t=t.eq("assessment_type",e.assessment_type)),e.search&&(t=t.or(`client_name.ilike.%${e.search}%,location.ilike.%${e.search}%`));const{data:s,error:n}=await t;if(n)throw console.error("Error fetching assessments:",n),n;return s||[]}catch(t){throw console.error("Error in getAssessments:",t),t}},async getAssessment(e){try{const{data:t,error:s}=await M.from("assessments").select("*").eq("id",e).single();if(s)throw console.error("Error fetching assessment:",s),s;return t}catch(t){throw console.error("Error in getAssessment:",t),t}},async createAssessment(e){try{const{data:t,error:s}=await M.from("assessments").insert([e]).select().single();if(s)throw console.error("Error creating assessment:",s),s;return t}catch(t){throw console.error("Error in createAssessment:",t),t}},async updateAssessment(e,t){try{const{data:s,error:n}=await M.from("assessments").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating assessment:",n),n;return s}catch(s){throw console.error("Error in updateAssessment:",s),s}},async deleteAssessment(e){try{const{error:t}=await M.from("assessments").delete().eq("id",e);if(t)throw console.error("Error deleting assessment:",t),t;return{success:!0}}catch(t){throw console.error("Error in deleteAssessment:",t),t}},async getAssessmentTemplates(){try{const{data:e,error:t}=await M.from("assessment_templates").select("*").eq("is_active",!0).order("title");if(t)throw console.error("Error fetching assessment templates:",t),t;return e||[]}catch(e){throw console.error("Error in getAssessmentTemplates:",e),e}},async getAssessmentServices(e){try{const{data:t,error:s}=await M.from("assessment_services").select("*").eq("assessment_id",e).order("service_name");if(s)throw console.error("Error fetching assessment services:",s),s;return t||[]}catch(t){throw console.error("Error in getAssessmentServices:",t),t}},async updateAssessmentServices(e,t){try{const{error:s}=await M.from("assessment_services").delete().eq("assessment_id",e);if(s)throw console.error("Error deleting existing assessment services:",s),s;if(t&&t.length>0){const n=t.map(o=>({assessment_id:e,service_name:o.name,is_included:o.is_included,notes:o.notes})),{data:i,error:a}=await M.from("assessment_services").insert(n).select();if(a)throw console.error("Error inserting assessment services:",a),a;return i}return[]}catch(s){throw console.error("Error in updateAssessmentServices:",s),s}},async getAssessmentStats(){try{const{data:e,error:t}=await M.from("assessments").select("status, priority, assessment_type");if(t)throw console.error("Error fetching assessment stats:",t),t;const s={total:e.length,byStatus:{},byPriority:{},byType:{}};return e.forEach(n=>{s.byStatus[n.status]=(s.byStatus[n.status]||0)+1,s.byPriority[n.priority]=(s.byPriority[n.priority]||0)+1,s.byType[n.assessment_type]=(s.byType[n.assessment_type]||0)+1}),s}catch(e){throw console.error("Error in getAssessmentStats:",e),e}}};var LL="Label",ZN=f.forwardRef((e,t)=>r.jsx(Re.label,{...e,ref:t,onMouseDown:s=>{var i;s.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));ZN.displayName=LL;var eS=ZN;const DL=vd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),G=te.forwardRef(({className:e,...t},s)=>r.jsx(eS,{ref:s,className:de(DL(),e),...t}));G.displayName=eS.displayName;function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Oe.apply(null,arguments)}function gy(e,[t,s]){return Math.min(s,Math.max(t,e))}function At(e,t,{checkForDefaultPrevented:s=!0}={}){return function(i){if(e==null||e(i),s===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function zp(e,t=[]){let s=[];function n(a,o){const l=f.createContext(o),c=s.length;s=[...s,o];function d(h){const{scope:m,children:x,...v}=h,g=(m==null?void 0:m[e][c])||l,w=f.useMemo(()=>v,Object.values(v));return f.createElement(g.Provider,{value:w},x)}function u(h,m){const x=(m==null?void 0:m[e][c])||l,v=f.useContext(x);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=s.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[n,ML(i,...t)]}function ML(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}function IL(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function tS(...e){return t=>e.forEach(s=>IL(s,t))}function Jt(...e){return f.useCallback(tS(...e),e)}const Eo=f.forwardRef((e,t)=>{const{children:s,...n}=e,i=f.Children.toArray(s),a=i.find(VL);if(a){const o=a.props.children,l=i.map(c=>c===a?f.Children.count(o)>1?f.Children.only(null):f.isValidElement(o)?o.props.children:null:c);return f.createElement(Yf,Oe({},n,{ref:t}),f.isValidElement(o)?f.cloneElement(o,void 0,l):null)}return f.createElement(Yf,Oe({},n,{ref:t}),s)});Eo.displayName="Slot";const Yf=f.forwardRef((e,t)=>{const{children:s,...n}=e;return f.isValidElement(s)?f.cloneElement(s,{...BL(n,s.props),ref:t?tS(t,s.ref):s.ref}):f.Children.count(s)>1?f.Children.only(null):null});Yf.displayName="SlotClone";const FL=({children:e})=>f.createElement(f.Fragment,null,e);function VL(e){return f.isValidElement(e)&&e.type===FL}function BL(e,t){const s={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?s[n]=(...l)=>{a(...l),i(...l)}:i&&(s[n]=i):n==="style"?s[n]={...i,...a}:n==="className"&&(s[n]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function zL(e){const t=e+"CollectionProvider",[s,n]=zp(t),[i,a]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:v,children:g}=x,w=te.useRef(null),p=te.useRef(new Map).current;return te.createElement(i,{scope:v,itemMap:p,collectionRef:w},g)},l=e+"CollectionSlot",c=te.forwardRef((x,v)=>{const{scope:g,children:w}=x,p=a(l,g),y=Jt(v,p.collectionRef);return te.createElement(Eo,{ref:y},w)}),d=e+"CollectionItemSlot",u="data-radix-collection-item",h=te.forwardRef((x,v)=>{const{scope:g,children:w,...p}=x,y=te.useRef(null),b=Jt(v,y),j=a(d,g);return te.useEffect(()=>(j.itemMap.set(y,{ref:y,...p}),()=>void j.itemMap.delete(y))),te.createElement(Eo,{[u]:"",ref:b},w)});function m(x){const v=a(e+"CollectionConsumer",x);return te.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const p=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((j,S)=>p.indexOf(j.ref.current)-p.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},m,n]}const UL=f.createContext(void 0);function HL(e){const t=f.useContext(UL);return e||t||"ltr"}const qL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],kt=qL.reduce((e,t)=>{const s=f.forwardRef((n,i)=>{const{asChild:a,...o}=n,l=a?Eo:t;return f.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),f.createElement(l,Oe({},o,{ref:i}))});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function WL(e,t){e&&on.flushSync(()=>e.dispatchEvent(t))}function gr(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...s)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...s)},[])}function GL(e,t=globalThis==null?void 0:globalThis.document){const s=gr(e);f.useEffect(()=>{const n=i=>{i.key==="Escape"&&s(i)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[s,t])}const Qf="dismissableLayer.update",KL="dismissableLayer.pointerDownOutside",YL="dismissableLayer.focusOutside";let yy;const QL=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),JL=f.forwardRef((e,t)=>{var s;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,u=f.useContext(QL),[h,m]=f.useState(null),x=(s=h==null?void 0:h.ownerDocument)!==null&&s!==void 0?s:globalThis==null?void 0:globalThis.document,[,v]=f.useState({}),g=Jt(t,_=>m(_)),w=Array.from(u.layers),[p]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=w.indexOf(p),b=h?w.indexOf(h):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,S=b>=y,R=XL(_=>{const A=_.target,P=[...u.branches].some(O=>O.contains(A));!S||P||(a==null||a(_),l==null||l(_),_.defaultPrevented||c==null||c())},x),E=ZL(_=>{const A=_.target;[...u.branches].some(O=>O.contains(A))||(o==null||o(_),l==null||l(_),_.defaultPrevented||c==null||c())},x);return GL(_=>{b===u.layers.size-1&&(i==null||i(_),!_.defaultPrevented&&c&&(_.preventDefault(),c()))},x),f.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(yy=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),vy(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=yy)}},[h,x,n,u]),f.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),vy())},[h,u]),f.useEffect(()=>{const _=()=>v({});return document.addEventListener(Qf,_),()=>document.removeEventListener(Qf,_)},[]),f.createElement(kt.div,Oe({},d,{ref:g,style:{pointerEvents:j?S?"auto":"none":void 0,...e.style},onFocusCapture:At(e.onFocusCapture,E.onFocusCapture),onBlurCapture:At(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:At(e.onPointerDownCapture,R.onPointerDownCapture)}))});function XL(e,t=globalThis==null?void 0:globalThis.document){const s=gr(e),n=f.useRef(!1),i=f.useRef(()=>{});return f.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let d=function(){sS(KL,s,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=d,t.addEventListener("click",i.current,{once:!0})):d()}n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}function ZL(e,t=globalThis==null?void 0:globalThis.document){const s=gr(e),n=f.useRef(!1);return f.useEffect(()=>{const i=a=>{a.target&&!n.current&&sS(YL,s,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function vy(){const e=new CustomEvent(Qf);document.dispatchEvent(e)}function sS(e,t,s,{discrete:n}){const i=s.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&i.addEventListener(e,t,{once:!0}),n?WL(i,a):i.dispatchEvent(a)}let eh=0;function eD(){f.useEffect(()=>{var e,t;const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=s[0])!==null&&e!==void 0?e:wy()),document.body.insertAdjacentElement("beforeend",(t=s[1])!==null&&t!==void 0?t:wy()),eh++,()=>{eh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),eh--}},[])}function wy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const th="focusScope.autoFocusOnMount",sh="focusScope.autoFocusOnUnmount",by={bubbles:!1,cancelable:!0},tD=f.forwardRef((e,t)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=f.useState(null),d=gr(i),u=gr(a),h=f.useRef(null),m=Jt(t,g=>c(g)),x=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let g=function(b){if(x.paused||!l)return;const j=b.target;l.contains(j)?h.current=j:kr(h.current,{select:!0})},w=function(b){if(x.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||kr(h.current,{select:!0}))},p=function(b){const j=document.activeElement;for(const S of b)S.removedNodes.length>0&&(l!=null&&l.contains(j)||kr(l))};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const y=new MutationObserver(p);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),y.disconnect()}}},[n,l,x.paused]),f.useEffect(()=>{if(l){Ny.add(x);const g=document.activeElement;if(!l.contains(g)){const p=new CustomEvent(th,by);l.addEventListener(th,d),l.dispatchEvent(p),p.defaultPrevented||(sD(oD(rS(l)),{select:!0}),document.activeElement===g&&kr(l))}return()=>{l.removeEventListener(th,d),setTimeout(()=>{const p=new CustomEvent(sh,by);l.addEventListener(sh,u),l.dispatchEvent(p),p.defaultPrevented||kr(g??document.body,{select:!0}),l.removeEventListener(sh,u),Ny.remove(x)},0)}}},[l,d,u,x]);const v=f.useCallback(g=>{if(!s&&!n||x.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,p=document.activeElement;if(w&&p){const y=g.currentTarget,[b,j]=rD(y);b&&j?!g.shiftKey&&p===j?(g.preventDefault(),s&&kr(b,{select:!0})):g.shiftKey&&p===b&&(g.preventDefault(),s&&kr(j,{select:!0})):p===y&&g.preventDefault()}},[s,n,x.paused]);return f.createElement(kt.div,Oe({tabIndex:-1},o,{ref:m,onKeyDown:v}))});function sD(e,{select:t=!1}={}){const s=document.activeElement;for(const n of e)if(kr(n,{select:t}),document.activeElement!==s)return}function rD(e){const t=rS(e),s=jy(t,e),n=jy(t.reverse(),e);return[s,n]}function rS(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function jy(e,t){for(const s of e)if(!nD(s,{upTo:t}))return s}function nD(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function iD(e){return e instanceof HTMLInputElement&&"select"in e}function kr(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&iD(e)&&t&&e.select()}}const Ny=aD();function aD(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=Sy(e,t),e.unshift(t)},remove(t){var s;e=Sy(e,t),(s=e[0])===null||s===void 0||s.resume()}}}function Sy(e,t){const s=[...e],n=s.indexOf(t);return n!==-1&&s.splice(n,1),s}function oD(e){return e.filter(t=>t.tagName!=="A")}const yr=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},lD=Zc["useId".toString()]||(()=>{});let cD=0;function nS(e){const[t,s]=f.useState(lD());return yr(()=>{e||s(n=>n??String(cD++))},[e]),e||(t?`radix-${t}`:"")}const dD=["top","right","bottom","left"],tn=Math.min,Zt=Math.max,qc=Math.round,Tl=Math.floor,Hs=e=>({x:e,y:e}),uD={left:"right",right:"left",bottom:"top",top:"bottom"},hD={start:"end",end:"start"};function Jf(e,t,s){return Zt(e,tn(t,s))}function vr(e,t){return typeof e=="function"?e(t):e}function wr(e){return e.split("-")[0]}function sa(e){return e.split("-")[1]}function Up(e){return e==="x"?"y":"x"}function Hp(e){return e==="y"?"height":"width"}const fD=new Set(["top","bottom"]);function Vs(e){return fD.has(wr(e))?"y":"x"}function qp(e){return Up(Vs(e))}function mD(e,t,s){s===void 0&&(s=!1);const n=sa(e),i=qp(e),a=Hp(i);let o=i==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Wc(o)),[o,Wc(o)]}function pD(e){const t=Wc(e);return[Xf(e),t,Xf(t)]}function Xf(e){return e.replace(/start|end/g,t=>hD[t])}const _y=["left","right"],Cy=["right","left"],xD=["top","bottom"],gD=["bottom","top"];function yD(e,t,s){switch(e){case"top":case"bottom":return s?t?Cy:_y:t?_y:Cy;case"left":case"right":return t?xD:gD;default:return[]}}function vD(e,t,s,n){const i=sa(e);let a=yD(wr(e),s==="start",n);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(Xf)))),a}function Wc(e){return e.replace(/left|right|bottom|top/g,t=>uD[t])}function wD(e){return{top:0,right:0,bottom:0,left:0,...e}}function iS(e){return typeof e!="number"?wD(e):{top:e,right:e,bottom:e,left:e}}function Gc(e){const{x:t,y:s,width:n,height:i}=e;return{width:n,height:i,top:s,left:t,right:t+n,bottom:s+i,x:t,y:s}}function Ey(e,t,s){let{reference:n,floating:i}=e;const a=Vs(t),o=qp(t),l=Hp(o),c=wr(t),d=a==="y",u=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,m=n[l]/2-i[l]/2;let x;switch(c){case"top":x={x:u,y:n.y-i.height};break;case"bottom":x={x:u,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:h};break;case"left":x={x:n.x-i.width,y:h};break;default:x={x:n.x,y:n.y}}switch(sa(t)){case"start":x[o]-=m*(s&&d?-1:1);break;case"end":x[o]+=m*(s&&d?-1:1);break}return x}const bD=async(e,t,s)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=s,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:h}=Ey(d,n,c),m=n,x={},v=0;for(let g=0;g<l.length;g++){const{name:w,fn:p}=l[g],{x:y,y:b,data:j,reset:S}=await p({x:u,y:h,initialPlacement:n,placement:m,strategy:i,middlewareData:x,rects:d,platform:o,elements:{reference:e,floating:t}});u=y??u,h=b??h,x={...x,[w]:{...x[w],...j}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:u,y:h}=Ey(d,m,c)),g=-1)}return{x:u,y:h,placement:m,strategy:i,middlewareData:x}};async function ko(e,t){var s;t===void 0&&(t={});const{x:n,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:x=0}=vr(t,e),v=iS(x),w=l[m?h==="floating"?"reference":"floating":h],p=Gc(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(w)))==null||s?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),y=h==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Gc(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(p.top-S.top+v.top)/j.y,bottom:(S.bottom-p.bottom+v.bottom)/j.y,left:(p.left-S.left+v.left)/j.x,right:(S.right-p.right+v.right)/j.x}}const jD=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:n,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=vr(e,t)||{};if(d==null)return{};const h=iS(u),m={x:s,y:n},x=qp(i),v=Hp(x),g=await o.getDimensions(d),w=x==="y",p=w?"top":"left",y=w?"bottom":"right",b=w?"clientHeight":"clientWidth",j=a.reference[v]+a.reference[x]-m[x]-a.floating[v],S=m[x]-a.reference[x],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let E=R?R[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(R)))&&(E=l.floating[b]||a.floating[v]);const _=j/2-S/2,A=E/2-g[v]/2-1,P=tn(h[p],A),O=tn(h[y],A),k=P,$=E-g[v]-O,N=E/2-g[v]/2+_,C=Jf(k,N,$),T=!c.arrow&&sa(i)!=null&&N!==C&&a.reference[v]/2-(N<k?P:O)-g[v]/2<0,V=T?N<k?N-k:N-$:0;return{[x]:m[x]+V,data:{[x]:C,centerOffset:N-C-V,...T&&{alignmentOffset:V}},reset:T}}}),ND=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...w}=vr(e,t);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const p=wr(i),y=Vs(l),b=wr(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(b||!g?[Wc(l)]:pD(l)),R=v!=="none";!m&&R&&S.push(...vD(l,g,v,j));const E=[l,...S],_=await ko(t,w),A=[];let P=((n=a.flip)==null?void 0:n.overflows)||[];if(u&&A.push(_[p]),h){const N=mD(i,o,j);A.push(_[N[0]],_[N[1]])}if(P=[...P,{placement:i,overflows:A}],!A.every(N=>N<=0)){var O,k;const N=(((O=a.flip)==null?void 0:O.index)||0)+1,C=E[N];if(C&&(!(h==="alignment"?y!==Vs(C):!1)||P.every(L=>L.overflows[0]>0&&Vs(L.placement)===y)))return{data:{index:N,overflows:P},reset:{placement:C}};let T=(k=P.filter(V=>V.overflows[0]<=0).sort((V,L)=>V.overflows[1]-L.overflows[1])[0])==null?void 0:k.placement;if(!T)switch(x){case"bestFit":{var $;const V=($=P.filter(L=>{if(R){const I=Vs(L.placement);return I===y||I==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(I=>I>0).reduce((I,z)=>I+z,0)]).sort((L,I)=>L[1]-I[1])[0])==null?void 0:$[0];V&&(T=V);break}case"initialPlacement":T=l;break}if(i!==T)return{reset:{placement:T}}}return{}}}};function ky(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ty(e){return dD.some(t=>e[t]>=0)}const SD=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:n="referenceHidden",...i}=vr(e,t);switch(n){case"referenceHidden":{const a=await ko(t,{...i,elementContext:"reference"}),o=ky(a,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Ty(o)}}}case"escaped":{const a=await ko(t,{...i,altBoundary:!0}),o=ky(a,s.floating);return{data:{escapedOffsets:o,escaped:Ty(o)}}}default:return{}}}}},aS=new Set(["left","top"]);async function _D(e,t){const{placement:s,platform:n,elements:i}=e,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=wr(s),l=sa(s),c=Vs(s)==="y",d=aS.has(o)?-1:1,u=a&&c?-1:1,h=vr(t,e);let{mainAxis:m,crossAxis:x,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(x=l==="end"?v*-1:v),c?{x:x*u,y:m*d}:{x:m*d,y:x*u}}const CD=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,n;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await _D(t,e);return o===((s=l.offset)==null?void 0:s.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},ED=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:n,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:p,y}=w;return{x:p,y}}},...c}=vr(e,t),d={x:s,y:n},u=await ko(t,c),h=Vs(wr(i)),m=Up(h);let x=d[m],v=d[h];if(a){const w=m==="y"?"top":"left",p=m==="y"?"bottom":"right",y=x+u[w],b=x-u[p];x=Jf(y,x,b)}if(o){const w=h==="y"?"top":"left",p=h==="y"?"bottom":"right",y=v+u[w],b=v-u[p];v=Jf(y,v,b)}const g=l.fn({...t,[m]:x,[h]:v});return{...g,data:{x:g.x-s,y:g.y-n,enabled:{[m]:a,[h]:o}}}}}},kD=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:n,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=vr(e,t),u={x:s,y:n},h=Vs(i),m=Up(h);let x=u[m],v=u[h];const g=vr(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=m==="y"?"height":"width",j=a.reference[m]-a.floating[b]+w.mainAxis,S=a.reference[m]+a.reference[b]-w.mainAxis;x<j?x=j:x>S&&(x=S)}if(d){var p,y;const b=m==="y"?"width":"height",j=aS.has(wr(i)),S=a.reference[h]-a.floating[b]+(j&&((p=o.offset)==null?void 0:p[h])||0)+(j?0:w.crossAxis),R=a.reference[h]+a.reference[b]+(j?0:((y=o.offset)==null?void 0:y[h])||0)-(j?w.crossAxis:0);v<S?v=S:v>R&&(v=R)}return{[m]:x,[h]:v}}}},TD=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,n;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...d}=vr(e,t),u=await ko(t,d),h=wr(i),m=sa(i),x=Vs(i)==="y",{width:v,height:g}=a.floating;let w,p;h==="top"||h==="bottom"?(w=h,p=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(p=h,w=m==="end"?"top":"bottom");const y=g-u.top-u.bottom,b=v-u.left-u.right,j=tn(g-u[w],y),S=tn(v-u[p],b),R=!t.middlewareData.shift;let E=j,_=S;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(_=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(E=y),R&&!m){const P=Zt(u.left,0),O=Zt(u.right,0),k=Zt(u.top,0),$=Zt(u.bottom,0);x?_=v-2*(P!==0||O!==0?P+O:Zt(u.left,u.right)):E=g-2*(k!==0||$!==0?k+$:Zt(u.top,u.bottom))}await c({...t,availableWidth:_,availableHeight:E});const A=await o.getDimensions(l.floating);return v!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function Md(){return typeof window<"u"}function ra(e){return oS(e)?(e.nodeName||"").toLowerCase():"#document"}function ss(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Gs(e){var t;return(t=(oS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function oS(e){return Md()?e instanceof Node||e instanceof ss(e).Node:!1}function Os(e){return Md()?e instanceof Element||e instanceof ss(e).Element:!1}function Ws(e){return Md()?e instanceof HTMLElement||e instanceof ss(e).HTMLElement:!1}function Py(e){return!Md()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ss(e).ShadowRoot}const PD=new Set(["inline","contents"]);function Qo(e){const{overflow:t,overflowX:s,overflowY:n,display:i}=$s(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!PD.has(i)}const AD=new Set(["table","td","th"]);function RD(e){return AD.has(ra(e))}const OD=[":popover-open",":modal"];function Id(e){return OD.some(t=>{try{return e.matches(t)}catch{return!1}})}const $D=["transform","translate","scale","rotate","perspective"],LD=["transform","translate","scale","rotate","perspective","filter"],DD=["paint","layout","strict","content"];function Wp(e){const t=Gp(),s=Os(e)?$s(e):e;return $D.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||LD.some(n=>(s.willChange||"").includes(n))||DD.some(n=>(s.contain||"").includes(n))}function MD(e){let t=sn(e);for(;Ws(t)&&!Wi(t);){if(Wp(t))return t;if(Id(t))return null;t=sn(t)}return null}function Gp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ID=new Set(["html","body","#document"]);function Wi(e){return ID.has(ra(e))}function $s(e){return ss(e).getComputedStyle(e)}function Fd(e){return Os(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function sn(e){if(ra(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Py(e)&&e.host||Gs(e);return Py(t)?t.host:t}function lS(e){const t=sn(e);return Wi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ws(t)&&Qo(t)?t:lS(t)}function To(e,t,s){var n;t===void 0&&(t=[]),s===void 0&&(s=!0);const i=lS(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),o=ss(i);if(a){const l=Zf(o);return t.concat(o,o.visualViewport||[],Qo(i)?i:[],l&&s?To(l):[])}return t.concat(i,To(i,[],s))}function Zf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function cS(e){const t=$s(e);let s=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=Ws(e),a=i?e.offsetWidth:s,o=i?e.offsetHeight:n,l=qc(s)!==a||qc(n)!==o;return l&&(s=a,n=o),{width:s,height:n,$:l}}function Kp(e){return Os(e)?e:e.contextElement}function Ti(e){const t=Kp(e);if(!Ws(t))return Hs(1);const s=t.getBoundingClientRect(),{width:n,height:i,$:a}=cS(t);let o=(a?qc(s.width):s.width)/n,l=(a?qc(s.height):s.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const FD=Hs(0);function dS(e){const t=ss(e);return!Gp()||!t.visualViewport?FD:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function VD(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==ss(e)?!1:t}function In(e,t,s,n){t===void 0&&(t=!1),s===void 0&&(s=!1);const i=e.getBoundingClientRect(),a=Kp(e);let o=Hs(1);t&&(n?Os(n)&&(o=Ti(n)):o=Ti(e));const l=VD(a,s,n)?dS(a):Hs(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(a){const m=ss(a),x=n&&Os(n)?ss(n):n;let v=m,g=Zf(v);for(;g&&n&&x!==v;){const w=Ti(g),p=g.getBoundingClientRect(),y=$s(g),b=p.left+(g.clientLeft+parseFloat(y.paddingLeft))*w.x,j=p.top+(g.clientTop+parseFloat(y.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,h*=w.y,c+=b,d+=j,v=ss(g),g=Zf(v)}}return Gc({width:u,height:h,x:c,y:d})}function Yp(e,t){const s=Fd(e).scrollLeft;return t?t.left+s:In(Gs(e)).left+s}function uS(e,t,s){s===void 0&&(s=!1);const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-(s?0:Yp(e,n)),a=n.top+t.scrollTop;return{x:i,y:a}}function BD(e){let{elements:t,rect:s,offsetParent:n,strategy:i}=e;const a=i==="fixed",o=Gs(n),l=t?Id(t.floating):!1;if(n===o||l&&a)return s;let c={scrollLeft:0,scrollTop:0},d=Hs(1);const u=Hs(0),h=Ws(n);if((h||!h&&!a)&&((ra(n)!=="body"||Qo(o))&&(c=Fd(n)),Ws(n))){const x=In(n);d=Ti(n),u.x=x.x+n.clientLeft,u.y=x.y+n.clientTop}const m=o&&!h&&!a?uS(o,c,!0):Hs(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:s.y*d.y-c.scrollTop*d.y+u.y+m.y}}function zD(e){return Array.from(e.getClientRects())}function UD(e){const t=Gs(e),s=Fd(e),n=e.ownerDocument.body,i=Zt(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=Zt(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-s.scrollLeft+Yp(e);const l=-s.scrollTop;return $s(n).direction==="rtl"&&(o+=Zt(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:l}}function HD(e,t){const s=ss(e),n=Gs(e),i=s.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=Gp();(!d||d&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}const qD=new Set(["absolute","fixed"]);function WD(e,t){const s=In(e,!0,t==="fixed"),n=s.top+e.clientTop,i=s.left+e.clientLeft,a=Ws(e)?Ti(e):Hs(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,d=n*a.y;return{width:o,height:l,x:c,y:d}}function Ay(e,t,s){let n;if(t==="viewport")n=HD(e,s);else if(t==="document")n=UD(Gs(e));else if(Os(t))n=WD(t,s);else{const i=dS(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Gc(n)}function hS(e,t){const s=sn(e);return s===t||!Os(s)||Wi(s)?!1:$s(s).position==="fixed"||hS(s,t)}function GD(e,t){const s=t.get(e);if(s)return s;let n=To(e,[],!1).filter(l=>Os(l)&&ra(l)!=="body"),i=null;const a=$s(e).position==="fixed";let o=a?sn(e):e;for(;Os(o)&&!Wi(o);){const l=$s(o),c=Wp(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&qD.has(i.position)||Qo(o)&&!c&&hS(e,o))?n=n.filter(u=>u!==o):i=l,o=sn(o)}return t.set(e,n),n}function KD(e){let{element:t,boundary:s,rootBoundary:n,strategy:i}=e;const o=[...s==="clippingAncestors"?Id(t)?[]:GD(t,this._c):[].concat(s),n],l=o[0],c=o.reduce((d,u)=>{const h=Ay(t,u,i);return d.top=Zt(h.top,d.top),d.right=tn(h.right,d.right),d.bottom=tn(h.bottom,d.bottom),d.left=Zt(h.left,d.left),d},Ay(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function YD(e){const{width:t,height:s}=cS(e);return{width:t,height:s}}function QD(e,t,s){const n=Ws(t),i=Gs(t),a=s==="fixed",o=In(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Hs(0);function d(){c.x=Yp(i)}if(n||!n&&!a)if((ra(t)!=="body"||Qo(i))&&(l=Fd(t)),n){const x=In(t,!0,a,t);c.x=x.x+t.clientLeft,c.y=x.y+t.clientTop}else i&&d();a&&!n&&i&&d();const u=i&&!n&&!a?uS(i,l):Hs(0),h=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:o.width,height:o.height}}function rh(e){return $s(e).position==="static"}function Ry(e,t){if(!Ws(e)||$s(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return Gs(e)===s&&(s=s.ownerDocument.body),s}function fS(e,t){const s=ss(e);if(Id(e))return s;if(!Ws(e)){let i=sn(e);for(;i&&!Wi(i);){if(Os(i)&&!rh(i))return i;i=sn(i)}return s}let n=Ry(e,t);for(;n&&RD(n)&&rh(n);)n=Ry(n,t);return n&&Wi(n)&&rh(n)&&!Wp(n)?s:n||MD(e)||s}const JD=async function(e){const t=this.getOffsetParent||fS,s=this.getDimensions,n=await s(e.floating);return{reference:QD(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function XD(e){return $s(e).direction==="rtl"}const ZD={convertOffsetParentRelativeRectToViewportRelativeRect:BD,getDocumentElement:Gs,getClippingRect:KD,getOffsetParent:fS,getElementRects:JD,getClientRects:zD,getDimensions:YD,getScale:Ti,isElement:Os,isRTL:XD};function mS(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function eM(e,t){let s=null,n;const i=Gs(e);function a(){var l;clearTimeout(n),(l=s)==null||l.disconnect(),s=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:u,top:h,width:m,height:x}=d;if(l||t(),!m||!x)return;const v=Tl(h),g=Tl(i.clientWidth-(u+m)),w=Tl(i.clientHeight-(h+x)),p=Tl(u),b={rootMargin:-v+"px "+-g+"px "+-w+"px "+-p+"px",threshold:Zt(0,tn(1,c))||1};let j=!0;function S(R){const E=R[0].intersectionRatio;if(E!==c){if(!j)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!mS(d,e.getBoundingClientRect())&&o(),j=!1}try{s=new IntersectionObserver(S,{...b,root:i.ownerDocument})}catch{s=new IntersectionObserver(S,b)}s.observe(e)}return o(!0),a}function tM(e,t,s,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Kp(e),u=i||a?[...d?To(d):[],...To(t)]:[];u.forEach(p=>{i&&p.addEventListener("scroll",s,{passive:!0}),a&&p.addEventListener("resize",s)});const h=d&&l?eM(d,s):null;let m=-1,x=null;o&&(x=new ResizeObserver(p=>{let[y]=p;y&&y.target===d&&x&&(x.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=x)==null||b.observe(t)})),s()}),d&&!c&&x.observe(d),x.observe(t));let v,g=c?In(e):null;c&&w();function w(){const p=In(e);g&&!mS(g,p)&&s(),g=p,v=requestAnimationFrame(w)}return s(),()=>{var p;u.forEach(y=>{i&&y.removeEventListener("scroll",s),a&&y.removeEventListener("resize",s)}),h==null||h(),(p=x)==null||p.disconnect(),x=null,c&&cancelAnimationFrame(v)}}const sM=CD,rM=ED,nM=ND,iM=TD,aM=SD,Oy=jD,oM=kD,lM=(e,t,s)=>{const n=new Map,i={platform:ZD,...s},a={...i.platform,_c:n};return bD(e,t,{...i,platform:a})};var cM=typeof document<"u",dM=function(){},sc=cM?f.useLayoutEffect:dM;function Kc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(n=s;n--!==0;)if(!Kc(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),s=i.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=s;n--!==0;){const a=i[n];if(!(a==="_owner"&&e.$$typeof)&&!Kc(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function pS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $y(e,t){const s=pS(e);return Math.round(t*s)/s}function nh(e){const t=f.useRef(e);return sc(()=>{t.current=e}),t}function uM(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=f.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[m,x]=f.useState(n);Kc(m,n)||x(n);const[v,g]=f.useState(null),[w,p]=f.useState(null),y=f.useCallback(L=>{L!==R.current&&(R.current=L,g(L))},[]),b=f.useCallback(L=>{L!==E.current&&(E.current=L,p(L))},[]),j=a||v,S=o||w,R=f.useRef(null),E=f.useRef(null),_=f.useRef(u),A=c!=null,P=nh(c),O=nh(i),k=nh(d),$=f.useCallback(()=>{if(!R.current||!E.current)return;const L={placement:t,strategy:s,middleware:m};O.current&&(L.platform=O.current),lM(R.current,E.current,L).then(I=>{const z={...I,isPositioned:k.current!==!1};N.current&&!Kc(_.current,z)&&(_.current=z,on.flushSync(()=>{h(z)}))})},[m,t,s,O,k]);sc(()=>{d===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(L=>({...L,isPositioned:!1})))},[d]);const N=f.useRef(!1);sc(()=>(N.current=!0,()=>{N.current=!1}),[]),sc(()=>{if(j&&(R.current=j),S&&(E.current=S),j&&S){if(P.current)return P.current(j,S,$);$()}},[j,S,$,P,A]);const C=f.useMemo(()=>({reference:R,floating:E,setReference:y,setFloating:b}),[y,b]),T=f.useMemo(()=>({reference:j,floating:S}),[j,S]),V=f.useMemo(()=>{const L={position:s,left:0,top:0};if(!T.floating)return L;const I=$y(T.floating,u.x),z=$y(T.floating,u.y);return l?{...L,transform:"translate("+I+"px, "+z+"px)",...pS(T.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:I,top:z}},[s,l,T.floating,u.x,u.y]);return f.useMemo(()=>({...u,update:$,refs:C,elements:T,floatingStyles:V}),[u,$,C,T,V])}const hM=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:n,padding:i}=typeof e=="function"?e(s):e;return n&&t(n)?n.current!=null?Oy({element:n.current,padding:i}).fn(s):{}:n?Oy({element:n,padding:i}).fn(s):{}}}},fM=(e,t)=>({...sM(e),options:[e,t]}),mM=(e,t)=>({...rM(e),options:[e,t]}),pM=(e,t)=>({...oM(e),options:[e,t]}),xM=(e,t)=>({...nM(e),options:[e,t]}),gM=(e,t)=>({...iM(e),options:[e,t]}),yM=(e,t)=>({...aM(e),options:[e,t]}),vM=(e,t)=>({...hM(e),options:[e,t]});function wM(e){const[t,s]=f.useState(void 0);return yr(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;s({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else s(void 0)},[e]),t}const xS="Popper",[gS,yS]=zp(xS),[bM,vS]=gS(xS),jM=e=>{const{__scopePopper:t,children:s}=e,[n,i]=f.useState(null);return f.createElement(bM,{scope:t,anchor:n,onAnchorChange:i},s)},NM="PopperAnchor",SM=f.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:n,...i}=e,a=vS(NM,s),o=f.useRef(null),l=Jt(t,o);return f.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:f.createElement(kt.div,Oe({},i,{ref:l}))}),wS="PopperContent",[_M,r8]=gS(wS),CM=f.forwardRef((e,t)=>{var s,n,i,a,o,l,c,d;const{__scopePopper:u,side:h="bottom",sideOffset:m=0,align:x="center",alignOffset:v=0,arrowPadding:g=0,collisionBoundary:w=[],collisionPadding:p=0,sticky:y="partial",hideWhenDetached:b=!1,avoidCollisions:j=!0,onPlaced:S,...R}=e,E=vS(wS,u),[_,A]=f.useState(null),P=Jt(t,Ee=>A(Ee)),[O,k]=f.useState(null),$=wM(O),N=(s=$==null?void 0:$.width)!==null&&s!==void 0?s:0,C=(n=$==null?void 0:$.height)!==null&&n!==void 0?n:0,T=h+(x!=="center"?"-"+x:""),V=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},L=Array.isArray(w)?w:[w],I=L.length>0,z={padding:V,boundary:L.filter(EM),altBoundary:I},{refs:D,floatingStyles:J,placement:ne,isPositioned:re,middlewareData:je}=uM({strategy:"fixed",placement:T,whileElementsMounted:tM,elements:{reference:E.anchor},middleware:[fM({mainAxis:m+C,alignmentAxis:v}),j&&mM({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?pM():void 0,...z}),j&&xM({...z}),gM({...z,apply:({elements:Ee,rects:Mt,availableWidth:dn,availableHeight:ia})=>{const{width:I2,height:F2}=Mt.reference,Jo=Ee.floating.style;Jo.setProperty("--radix-popper-available-width",`${dn}px`),Jo.setProperty("--radix-popper-available-height",`${ia}px`),Jo.setProperty("--radix-popper-anchor-width",`${I2}px`),Jo.setProperty("--radix-popper-anchor-height",`${F2}px`)}}),O&&vM({element:O,padding:g}),kM({arrowWidth:N,arrowHeight:C}),b&&yM({strategy:"referenceHidden"})]}),[pe,le]=bS(ne),Ne=gr(S);yr(()=>{re&&(Ne==null||Ne())},[re,Ne]);const B=(i=je.arrow)===null||i===void 0?void 0:i.x,X=(a=je.arrow)===null||a===void 0?void 0:a.y,ae=((o=je.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[me,Qe]=f.useState();return yr(()=>{_&&Qe(window.getComputedStyle(_).zIndex)},[_]),f.createElement("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:re?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(l=je.transformOrigin)===null||l===void 0?void 0:l.x,(c=je.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},f.createElement(_M,{scope:u,placedSide:pe,onArrowChange:k,arrowX:B,arrowY:X,shouldHideArrow:ae},f.createElement(kt.div,Oe({"data-side":pe,"data-align":le},R,{ref:P,style:{...R.style,animation:re?void 0:"none",opacity:(d=je.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function EM(e){return e!==null}const kM=e=>({name:"transformOrigin",options:e,fn(t){var s,n,i,a,o;const{placement:l,rects:c,middlewareData:d}=t,h=((s=d.arrow)===null||s===void 0?void 0:s.centerOffset)!==0,m=h?0:e.arrowWidth,x=h?0:e.arrowHeight,[v,g]=bS(l),w={start:"0%",center:"50%",end:"100%"}[g],p=((n=(i=d.arrow)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0)+m/2,y=((a=(o=d.arrow)===null||o===void 0?void 0:o.y)!==null&&a!==void 0?a:0)+x/2;let b="",j="";return v==="bottom"?(b=h?w:`${p}px`,j=`${-x}px`):v==="top"?(b=h?w:`${p}px`,j=`${c.floating.height+x}px`):v==="right"?(b=`${-x}px`,j=h?w:`${y}px`):v==="left"&&(b=`${c.floating.width+x}px`,j=h?w:`${y}px`),{data:{x:b,y:j}}}});function bS(e){const[t,s="center"]=e.split("-");return[t,s]}const TM=jM,PM=SM,AM=CM,RM=f.forwardRef((e,t)=>{var s;const{container:n=globalThis==null||(s=globalThis.document)===null||s===void 0?void 0:s.body,...i}=e;return n?xb.createPortal(f.createElement(kt.div,Oe({},i,{ref:t})),n):null});function Ly({prop:e,defaultProp:t,onChange:s=()=>{}}){const[n,i]=OM({defaultProp:t,onChange:s}),a=e!==void 0,o=a?e:n,l=gr(s),c=f.useCallback(d=>{if(a){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else i(d)},[a,e,i,l]);return[o,c]}function OM({defaultProp:e,onChange:t}){const s=f.useState(e),[n]=s,i=f.useRef(n),a=gr(t);return f.useEffect(()=>{i.current!==n&&(a(n),i.current=n)},[n,i,a]),s}function $M(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const LM=f.forwardRef((e,t)=>f.createElement(kt.span,Oe({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var DM=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Zn=new WeakMap,Pl=new WeakMap,Al={},ih=0,jS=function(e){return e&&(e.host||jS(e.parentNode))},MM=function(e,t){return t.map(function(s){if(e.contains(s))return s;var n=jS(s);return n&&e.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},IM=function(e,t,s,n){var i=MM(t,Array.isArray(e)?e:[e]);Al[s]||(Al[s]=new WeakMap);var a=Al[s],o=[],l=new Set,c=new Set(i),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};i.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))u(m);else try{var x=m.getAttribute(n),v=x!==null&&x!=="false",g=(Zn.get(m)||0)+1,w=(a.get(m)||0)+1;Zn.set(m,g),a.set(m,w),o.push(m),g===1&&v&&Pl.set(m,!0),w===1&&m.setAttribute(s,"true"),v||m.setAttribute(n,"true")}catch(p){console.error("aria-hidden: cannot operate on ",m,p)}})};return u(t),l.clear(),ih++,function(){o.forEach(function(h){var m=Zn.get(h)-1,x=a.get(h)-1;Zn.set(h,m),a.set(h,x),m||(Pl.has(h)||h.removeAttribute(n),Pl.delete(h)),x||h.removeAttribute(s)}),ih--,ih||(Zn=new WeakMap,Zn=new WeakMap,Pl=new WeakMap,Al={})}},NS=function(e,t,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=t||DM(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),IM(n,i,s,"aria-hidden")):function(){return null}},Nt=function(){return Nt=Object.assign||function(t){for(var s,n=1,i=arguments.length;n<i;n++){s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Nt.apply(this,arguments)};function Qp(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(s[n[i]]=e[n[i]]);return s}function SS(e,t,s){if(s||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var Qa="right-scroll-bar-position",Ja="width-before-scroll-bar",FM="with-scroll-bars-hidden",VM="--removed-body-scroll-bar-size";function ah(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function BM(e,t){var s=f.useState(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(n){var i=s.value;i!==n&&(s.value=n,s.callback(n,i))}}}})[0];return s.callback=t,s.facade}var zM=typeof window<"u"?f.useLayoutEffect:f.useEffect,Dy=new WeakMap;function _S(e,t){var s=BM(t||null,function(n){return e.forEach(function(i){return ah(i,n)})});return zM(function(){var n=Dy.get(s);if(n){var i=new Set(n),a=new Set(e),o=s.current;i.forEach(function(l){a.has(l)||ah(l,null)}),a.forEach(function(l){i.has(l)||ah(l,o)})}Dy.set(s,e)},[e]),s}function UM(e){return e}function HM(e,t){t===void 0&&(t=UM);var s=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(a){var o=t(a,n);return s.push(o),function(){s=s.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;s.length;){var o=s;s=[],o.forEach(a)}s={push:function(l){return a(l)},filter:function(){return s}}},assignMedium:function(a){n=!0;var o=[];if(s.length){var l=s;s=[],l.forEach(a),o=s}var c=function(){var u=o;o=[],u.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),s={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),s}}}};return i}function CS(e){e===void 0&&(e={});var t=HM(null);return t.options=Nt({async:!0,ssr:!1},e),t}var ES=function(e){var t=e.sideCar,s=Qp(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,Nt({},s))};ES.isSideCarExport=!0;function kS(e,t){return e.useMedium(t),ES}var TS=CS(),oh=function(){},Vd=f.forwardRef(function(e,t){var s=f.useRef(null),n=f.useState({onScrollCapture:oh,onWheelCapture:oh,onTouchMoveCapture:oh}),i=n[0],a=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,x=e.noIsolation,v=e.inert,g=e.allowPinchZoom,w=e.as,p=w===void 0?"div":w,y=Qp(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=m,j=_S([s,t]),S=Nt(Nt({},y),i);return f.createElement(f.Fragment,null,u&&f.createElement(b,{sideCar:TS,removeScrollBar:d,shards:h,noIsolation:x,inert:v,setCallbacks:a,allowPinchZoom:!!g,lockRef:s}),o?f.cloneElement(f.Children.only(l),Nt(Nt({},S),{ref:j})):f.createElement(p,Nt({},S,{className:c,ref:j}),l))});Vd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vd.classNames={fullWidth:Ja,zeroRight:Qa};var My,qM=function(){if(My)return My;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WM(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=qM();return t&&e.setAttribute("nonce",t),e}function GM(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function KM(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var YM=function(){var e=0,t=null;return{add:function(s){e==0&&(t=WM())&&(GM(t,s),KM(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},QM=function(){var e=YM();return function(t,s){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},Jp=function(){var e=QM(),t=function(s){var n=s.styles,i=s.dynamic;return e(n,i),null};return t},JM={left:0,top:0,right:0,gap:0},lh=function(e){return parseInt(e||"",10)||0},XM=function(e){var t=window.getComputedStyle(document.body),s=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[lh(s),lh(n),lh(i)]},ZM=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return JM;var t=XM(e),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-s+t[2]-t[0])}},eI=Jp(),Pi="data-scroll-locked",tI=function(e,t,s,n){var i=e.left,a=e.top,o=e.right,l=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(FM,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Pi,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qa,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ja,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Qa," .").concat(Qa,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Ja," .").concat(Ja,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Pi,`] {
    `).concat(VM,": ").concat(l,`px;
  }
`)},Iy=function(){var e=parseInt(document.body.getAttribute(Pi)||"0",10);return isFinite(e)?e:0},sI=function(){f.useEffect(function(){return document.body.setAttribute(Pi,(Iy()+1).toString()),function(){var e=Iy()-1;e<=0?document.body.removeAttribute(Pi):document.body.setAttribute(Pi,e.toString())}},[])},PS=function(e){var t=e.noRelative,s=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;sI();var a=f.useMemo(function(){return ZM(i)},[i]);return f.createElement(eI,{styles:tI(a,!t,i,s?"":"!important")})},em=!1;if(typeof window<"u")try{var Rl=Object.defineProperty({},"passive",{get:function(){return em=!0,!0}});window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{em=!1}var ei=em?{passive:!1}:!1,rI=function(e){return e.tagName==="TEXTAREA"},AS=function(e,t){var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!rI(e)&&s[t]==="visible")},nI=function(e){return AS(e,"overflowY")},iI=function(e){return AS(e,"overflowX")},Fy=function(e,t){var s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var n=RS(e,s);if(n){var i=OS(e,s),a=i[1],o=i[2];if(a>o)return!0}s=s.parentNode}while(s&&s!==document.body);return!1},aI=function(e){var t=e.scrollTop,s=e.scrollHeight,n=e.clientHeight;return[t,s,n]},oI=function(e){var t=e.scrollLeft,s=e.scrollWidth,n=e.clientWidth;return[t,s,n]},RS=function(e,t){return e==="v"?nI(t):iI(t)},OS=function(e,t){return e==="v"?aI(t):oI(t)},lI=function(e,t){return e==="h"&&t==="rtl"?-1:1},cI=function(e,t,s,n,i){var a=lI(e,window.getComputedStyle(t).direction),o=a*n,l=s.target,c=t.contains(l),d=!1,u=o>0,h=0,m=0;do{var x=OS(e,l),v=x[0],g=x[1],w=x[2],p=g-w-a*v;(v||p)&&RS(e,l)&&(h+=p,m+=v),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(i&&h===0||!i&&o>h)||!u&&(i&&m===0||!i&&-o>m))&&(d=!0),d},Ol=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Vy=function(e){return[e.deltaX,e.deltaY]},By=function(e){return e&&"current"in e?e.current:e},dI=function(e,t){return e[0]===t[0]&&e[1]===t[1]},uI=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},hI=0,ti=[];function fI(e){var t=f.useRef([]),s=f.useRef([0,0]),n=f.useRef(),i=f.useState(hI++)[0],a=f.useState(function(){return Jp()})[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=SS([e.lockRef.current],(e.shards||[]).map(By),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(g,w){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var p=Ol(g),y=s.current,b="deltaX"in g?g.deltaX:y[0]-p[0],j="deltaY"in g?g.deltaY:y[1]-p[1],S,R=g.target,E=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in g&&E==="h"&&R.type==="range")return!1;var _=Fy(E,R);if(!_)return!0;if(_?S=E:(S=E==="v"?"h":"v",_=Fy(E,R)),!_)return!1;if(!n.current&&"changedTouches"in g&&(b||j)&&(n.current=S),!S)return!0;var A=n.current||S;return cI(A,w,g,A==="h"?b:j,!0)},[]),c=f.useCallback(function(g){var w=g;if(!(!ti.length||ti[ti.length-1]!==a)){var p="deltaY"in w?Vy(w):Ol(w),y=t.current.filter(function(S){return S.name===w.type&&S.target===w.target&&dI(S.delta,p)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(By).filter(Boolean).filter(function(S){return S.contains(w.target)}),j=b.length>0?l(w,b[0]):!o.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),d=f.useCallback(function(g,w,p,y){var b={name:g,delta:w,target:p,should:y};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),u=f.useCallback(function(g){s.current=Ol(g),n.current=void 0},[]),h=f.useCallback(function(g){d(g.type,Vy(g),g.target,l(g,e.lockRef.current))},[]),m=f.useCallback(function(g){d(g.type,Ol(g),g.target,l(g,e.lockRef.current))},[]);f.useEffect(function(){return ti.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ei),document.addEventListener("touchmove",c,ei),document.addEventListener("touchstart",u,ei),function(){ti=ti.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,ei),document.removeEventListener("touchmove",c,ei),document.removeEventListener("touchstart",u,ei)}},[]);var x=e.removeScrollBar,v=e.inert;return f.createElement(f.Fragment,null,v?f.createElement(a,{styles:uI(i)}):null,x?f.createElement(PS,{gapMode:"margin"}):null)}const mI=kS(TS,fI);var $S=f.forwardRef(function(e,t){return f.createElement(Vd,Nt({},e,{ref:t,sideCar:mI}))});$S.classNames=Vd.classNames;const pI=$S,xI=[" ","Enter","ArrowUp","ArrowDown"],gI=[" ","Enter"],Bd="Select",[zd,Xp,yI]=zL(Bd),[na,n8]=zp(Bd,[yI,yS]),Zp=yS(),[vI,Kn]=na(Bd),[wI,bI]=na(Bd),jI=e=>{const{__scopeSelect:t,children:s,open:n,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:m,required:x}=e,v=Zp(t),[g,w]=f.useState(null),[p,y]=f.useState(null),[b,j]=f.useState(!1),S=HL(d),[R=!1,E]=Ly({prop:n,defaultProp:i,onChange:a}),[_,A]=Ly({prop:o,defaultProp:l,onChange:c}),P=f.useRef(null),O=g?!!g.closest("form"):!0,[k,$]=f.useState(new Set),N=Array.from(k).map(C=>C.props.value).join(";");return f.createElement(TM,v,f.createElement(vI,{required:x,scope:t,trigger:g,onTriggerChange:w,valueNode:p,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:nS(),value:_,onValueChange:A,open:R,onOpenChange:E,dir:S,triggerPointerDownPosRef:P,disabled:m},f.createElement(zd.Provider,{scope:t},f.createElement(wI,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(C=>{$(T=>new Set(T).add(C))},[]),onNativeOptionRemove:f.useCallback(C=>{$(T=>{const V=new Set(T);return V.delete(C),V})},[])},s)),O?f.createElement(MS,{key:N,"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:h,value:_,onChange:C=>A(C.target.value),disabled:m},_===void 0?f.createElement("option",{value:""}):null,Array.from(k)):null))},NI="SelectTrigger",SI=f.forwardRef((e,t)=>{const{__scopeSelect:s,disabled:n=!1,...i}=e,a=Zp(s),o=Kn(NI,s),l=o.disabled||n,c=Jt(t,o.onTriggerChange),d=Xp(s),[u,h,m]=IS(v=>{const g=d().filter(y=>!y.disabled),w=g.find(y=>y.value===o.value),p=FS(g,v,w);p!==void 0&&o.onValueChange(p.value)}),x=()=>{l||(o.onOpenChange(!0),m())};return f.createElement(PM,Oe({asChild:!0},a),f.createElement(kt.button,Oe({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":o.value===void 0?"":void 0},i,{ref:c,onClick:At(i.onClick,v=>{v.currentTarget.focus()}),onPointerDown:At(i.onPointerDown,v=>{const g=v.target;g.hasPointerCapture(v.pointerId)&&g.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&(x(),o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)},v.preventDefault())}),onKeyDown:At(i.onKeyDown,v=>{const g=u.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(g&&v.key===" ")&&xI.includes(v.key)&&(x(),v.preventDefault())})})))}),_I="SelectValue",CI=f.forwardRef((e,t)=>{const{__scopeSelect:s,className:n,style:i,children:a,placeholder:o,...l}=e,c=Kn(_I,s),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,h=Jt(t,c.onValueNodeChange);return yr(()=>{d(u)},[d,u]),f.createElement(kt.span,Oe({},l,{ref:h,style:{pointerEvents:"none"}}),c.value===void 0&&o!==void 0?o:a)}),EI=f.forwardRef((e,t)=>{const{__scopeSelect:s,children:n,...i}=e;return f.createElement(kt.span,Oe({"aria-hidden":!0},i,{ref:t}),n||"▼")}),kI=e=>f.createElement(RM,Oe({asChild:!0},e)),Gi="SelectContent",TI=f.forwardRef((e,t)=>{const s=Kn(Gi,e.__scopeSelect),[n,i]=f.useState();if(yr(()=>{i(new DocumentFragment)},[]),!s.open){const a=n;return a?on.createPortal(f.createElement(LS,{scope:e.__scopeSelect},f.createElement(zd.Slot,{scope:e.__scopeSelect},f.createElement("div",null,e.children))),a):null}return f.createElement(PI,Oe({},e,{ref:t}))}),er=10,[LS,Ud]=na(Gi),PI=f.forwardRef((e,t)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:x,sticky:v,hideWhenDetached:g,avoidCollisions:w,...p}=e,y=Kn(Gi,s),[b,j]=f.useState(null),[S,R]=f.useState(null),E=Jt(t,le=>j(le)),[_,A]=f.useState(null),[P,O]=f.useState(null),k=Xp(s),[$,N]=f.useState(!1),C=f.useRef(!1);f.useEffect(()=>{if(b)return NS(b)},[b]),eD();const T=f.useCallback(le=>{const[Ne,...B]=k().map(me=>me.ref.current),[X]=B.slice(-1),ae=document.activeElement;for(const me of le)if(me===ae||(me==null||me.scrollIntoView({block:"nearest"}),me===Ne&&S&&(S.scrollTop=0),me===X&&S&&(S.scrollTop=S.scrollHeight),me==null||me.focus(),document.activeElement!==ae))return},[k,S]),V=f.useCallback(()=>T([_,b]),[T,_,b]);f.useEffect(()=>{$&&V()},[$,V]);const{onOpenChange:L,triggerPointerDownPosRef:I}=y;f.useEffect(()=>{if(b){let le={x:0,y:0};const Ne=X=>{var ae,me,Qe,Ee;le={x:Math.abs(Math.round(X.pageX)-((ae=(me=I.current)===null||me===void 0?void 0:me.x)!==null&&ae!==void 0?ae:0)),y:Math.abs(Math.round(X.pageY)-((Qe=(Ee=I.current)===null||Ee===void 0?void 0:Ee.y)!==null&&Qe!==void 0?Qe:0))}},B=X=>{le.x<=10&&le.y<=10?X.preventDefault():b.contains(X.target)||L(!1),document.removeEventListener("pointermove",Ne),I.current=null};return I.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",B,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",B,{capture:!0})}}},[b,L,I]),f.useEffect(()=>{const le=()=>L(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[L]);const[z,D]=IS(le=>{const Ne=k().filter(ae=>!ae.disabled),B=Ne.find(ae=>ae.ref.current===document.activeElement),X=FS(Ne,le,B);X&&setTimeout(()=>X.ref.current.focus())}),J=f.useCallback((le,Ne,B)=>{const X=!C.current&&!B;(y.value!==void 0&&y.value===Ne||X)&&(A(le),X&&(C.current=!0))},[y.value]),ne=f.useCallback(()=>b==null?void 0:b.focus(),[b]),re=f.useCallback((le,Ne,B)=>{const X=!C.current&&!B;(y.value!==void 0&&y.value===Ne||X)&&O(le)},[y.value]),je=n==="popper"?zy:AI,pe=je===zy?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:x,sticky:v,hideWhenDetached:g,avoidCollisions:w}:{};return f.createElement(LS,{scope:s,content:b,viewport:S,onViewportChange:R,itemRefCallback:J,selectedItem:_,onItemLeave:ne,itemTextRefCallback:re,focusSelectedItem:V,selectedItemText:P,position:n,isPositioned:$,searchRef:z},f.createElement(pI,{as:Eo,allowPinchZoom:!0},f.createElement(tD,{asChild:!0,trapped:y.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:At(i,le=>{var Ne;(Ne=y.trigger)===null||Ne===void 0||Ne.focus({preventScroll:!0}),le.preventDefault()})},f.createElement(JL,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},f.createElement(je,Oe({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:le=>le.preventDefault()},p,pe,{onPlaced:()=>N(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...p.style},onKeyDown:At(p.onKeyDown,le=>{const Ne=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!Ne&&le.key.length===1&&D(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let X=k().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(le.key)&&(X=X.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const ae=le.target,me=X.indexOf(ae);X=X.slice(me+1)}setTimeout(()=>T(X)),le.preventDefault()}})}))))))}),AI=f.forwardRef((e,t)=>{const{__scopeSelect:s,onPlaced:n,...i}=e,a=Kn(Gi,s),o=Ud(Gi,s),[l,c]=f.useState(null),[d,u]=f.useState(null),h=Jt(t,E=>u(E)),m=Xp(s),x=f.useRef(!1),v=f.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:p,focusSelectedItem:y}=o,b=f.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&g&&w&&p){const E=a.trigger.getBoundingClientRect(),_=d.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),P=p.getBoundingClientRect();if(a.dir!=="rtl"){const ae=P.left-_.left,me=A.left-ae,Qe=E.left-me,Ee=E.width+Qe,Mt=Math.max(Ee,_.width),dn=window.innerWidth-er,ia=gy(me,[er,dn-Mt]);l.style.minWidth=Ee+"px",l.style.left=ia+"px"}else{const ae=_.right-P.right,me=window.innerWidth-A.right-ae,Qe=window.innerWidth-E.right-me,Ee=E.width+Qe,Mt=Math.max(Ee,_.width),dn=window.innerWidth-er,ia=gy(me,[er,dn-Mt]);l.style.minWidth=Ee+"px",l.style.right=ia+"px"}const O=m(),k=window.innerHeight-er*2,$=g.scrollHeight,N=window.getComputedStyle(d),C=parseInt(N.borderTopWidth,10),T=parseInt(N.paddingTop,10),V=parseInt(N.borderBottomWidth,10),L=parseInt(N.paddingBottom,10),I=C+T+$+L+V,z=Math.min(w.offsetHeight*5,I),D=window.getComputedStyle(g),J=parseInt(D.paddingTop,10),ne=parseInt(D.paddingBottom,10),re=E.top+E.height/2-er,je=k-re,pe=w.offsetHeight/2,le=w.offsetTop+pe,Ne=C+T+le,B=I-Ne;if(Ne<=re){const ae=w===O[O.length-1].ref.current;l.style.bottom="0px";const me=d.clientHeight-g.offsetTop-g.offsetHeight,Qe=Math.max(je,pe+(ae?ne:0)+me+V),Ee=Ne+Qe;l.style.height=Ee+"px"}else{const ae=w===O[0].ref.current;l.style.top="0px";const Qe=Math.max(re,C+g.offsetTop+(ae?J:0)+pe)+B;l.style.height=Qe+"px",g.scrollTop=Ne-re+g.offsetTop}l.style.margin=`${er}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=k+"px",n==null||n(),requestAnimationFrame(()=>x.current=!0)}},[m,a.trigger,a.valueNode,l,d,g,w,p,a.dir,n]);yr(()=>b(),[b]);const[j,S]=f.useState();yr(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const R=f.useCallback(E=>{E&&v.current===!0&&(b(),y==null||y(),v.current=!1)},[b,y]);return f.createElement(RI,{scope:s,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:R},f.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},f.createElement(kt.div,Oe({},i,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),zy=f.forwardRef((e,t)=>{const{__scopeSelect:s,align:n="start",collisionPadding:i=er,...a}=e,o=Zp(s);return f.createElement(AM,Oe({},o,a,{ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[RI,OI]=na(Gi,{}),Uy="SelectViewport",$I=f.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,i=Ud(Uy,s),a=OI(Uy,s),o=Jt(t,i.onViewportChange),l=f.useRef(0);return f.createElement(f.Fragment,null,f.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),f.createElement(zd.Slot,{scope:s},f.createElement(kt.div,Oe({"data-radix-select-viewport":"",role:"presentation"},n,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:At(n.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&u){const m=Math.abs(l.current-d.scrollTop);if(m>0){const x=window.innerHeight-er*2,v=parseFloat(u.style.minHeight),g=parseFloat(u.style.height),w=Math.max(v,g);if(w<x){const p=w+m,y=Math.min(x,p),b=p-y;u.style.height=y+"px",u.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})}))))}),LI="SelectGroup",[i8,DI]=na(LI),MI="SelectLabel",II=f.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,i=DI(MI,s);return f.createElement(kt.div,Oe({id:i.id},n,{ref:t}))}),tm="SelectItem",[FI,DS]=na(tm),VI=f.forwardRef((e,t)=>{const{__scopeSelect:s,value:n,disabled:i=!1,textValue:a,...o}=e,l=Kn(tm,s),c=Ud(tm,s),d=l.value===n,[u,h]=f.useState(a??""),[m,x]=f.useState(!1),v=Jt(t,p=>{var y;return(y=c.itemRefCallback)===null||y===void 0?void 0:y.call(c,p,n,i)}),g=nS(),w=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};return f.createElement(FI,{scope:s,value:n,disabled:i,textId:g,isSelected:d,onItemTextChange:f.useCallback(p=>{h(y=>{var b;return y||((b=p==null?void 0:p.textContent)!==null&&b!==void 0?b:"").trim()})},[])},f.createElement(zd.ItemSlot,{scope:s,value:n,disabled:i,textValue:u},f.createElement(kt.div,Oe({role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:v,onFocus:At(o.onFocus,()=>x(!0)),onBlur:At(o.onBlur,()=>x(!1)),onPointerUp:At(o.onPointerUp,w),onPointerMove:At(o.onPointerMove,p=>{if(i){var y;(y=c.onItemLeave)===null||y===void 0||y.call(c)}else p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:At(o.onPointerLeave,p=>{if(p.currentTarget===document.activeElement){var y;(y=c.onItemLeave)===null||y===void 0||y.call(c)}}),onKeyDown:At(o.onKeyDown,p=>{var y;((y=c.searchRef)===null||y===void 0?void 0:y.current)!==""&&p.key===" "||(gI.includes(p.key)&&w(),p.key===" "&&p.preventDefault())})}))))}),$l="SelectItemText",BI=f.forwardRef((e,t)=>{const{__scopeSelect:s,className:n,style:i,...a}=e,o=Kn($l,s),l=Ud($l,s),c=DS($l,s),d=bI($l,s),[u,h]=f.useState(null),m=Jt(t,p=>h(p),c.onItemTextChange,p=>{var y;return(y=l.itemTextRefCallback)===null||y===void 0?void 0:y.call(l,p,c.value,c.disabled)}),x=u==null?void 0:u.textContent,v=f.useMemo(()=>f.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},x),[c.disabled,c.value,x]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=d;return yr(()=>(g(v),()=>w(v)),[g,w,v]),f.createElement(f.Fragment,null,f.createElement(kt.span,Oe({id:c.textId},a,{ref:m})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?on.createPortal(a.children,o.valueNode):null)}),zI="SelectItemIndicator",UI=f.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e;return DS(zI,s).isSelected?f.createElement(kt.span,Oe({"aria-hidden":!0},n,{ref:t})):null}),HI=f.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e;return f.createElement(kt.div,Oe({"aria-hidden":!0},n,{ref:t}))}),MS=f.forwardRef((e,t)=>{const{value:s,...n}=e,i=f.useRef(null),a=Jt(t,i),o=$M(s);return f.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==s&&u){const h=new Event("change",{bubbles:!0});u.call(l,s),l.dispatchEvent(h)}},[o,s]),f.createElement(LM,{asChild:!0},f.createElement("select",Oe({},n,{ref:a,defaultValue:s})))});MS.displayName="BubbleSelect";function IS(e){const t=gr(e),s=f.useRef(""),n=f.useRef(0),i=f.useCallback(o=>{const l=s.current+o;t(l),function c(d){s.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=f.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,i,a]}function FS(e,t,s){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let o=qI(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==s?c:void 0}function qI(e,t){return e.map((s,n)=>e[(t+n)%e.length])}const WI=jI,VS=SI,GI=CI,KI=EI,YI=kI,BS=TI,QI=$I,zS=II,US=VI,JI=BI,XI=UI,HS=HI,we=WI,be=te.forwardRef(({className:e,...t},s)=>r.jsx(GI,{ref:s,className:de("",e),...t})),xe=te.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(VS,{ref:n,className:de("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-slate-700/50 dark:border-slate-600",e),...s,children:[t,r.jsx(KI,{asChild:!0,children:r.jsx(uj,{className:"h-4 w-4 opacity-50 text-gray-400"})})]}));xe.displayName=VS.displayName;const ge=te.forwardRef(({className:e,children:t,position:s="popper",...n},i)=>r.jsx(YI,{children:r.jsx(BS,{ref:i,className:de("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","dark:bg-slate-800 dark:border-slate-700 dark:text-gray-200",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:r.jsx(QI,{className:de("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));ge.displayName=BS.displayName;const ZI=te.forwardRef(({className:e,...t},s)=>r.jsx(zS,{ref:s,className:de("py-1.5 pl-8 pr-2 text-sm font-semibold text-gray-400",e),...t}));ZI.displayName=zS.displayName;const Z=te.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(US,{ref:n,className:de("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50","dark:focus:bg-slate-700 dark:focus:text-sky-300",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(XI,{children:r.jsx(dT,{className:"h-4 w-4 text-sky-400"})})}),r.jsx(JI,{children:t})]}));Z.displayName=US.displayName;const e6=te.forwardRef(({className:e,...t},s)=>r.jsx(HS,{ref:s,className:de("-mx-1 my-1 h-px bg-muted",e),...t}));e6.displayName=HS.displayName;const dt=te.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:de("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-slate-700/50 dark:border-slate-600 dark:text-gray-200 dark:placeholder:text-slate-400",e),ref:s,...t}));dt.displayName="Textarea";const t6=({assessment:e=null,onClose:t,onSave:s})=>{const[n,i]=f.useState({title:"",client_name:"",location:"",assessment_type:"New Site",status:"Scheduled",priority:"Medium",scheduled_date:"",assigned_to:"",description:"",risk_level:"Medium",estimated_duration_hours:4}),[a,o]=f.useState(!1),{toast:l}=ue();f.useEffect(()=>{e&&i({title:e.title||"",client_name:e.client_name||"",location:e.location||"",assessment_type:e.assessment_type||"New Site",status:e.status||"Scheduled",priority:e.priority||"Medium",scheduled_date:e.scheduled_date||"",assigned_to:e.assigned_to||"",description:e.description||"",risk_level:e.risk_level||"Medium",estimated_duration_hours:e.estimated_duration_hours||4})},[e]);const c=(u,h)=>{i(m=>({...m,[u]:h}))},d=async u=>{if(u.preventDefault(),!n.title||!n.client_name||!n.location||!n.scheduled_date){l({title:"Missing required fields",description:"Please fill in all required fields",variant:"destructive"});return}try{if(o(!0),e){const h=await Hc.updateAssessment(e.id,n);l({title:"Assessment updated",description:"Assessment has been successfully updated"}),s(h)}else{const h=await Hc.createAssessment(n);l({title:"Assessment created",description:"New assessment has been successfully created"}),s(h)}t()}catch(h){console.error("Error saving assessment:",h),l({title:"Error saving assessment",description:"Failed to save assessment. Please try again.",variant:"destructive"})}finally{o(!1)}};return r.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:t,children:r.jsx(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:u=>u.stopPropagation(),children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{className:"flex flex-row items-center justify-between",children:[r.jsx(Y,{className:"text-white",children:e?"Edit Assessment":"Create New Assessment"}),r.jsx(F,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Dt,{className:"w-4 h-4"})})]}),r.jsx(U,{children:r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"title",className:"text-white",children:"Assessment Title *"}),r.jsx(ee,{id:"title",value:n.title,onChange:u=>c("title",u.target.value),placeholder:"Enter assessment title",className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"client_name",className:"text-white",children:"Client Name *"}),r.jsx(ee,{id:"client_name",value:n.client_name,onChange:u=>c("client_name",u.target.value),placeholder:"Enter client name",className:"bg-slate-700/50 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"location",className:"text-white",children:"Location *"}),r.jsx(ee,{id:"location",value:n.location,onChange:u=>c("location",u.target.value),placeholder:"Enter location",className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"assessment_type",className:"text-white",children:"Assessment Type"}),r.jsxs(we,{value:n.assessment_type,onValueChange:u=>c("assessment_type",u),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsxs(ge,{children:[r.jsx(Z,{value:"New Site",children:"New Site"}),r.jsx(Z,{value:"Existing Site",children:"Existing Site"}),r.jsx(Z,{value:"Security Review",children:"Security Review"}),r.jsx(Z,{value:"Risk Assessment",children:"Risk Assessment"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"priority",className:"text-white",children:"Priority"}),r.jsxs(we,{value:n.priority,onValueChange:u=>c("priority",u),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsxs(ge,{children:[r.jsx(Z,{value:"Low",children:"Low"}),r.jsx(Z,{value:"Medium",children:"Medium"}),r.jsx(Z,{value:"High",children:"High"}),r.jsx(Z,{value:"Critical",children:"Critical"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(we,{value:n.status,onValueChange:u=>c("status",u),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsxs(ge,{children:[r.jsx(Z,{value:"Scheduled",children:"Scheduled"}),r.jsx(Z,{value:"In Progress",children:"In Progress"}),r.jsx(Z,{value:"Completed",children:"Completed"}),r.jsx(Z,{value:"Cancelled",children:"Cancelled"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"scheduled_date",className:"text-white",children:"Scheduled Date *"}),r.jsx(ee,{id:"scheduled_date",type:"date",value:n.scheduled_date,onChange:u=>c("scheduled_date",u.target.value),className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"assigned_to",className:"text-white",children:"Assigned To"}),r.jsx(ee,{id:"assigned_to",value:n.assigned_to,onChange:u=>c("assigned_to",u.target.value),placeholder:"Enter assignee name",className:"bg-slate-700/50 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"description",className:"text-white",children:"Description"}),r.jsx(dt,{id:"description",value:n.description,onChange:u=>c("description",u.target.value),placeholder:"Enter assessment description",className:"bg-slate-700/50 border-slate-600 text-white",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"risk_level",className:"text-white",children:"Risk Level"}),r.jsxs(we,{value:n.risk_level,onValueChange:u=>c("risk_level",u),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsxs(ge,{children:[r.jsx(Z,{value:"Low",children:"Low"}),r.jsx(Z,{value:"Medium",children:"Medium"}),r.jsx(Z,{value:"High",children:"High"}),r.jsx(Z,{value:"Critical",children:"Critical"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"estimated_duration_hours",className:"text-white",children:"Estimated Duration (hours)"}),r.jsx(ee,{id:"estimated_duration_hours",type:"number",min:"1",value:n.estimated_duration_hours,onChange:u=>c("estimated_duration_hours",parseInt(u.target.value)||0),className:"bg-slate-700/50 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(F,{type:"button",variant:"outline",onClick:t,className:"ios-button border-slate-600 hover:bg-slate-700",children:"Cancel"}),r.jsx(F,{type:"submit",disabled:a,className:"ios-button bg-blue-600 hover:bg-blue-700",children:a?r.jsxs(r.Fragment,{children:[r.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),e?"Update Assessment":"Create Assessment"]})})]})]})})]})})})},s6=()=>{const[e,t]=f.useState(""),[s,n]=f.useState([]),[i,a]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState(!0),[u,h]=f.useState(!1),[m,x]=f.useState(null),{toast:v}=ue(),g=["Physical Security Guards","Access Control Systems","CCTV Surveillance","Alarm Systems & Monitoring","Perimeter Security Solutions","Mobile Patrol Services","Emergency Response Planning","Risk Assessment & Consulting","Executive Protection","Event Security Management","Cybersecurity Assessment (Basic)","Loss Prevention Services"],w=()=>{x(null),h(!0)},p=R=>{x(R),h(!0)},y=R=>{n(m?E=>E.map(_=>_.id===R.id?R:_):E=>[R,...E])};f.useEffect(()=>{(async()=>{try{l(!0);const E=await Hc.getAssessments({search:e});n(E)}catch(E){console.error("Error loading assessments:",E),v({title:"Error loading assessments",description:"Failed to load assessments from database",variant:"destructive"})}finally{l(!1)}})()},[e,v]),f.useEffect(()=>{(async()=>{try{d(!0);const E=await Hc.getAssessmentTemplates();a(E)}catch(E){console.error("Error loading templates:",E),v({title:"Error loading templates",description:"Failed to load assessment templates from database",variant:"destructive"})}finally{d(!1)}})()},[v]);const b="bg-transparent p-0 space-x-1",j="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",S="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Cu,{className:"w-8 h-8 mr-3 text-blue-400"}),"Security Assessments"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Evaluate, plan, and manage security solutions for clients."})]}),r.jsxs(F,{onClick:w,className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"New Assessment"]})]}),r.jsxs(Et,{defaultValue:"assessments",className:"space-y-6",children:[r.jsxs(gt,{className:`${b} border-b border-slate-700`,children:[r.jsx(ie,{value:"assessments",className:`${j} ${S}`,children:"Active Assessments"}),r.jsx(ie,{value:"templates",className:`${j} ${S}`,children:"Assessment Templates"}),r.jsx(ie,{value:"services",className:`${j} ${S}`,children:"Service Checklist"})]}),r.jsx(oe,{value:"assessments",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Cu,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Assessment Overview"})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search assessments...",value:e,onChange:R=>t(R.target.value),className:"pl-10 w-full sm:w-80 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]})}),r.jsx(U,{children:o?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ct,{className:"w-6 h-6 animate-spin text-blue-400"}),r.jsx("span",{className:"ml-2 text-gray-400",children:"Loading assessments..."})]}):s.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Cu,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"No assessments found"}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create your first assessment to get started"})]}):r.jsx("div",{className:"space-y-4",children:s.map(R=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R.assessment_type==="New Site"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:R.assessment_type}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R.priority==="High"?"bg-red-500/20 text-red-400":R.priority==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:[R.priority," Priority"]})]}),r.jsx("h3",{className:"text-white font-semibold text-lg",children:R.client_name}),r.jsxs("div",{className:"flex items-center space-x-3 mt-1 text-sm text-gray-400",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(qt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:R.location})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Rs,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:R.scheduled_date})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center space-x-1.5",children:[R.status==="Completed"?r.jsx(nt,{className:"w-4 h-4 text-green-400"}):R.status==="In Progress"?r.jsx(ut,{className:"w-4 h-4 text-yellow-400 animate-pulse"}):r.jsx(Rs,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm text-gray-300",children:R.status})]}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>p(R),className:"ios-button border-slate-600 hover:bg-slate-700",children:"Edit"})]})]})},R.id))})})]})}),r.jsx(oe,{value:"templates",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(He,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Assessment Templates"})]}),r.jsx(he,{className:"text-gray-400",children:"Standardized templates for various assessment types."})]}),r.jsx(U,{children:c?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ct,{className:"w-6 h-6 animate-spin text-purple-400"}),r.jsx("span",{className:"ml-2 text-gray-400",children:"Loading templates..."})]}):i.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(He,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"No templates found"}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Assessment templates will appear here"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map((R,E)=>r.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:E*.05},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer flex items-start space-x-4",onClick:()=>v({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),children:[r.jsx(He,{className:"w-8 h-8 text-purple-400 mt-1 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-medium mb-1",children:R.title}),r.jsx("p",{className:"text-gray-400 text-sm",children:R.description}),r.jsx("span",{className:"text-xs text-purple-400 mt-1",children:R.template_type})]})]},R.id))})})]})}),r.jsx(oe,{value:"services",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(gj,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Available Security Services Checklist"})]}),r.jsx(he,{className:"text-gray-400",children:"Standard list of services offered for assessments."})]}),r.jsx(U,{children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:g.map((R,E)=>r.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:E*.03},className:"flex items-center space-x-2 p-3 rounded-md bg-slate-800/40 border border-slate-700",children:[r.jsx(nt,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-white text-sm",children:R})]},R))})})]})})]}),u&&r.jsx(t6,{assessment:m,onClose:()=>{h(!1),x(null)},onSave:y})]})},e0=async()=>{try{const{data:e,error:t}=await M.from("clients").select("*").eq("status","Active").order("name");if(t)throw t;return{data:e,error:null}}catch(e){return console.error("Error fetching clients:",e),{data:null,error:e}}},qS=async e=>{try{const{data:t,error:s}=await M.from("clients").insert([e]).select().single();if(s)throw s;return{data:t,error:null}}catch(t){return console.error("Error creating client:",t),{data:null,error:t}}},r6=({isEditing:e,currentSite:t,clients:s,allSitesForParent:n,onSuccess:i,onCancel:a})=>{const{toast:o}=ue(),[l,c]=f.useState(!1),[d,u]=f.useState([]),[h,m]=f.useState(!0),[x,v]=f.useState(!1),[g,w]=f.useState(""),[p,y]=f.useState({name:"",type:"",parent_id:null,client_id:null,address:"{}",gps_coordinates:"{}"});f.useEffect(()=>{(async()=>{try{const{data:O,error:k}=await e0();if(k)throw k;u(O||[])}catch(O){console.error("Error loading clients:",O),o({title:"Error",description:"Failed to load clients.",variant:"destructive"})}finally{m(!1)}})()},[o]),f.useEffect(()=>{y(e&&t?{name:t.name||"",type:t.type||"",parent_id:t.parent_id?t.parent_id.toString():null,client_id:t.client_id||null,address:t.address?JSON.stringify(t.address,null,2):"{}",gps_coordinates:t.gps_coordinates?JSON.stringify(t.gps_coordinates,null,2):"{}"}:{name:"",type:"",parent_id:null,client_id:null,address:"{}",gps_coordinates:"{}"})},[e,t]);const b=P=>{const{name:O,value:k}=P.target;y($=>({...$,[O]:k}))},j=(P,O)=>{y(k=>({...k,[P]:O==="none"?null:P==="parent_id"?parseInt(O):O}))},S=P=>{P==="add_new"?(v(!0),w("")):(v(!1),y(O=>({...O,client_id:P==="none"?null:parseInt(P)})))},R=async()=>{if(g.trim())try{const{data:P,error:O}=await qS({name:g.trim(),contact_person:"",email:"",phone:"",industry:"General",status:"Active",address:{street:"",city:"",state:"",zip:""}});if(O)throw O;u(k=>[...k,P]),y(k=>({...k,client_id:P.id})),v(!1),w(""),o({title:"Client Created",description:`${g.trim()} has been added successfully.`,variant:"default"})}catch(P){console.error("Error creating client:",P),o({title:"Error",description:"Failed to create client. Please try again.",variant:"destructive"})}},E=(P,O)=>{try{return JSON.parse(P),!0}catch{return o({variant:"destructive",title:`Invalid JSON in ${O}`,description:"Please provide valid JSON data."}),!1}},_=async P=>{if(P.preventDefault(),!E(p.address,"Address")||!E(p.gps_coordinates,"GPS Coordinates"))return;const O={...p,address:JSON.parse(p.address),gps_coordinates:JSON.parse(p.gps_coordinates),parent_id:p.parent_id===""||p.parent_id==="none"?null:p.parent_id,client_id:p.client_id===""||p.client_id==="none"?null:p.client_id};c(!0);try{let k;if(e&&t){const{error:$}=await M.from("sites").update(O).eq("id",t.id);k=$}else{const{error:$}=await M.from("sites").insert([O]);k=$}if(k)throw k;o({title:`Entity ${e?"updated":"created"} successfully`}),i()}catch(k){o({variant:"destructive",title:`Error ${e?"updating":"creating"} entity`,description:k.message})}finally{c(!1)}},A=f.useMemo(()=>p.type?n.filter(P=>!t||P.id!==t.id):n,[n,p.type,t]);return console.log("EntityForm Debug:",{isEditing:e,currentSite:t,formData:p,parentCandidates:A.length,allSitesForParent:n.length,parentIdType:typeof p.parent_id,parentIdValue:p.parent_id}),r.jsx(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(Y,{className:"text-xl text-white",children:e?"Edit Entity":"Create New Entity"}),r.jsx(F,{variant:"ghost",size:"icon",onClick:a,className:"text-slate-400 hover:text-white",children:r.jsx(ap,{className:"w-5 h-5"})})]}),r.jsx(he,{className:"text-gray-400",children:e?`Updating details for ${(t==null?void 0:t.name)||"entity"}.`:"Fill in the details below."})]}),r.jsx(U,{children:r.jsxs("form",{onSubmit:_,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx(G,{htmlFor:"name",className:"text-gray-300",children:"Name"}),r.jsx(ee,{id:"name",name:"name",value:p.name,onChange:b,required:!0,className:Is})]}),r.jsxs("div",{children:[r.jsx(G,{htmlFor:"type",className:"text-gray-300",children:"Type"}),r.jsxs(we,{name:"type",value:p.type,onValueChange:P=>j("type",P),required:!0,children:[r.jsx(xe,{className:Is,children:r.jsx(be,{placeholder:"Select type..."})}),r.jsx(ge,{children:XS.map(P=>r.jsx(Z,{value:P,children:P.charAt(0).toUpperCase()+P.slice(1).replace("_"," ")},P))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx(G,{htmlFor:"parent_id",className:"text-gray-300",children:"Parent Entity (Optional)"}),r.jsxs(we,{name:"parent_id",value:p.parent_id?p.parent_id.toString():"none",onValueChange:P=>j("parent_id",P),children:[r.jsx(xe,{className:Is,children:r.jsx(be,{placeholder:"Select parent..."})}),r.jsxs(ge,{children:[r.jsx(Z,{value:"none",children:"None"}),A.map(P=>r.jsxs(Z,{value:P.id.toString(),children:[P.name," (",P.type,")"]},P.id))]})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Any entity can be a parent of any other entity type."})]}),r.jsxs("div",{children:[r.jsx(G,{htmlFor:"client_id",className:"text-gray-300",children:"Client (Optional)"}),x?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:g,onChange:P=>w(P.target.value),placeholder:"Enter new client name",className:Is,onKeyPress:P=>{P.key==="Enter"&&(P.preventDefault(),R())}}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(F,{type:"button",size:"sm",onClick:R,className:"bg-green-600 hover:bg-green-700 text-xs",children:"Add Client"}),r.jsx(F,{type:"button",size:"sm",variant:"outline",onClick:()=>{v(!1),w("")},className:"border-slate-600 text-slate-300 hover:bg-slate-700 text-xs",children:"Cancel"})]})]}):r.jsxs(we,{name:"client_id",value:p.client_id?p.client_id.toString():"none",onValueChange:S,disabled:h,children:[r.jsx(xe,{className:Is,children:r.jsx(be,{placeholder:h?"Loading clients...":"Select a client or add new..."})}),r.jsxs(ge,{children:[r.jsx(Z,{value:"none",children:"None"}),h?r.jsx(Z,{value:"",disabled:!0,children:"Loading clients..."}):r.jsxs(r.Fragment,{children:[d.map(P=>r.jsxs(Z,{value:P.id.toString(),children:[P.name," - ",P.industry]},P.id)),r.jsx(Z,{value:"add_new",className:"text-blue-400 font-medium",children:"+ Add New Client"})]})]})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Assign this entity to a specific client or create a new one."})]})]}),r.jsxs("div",{children:[r.jsx(G,{htmlFor:"address",className:"text-gray-300",children:"Address (JSON format)"}),r.jsx(dt,{id:"address",name:"address",value:p.address,onChange:b,rows:4,className:`${Is} font-mono`,placeholder:'{ "street": "123 Main St", "city": "Anytown", "zip": "12345" }'})]}),r.jsxs("div",{children:[r.jsx(G,{htmlFor:"gps_coordinates",className:"text-gray-300",children:"GPS Coordinates (JSON format)"}),r.jsx(dt,{id:"gps_coordinates",name:"gps_coordinates",value:p.gps_coordinates,onChange:b,rows:3,className:`${Is} font-mono`,placeholder:'{ "latitude": 34.0522, "longitude": -118.2437 }'})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(F,{type:"button",variant:"outline",onClick:a,className:"text-gray-300 border-gray-600 hover:bg-slate-700",children:"Cancel"}),r.jsxs(F,{type:"submit",className:`${Ao}`,disabled:l,children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),l?e?"Saving...":"Creating...":e?"Save Changes":"Create Entity"]})]})]})})]})})},t0=te.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:de("w-full caption-bottom text-sm",e),...t})}));t0.displayName="Table";const s0=te.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:de("[&_tr]:border-b-0",e),...t}));s0.displayName="TableHeader";const r0=te.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:de("[&_tr:last-child]:border-0",e),...t}));r0.displayName="TableBody";const n6=te.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:de("bg-primary font-medium text-primary-foreground",e),...t}));n6.displayName="TableFooter";const Po=te.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:de("border-b border-slate-700/50 transition-colors hover:bg-slate-800/50 data-[state=selected]:bg-muted",e),...t}));Po.displayName="TableRow";const us=te.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:de("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0","text-slate-400 uppercase tracking-wider text-xs",e),...t}));us.displayName="TableHead";const hs=te.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:de("p-4 align-middle text-slate-300 [&:has([role=checkbox])]:pr-0",e),...t}));hs.displayName="TableCell";const i6=te.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:de("mt-4 text-sm text-muted-foreground",e),...t}));i6.displayName="TableCaption";const a6=({sites:e,loading:t,onEdit:s,onDelete:n})=>(console.log("EntityTable received sites:",e),t?r.jsx(U,{children:r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Loading entities..."})}):!e||e.length===0?r.jsx(U,{children:r.jsx("p",{className:"text-center text-gray-400 py-4",children:'No entities found. Click "Add New Entity" to get started.'})}):r.jsx(U,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(t0,{children:[r.jsx(s0,{className:"ios-table-header",children:r.jsxs(Po,{children:[r.jsx(us,{children:"Name"}),r.jsx(us,{children:"Type"}),r.jsx(us,{children:"Parent"}),r.jsx(us,{children:"Client"}),r.jsx(us,{className:"text-right",children:"Actions"})]})}),r.jsx(r0,{className:"dark-table-row-hover",children:e.map(i=>(e.indexOf(i)<3&&console.log("Site in table:",i),r.jsxs(Po,{children:[r.jsx(hs,{className:"font-medium text-white",children:i.name||"N/A"}),r.jsx(hs,{children:i.type?i.type.charAt(0).toUpperCase()+i.type.slice(1).replace("_"," "):"N/A"}),r.jsx(hs,{children:i.parent_name||"N/A"}),r.jsx(hs,{children:i.client_name||"N/A"}),r.jsxs(hs,{className:"text-right space-x-1 md:space-x-2",children:[r.jsx(F,{variant:"ghost",size:"icon",onClick:()=>s(i),className:`hover:bg-blue-500/20 text-blue-400 ${Ao} p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8`,children:r.jsx(gs,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),r.jsx(F,{variant:"ghost",size:"icon",onClick:()=>n(i.id),className:`hover:bg-red-500/20 text-red-400 ${Ao} p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8`,children:r.jsx(vn,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]})]},i.id)))})]})})})),o6=vd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Fe({className:e,variant:t,...s}){return r.jsx("div",{className:de(o6({variant:t}),e),...s})}const WS={Employee:{description:"General employee with basic responsibilities",requirements:["Basic Training","Background Check","Company Policies"],icon:"Shield"},"Site EHS Representative":{description:"Environmental, Health & Safety representative for specific sites",requirements:["EHS Certification","Safety Training","Incident Response","Regulatory Knowledge"],icon:"AlertTriangle"},"Site Manager":{description:"Manager responsible for day-to-day operations at specific sites",requirements:["Management Experience","Leadership Training","Site-Specific Knowledge","Team Management"],icon:"Building2"},"Regional Manager":{description:"Manager overseeing multiple sites within a region",requirements:["Regional Management Experience","Strategic Planning","Multi-Site Coordination","Advanced Leadership"],icon:"MapPin"},Executive:{description:"Senior executive with strategic and organizational responsibilities",requirements:["Executive Experience","Strategic Vision","Organizational Leadership","Industry Expertise"],icon:"Crown"},"Standard Officer":{description:"Basic security personnel for routine operations",requirements:["Basic Security Training","Background Check","Physical Fitness"],icon:"Shield"},"Dual-Role Hybrid":{description:"Officers with multiple specializations and responsibilities",requirements:["Multiple Certifications","Cross-Training","Advanced Background Check"],icon:"Users"},Supervisor:{description:"Team leaders and site supervisors",requirements:["Leadership Training","Management Certification","Experience"],icon:"Star"},"Operations Management":{description:"Regional and operational managers",requirements:["Management Degree","Extensive Experience","Strategic Planning"],icon:"Briefcase"},Consultant:{description:"Specialized security consultants and advisors",requirements:["Expert Certification","Industry Experience","Consulting Skills"],icon:"GraduationCap"}},l6=async e=>{var t,s;try{const n={name:((t=e.name)==null?void 0:t.trim())||"",role:((s=e.role)==null?void 0:s.trim())||"",type:e.type||"Standard Officer",site:e.site||"Unassigned",status:e.status||"Active",compliance:e.compliance||100,certifications:Array.isArray(e.certifications)?e.certifications:e.certifications?e.certifications.split(",").map(o=>o.trim()):[],email:e.email||null,phone:e.phone||null,hire_date:e.hire_date||new Date().toISOString().split("T")[0],department_id:e.department_id||null,supervisor_id:e.supervisor_id||null,notes:e.notes||null};if(!n.name)throw new Error("Name is required");if(!n.role)throw new Error("Role is required");const{data:i,error:a}=await M.from("entity_staff").insert([n]).select(`
        *,
        departments (id, name, description),
        supervisor:entity_staff!supervisor_id (id, name, role, type)
      `).single();if(a)throw a;return{data:i,error:null}}catch(n){return console.error("Error creating entity staff:",n),{data:null,error:n}}},n0=async(e={})=>{try{let t=M.from("entity_staff").select(`
        *,
        departments (id, name, description),
        supervisor:entity_staff!supervisor_id (id, name, role, type)
      `);e.status&&(t=t.eq("status",e.status)),e.type&&(t=t.eq("type",e.type)),e.department_id&&(t=t.eq("department_id",e.department_id));const s=e.orderBy||"created_at",n=e.orderDirection||"desc";t=t.order(s,{ascending:n==="asc"}),e.limit&&(t=t.limit(e.limit)),e.offset&&(t=t.range(e.offset,e.offset+(e.limit||50)-1));const{data:i,error:a}=await t;if(a)throw a;return{data:i,error:null}}catch(t){return console.error("Error fetching entity staff:",t),{data:null,error:t}}},Yc=async(e,t)=>{var s,n;try{const i={name:((s=t.name)==null?void 0:s.trim())||void 0,role:((n=t.role)==null?void 0:n.trim())||void 0,type:t.type||void 0,site:t.site||void 0,status:t.status||void 0,compliance:t.compliance!==void 0?t.compliance:void 0,certifications:Array.isArray(t.certifications)?t.certifications:t.certifications?t.certifications.split(",").map(l=>l.trim()):void 0,email:t.email||void 0,phone:t.phone||void 0,hire_date:t.hire_date||void 0,department_id:t.department_id||void 0,supervisor_id:t.supervisor_id||void 0,notes:t.notes||void 0};Object.keys(i).forEach(l=>{i[l]===void 0&&delete i[l]});const{data:a,error:o}=await M.from("entity_staff").update(i).eq("id",e).select(`
        *,
        departments (id, name, description),
        supervisor:entity_staff!supervisor_id (id, name, role, type)
      `).single();if(o)throw o;return{data:a,error:null}}catch(i){return console.error("Error updating entity staff:",i),{data:null,error:i}}},c6=async e=>{try{const{error:t}=await M.from("entity_staff").delete().eq("id",e);if(t)throw t;return{error:null}}catch(t){return console.error("Error deleting entity staff:",t),{error:t}}},d6=async(e=null)=>{try{let t=M.from("entity_staff").select("id, name, role, type, status").eq("status","Active").order("name",{ascending:!0});e&&(t=t.neq("id",e));const{data:s,error:n}=await t;if(n)throw n;return{data:s,error:null}}catch(t){return console.error("Error fetching potential supervisors:",t),{data:null,error:t}}},u6=async e=>{try{const{data:t,error:s}=await M.from("entity_staff").select(`
        id, name, role, type, status, compliance, hire_date,
        departments (id, name, description)
      `).eq("supervisor_id",e).eq("status","Active").order("name",{ascending:!0});if(s)throw s;return{data:t,error:null}}catch(t){return console.error("Error fetching direct reports:",t),{data:null,error:t}}},h6=async e=>{try{const{data:t,error:s}=await M.rpc("get_supervisor_chain",{entity_staff_id:e});if(s)throw s;return{data:t,error:null}}catch(t){return console.error("Error fetching supervisor chain:",t),{data:null,error:t}}},f6=async()=>{try{const{data:e,error:t}=await M.rpc("get_organizational_chart");if(t)throw t;return{data:e,error:null}}catch(e){return console.error("Error fetching organizational chart:",e),{data:null,error:e}}},m6=async()=>{try{const{data:e,error:t}=await M.from("entity_staff_with_supervisors").select("*").order("name",{ascending:!0});if(t)throw t;return{data:e,error:null}}catch(e){return console.error("Error fetching entity staff with supervisors:",e),{data:null,error:e}}},GS=async()=>{try{const{data:e,error:t}=await M.from("departments").select("id, name, description, is_active").eq("is_active",!0).order("name",{ascending:!0});if(t)throw t;return{data:e,error:null}}catch(e){return console.error("Error fetching departments:",e),{data:null,error:e}}},KS=async e=>{try{const{data:t,error:s}=await M.from("departments").insert([e]).select().single();if(s)throw s;return{data:t,error:null}}catch(t){return console.error("Error creating department:",t),{data:null,error:t}}},p6=async()=>{const e=[{name:"John Smith",role:"Security Officer",type:"Standard Officer",site:"Corporate HQ Alpha",status:"Active",compliance:95,certifications:["Basic Security","First Aid","Firearms"],email:"john.smith@gs3.com",phone:"+1-555-0123",hire_date:"2023-01-15",notes:"Reliable officer with excellent customer service skills. Handles high-traffic areas well."},{name:"Sarah Johnson",role:"Site Supervisor",type:"Supervisor",site:"Metro Hospital East",status:"Active",compliance:98,certifications:["Advanced Security","Leadership","Emergency Response"],email:"sarah.johnson@gs3.com",phone:"+1-555-0124",hire_date:"2022-08-20",notes:"Strong leadership qualities. Excellent at managing team dynamics and emergency situations."},{name:"Mike Rodriguez",role:"Operations Manager",type:"Operations Management",site:"Regional Office",status:"Active",compliance:100,certifications:["Management","Risk Assessment","ISO 18788"],email:"mike.rodriguez@gs3.com",phone:"+1-555-0125",hire_date:"2021-03-10",notes:"Strategic thinker with proven track record in operational efficiency. Key player in regional expansion."},{name:"Lisa Chen",role:"Security Consultant",type:"Consultant",site:"Multiple",status:"Active",compliance:92,certifications:["Consulting","Risk Analysis","Training"],email:"lisa.chen@gs3.com",phone:"+1-555-0126",hire_date:"2022-11-05",notes:"Expert in risk assessment and training. Valuable asset for client consultations and specialized projects."}];try{const{data:t,error:s}=await M.from("entity_staff").select("count").limit(1);if(s)return console.error("Error checking entity staff table:",s),{data:null,error:s};if(!t||t.length===0){const{data:n,error:i}=await M.from("entity_staff").insert(e).select();if(i)throw i;return console.log("Sample entity staff data initialized"),{data:n,error:null}}return{data:t,error:null}}catch(t){return console.error("Error initializing entity staff data:",t),{data:null,error:t}}},x6=async()=>{try{const{data:e,error:t}=await M.from("entity_staff").select("status, compliance, created_at");if(t)throw t;const s=e.length,n=e.filter(u=>u.status==="Active").length,i=e.filter(u=>u.compliance>=95).length,a=e.filter(u=>u.compliance>=85&&u.compliance<95).length,o=e.filter(u=>u.compliance<85).length,l=i+Math.floor(a*.8),c=Math.floor(a*.2)+Math.floor(o*.3),d=Math.floor(o*.7);return{data:{completedChecks:l,inProgress:c,pendingReview:d,totalEntityStaff:s,activeEntityStaff:n},error:null}}catch(e){return console.error("Error fetching background check stats:",e),{data:null,error:e}}},g6=async()=>{try{const{data:e,error:t}=await M.from("entity_staff").select("hire_date, status, created_at");if(t)throw t;const s=new Date,n=new Date(s.getTime()-30*24*60*60*1e3),i=e.filter(l=>new Date(l.hire_date)>=n).length,a=e.filter(l=>l.status==="On Leave").length,o=e.filter(l=>l.status==="Active").length;return{data:{newHires:i,inTraining:a,qualified:o,totalEntityStaff:e.length},error:null}}catch(e){return console.error("Error fetching onboarding stats:",e),{data:null,error:e}}},y6=e=>{const t=[];return(!e.name||e.name.trim().length===0)&&t.push("Name is required"),(!e.role||e.role.trim().length===0)&&t.push("Role is required"),e.compliance!==void 0&&(e.compliance<0||e.compliance>100)&&t.push("Compliance must be between 0 and 100"),e.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&t.push("Invalid email format"),{isValid:t.length===0,errors:t}},i0={"Standard Officer":{description:"Basic security personnel for routine operations",requirements:["Basic Security Training","Background Check","Physical Fitness"],icon:"Shield"},Supervisor:{description:"Team leaders and site supervisors",requirements:["Leadership Training","Management Certification","Experience"],icon:"Star"},"Operations Management":{description:"Regional and operational managers",requirements:["Management Degree","Extensive Experience","Strategic Planning"],icon:"Briefcase"},Consultant:{description:"Specialized security consultants and advisors",requirements:["Expert Certification","Industry Experience","Consulting Skills"],icon:"GraduationCap"},"Dual-Role Hybrid":{description:"Officers with multiple specializations and responsibilities",requirements:["Multiple Certifications","Cross-Training","Advanced Background Check"],icon:"Users"},Specialist:{description:"Specialized security roles (K9, VIP, etc.)",requirements:["Specialized Training","Advanced Certifications","Experience"],icon:"Shield"}},YS=async e=>{try{const{entities:t,supervisor_ids:s,...n}=e;s&&s.length>0&&(n.supervisor_id=s[0]);const{data:i,error:a}=await M.from("security_staff").insert([n]).select(`
        *,
        subcontractor_profiles (id, company_name, service_specialization)
      `).single();if(a)throw a;if(t&&t.length>0){const l=t.map((d,u)=>({security_staff_id:i.id,site_id:d,is_primary:u===0})),{error:c}=await M.from("security_staff_entities").insert(l);c&&console.error("Error creating security staff-entity relationships:",c)}return{data:{...i,supervisor_ids:s||[]},error:null}}catch(t){return console.error("Error creating security staff:",t),{data:null,error:t}}},QS=async()=>{try{const{data:e,error:t}=await M.from("security_staff").select(`
        *,
        subcontractor_profiles (id, company_name, service_specialization)
      `).order("created_at",{ascending:!1});if(t){if(t.code==="42501")return console.error("RLS Policy Error: User not authenticated or missing permissions"),{data:null,error:{message:"Authentication required. Please log in or contact administrator to disable RLS for development."}};throw t}return{data:await Promise.all(e.map(async n=>{var a,o;const{data:i}=await M.from("security_staff_entities").select(`
            site_id,
            is_primary,
            sites (id, name, type, parent_id)
          `).eq("security_staff_id",n.id);return{...n,name:`${n.first_name} ${n.last_name}`,role:n.position,type:n.position,entities:i||[],primaryEntity:((o=(a=i==null?void 0:i.find(l=>l.is_primary))==null?void 0:a.sites)==null?void 0:o.name)||"No entity assigned"}})),error:null}}catch(e){return console.error("Error fetching security staff:",e),{data:null,error:e}}},Qc=async(e,t)=>{try{const{entities:s,supervisor_ids:n,...i}=t;n&&n.length>0?i.supervisor_id=n[0]:i.supervisor_id=null;const{data:a,error:o}=await M.from("security_staff").update(i).eq("id",e).select(`
        *,
        subcontractor_profiles (id, company_name, service_specialization)
      `).single();if(o)throw o;if(s!==void 0&&(await M.from("security_staff_entities").delete().eq("security_staff_id",e),s&&s.length>0)){const c=s.map((u,h)=>({security_staff_id:e,site_id:u,is_primary:h===0})),{error:d}=await M.from("security_staff_entities").insert(c);d&&console.error("Error updating security staff-entity relationships:",d)}return{data:{...a,supervisor_ids:n||[]},error:null}}catch(s){return console.error("Error updating security staff:",s),{data:null,error:s}}},v6=async()=>{try{const e=[{name:"John Smith",role:"Security Supervisor",type:"Supervisor",status:"Active",security_company_id:1,position:"Supervisor",hire_date:"2023-01-15",email:"john.smith@security.com",phone:"+1-555-0101",compliance:95,certifications:["Security Supervisor License","First Aid","CPR"],background_check_status:"Approved",drug_test_status:"Passed",notes:"Experienced supervisor with excellent leadership skills."},{name:"Sarah Johnson",role:"Security Officer",type:"Standard Officer",status:"Active",security_company_id:1,position:"Security Officer",hire_date:"2023-03-20",email:"sarah.johnson@security.com",phone:"+1-555-0102",compliance:88,certifications:["Security License","First Aid"],background_check_status:"Approved",drug_test_status:"Passed",notes:"Reliable officer with good attention to detail."},{name:"Mike Davis",role:"Operations Manager",type:"Operations Management",status:"Active",security_company_id:1,position:"Operations Manager",hire_date:"2022-11-10",email:"mike.davis@security.com",phone:"+1-555-0103",compliance:98,certifications:["Management Certification","Security License","Advanced Training"],background_check_status:"Approved",drug_test_status:"Passed",notes:"Senior operations manager with extensive experience."}],{data:t,error:s}=await M.from("security_staff").insert(e).select();if(s)throw s;return{data:t,error:null}}catch(e){return console.error("Error initializing security staff data:",e),{data:null,error:e}}},w6=async()=>{try{const{data:e,error:t}=await M.from("security_staff").select("background_check_status, drug_test_status");if(t)throw t;return{data:{totalSecurityStaff:e.length,completedChecks:e.filter(n=>n.background_check_status==="Approved").length,inProgress:e.filter(n=>n.background_check_status==="In Progress").length,pendingReview:e.filter(n=>n.background_check_status==="Pending").length,drugTestPassed:e.filter(n=>n.drug_test_status==="Passed").length,drugTestFailed:e.filter(n=>n.drug_test_status==="Failed").length},error:null}}catch(e){return console.error("Error fetching background check stats:",e),{data:null,error:e}}},b6=async()=>{try{const{data:e,error:t}=await M.from("security_staff").select("hire_date, status, training_completion");if(t)throw t;const s=new Date().getMonth(),n=new Date().getFullYear();return{data:{newHires:e.filter(a=>{const o=new Date(a.hire_date);return o.getMonth()===s&&o.getFullYear()===n}).length,inTraining:e.filter(a=>a.status==="In Training").length,qualified:e.filter(a=>{var o;return a.status==="Active"&&((o=a.training_completion)==null?void 0:o.basic_training)===!0}).length},error:null}}catch(e){return console.error("Error fetching onboarding stats:",e),{data:null,error:e}}},j6=async()=>{try{const{data:e,error:t}=await M.from("subcontractor_profiles").select("id, company_name, service_specialization").eq("status","Active").order("company_name");if(t)throw t;return{data:e,error:null}}catch(e){return console.error("Error fetching security companies:",e),{data:null,error:e}}},N6=async(e=null)=>{try{let t=M.from("security_staff").select("id, first_name, last_name, position, status").eq("status","Active");e&&(t=t.neq("id",e));const{data:s,error:n}=await t.order("first_name");if(n)throw n;return{data:s.map(a=>({...a,name:`${a.first_name} ${a.last_name}`,role:a.position,type:a.position})),error:null}}catch(t){return console.error("Error fetching potential supervisors:",t),{data:null,error:t}}},Vt=e=>{if(!e)return null;const t=e.match(/\(([^,]+),([^)]+)\)/);return t?{lat:parseFloat(t[1]),lng:parseFloat(t[2])}:null},Na=e=>!e||!e.lat||!e.lng?null:`(${e.lat},${e.lng})`,Hy={async getNfcTags(){try{const{data:e,error:t}=await M.from("nfc_tags").select("id").limit(1);if(t)return console.log("NFC tags table does not exist yet. Please run the database setup script."),[];const{data:s,error:n}=await M.from("nfc_tags").select(`
          *,
          sites (name),
          entity_staff (name)
        `).order("created_at",{ascending:!1});if(n){console.log("Join with sites table failed, trying without relationships...");const{data:i,error:a}=await M.from("nfc_tags").select("*").order("created_at",{ascending:!1});return a?(console.error("Error fetching NFC tags:",a),[]):i.map(o=>({...o,coordinates:Vt(o.coordinates),last_scan_at:o.last_scan_at?new Date(o.last_scan_at).toLocaleString():null,sites:{name:"Unknown Site"},entity_staff:{name:"Unknown Staff"}}))}return s.map(i=>({...i,coordinates:Vt(i.coordinates),last_scan_at:i.last_scan_at?new Date(i.last_scan_at).toLocaleString():null}))}catch(e){return console.error("Error fetching NFC tags:",e),[]}},async getNfcTagsBySite(e){try{const{data:t,error:s}=await M.from("nfc_tags").select(`
          *,
          sites (name),
          entity_staff (name)
        `).eq("site_id",e).order("created_at",{ascending:!1});if(s){console.log("Join with sites table failed, trying without relationships...");const{data:n,error:i}=await M.from("nfc_tags").select("*").eq("site_id",e).order("created_at",{ascending:!1});return i?(console.error("Error fetching NFC tags by site:",i),[]):n.map(a=>({...a,coordinates:Vt(a.coordinates),last_scan_at:a.last_scan_at?new Date(a.last_scan_at).toLocaleString():null,sites:{name:"Unknown Site"},entity_staff:{name:"Unknown Staff"}}))}return t.map(n=>({...n,coordinates:Vt(n.coordinates),last_scan_at:n.last_scan_at?new Date(n.last_scan_at).toLocaleString():null}))}catch(t){return console.error("Error fetching NFC tags by site:",t),[]}},async createNfcTag(e){try{const{data:t,error:s}=await M.from("nfc_tags").insert({...e,coordinates:Na(e.coordinates)}).select().single();if(s)throw s;return{...t,coordinates:Vt(t.coordinates)}}catch(t){throw console.error("Error creating NFC tag:",t),t}},async updateNfcTag(e,t){try{const s={...t};t.coordinates&&(s.coordinates=Na(t.coordinates));const{data:n,error:i}=await M.from("nfc_tags").update(s).eq("id",e).select().single();if(i)throw i;return{...n,coordinates:Vt(n.coordinates)}}catch(s){throw console.error("Error updating NFC tag:",s),s}},async deleteNfcTag(e){try{const{error:t}=await M.from("nfc_tags").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting NFC tag:",t),t}},async getGpsLocations(){try{const{data:e,error:t}=await M.from("gps_locations").select("id").limit(1);if(t)return console.log("GPS locations table does not exist yet. Please run the database setup script."),[];const{data:s,error:n}=await M.from("gps_locations").select(`
          *,
          sites (name),
          entity_staff (name)
        `).order("created_at",{ascending:!1});if(n){console.log("Join with sites table failed, trying without relationships...");const{data:i,error:a}=await M.from("gps_locations").select("*").order("created_at",{ascending:!1});return a?(console.error("Error fetching GPS locations:",a),[]):i.map(o=>({...o,coordinates:Vt(o.coordinates),last_check_in_at:o.last_check_in_at?new Date(o.last_check_in_at).toLocaleString():null,sites:{name:"Unknown Site"},entity_staff:{name:"Unknown Staff"}}))}return s.map(i=>({...i,coordinates:Vt(i.coordinates),last_check_in_at:i.last_check_in_at?new Date(i.last_check_in_at).toLocaleString():null}))}catch(e){return console.error("Error fetching GPS locations:",e),[]}},async getGpsLocationsBySite(e){try{const{data:t,error:s}=await M.from("gps_locations").select(`
          *,
          sites (name),
          entity_staff (name)
        `).eq("site_id",e).order("created_at",{ascending:!1});if(s){console.log("Join with sites table failed, trying without relationships...");const{data:n,error:i}=await M.from("gps_locations").select("*").eq("site_id",e).order("created_at",{ascending:!1});return i?(console.error("Error fetching GPS locations by site:",i),[]):n.map(a=>({...a,coordinates:Vt(a.coordinates),last_check_in_at:a.last_check_in_at?new Date(a.last_check_in_at).toLocaleString():null,sites:{name:"Unknown Site"},entity_staff:{name:"Unknown Staff"}}))}return t.map(n=>({...n,coordinates:Vt(n.coordinates),last_check_in_at:n.last_check_in_at?new Date(n.last_check_in_at).toLocaleString():null}))}catch(t){return console.error("Error fetching GPS locations by site:",t),[]}},async createGpsLocation(e){try{const{data:t,error:s}=await M.from("gps_locations").insert({...e,coordinates:Na(e.coordinates)}).select().single();if(s)throw s;return{...t,coordinates:Vt(t.coordinates)}}catch(t){throw console.error("Error creating GPS location:",t),t}},async updateGpsLocation(e,t){try{const s={...t};t.coordinates&&(s.coordinates=Na(t.coordinates));const{data:n,error:i}=await M.from("gps_locations").update(s).eq("id",e).select().single();if(i)throw i;return{...n,coordinates:Vt(n.coordinates)}}catch(s){throw console.error("Error updating GPS location:",s),s}},async deleteGpsLocation(e){try{const{error:t}=await M.from("gps_locations").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting GPS location:",t),t}},async logScan(e){try{const{data:t,error:s}=await M.from("scan_logs").insert({...e,coordinates:Na(e.coordinates)}).select().single();if(s)throw s;return e.tag_id&&await M.from("nfc_tags").update({last_scan_at:new Date().toISOString(),last_scan_by:e.scanned_by}).eq("id",e.tag_id),e.gps_location_id&&await M.from("gps_locations").update({last_check_in_at:new Date().toISOString(),last_check_in_by:e.scanned_by}).eq("id",e.gps_location_id),{...t,coordinates:Vt(t.coordinates)}}catch(t){throw console.error("Error logging scan:",t),t}},async getScanLogs(e={}){try{let t=M.from("scan_logs").select(`
          *,
          nfc_tags (tag_id, name),
          gps_locations (name),
          entity_staff (name)
        `).order("scan_timestamp",{ascending:!1});e.tag_id&&(t=t.eq("tag_id",e.tag_id)),e.gps_location_id&&(t=t.eq("gps_location_id",e.gps_location_id)),e.scanned_by&&(t=t.eq("scanned_by",e.scanned_by)),e.scan_type&&(t=t.eq("scan_type",e.scan_type));const{data:s,error:n}=await t;if(n)throw n;return s.map(i=>({...i,coordinates:Vt(i.coordinates),scan_timestamp:new Date(i.scan_timestamp).toLocaleString()}))}catch(t){throw console.error("Error fetching scan logs:",t),t}},async getScanStatistics(){try{const{data:e,error:t}=await M.from("scan_logs").select("id").limit(1);if(t)return console.log("Scan logs table does not exist yet. Please run the database setup script."),{totalScans:0,nfcScans:0,gpsScans:0,manualScans:0,last24Hours:0};const{data:s,error:n}=await M.from("scan_logs").select("scan_type, scan_timestamp").gte("scan_timestamp",new Date(Date.now()-24*60*60*1e3).toISOString());return n?(console.error("Error fetching scan statistics:",n),{totalScans:0,nfcScans:0,gpsScans:0,manualScans:0,last24Hours:0}):{totalScans:s.length,nfcScans:s.filter(a=>a.scan_type==="NFC").length,gpsScans:s.filter(a=>a.scan_type==="GPS").length,manualScans:s.filter(a=>a.scan_type==="Manual").length,last24Hours:s.length}}catch(e){return console.error("Error fetching scan statistics:",e),{totalScans:0,nfcScans:0,gpsScans:0,manualScans:0,last24Hours:0}}}},JS=({isOpen:e,onClose:t,entity:s})=>{var b,j,S,R,E,_;const[n,i]=f.useState(!1),[a,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState([]),[h,m]=f.useState([]),[x,v]=f.useState("overview"),{toast:g}=ue();f.useEffect(()=>{e&&s?(console.log("🚀 Dialog opened with entity:",s),console.log("🔍 Entity ID:",s.id),console.log("🔍 Entity Name:",s.name),console.log("🔍 Entity Type:",s.type),console.log("🔍 Entity object keys:",Object.keys(s)),w()):console.log("Dialog not opened or entity is null:",{isOpen:e,entity:s})},[e,s]);const w=async()=>{if(!s){console.log("No entity provided to fetchLinkedData");return}i(!0);try{console.log("🔍 Fetching linked data for entity:",s),console.log("🔍 Entity ID type:",typeof s.id),console.log("🔍 Entity ID value:",s.id);try{const{data:I,error:z}=await M.from("sites").select("id, name").limit(1);console.log("🔍 Database connection test:",{testData:I,testError:z})}catch(I){console.error("🔍 Database connection failed:",I)}let A=[],P=null;try{const{data:I,error:z}=await M.from("entity_staff_entities").select(`
            entity_staff_id,
            is_primary,
            status,
            entity_staff (
              id,
              name,
              email,
              phone,
              role,
              department_id,
              departments (name)
            )
          `).eq("site_id",s.id);A=I||[],P=z}catch(I){console.log("Entity staff entities table not available, trying direct entity_staff table"),P=I}console.log("📊 Entity staff data (via relationships):",A),console.log("❌ Entity staff error (via relationships):",P);let O=[],k=null;try{const{data:I,error:z}=await M.from("entity_staff").select(`
            id,
            name,
            email,
            phone,
            role,
            department_id,
            departments (name)
          `).eq("site",s.name);O=I||[],k=z}catch(I){console.log("Entity staff site column not available, using junction table only"),k=I}console.log("📊 Entity staff data (via site column):",O),console.log("❌ Entity staff error (via site column):",k);const $=[...(A||[]).map(I=>({...I,source:"relationship",entity_staff:I.entity_staff||{}})),...(O||[]).map(I=>({entity_staff_id:I.id,is_primary:!0,entity_staff:I,source:"legacy"}))];console.log("✅ Combined entity staff:",$),o($);let N=[],C=null;try{const{data:I,error:z}=await M.from("security_staff_entities").select(`
            security_staff_id,
            is_primary,
            status,
            security_staff (
              id,
              first_name,
              last_name,
              email,
              phone,
              position,
              security_company_id,
              subcontractor_profiles (company_name)
            )
          `).eq("site_id",s.id);N=I||[],C=z}catch(I){console.log("Security staff entities table not available, trying direct security_staff table"),C=I}console.log("📊 Security staff data:",N),console.log("❌ Security staff error:",C);let T=[],V=null;console.log("📊 Security staff data (via site column): No direct site column available"),console.log("❌ Security staff error (via site column): Using junction table only");const L=[...(N||[]).map(I=>({...I,source:"relationship",security_staff:I.security_staff||{}}))];console.log("✅ Combined security staff:",L),c(L);try{const[I,z]=await Promise.all([Hy.getNfcTagsBySite(s.id),Hy.getGpsLocationsBySite(s.id)]);u(I),m(z),console.log("📱 NFC tags for site:",I),console.log("📍 GPS locations for site:",z)}catch(I){console.error("Error fetching NFC/GPS data:",I)}console.log("🎯 Final state - Entity staff count:",$.length),console.log("🎯 Final state - Security staff count:",L.length),console.log("🎯 Final state - Entity staff data:",$),console.log("🎯 Final state - Security staff data:",L),$.length===0&&L.length===0?console.log("No staff data found for this entity - this is normal for new entities"):console.log("Staff data loaded successfully")}catch(A){console.error("Error fetching linked data:",A),g({variant:"destructive",title:"Error",description:"Failed to load entity details"})}finally{i(!1)}},p=A=>{switch(A){case"site":return r.jsx(sr,{className:"w-4 h-4"});case"region":return r.jsx(qt,{className:"w-4 h-4"});case"national":return r.jsx(sr,{className:"w-4 h-4"});case"global":return r.jsx(sr,{className:"w-4 h-4"});default:return r.jsx(sr,{className:"w-4 h-4"})}},y=A=>A?typeof A=="string"?A:typeof A=="object"&&`${A.street||""} ${A.city||""} ${A.state||""} ${A.zip||""}`.trim()||"Address available":"No address provided";if(!s||!e)return null;try{return r.jsx(jt,{children:e&&r.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(Y,{className:"text-xl text-white flex items-center",children:[p(s.type),r.jsx("span",{className:"ml-2",children:s.name}),r.jsx(Fe,{variant:"outline",className:"ml-3",children:((b=s.type)==null?void 0:b.charAt(0).toUpperCase())+((j=s.type)==null?void 0:j.slice(1).replace("_"," "))||"Unknown"})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Dt,{className:"w-4 h-4"})})]}),r.jsx(U,{children:n?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(ct,{className:"w-8 h-8 animate-spin text-blue-400"}),r.jsx("span",{className:"ml-2 text-gray-400",children:"Loading entity details..."})]}):r.jsxs(Et,{value:x,onValueChange:v,className:"w-full",children:[r.jsxs(gt,{className:"grid w-full grid-cols-5 bg-slate-800/80 border border-slate-700",children:[r.jsx(ie,{value:"overview",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:"Overview"}),r.jsxs(ie,{value:"entity_staff",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:["Entity Staff (",a.length,")"]}),r.jsxs(ie,{value:"security_staff",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:["Security Staff (",l.length,")"]}),r.jsx(ie,{value:"relationships",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:"Relationships"}),r.jsx(ie,{value:"hierarchy",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:"Hierarchy"}),r.jsx(ie,{value:"nfc_gps",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:"NFC/GPS"})]}),r.jsx(oe,{value:"overview",className:"mt-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs(H,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(K,{children:r.jsx(Y,{className:"text-lg text-white",children:"Entity Information"})}),r.jsxs(U,{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Name"}),r.jsx("p",{className:"text-white font-medium",children:s.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Type"}),r.jsx("p",{className:"text-white",children:((S=s.type)==null?void 0:S.charAt(0).toUpperCase())+((R=s.type)==null?void 0:R.slice(1).replace("_"," "))||"Unknown"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Address"}),r.jsx("p",{className:"text-white",children:y(s.address)})]}),s.client_name&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Client"}),r.jsx("p",{className:"text-white",children:s.client_name})]})]})]}),r.jsxs(H,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(K,{children:r.jsx(Y,{className:"text-lg text-white",children:"Staff Summary"})}),r.jsxs(U,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Entity Staff"}),r.jsx(Fe,{variant:"secondary",children:a.length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Security Staff"}),r.jsx(Fe,{variant:"secondary",children:l.length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Total Staff"}),r.jsx(Fe,{variant:"outline",children:a.length+l.length})]})]})]})]})}),r.jsx(oe,{value:"entity_staff",className:"mt-4",children:r.jsxs(H,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(K,{children:r.jsxs(Y,{className:"text-lg text-white flex items-center",children:[r.jsx(Ae,{className:"w-5 h-5 mr-2 text-blue-400"}),"Entity Staff (",a.length,")"]})}),r.jsxs(U,{children:[console.log("🎨 Rendering entity staff section with data:",a),a.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(Ae,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No entity staff assigned to this location"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Entity staff can be assigned through the Entity Staff management page."}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"The system checks both the new relationship table and legacy site column."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(A=>{const P=A.entity_staff||{};return console.log("🎨 Rendering entity staff item:",A),!P||!P.name?(console.warn("Invalid entity staff data:",A),null):r.jsxs(H,{className:"bg-slate-700/50 border-slate-600",children:[r.jsx(K,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Y,{className:"text-md text-white",children:P.name||"Unknown Staff"}),r.jsxs("div",{className:"flex items-center gap-2",children:[A.is_primary&&r.jsx(Fe,{variant:"outline",className:"text-xs",children:"Primary"}),A.source==="legacy"&&r.jsx(Fe,{variant:"secondary",className:"text-xs",children:"Legacy"})]})]})}),r.jsxs(U,{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Vi,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:P.email})]}),P.phone&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Dn,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:P.phone})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Rt,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:P.role||P.position||"No role"})]}),P.departments&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(sr,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:P.departments.name})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Rs,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:"Assignment dates not available"})]}),A.status&&r.jsx("div",{className:"flex items-center text-sm",children:r.jsx(Fe,{variant:A.status==="Active"?"default":"secondary",className:"text-xs",children:A.status})})]})]},A.entity_staff_id)})})]})]})}),r.jsx(oe,{value:"security_staff",className:"mt-4",children:r.jsxs(H,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(K,{children:r.jsxs(Y,{className:"text-lg text-white flex items-center",children:[r.jsx(Rt,{className:"w-5 h-5 mr-2 text-green-400"}),"Security Staff (",l.length,")"]})}),r.jsx(U,{children:l.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(Rt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No security staff assigned to this location"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Security staff can be assigned through the Security Staff management page."}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"The system checks both the new relationship table and legacy site column."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(A=>{const P=A.security_staff||{};return!P||!P.name?(console.warn("Invalid security staff data:",A),null):r.jsxs(H,{className:"bg-slate-700/50 border-slate-600",children:[r.jsx(K,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Y,{className:"text-md text-white",children:P.first_name&&P.last_name?`${P.first_name} ${P.last_name}`:P.first_name||P.last_name||"Unknown Staff"}),r.jsxs("div",{className:"flex items-center gap-2",children:[A.is_primary&&r.jsx(Fe,{variant:"outline",className:"text-xs",children:"Primary"}),A.source==="legacy"&&r.jsx(Fe,{variant:"secondary",className:"text-xs",children:"Legacy"})]})]})}),r.jsxs(U,{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Vi,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:P.email})]}),P.phone&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Dn,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:P.phone})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Rt,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:P.position||"No position"})]}),P.subcontractor_profiles&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(sr,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:P.subcontractor_profiles.company_name})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Rs,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:"Assignment dates not available"})]}),A.status&&r.jsx("div",{className:"flex items-center text-sm",children:r.jsx(Fe,{variant:A.status==="Active"?"default":"secondary",className:"text-xs",children:A.status})})]})]},A.security_staff_id)})})})]})}),r.jsx(oe,{value:"relationships",className:"mt-4",children:r.jsxs(H,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(K,{children:r.jsxs(Y,{className:"text-lg text-white flex items-center",children:[r.jsx(Ts,{className:"w-5 h-5 mr-2 text-blue-400"}),"Site Relationships"]})}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Entity Staff Relationships"}),r.jsxs("p",{className:"text-white",children:["This entity has ",a.length," entity staff members assigned through the entity_staff_entities table."]}),a.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("p",{className:"text-sm text-gray-400",children:["Primary assignments: ",a.filter(A=>A.is_primary).length]}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Active assignments: ",a.filter(A=>A.status==="Active").length]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Security Staff Relationships"}),r.jsxs("p",{className:"text-white",children:["This entity has ",l.length," security staff members assigned through the security_staff_entities table."]}),l.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("p",{className:"text-sm text-gray-400",children:["Primary assignments: ",l.filter(A=>A.is_primary).length]}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Active assignments: ",l.filter(A=>A.status==="Active").length]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Database Tables Used"}),r.jsxs("div",{className:"space-y-1 mt-2",children:[r.jsx("p",{className:"text-sm text-gray-300",children:"• entity_staff_entities (junction table)"}),r.jsx("p",{className:"text-sm text-gray-300",children:"• security_staff_entities (junction table)"}),r.jsx("p",{className:"text-sm text-gray-300",children:"• entity_staff (staff details)"}),r.jsx("p",{className:"text-sm text-gray-300",children:"• security_staff (security staff details)"})]})]})]})})]})}),r.jsx(oe,{value:"hierarchy",className:"mt-4",children:r.jsxs(H,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(K,{children:r.jsxs(Y,{className:"text-lg text-white flex items-center",children:[r.jsx(qt,{className:"w-5 h-5 mr-2 text-purple-400"}),"Hierarchy Information"]})}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Entity Type"}),r.jsx("p",{className:"text-white font-medium",children:((E=s.type)==null?void 0:E.charAt(0).toUpperCase())+((_=s.type)==null?void 0:_.slice(1).replace("_"," "))||"Unknown"})]}),s.parent_id&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Parent Entity"}),r.jsxs("p",{className:"text-white",children:["ID: ",s.parent_id]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Entity ID"}),r.jsx("p",{className:"text-white font-mono text-sm",children:s.id})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Address"}),r.jsx("p",{className:"text-white",children:y(s.address)})]}),s.gps_coordinates&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"GPS Coordinates"}),r.jsx("p",{className:"text-white font-mono text-sm",children:JSON.stringify(s.gps_coordinates)})]})]})})]})}),r.jsx(oe,{value:"nfc_gps",className:"mt-4",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(H,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(K,{children:r.jsxs(Y,{className:"text-lg text-white flex items-center",children:[r.jsx(bf,{className:"w-5 h-5 mr-2 text-blue-400"}),"NFC Tags (",d.length,")"]})}),r.jsx(U,{children:d.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(bf,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No NFC tags deployed at this location"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"NFC tags can be added through the NFC Management page."})]}):r.jsx("div",{className:"space-y-3",children:d.map(A=>r.jsxs("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"text-white font-medium",children:A.tag_id}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${A.status==="Active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:A.status})]}),r.jsx("p",{className:"text-sm text-gray-300 mb-1",children:A.location_description||A.name}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[r.jsxs("span",{children:["Battery: ",A.battery_level,"%"]}),r.jsxs("span",{children:["Last scan: ",A.last_scan_at||"Never"]})]})]},A.id))})})]}),r.jsxs(H,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(K,{children:r.jsxs(Y,{className:"text-lg text-white flex items-center",children:[r.jsx(wf,{className:"w-5 h-5 mr-2 text-green-400"}),"GPS Locations (",h.length,")"]})}),r.jsx(U,{children:h.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(wf,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No GPS locations configured for this site"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"GPS locations can be added through the NFC Management page."})]}):r.jsx("div",{className:"space-y-3",children:h.map(A=>r.jsxs("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"text-white font-medium",children:A.name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${A.status==="Active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:A.status})]}),r.jsx("p",{className:"text-sm text-gray-300 mb-1",children:A.description}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[r.jsxs("span",{children:["Radius: ",A.radius_meters,"m"]}),r.jsxs("span",{children:["Type: ",A.location_type]})]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last check-in: ",A.last_check_in_at||"Never"]})]},A.id))})})]})]})})]})})]})})})})}catch(A){return console.error("Error rendering EntityDetailsDialog:",A),r.jsx(jt,{children:e&&r.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsx(Y,{className:"text-xl text-white",children:"Error Loading Entity Details"})}),r.jsxs(U,{children:[r.jsx("p",{className:"text-gray-400",children:"There was an error loading the entity details. Please try again."}),r.jsx(F,{onClick:t,className:"mt-4",children:"Close"})]})]})})})})}},S6={site:vj,region:jT,national:vf,global:vf},ch=({title:e,parentTypeForSelection:t,childTypeToDisplay:s,allSites:n,loading:i,selectedParent:a,setSelectedParent:o,getDashboardData:l})=>{var g,w;ue();const[c,d]=f.useState(null),[u,h]=f.useState(!1),m=n.filter(p=>p.type===t),x=l(t,s),v=S6[t]||Kr;return r.jsxs(r.Fragment,{children:[r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[r.jsxs(Y,{className:"text-xl text-white flex items-center mb-2 sm:mb-0",children:[r.jsx(v,{className:"w-5 h-5 mr-2 text-blue-400"}),e]}),m.length>0&&r.jsxs(we,{onValueChange:p=>o(p==="none"?null:parseInt(p)),value:a||"none",children:[r.jsx(xe,{className:`${Is} w-full sm:w-auto sm:max-w-xs`,children:r.jsx(be,{placeholder:`Select ${t}...`})}),r.jsxs(ge,{children:[r.jsxs(Z,{value:"none",children:["Overview (All ",t,"s)"]}),m.map(p=>r.jsx(Z,{value:p.id.toString(),children:p.name},p.id))]})]})]}),r.jsx(he,{className:"text-gray-400 mt-2",children:a?`Data for children of ${((g=n.find(p=>p.id===a))==null?void 0:g.name)||t}.`:`Overview of all ${s}s under ${t}s.`})]}),r.jsxs(U,{children:[i?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Loading data..."}):x.length===0?r.jsxs("div",{className:"text-center py-12 min-h-[200px] flex flex-col items-center justify-center",children:[r.jsx(Kr,{className:"w-12 h-12 mx-auto text-slate-500 mb-3 opacity-70"}),r.jsxs("p",{className:"text-gray-400",children:["No ",s," data to display for ",a?(w=n.find(p=>p.id===a))==null?void 0:w.name:`the selected ${t}`,"."]}),!a&&m.length>0&&r.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Select a ",t," from the dropdown to see its children."]}),m.length===0&&r.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["No ",t," entities exist to display data for."]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(p=>r.jsxs(H,{className:"bg-slate-800/50 border-slate-700 hover-lift",children:[r.jsxs(K,{children:[r.jsx(Y,{className:"text-lg text-sky-300",children:p.name}),r.jsx(he,{className:"text-slate-400",children:p.type?p.type.charAt(0).toUpperCase()+p.type.slice(1).replace("_"," "):"N/A"})]}),r.jsxs(U,{children:[r.jsxs("p",{className:"text-xs text-slate-500",children:["Address: ",p.address?JSON.stringify(p.address):"N/A"]}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Client: ",p.client_name||"N/A"]}),r.jsx(F,{size:"sm",variant:"link",className:"text-blue-400 hover:text-blue-300 p-0 mt-2 text-xs",onClick:()=>{d(p),h(!0)},children:"View Details"})]})]},p.id))}),r.jsxs("div",{className:"text-center py-8 mt-4 border-t border-slate-700",children:[r.jsx(Kr,{className:"w-10 h-10 mx-auto text-slate-600 mb-2 opacity-50"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"AI-powered charts and aggregated analytics will appear here."})]})]})]}),r.jsx(JS,{isOpen:u,onClose:()=>{h(!1),d(null)},entity:c})]})},XS=["site","region","special_activity","national","global"],Ao="bg-[#607D8B] hover:bg-[#546E7A] text-white",Is="bg-white text-gray-800 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-blue-500",_6="bg-transparent p-0 space-x-1",Sa="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",_a="data-[state=active]:bg-transparent data-[state=active]:shadow-none",C6=()=>{var C;const{toast:e}=ue(),[t,s]=f.useState([]),[n,i]=f.useState([]),[a,o]=f.useState([]),[l,c]=f.useState(!0),[d,u]=f.useState(!1),[h,m]=f.useState(!1),[x,v]=f.useState(null),[g,w]=f.useState("");console.log("🔍 Search term state:",g);const[p,y]=f.useState("sites_list"),[b,j]=f.useState(null),[S,R]=f.useState(null),[E,_]=f.useState(!1),A=f.useCallback(async()=>{c(!0);try{console.log("🔍 Fetching sites from database...");const{data:T,error:V}=await M.from("sites").select(`
          id, 
          name, 
          type, 
          parent_id, 
          client_id, 
          address, 
          gps_coordinates
        `);if(console.log("📊 Database response:",{sitesData:T,sitesError:V}),V)throw V;console.log("Raw sites data:",T);const L=[...new Set(T.map(D=>D.parent_id).filter(D=>D!==null))];let I=[];if(L.length>0){const{data:D,error:J}=await M.from("sites").select("id, name").in("id",L);J||(I=D||[])}const z=T.map(D=>{var J;return{...D,parent_name:D.parent_id&&((J=I.find(ne=>ne.id===D.parent_id))==null?void 0:J.name)||null,client_name:null}});console.log("Formatted sites data:",z),s(z),o(T.map(D=>({id:D.id,name:D.name,type:D.type}))),i([])}catch(T){e({variant:"destructive",title:"Error fetching data",description:T.message})}finally{c(!1)}},[e]);f.useEffect(()=>{A()},[A]);const P=()=>{u(!1),m(!1),v(null),A()},O=T=>{m(!0),v(T),u(!0)},k=async T=>{if(window.confirm("Are you sure you want to delete this entity? This action cannot be undone.")){c(!0);try{const{error:V}=await M.from("sites").delete().eq("id",T);if(V)throw V;e({title:"Entity deleted successfully"}),A()}catch(V){e({variant:"destructive",title:"Error deleting entity",description:V.message})}finally{c(!1)}}},$=t.filter(T=>g?T.name.toLowerCase().includes(g.toLowerCase())||T.type&&T.type.toLowerCase().includes(g.toLowerCase())||T.client_name&&T.client_name.toLowerCase().includes(g.toLowerCase()):!0);console.log("Sites filtering debug:",{searchTerm:g,totalSites:t.length,filteredSitesCount:$.length,sitesWithNames:t.filter(T=>T.name).length,sitesWithoutNames:t.filter(T=>!T.name).length,sampleSite:t[0]});const N=(T,V)=>{if(b)return t.filter(I=>I.parent_id===b&&I.type===V);const L=t.filter(I=>I.type===T);return!b&&L.length>0?t.filter(I=>I.type===V&&L.some(z=>z.id===I.parent_id)):[]};return l&&!d&&!t.length?r.jsx("div",{className:"text-center py-10 text-white",children:"Loading Hierarchy Builder..."}):r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[!d&&r.jsx(Io,{to:"/",className:`p-2 rounded-full hover:bg-slate-700/50 transition-colors ${Ao}`,children:r.jsx(ap,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Ts,{className:"w-8 h-8 mr-3 text-blue-400"}),"Hierarchy Builder"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage sites, regions, national, and global entities with flexible parent-child relationships."})]})]}),!d&&r.jsxs(F,{onClick:()=>{u(!0),m(!1),v(null)},className:`${Ao} mt-4 sm:mt-0`,children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Add New Entity"]})]}),d?r.jsx(r6,{isEditing:h,currentSite:x,clients:n,allSitesForParent:a,onSuccess:P,onCancel:()=>{u(!1),m(!1),v(null)}}):r.jsxs(Et,{defaultValue:p,onValueChange:y,className:"space-y-6",children:[r.jsxs(gt,{className:`${_6} border-b border-slate-700`,children:[r.jsx(ie,{value:"sites_list",className:`${Sa} ${_a}`,children:"Entities List"}),r.jsx(ie,{value:"hierarchy_view",className:`${Sa} ${_a}`,children:"Hierarchy View"}),r.jsx(ie,{value:"regional_dashboard",className:`${Sa} ${_a}`,children:"Regional View"}),r.jsx(ie,{value:"national_dashboard",className:`${Sa} ${_a}`,children:"National View"}),r.jsx(ie,{value:"global_dashboard",className:`${Sa} ${_a}`,children:"Global View"})]}),r.jsx(oe,{value:"sites_list",children:r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Y,{className:"text-xl text-white",children:"All Entities"}),r.jsx(he,{className:"text-gray-400",children:"View and manage all registered sites, regions, and national/global entities."})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-3 sm:mt-0",children:[r.jsxs(we,{onValueChange:T=>w(T==="all"?"":T),children:[r.jsx(xe,{className:`${Is} w-auto text-xs`,children:r.jsx(be,{placeholder:"Filter by Type..."})}),r.jsxs(ge,{children:[r.jsx(Z,{value:"all",children:"All Types"}),XS.map(T=>r.jsx(Z,{value:T,children:T.charAt(0).toUpperCase()+T.slice(1).replace("_"," ")},T))]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search entities...",value:g,onChange:T=>w(T.target.value),className:"pl-10 w-full sm:w-64 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]})]})}),r.jsx(a6,{sites:$,loading:l&&t.length===0,onEdit:O,onDelete:k})]})}),r.jsx(oe,{value:"hierarchy_view",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[r.jsxs(Y,{className:"text-xl text-white flex items-center mb-2 sm:mb-0",children:[r.jsx(Ts,{className:"w-5 h-5 mr-2 text-blue-400"}),"Flexible Hierarchy View"]}),r.jsxs(we,{onValueChange:T=>j(T==="none"?null:parseInt(T)),value:b||"none",children:[r.jsx(xe,{className:`${Is} w-full sm:w-auto sm:max-w-xs`,children:r.jsx(be,{placeholder:"Select parent entity..."})}),r.jsxs(ge,{children:[r.jsx(Z,{value:"none",children:"Overview (All Entities)"}),t.map(T=>r.jsxs(Z,{value:T.id.toString(),children:[T.name," (",T.type,")"]},T.id))]})]})]}),r.jsx(he,{className:"text-gray-400 mt-2",children:b?`Showing children of ${((C=t.find(T=>T.id===b))==null?void 0:C.name)||"selected entity"}.`:"View all entities and their relationships. Select a parent to see its children."})]}),r.jsx(U,{children:l?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Loading data..."}):t.length===0?r.jsxs("div",{className:"text-center py-12 min-h-[200px] flex flex-col items-center justify-center",children:[r.jsx(Ts,{className:"w-12 h-12 mx-auto text-slate-500 mb-3 opacity-70"}),r.jsx("p",{className:"text-gray-400",children:"No entities found."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(b?t.filter(T=>T.parent_id===b):t).map(T=>r.jsxs(H,{className:"bg-slate-800/50 border-slate-700 hover-lift",children:[r.jsxs(K,{children:[r.jsx(Y,{className:"text-lg text-sky-300",children:T.name}),r.jsx(he,{className:"text-slate-400",children:T.type?T.type.charAt(0).toUpperCase()+T.type.slice(1).replace("_"," "):"N/A"})]}),r.jsxs(U,{children:[r.jsxs("p",{className:"text-xs text-slate-500",children:["Parent: ",T.parent_name||"None"]}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Address: ",T.address?JSON.stringify(T.address):"N/A"]}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Client: ",T.client_name||"N/A"]}),r.jsx(F,{size:"sm",variant:"link",className:"text-blue-400 hover:text-blue-300 p-0 mt-2 text-xs",onClick:()=>{R(T),_(!0)},children:"View Details"})]})]},T.id))})})]})}),r.jsx(oe,{value:"regional_dashboard",children:r.jsx(ch,{title:"Regional Dashboard",parentTypeForSelection:"region",childTypeToDisplay:"site",allSites:t,loading:l,selectedParent:b,setSelectedParent:j,getDashboardData:N})}),r.jsx(oe,{value:"national_dashboard",children:r.jsx(ch,{title:"National Dashboard",parentTypeForSelection:"national",childTypeToDisplay:"region",allSites:t,loading:l,selectedParent:b,setSelectedParent:j,getDashboardData:N})}),r.jsx(oe,{value:"global_dashboard",children:r.jsx(ch,{title:"Global Dashboard",parentTypeForSelection:"global",childTypeToDisplay:"national",allSites:t,loading:l,selectedParent:b,setSelectedParent:j,getDashboardData:N})})]}),r.jsx(JS,{isOpen:E,onClose:()=>{_(!1),R(null)},entity:S})]})},ZS=({employee:e=null,onClose:t,onSuccess:s,staffType:n="security"})=>{var z;const[i,a]=f.useState({name:"",role:"",type:"Standard Officer",site:"",status:"Active",compliance:100,certifications:"",email:"",phone:"",hire_date:new Date().toISOString().split("T")[0],department_id:null,supervisor_id:null,notes:""}),[o,l]=f.useState(!1),[c,d]=f.useState([]),[u,h]=f.useState(!1),[m,x]=f.useState([]),[v,g]=f.useState(!1),[w,p]=f.useState(!1),[y,b]=f.useState(""),[j,S]=f.useState(!1),[R,E]=f.useState([]),[_,A]=f.useState(!1),{toast:P}=ue(),O=!!e,k=f.useCallback(async()=>{h(!0);try{const{data:D,error:J}=await M.from("sites").select(`
          id, 
          name, 
          type, 
          parent_id
        `);if(J)throw J;const ne=[...new Set(D.map(pe=>pe.parent_id).filter(pe=>pe!==null))];let re=[];if(ne.length>0){const{data:pe,error:le}=await M.from("sites").select("id, name").in("id",ne);le||(re=pe||[])}const je=D.map(pe=>{var le;return{...pe,parent_name:pe.parent_id&&((le=re.find(Ne=>Ne.id===pe.parent_id))==null?void 0:le.name)||null}});d(je)}catch(D){P({variant:"destructive",title:"Error fetching sites",description:D.message})}finally{h(!1)}},[P]),$=f.useCallback(async()=>{g(!0);try{const{data:D,error:J}=await GS();if(J)throw J;x(D||[])}catch(D){P({variant:"destructive",title:"Error fetching departments",description:D.message})}finally{g(!1)}},[P]),N=f.useCallback(async()=>{A(!0);try{const{data:D,error:J}=await d6(e==null?void 0:e.id);if(J)throw J;E(D||[])}catch(D){P({variant:"destructive",title:"Error fetching supervisors",description:D.message})}finally{A(!1)}},[P,e==null?void 0:e.id]);f.useEffect(()=>{k(),$(),N()},[k,$,N]),f.useEffect(()=>{e&&a({name:e.name||"",role:e.role||"",type:e.type||"Standard Officer",site:e.site||"",status:e.status||"Active",compliance:e.compliance||100,certifications:Array.isArray(e.certifications)?e.certifications.join(", "):e.certifications||"",email:e.email||"",phone:e.phone||"",hire_date:e.hire_date||new Date().toISOString().split("T")[0],department_id:e.department_id||null,supervisor_id:e.supervisor_id||null,notes:e.notes||""})},[e]),f.useEffect(()=>{const D=J=>{j&&!J.target.closest(".supervisor-dropdown")&&S(!1)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[j]);const C=(D,J)=>{a(ne=>({...ne,[D]:J}))},T=D=>{if(D==="add_new")p(!0),b("");else{p(!1);const J=m.find(ne=>ne.name===D);a(ne=>({...ne,department_id:J?J.id:null}))}},V=async()=>{if(y.trim())try{const{data:D,error:J}=await KS({name:y.trim(),description:`Department for ${y.trim()}`,is_active:!0});if(J)throw J;x(ne=>[...ne,D]),a(ne=>({...ne,department_id:D.id})),p(!1),b(""),P({title:"Department Created",description:`${y.trim()} has been added successfully.`,variant:"default"})}catch(D){console.error("Error creating department:",D),P({title:"Error",description:"Failed to create department. Please try again.",variant:"destructive"})}},L=async D=>{D.preventDefault(),l(!0);try{const J=y6(i);if(!J.isValid)throw new Error(J.errors.join(", "));const ne={...i,certifications:i.certifications.split(",").map(pe=>pe.trim()).filter(pe=>pe.length>0)};let re;if(O?re=n==="entity"?await Yc(e.id,ne):await Qc(e.id,ne):re=n==="entity"?await l6(ne):await YS(ne),re.error)throw re.error;const je=n==="entity"?"Entity Staff":"Security Staff";P({title:O?`${je} Updated`:`${je} Added`,description:`${i.name} has been ${O?"updated":"added"} successfully.`,variant:"default"}),s==null||s(re.data),t()}catch(J){console.error("Error saving employee:",J);const ne=n==="entity"?"Entity Staff":"Security Staff";P({title:"Error",description:J.message||`Failed to save ${ne.toLowerCase()}. Please try again.`,variant:"destructive"})}finally{l(!1)}},I=Object.keys(n==="entity"?WS:i0);return r.jsx(jt,{children:r.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[O?r.jsx(gs,{className:"w-5 h-5 text-blue-400"}):r.jsx(Nj,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:O?`Edit ${n==="entity"?"Entity Staff":"Security Staff"}`:`Add New ${n==="entity"?"Entity Staff":"Security Staff"}`})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Dt,{className:"w-4 h-4"})})]}),r.jsx(U,{children:r.jsxs("form",{onSubmit:L,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"name",className:"text-white",children:"Full Name"}),r.jsx(ee,{id:"name",value:i.name,onChange:D=>C("name",D.target.value),placeholder:"Enter full name",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"role",className:"text-white",children:"Role"}),r.jsx(ee,{id:"role",value:i.role,onChange:D=>C("role",D.target.value),placeholder:"Security Officer",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"department",className:"text-white",children:"Department"}),w?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:y,onChange:D=>b(D.target.value),placeholder:"Enter new department name",className:"bg-slate-700/50 border-slate-600 text-white",onKeyPress:D=>{D.key==="Enter"&&(D.preventDefault(),V())}}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(F,{type:"button",size:"sm",onClick:V,className:"bg-green-600 hover:bg-green-700 text-xs",children:"Add Department"}),r.jsx(F,{type:"button",size:"sm",variant:"outline",onClick:()=>{p(!1),b("")},className:"border-slate-600 text-slate-300 hover:bg-slate-700 text-xs",children:"Cancel"})]})]}):r.jsxs(we,{value:i.department_id&&((z=m.find(D=>D.id===i.department_id))==null?void 0:z.name)||"",onValueChange:T,disabled:v,children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:v?"Loading departments...":"Select department or add new..."})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[m.map(D=>r.jsx(Z,{value:D.name,className:"text-white",children:D.name},D.id)),r.jsx(Z,{value:"add_new",className:"text-blue-400 font-medium",children:"+ Add New Department"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"supervisor",className:"text-white",children:"Supervisor"}),r.jsxs("div",{className:"relative supervisor-dropdown",children:[r.jsxs("div",{onClick:()=>S(!j),className:"flex items-center justify-between w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg cursor-pointer hover:bg-slate-700/70",children:[r.jsx("div",{className:"flex flex-wrap gap-1",children:i.supervisor_id?(()=>{const D=R.find(J=>J.id===i.supervisor_id);return D?r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-600/20 text-green-300 text-xs rounded border border-green-500/30",children:[D.name," (",D.role,")",r.jsx("button",{onClick:J=>{J.stopPropagation(),a(ne=>({...ne,supervisor_id:null}))},className:"ml-1 text-green-400 hover:text-green-300",children:"×"})]}):r.jsx("span",{className:"text-slate-400",children:"Supervisor not found"})})():r.jsx("span",{className:"text-slate-400",children:"Select supervisor..."})}),r.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:R.map(D=>r.jsxs("div",{onClick:()=>{a(J=>({...J,supervisor_id:D.id})),S(!1)},className:`p-3 cursor-pointer hover:bg-slate-700 ${i.supervisor_id===D.id?"bg-green-600/20 text-green-300":"text-white"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{children:[D.name," (",D.role,")"]}),i.supervisor_id===D.id&&r.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:D.type})]},D.id))})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Select the supervisor this person reports to"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(G,{htmlFor:"type",className:"text-white",children:[n==="entity"?"Entity Staff":"Security Staff"," Type"]}),r.jsxs(we,{value:i.type,onValueChange:D=>C("type",D),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:`Select ${n==="entity"?"entity staff":"security staff"} type`})}),r.jsx(ge,{className:"bg-slate-800 border-slate-600",children:I.map(D=>r.jsx(Z,{value:D,className:"text-white",children:D},D))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"site",className:"text-white",children:"Site"}),r.jsxs(we,{value:i.site,onValueChange:D=>C("site",D),disabled:u,children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:u?"Loading sites...":"Select site..."})}),r.jsx(ge,{className:"bg-slate-800 border-slate-600",children:c.map(D=>r.jsx(Z,{value:D.name,className:"text-white",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{children:[D.name," (",D.type,")"]}),D.parent_name&&r.jsxs("span",{className:"text-xs text-slate-400",children:["Parent: ",D.parent_name]})]})},D.id))})]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Select the primary site for this staff member"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"email",className:"text-white",children:"Email"}),r.jsx(ee,{id:"email",type:"email",value:i.email,onChange:D=>C("email",D.target.value),placeholder:"employee@gs3.com",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"phone",className:"text-white",children:"Phone"}),r.jsx(ee,{id:"phone",value:i.phone,onChange:D=>C("phone",D.target.value),placeholder:"+1-555-0123",className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(we,{value:i.status,onValueChange:D=>C("status",D),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"Active",className:"text-white",children:"Active"}),r.jsx(Z,{value:"Inactive",className:"text-white",children:"Inactive"}),r.jsx(Z,{value:"On Leave",className:"text-white",children:"On Leave"}),r.jsx(Z,{value:"Terminated",className:"text-white",children:"Terminated"}),r.jsx(Z,{value:"Archived",className:"text-white",children:"Archived"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"compliance",className:"text-white",children:"Compliance Score (%)"}),r.jsx(ee,{id:"compliance",type:"number",min:"0",max:"100",value:i.compliance,onChange:D=>C("compliance",parseInt(D.target.value)||0),className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"hire_date",className:"text-white",children:"Hire Date"}),r.jsx(ee,{id:"hire_date",type:"date",value:i.hire_date,onChange:D=>C("hire_date",D.target.value),className:"bg-slate-700/50 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"certifications",className:"text-white",children:"Certifications"}),r.jsx(dt,{id:"certifications",value:i.certifications,onChange:D=>C("certifications",D.target.value),placeholder:"Basic Security, First Aid, Firearms (comma-separated)",className:"bg-slate-700/50 border-slate-600 text-white min-h-[80px]"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Enter certifications separated by commas"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"notes",className:"text-white",children:"Notes & Comments"}),r.jsx(dt,{id:"notes",value:i.notes,onChange:D=>C("notes",D.target.value),placeholder:"Add any notes, comments, or observations about this employee...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Optional notes for internal reference"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(F,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"}),r.jsx(F,{type:"submit",disabled:o,className:"bg-blue-600 hover:bg-blue-700",children:o?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ys,{className:"w-4 h-4"}),r.jsxs("span",{children:[O?"Update":"Save"," ",n==="entity"?"Entity Staff":"Security Staff"]})]})})]})]})})]})})})})},e2=({employee:e,onClose:t,onUpdate:s,staffType:n="security"})=>{const[i,a]=f.useState(!1),{toast:o}=ue(),l=async()=>{if(window.confirm(`Are you sure you want to archive ${e.name}? They will be moved to the archive.`))try{const x=n==="entity"?Yc:Qc,{error:v}=await x(e.id,{...e,status:"Archived"});if(v)throw v;o({title:"Employee Archived",description:`${e.name} has been moved to the archive.`,variant:"default"}),s==null||s({...e,status:"Archived"}),t()}catch(x){console.error("Error archiving employee:",x),o({title:"Error",description:"Failed to archive employee.",variant:"destructive"})}},c=async()=>{try{const x=n==="entity"?Yc:Qc,{error:v}=await x(e.id,{...e,status:"Active"});if(v)throw v;o({title:"Employee Restored",description:`${e.name} has been restored to active status.`,variant:"default"}),s==null||s({...e,status:"Active"}),t()}catch(x){console.error("Error restoring employee:",x),o({title:"Error",description:"Failed to restore employee.",variant:"destructive"})}},d=x=>{switch(x){case"Active":return"bg-green-500/20 text-green-400 border-green-500/30";case"Inactive":return"bg-red-500/20 text-red-400 border-red-500/30";case"On Leave":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"Terminated":return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"Archived":return"bg-purple-500/20 text-purple-400 border-purple-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},u=x=>x>=95?"text-green-400":x>=85?"text-yellow-400":"text-red-400",h=x=>x>=95?r.jsx(nt,{className:"w-4 h-4 text-green-400"}):x>=85?r.jsx(Gr,{className:"w-4 h-4 text-yellow-400"}):r.jsx(Gr,{className:"w-4 h-4 text-red-400"}),m=x=>{s==null||s(x),a(!1),o({title:"Employee Updated",description:`${x.name} has been updated successfully.`,variant:"default"})};return i?r.jsx(ZS,{employee:e,onClose:()=>a(!1),onSuccess:m,staffType:n}):r.jsx(jt,{children:r.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:x=>x.stopPropagation(),children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Pn,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Employee Profile"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>a(!0),className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[r.jsx(gs,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Dt,{className:"w-4 h-4"})})]})]}),r.jsxs(U,{className:"space-y-6",children:[r.jsx("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xl font-bold",children:e.name.split(" ").map(x=>x[0]).join("")}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:e.name}),r.jsx("p",{className:"text-gray-400",children:e.role}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[r.jsx(Fe,{className:d(e.status),children:e.status}),r.jsxs("div",{className:"flex items-center space-x-1",children:[h(e.compliance),r.jsxs("span",{className:`text-sm font-medium ${u(e.compliance)}`,children:[e.compliance,"% Compliant"]})]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsx(Y,{className:"text-white text-lg",children:"Contact Information"})}),r.jsxs(U,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Vi,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-gray-300",children:e.email})]}),e.phone&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Dn,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-gray-300",children:e.phone})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(qt,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-gray-300",children:e.entities&&e.entities.length>0?e.entities.map((x,v)=>{var g;return r.jsxs("span",{className:"inline-flex items-center",children:[((g=x.sites)==null?void 0:g.name)||"Unknown Entity",x.is_primary&&r.jsx(Fe,{className:"ml-2 bg-green-500/20 text-green-400 border-green-500/30 text-xs",children:"Primary"}),v<e.entities.length-1&&r.jsx("span",{className:"mx-1",children:", "})]},x.site_id)}):e.site||"No entities assigned"})]}),e.supervisor_name&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Pn,{className:"w-4 h-4 text-purple-400"}),r.jsxs("span",{className:"text-gray-300",children:["Reports to: ",r.jsx("span",{className:"text-purple-300 font-medium",children:e.supervisor_name}),e.supervisor_role&&r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",e.supervisor_role,")"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Rs,{className:"w-4 h-4 text-blue-400"}),r.jsxs("span",{className:"text-gray-300",children:["Hired: ",new Date(e.hire_date).toLocaleDateString()]})]})]})]}),r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsx(Y,{className:"text-white text-lg",children:"Employment Details"})}),r.jsxs(U,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Employee Type:"}),r.jsx(Fe,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:e.type})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Compliance Score:"}),r.jsxs("span",{className:`font-semibold ${u(e.compliance)}`,children:[e.compliance,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Status:"}),r.jsx(Fe,{className:d(e.status),children:e.status})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Certifications:"}),r.jsx("span",{className:"text-white font-medium",children:Array.isArray(e.certifications)?e.certifications.length:0})]})]})]})]}),e.certifications&&e.certifications.length>0&&r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"text-white text-lg flex items-center space-x-2",children:[r.jsx(Rt,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Certifications & Training"})]})}),r.jsx(U,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Array.isArray(e.certifications)?e.certifications.map((x,v)=>r.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg bg-slate-700/50",children:[r.jsx(nt,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-white text-sm",children:x})]},v)):r.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg bg-slate-700/50",children:[r.jsx(nt,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-white text-sm",children:e.certifications})]})})})]}),e.notes&&r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"text-white text-lg flex items-center space-x-2",children:[r.jsx(Pn,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Notes & Comments"})]})}),r.jsx(U,{children:r.jsx("div",{className:"p-4 rounded-lg bg-slate-700/50 border border-slate-600",children:r.jsx("p",{className:"text-white whitespace-pre-wrap",children:e.notes})})})]}),r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsx(Y,{className:"text-white text-lg",children:"Quick Actions"})}),r.jsx(U,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs(F,{variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>o({title:"Feature coming soon",description:"Training management will be available soon."}),children:[r.jsx(mt,{className:"w-4 h-4 mr-2"}),"Manage Training"]}),r.jsxs(F,{variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>o({title:"Feature coming soon",description:"Schedule management will be available soon."}),children:[r.jsx(Bo,{className:"w-4 h-4 mr-2"}),"View Schedule"]}),r.jsxs(F,{variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>o({title:"Feature coming soon",description:"Performance tracking will be available soon."}),children:[r.jsx(_s,{className:"w-4 h-4 mr-2"}),"Performance Review"]}),e.status==="Archived"?r.jsxs(F,{onClick:c,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ii,{className:"w-4 h-4 mr-2"}),"Restore"]}):r.jsxs(F,{variant:"outline",onClick:l,className:"border-purple-600 text-purple-300 hover:bg-purple-700/20",children:[r.jsx(Rc,{className:"w-4 h-4 mr-2"}),"Archive"]})]})})]})]})]})})})})},E6=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[i,a]=f.useState(""),[o,l]=f.useState(!0);f.useState(null);const[c,d]=f.useState(null),[u,h]=f.useState(null),[m,x]=f.useState(!1),[v,g]=f.useState(null),{toast:w}=ue();f.useEffect(()=>{p(),y(),b()},[]),f.useEffect(()=>{if(i.trim()==="")n(e);else{const k=e.filter($=>$.name.toLowerCase().includes(i.toLowerCase())||$.role.toLowerCase().includes(i.toLowerCase())||$.site.toLowerCase().includes(i.toLowerCase()));n(k)}},[i,e]);const p=async()=>{l(!0);try{const{data:k,error:$}=await n0();if($)throw $;if(t(k||[]),!k||k.length===0){const{data:N}=await p6();N&&t(N)}}catch(k){console.error("Error loading entity staff:",k),w({title:"Error",description:"Failed to load entity staff. Please try again.",variant:"destructive"})}finally{l(!1)}},y=async()=>{try{const{data:k,error:$}=await x6();if($)throw $;d(k)}catch(k){console.error("Error loading background stats:",k)}},b=async()=>{try{const{data:k,error:$}=await g6();if($)throw $;h(k)}catch(k){console.error("Error loading onboarding stats:",k)}},j=()=>{x(!0)},S=k=>{g(k)},R=k=>{t($=>$.map(N=>N.id===k.id?k:N)),g(null),y(),b()},E=k=>{t($=>[k,...$]),x(!1),y(),b()},_=Object.entries(WS).map(([k,$])=>{const N=e.filter(C=>C.type===k).length;return{type:k,description:$.description,requirements:$.requirements,count:N,icon:$.icon==="Shield"?Rt:$.icon==="Users"?Ae:$.icon==="Star"?_s:$.icon==="Briefcase"?cr:$.icon==="GraduationCap"?mt:Rt}}),A="bg-transparent p-0 space-x-1",P="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",O="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Ae,{className:"w-8 h-8 mr-3 text-blue-400"}),"Entity Staff Management"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage entity personnel, credentials, and compliance efficiently."})]}),r.jsxs(F,{onClick:j,className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Add Employee"]})]}),r.jsxs(Et,{defaultValue:"employees",className:"space-y-6",children:[r.jsxs(gt,{className:`${A} border-b border-slate-700`,children:[r.jsx(ie,{value:"employees",className:`${P} ${O}`,children:"Entity Staff"}),r.jsx(ie,{value:"types",className:`${P} ${O}`,children:"Employee Types"}),r.jsx(ie,{value:"background",className:`${P} ${O}`,children:"Background Checks"}),r.jsx(ie,{value:"onboarding",className:`${P} ${O}`,children:"Onboarding"})]}),r.jsx(oe,{value:"employees",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ae,{className:"w-5 h-5 text-blue-400"}),r.jsxs("span",{children:["Active Entity Staff (",s.length,")"]})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search entity staff...",value:i,onChange:k=>a(k.target.value),className:"pl-10 w-full sm:w-80 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]})}),r.jsx(U,{children:o?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(ct,{className:"w-8 h-8 animate-spin text-blue-400"}),r.jsx("span",{className:"ml-3 text-gray-400",children:"Loading entity staff..."})]}):s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ae,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400 mb-2",children:i?"No entity staff found matching your search.":"No entity staff found."}),!i&&r.jsxs(F,{onClick:j,className:"mt-4",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Add First Entity Staff"]})]}):r.jsx("div",{className:"space-y-4",children:s.map(k=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer",onClick:()=>S(k),children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold text-lg",children:k.name}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k.type==="Operations Management"?"bg-purple-500/20 text-purple-400":k.type==="Supervisor"?"bg-blue-500/20 text-blue-400":k.type==="Consultant"?"bg-green-500/20 text-green-400":k.type==="Dual-Role Hybrid"?"bg-orange-500/20 text-orange-400":"bg-gray-500/20 text-gray-400"}`,children:k.type}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${k.compliance>=95?"bg-green-500":k.compliance>=85?"bg-yellow-500":"bg-red-500"}`}),r.jsxs("span",{className:"text-xs text-gray-400",children:[k.compliance,"% Compliant"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsx("span",{children:k.role}),r.jsx("span",{children:"•"}),r.jsx("span",{children:k.site}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:[Array.isArray(k.certifications)?k.certifications.length:0," Certs"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:`text-sm font-medium ${k.status==="Active"?"text-green-400":"text-red-400"}`,children:k.status}),r.jsx(F,{variant:"outline",size:"sm",onClick:$=>{$.stopPropagation(),S(k)},className:"ios-button border-slate-600 hover:bg-slate-700",children:"View Profile"})]})]})},k.id))})})]})}),r.jsx(oe,{value:"types",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsx(Y,{className:"text-white",children:"Entity Staff Role Definitions"}),r.jsx(he,{className:"text-gray-400",children:"Overview of different entity staff types and their requirements."})]}),r.jsx(U,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map((k,$)=>r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:$*.05},children:r.jsxs(H,{className:"ios-card h-full hover-lift",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center justify-between text-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(k.icon,{className:"w-6 h-6 text-blue-400"}),r.jsx("span",{className:"text-lg",children:k.type})]}),r.jsx("span",{className:"text-2xl font-bold text-blue-400",children:k.count})]})}),r.jsxs(U,{children:[r.jsx("p",{className:"text-gray-400 text-sm mb-3 h-12 overflow-hidden",children:k.description}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("h4",{className:"text-white font-medium text-xs",children:"Key Requirements:"}),k.requirements.slice(0,2).map((N,C)=>r.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-400",children:[r.jsx(Mn,{className:"w-3 h-3 text-green-400 flex-shrink-0"}),r.jsx("span",{children:N})]},C)),k.requirements.length>2&&r.jsx("p",{className:"text-xs text-slate-500",children:"...and more"})]})]})]})},k.type))})})]})}),r.jsx(oe,{value:"background",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Rt,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Background Check & Credentialing"})]}),r.jsx(he,{className:"text-gray-400",children:"System for managing employee vetting and credentials."})]}),r.jsx(U,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4 p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Background Check Components"}),["Criminal History Verification","Employment History Verification","Education Verification","Reference Checks","Credit History (if applicable)","Drug Screening","Security Clearance"].map((k,$)=>r.jsxs("div",{className:"flex items-center space-x-2 p-2.5 rounded-md bg-slate-700/50",children:[r.jsx(bd,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-white text-sm",children:k})]},$))]}),r.jsxs("div",{className:"space-y-4 p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Credentialing Status"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-green-500/10",children:[r.jsx("span",{className:"text-white",children:"Completed Checks"}),r.jsx("span",{className:"text-green-400 font-semibold",children:c?c.completedChecks:"..."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-yellow-500/10",children:[r.jsx("span",{className:"text-white",children:"In Progress"}),r.jsx("span",{className:"text-yellow-400 font-semibold",children:c?c.inProgress:"..."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-red-500/10",children:[r.jsx("span",{className:"text-white",children:"Pending Review"}),r.jsx("span",{className:"text-red-400 font-semibold",children:c?c.pendingReview:"..."})]})]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Total Entity Staff: ",c?c.totalEmployees:"..."]}),r.jsx(F,{variant:"outline",className:"w-full mt-4 glass-button",onClick:()=>w({title:"🚧 Feature Not Implemented"}),children:"Manage Credentials"})]})]})})]})}),r.jsx(oe,{value:"onboarding",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(mt,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Onboarding & Qualification System"})]}),r.jsx(he,{className:"text-gray-400",children:"Streamlined process for new hires."})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-500/10",children:[r.jsx(_s,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"New Hires"}),r.jsx("p",{className:"text-2xl font-bold text-blue-400",children:u?u.newHires:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"This Month"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-yellow-500/10",children:[r.jsx(ut,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"In Training"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:u?u.inTraining:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Active"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-500/10",children:[r.jsx(Mn,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"Qualified"}),r.jsx("p",{className:"text-2xl font-bold text-green-400",children:u?u.qualified:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Ready for Duty"})]})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold mb-3",children:"Onboarding Process Steps"}),r.jsx("div",{className:"space-y-3",children:["Document Collection & Verification","Background Check Completion","Basic Security Training","Site-Specific Training","Equipment Assignment","Supervisor Introduction","First Week Mentoring"].map((k,$)=>r.jsxs("div",{className:"flex items-center space-x-3 p-2.5 rounded-md bg-slate-700/50",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-semibold flex-shrink-0",children:$+1}),r.jsx("span",{className:"text-white text-sm",children:k})]},$))})]})]})})]})})]}),m&&r.jsx(ZS,{onClose:()=>x(!1),onSuccess:E,staffType:"entity"}),v&&r.jsx(e2,{employee:v,onClose:()=>g(null),onUpdate:R,staffType:"entity"})]})},qy=({securityStaff:e=null,onClose:t,onSuccess:s})=>{const[n,i]=f.useState({name:"",role:"",type:"",entities:[],department:"",status:"Active",compliance:100,certifications:"",email:"",phone:"",hire_date:new Date().toISOString().split("T")[0],notes:"",supervisor_ids:[],security_company_id:null}),[a,o]=f.useState(!1),[l,c]=f.useState([]),[d,u]=f.useState(!1),[h,m]=f.useState([]),[x,v]=f.useState(!1),[g,w]=f.useState(!1),[p,y]=f.useState(""),[b,j]=f.useState(!1),[S,R]=f.useState(!1),[E,_]=f.useState(!1),[A,P]=f.useState([]),[O,k]=f.useState(!1),[$,N]=f.useState([]),[C,T]=f.useState(!1),{toast:V}=ue(),L=!!e,I=()=>{if(!n.security_company_id)return;const B=$.find(X=>X.id===n.security_company_id);return B?`${B.company_name} - ${B.service_specialization}`:void 0},z=f.useCallback(async()=>{u(!0);try{const{data:B,error:X}=await M.from("sites").select(`
          id, 
          name, 
          type, 
          parent_id
        `);if(X)throw X;const ae=[...new Set(B.map(Ee=>Ee.parent_id).filter(Ee=>Ee!==null))];let me=[];if(ae.length>0){const{data:Ee,error:Mt}=await M.from("sites").select("id, name").in("id",ae);Mt||(me=Ee||[])}const Qe=B.map(Ee=>{var Mt;return{...Ee,parent_name:Ee.parent_id&&((Mt=me.find(dn=>dn.id===Ee.parent_id))==null?void 0:Mt.name)||null}});c(Qe)}catch(B){V({variant:"destructive",title:"Error fetching sites",description:B.message})}finally{u(!1)}},[V]),D=f.useCallback(async()=>{v(!0);try{const{data:B,error:X}=await GS();if(X)throw X;m(B||[])}catch(B){V({variant:"destructive",title:"Error fetching departments",description:B.message})}finally{v(!1)}},[V]),J=f.useCallback(async()=>{k(!0);try{const{data:B,error:X}=await N6(e==null?void 0:e.id);if(X)throw X;P(B||[])}catch(B){V({variant:"destructive",title:"Error fetching supervisors",description:B.message})}finally{k(!1)}},[V,e==null?void 0:e.id]),ne=f.useCallback(async()=>{T(!0);try{const{data:B,error:X}=await j6();if(X)throw X;N(B||[])}catch(B){V({variant:"destructive",title:"Error fetching security companies",description:B.message})}finally{T(!1)}},[V]);f.useEffect(()=>{z(),D(),J(),ne()},[z,D,J,ne]),f.useEffect(()=>{var B,X;e&&i({name:e.name||"",role:e.role||"",type:e.type||"",entities:((B=e.entities)==null?void 0:B.map(ae=>ae.site_id))||[],department:((X=e.departments)==null?void 0:X.name)||"",status:e.status||"Active",compliance:e.compliance||100,certifications:Array.isArray(e.certifications)?e.certifications.join(", "):e.certifications||"",email:e.email||"",phone:e.phone||"",hire_date:e.hire_date||new Date().toISOString().split("T")[0],notes:e.notes||"",supervisor_ids:e.supervisor_ids||[e.supervisor_id].filter(Boolean)||[],security_company_id:e.security_company_id||null})},[e]),f.useEffect(()=>{const B=X=>{b&&!X.target.closest(".entity-dropdown")&&j(!1),S&&!X.target.closest(".supervisor-dropdown")&&R(!1),E&&!X.target.closest(".security-company-dropdown")&&_(!1)};return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[b,S,E]);const re=(B,X)=>{i(ae=>({...ae,[B]:X}))},je=B=>{B==="add_new"?(w(!0),y("")):(w(!1),i(X=>({...X,department:B})))},pe=async()=>{if(p.trim())try{const{data:B,error:X}=await KS({name:p.trim(),description:`Department for ${p.trim()}`,is_active:!0});if(X)throw X;m(ae=>[...ae,B]),i(ae=>({...ae,department:B.name})),w(!1),y(""),V({title:"Department Created",description:`${p.trim()} has been added successfully.`,variant:"default"})}catch(B){console.error("Error creating department:",B),V({title:"Error",description:"Failed to create department. Please try again.",variant:"destructive"})}},le=async B=>{B.preventDefault(),o(!0);try{const X=n.name.trim().split(" "),ae=X[0]||"",me=X.slice(1).join(" ")||"",Qe={first_name:ae,last_name:me,employee_id:`SEC${Date.now()}`,position:n.role,status:n.status,hire_date:n.hire_date,email:n.email,phone:n.phone,compliance_score:n.compliance,certifications:n.certifications.split(",").map(Mt=>Mt.trim()).filter(Mt=>Mt.length>0),notes:n.notes,supervisor_ids:n.supervisor_ids,security_company_id:n.security_company_id,entities:n.entities};let Ee;if(L?Ee=await Qc(e.id,Qe):Ee=await YS(Qe),Ee.error)throw Ee.error;V({title:L?"Security Staff Updated":"Security Staff Added",description:`${n.name} has been ${L?"updated":"added"} successfully.`,variant:"default"}),s==null||s(Ee.data),t()}catch(X){console.error("Error saving security staff:",X),V({title:"Error",description:X.message||"Failed to save security staff. Please try again.",variant:"destructive"})}finally{o(!1)}},Ne=Object.keys(i0);return r.jsx(jt,{children:r.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:B=>B.stopPropagation(),children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[L?r.jsx(gs,{className:"w-5 h-5 text-blue-400"}):r.jsx(Nj,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:L?"Edit Security Staff":"Add New Security Staff"})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Dt,{className:"w-4 h-4"})})]}),r.jsx(U,{children:r.jsxs("form",{onSubmit:le,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"name",className:"text-white",children:"Full Name"}),r.jsx(ee,{id:"name",value:n.name,onChange:B=>re("name",B.target.value),placeholder:"Enter full name",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"role",className:"text-white",children:"Role"}),r.jsx(ee,{id:"role",value:n.role,onChange:B=>re("role",B.target.value),placeholder:"Security Officer",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"department",className:"text-white",children:"Department"}),g?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:p,onChange:B=>y(B.target.value),placeholder:"Enter new department name",className:"bg-slate-700/50 border-slate-600 text-white",onKeyPress:B=>{B.key==="Enter"&&(B.preventDefault(),pe())}}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(F,{type:"button",size:"sm",onClick:pe,className:"bg-green-600 hover:bg-green-700 text-xs",children:"Add Department"}),r.jsx(F,{type:"button",size:"sm",variant:"outline",onClick:()=>{w(!1),y("")},className:"border-slate-600 text-slate-300 hover:bg-slate-700 text-xs",children:"Cancel"})]})]}):r.jsxs(we,{value:n.department,onValueChange:je,disabled:x,children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:x?"Loading departments...":"Select department or add new..."})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[h.map(B=>r.jsx(Z,{value:B.name,className:"text-white",children:B.name},B.id)),r.jsx(Z,{value:"add_new",className:"text-blue-400 font-medium",children:"+ Add New Department"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"security_company",className:"text-white",children:"Security Company"}),r.jsxs("div",{className:"relative security-company-dropdown",children:[r.jsxs("div",{onClick:()=>_(!E),className:"flex items-center justify-between w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg cursor-pointer hover:bg-slate-700/70",children:[r.jsx("div",{className:"flex flex-wrap gap-1",children:n.security_company_id?r.jsx("span",{className:"text-white",children:I()}):r.jsx("span",{className:"text-slate-400",children:"Select security company (optional)"})}),r.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),E&&r.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[r.jsx("div",{onClick:()=>{i(B=>({...B,security_company_id:null})),_(!1)},className:"p-3 cursor-pointer hover:bg-slate-700 text-white border-b border-slate-600",children:"No Security Company"}),$.map(B=>r.jsxs("div",{onClick:()=>{i(X=>({...X,security_company_id:B.id})),_(!1)},className:"p-3 cursor-pointer hover:bg-slate-700 text-white border-b border-slate-600 last:border-b-0",children:[r.jsx("div",{className:"text-sm",children:B.company_name}),r.jsx("div",{className:"text-xs text-gray-400",children:B.service_specialization})]},B.id))]})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Select the security company this person works for"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"supervisors",className:"text-white",children:"Supervisors"}),r.jsxs("div",{className:"relative supervisor-dropdown",children:[r.jsxs("div",{onClick:()=>R(!S),className:"flex items-center justify-between w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg cursor-pointer hover:bg-slate-700/70",children:[r.jsx("div",{className:"flex flex-wrap gap-1",children:n.supervisor_ids.length>0?n.supervisor_ids.map(B=>{const X=A.find(ae=>ae.id===B);return X?r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-600/20 text-green-300 text-xs rounded border border-green-500/30",children:[X.name," (",X.role,")",r.jsx("button",{onClick:ae=>{ae.stopPropagation(),i(me=>({...me,supervisor_ids:me.supervisor_ids.filter(Qe=>Qe!==B)}))},className:"ml-1 text-green-400 hover:text-green-300",children:"×"})]},B):null}):r.jsx("span",{className:"text-slate-400",children:"Select supervisors..."})}),r.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),S&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:A.map(B=>r.jsxs("div",{onClick:()=>{n.supervisor_ids.includes(B.id)?i(X=>({...X,supervisor_ids:X.supervisor_ids.filter(ae=>ae!==B.id)})):i(X=>({...X,supervisor_ids:[...X.supervisor_ids,B.id]}))},className:`p-3 cursor-pointer hover:bg-slate-700 ${n.supervisor_ids.includes(B.id)?"bg-green-600/20 text-green-300":"text-white"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{children:[B.name," (",B.role,")"]}),n.supervisor_ids.includes(B.id)&&r.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:B.type})]},B.id))})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Select the supervisors this person reports to"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"type",className:"text-white",children:"Security Staff Type"}),r.jsxs(we,{value:n.type,onValueChange:B=>re("type",B),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:"Select security staff type"})}),r.jsx(ge,{className:"bg-slate-800 border-slate-600",children:Ne.map(B=>r.jsx(Z,{value:B,className:"text-white",children:B},B))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{className:"text-white",children:"Entities"}),r.jsxs("div",{className:"relative entity-dropdown",children:[r.jsxs("div",{onClick:()=>j(!b),className:"flex items-center justify-between w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg cursor-pointer hover:bg-slate-700/70",children:[r.jsx("div",{className:"flex flex-wrap gap-1",children:n.entities.length>0?n.entities.map(B=>{const X=l.find(ae=>ae.id===B);return X?r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-600/20 text-blue-300 text-xs rounded border border-blue-500/30",children:[X.name,r.jsx("button",{onClick:ae=>{ae.stopPropagation(),i(me=>({...me,entities:me.entities.filter(Qe=>Qe!==B)}))},className:"ml-1 text-blue-400 hover:text-blue-300",children:"×"})]},B):null}):r.jsx("span",{className:"text-slate-400",children:"Select entities..."})}),r.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:l.map(B=>r.jsxs("div",{onClick:()=>{n.entities.includes(B.id)?i(X=>({...X,entities:X.entities.filter(ae=>ae!==B.id)})):i(X=>({...X,entities:[...X.entities,B.id]}))},className:`flex items-center justify-between p-3 cursor-pointer hover:bg-slate-700/50 ${n.entities.includes(B.id)?"bg-blue-600/20":""}`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"text-white text-sm",children:[B.name," (",B.type,")"]}),B.parent_name&&r.jsxs("div",{className:"text-slate-400 text-xs",children:["Parent: ",B.parent_name]})]}),n.entities.includes(B.id)&&r.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},B.id))})]}),n.entities.length>0&&r.jsxs("div",{className:"text-xs text-slate-400",children:["Selected: ",n.entities.length," entity",n.entities.length!==1?"s":"",n.entities.length>1&&r.jsx("span",{className:"ml-2 text-blue-400",children:"(First selected will be primary)"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"email",className:"text-white",children:"Email"}),r.jsx(ee,{id:"email",type:"email",value:n.email,onChange:B=>re("email",B.target.value),placeholder:"employee@gs3.com",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"phone",className:"text-white",children:"Phone"}),r.jsx(ee,{id:"phone",value:n.phone,onChange:B=>re("phone",B.target.value),placeholder:"+1-555-0123",className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(we,{value:n.status,onValueChange:B=>re("status",B),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"Active",className:"text-white",children:"Active"}),r.jsx(Z,{value:"Inactive",className:"text-white",children:"Inactive"}),r.jsx(Z,{value:"On Leave",className:"text-white",children:"On Leave"}),r.jsx(Z,{value:"Terminated",className:"text-white",children:"Terminated"}),r.jsx(Z,{value:"Archived",className:"text-white",children:"Archived"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"compliance",className:"text-white",children:"Compliance Score (%)"}),r.jsx(ee,{id:"compliance",type:"number",min:"0",max:"100",value:n.compliance,onChange:B=>re("compliance",parseInt(B.target.value)||0),className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"hire_date",className:"text-white",children:"Hire Date"}),r.jsx(ee,{id:"hire_date",type:"date",value:n.hire_date,onChange:B=>re("hire_date",B.target.value),className:"bg-slate-700/50 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"certifications",className:"text-white",children:"Certifications"}),r.jsx(dt,{id:"certifications",value:n.certifications,onChange:B=>re("certifications",B.target.value),placeholder:"Basic Security, First Aid, Firearms (comma-separated)",className:"bg-slate-700/50 border-slate-600 text-white min-h-[80px]"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Enter certifications separated by commas"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"notes",className:"text-white",children:"Notes & Comments"}),r.jsx(dt,{id:"notes",value:n.notes,onChange:B=>re("notes",B.target.value),placeholder:"Add any notes, comments, or observations about this employee...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Optional notes for internal reference"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(F,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"}),r.jsx(F,{type:"submit",disabled:a,className:"bg-blue-600 hover:bg-blue-700",children:a?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ys,{className:"w-4 h-4"}),r.jsxs("span",{children:[L?"Update":"Save"," Security Staff"]})]})})]})]})})]})})})})},k6=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[i,a]=f.useState(""),[o,l]=f.useState(!0);f.useState(null);const[c,d]=f.useState(null),[u,h]=f.useState(null),[m,x]=f.useState(!1),[v,g]=f.useState(null),{toast:w}=ue();f.useEffect(()=>{p(),y(),b()},[]),f.useEffect(()=>{const k=e.filter($=>$.status!=="Archived");if(i.trim()==="")n(k);else{const $=k.filter(N=>N.name.toLowerCase().includes(i.toLowerCase())||N.role.toLowerCase().includes(i.toLowerCase())||N.site.toLowerCase().includes(i.toLowerCase()));n($)}},[i,e]);const p=async()=>{l(!0);try{const{data:k,error:$}=await QS();if($)throw $;if(t(k||[]),!k||k.length===0){const{data:N}=await v6();N&&t(N)}}catch(k){console.error("Error loading security staff:",k),w({title:"Error",description:"Failed to load security staff. Please try again.",variant:"destructive"})}finally{l(!1)}},y=async()=>{try{const{data:k,error:$}=await w6();if($)throw $;d(k)}catch(k){console.error("Error loading background stats:",k)}},b=async()=>{try{const{data:k,error:$}=await b6();if($)throw $;h(k)}catch(k){console.error("Error loading onboarding stats:",k)}},j=()=>{x(!0)},S=k=>{g(k)},R=k=>{t($=>$.map(N=>N.id===k.id?k:N)),g(null),y(),b()},E=k=>{t($=>[k,...$]),x(!1),y(),b()},_=Object.entries(i0).map(([k,$])=>{const N=e.filter(C=>C.type===k).length;return{type:k,description:$.description,requirements:$.requirements,count:N,icon:$.icon==="Shield"?Rt:$.icon==="Users"?Ae:$.icon==="Star"?_s:$.icon==="Briefcase"?cr:$.icon==="GraduationCap"?mt:Rt}}),A="bg-transparent p-0 space-x-1",P="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",O="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Ae,{className:"w-8 h-8 mr-3 text-blue-400"}),"Security Staff Management"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage security personnel, credentials, and compliance efficiently."})]}),r.jsxs(F,{onClick:j,className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Add Security Staff"]})]}),r.jsxs(Et,{defaultValue:"employees",className:"space-y-6",children:[r.jsxs(gt,{className:`${A} border-b border-slate-700`,children:[r.jsx(ie,{value:"employees",className:`${P} ${O}`,children:"Security Staff"}),r.jsx(ie,{value:"types",className:`${P} ${O}`,children:"Employee Types"}),r.jsx(ie,{value:"background",className:`${P} ${O}`,children:"Background Checks"}),r.jsx(ie,{value:"onboarding",className:`${P} ${O}`,children:"Onboarding"})]}),r.jsx(oe,{value:"employees",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ae,{className:"w-5 h-5 text-blue-400"}),r.jsxs("span",{children:["Active Security Staff (",s.length,")"]})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search security staff...",value:i,onChange:k=>a(k.target.value),className:"pl-10 w-full sm:w-80 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]})}),r.jsx(U,{children:o?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(ct,{className:"w-8 h-8 animate-spin text-blue-400"}),r.jsx("span",{className:"ml-3 text-gray-400",children:"Loading security staff..."})]}):s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ae,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400 mb-2",children:i?"No security staff found matching your search.":"No security staff found."}),!i&&r.jsxs(F,{onClick:j,className:"mt-4",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Add First Security Staff"]})]}):r.jsx("div",{className:"space-y-4",children:s.map(k=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer",onClick:()=>S(k),children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold text-lg",children:k.name}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k.type==="Operations Management"?"bg-purple-500/20 text-purple-400":k.type==="Supervisor"?"bg-blue-500/20 text-blue-400":k.type==="Consultant"?"bg-green-500/20 text-green-400":k.type==="Dual-Role Hybrid"?"bg-orange-500/20 text-orange-400":"bg-gray-500/20 text-gray-400"}`,children:k.type}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${k.compliance>=95?"bg-green-500":k.compliance>=85?"bg-yellow-500":"bg-red-500"}`}),r.jsxs("span",{className:"text-xs text-gray-400",children:[k.compliance,"% Compliant"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsx("span",{children:k.role}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:[k.primaryEntity||k.site||"No entity assigned",k.entities&&k.entities.length>1&&r.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["(+",k.entities.length-1," more)"]})]}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:[Array.isArray(k.certifications)?k.certifications.length:0," Certs"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:`text-sm font-medium ${k.status==="Active"?"text-green-400":"text-red-400"}`,children:k.status}),r.jsx(F,{variant:"outline",size:"sm",onClick:$=>{$.stopPropagation(),S(k)},className:"ios-button border-slate-600 hover:bg-slate-700",children:"View Profile"})]})]})},k.id))})})]})}),r.jsx(oe,{value:"types",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsx(Y,{className:"text-white",children:"Security Staff Role Definitions"}),r.jsx(he,{className:"text-gray-400",children:"Overview of different security staff types and their requirements."})]}),r.jsx(U,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map((k,$)=>r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:$*.05},children:r.jsxs(H,{className:"ios-card h-full hover-lift",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center justify-between text-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(k.icon,{className:"w-6 h-6 text-blue-400"}),r.jsx("span",{className:"text-lg",children:k.type})]}),r.jsx("span",{className:"text-2xl font-bold text-blue-400",children:k.count})]})}),r.jsxs(U,{children:[r.jsx("p",{className:"text-gray-400 text-sm mb-3 h-12 overflow-hidden",children:k.description}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("h4",{className:"text-white font-medium text-xs",children:"Key Requirements:"}),k.requirements.slice(0,2).map((N,C)=>r.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-400",children:[r.jsx(Mn,{className:"w-3 h-3 text-green-400 flex-shrink-0"}),r.jsx("span",{children:N})]},C)),k.requirements.length>2&&r.jsx("p",{className:"text-xs text-slate-500",children:"...and more"})]})]})]})},k.type))})})]})}),r.jsx(oe,{value:"background",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Rt,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Background Check & Credentialing"})]}),r.jsx(he,{className:"text-gray-400",children:"System for managing employee vetting and credentials."})]}),r.jsx(U,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4 p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Background Check Components"}),["Criminal History Verification","Employment History Verification","Education Verification","Reference Checks","Credit History (if applicable)","Drug Screening","Security Clearance"].map((k,$)=>r.jsxs("div",{className:"flex items-center space-x-2 p-2.5 rounded-md bg-slate-700/50",children:[r.jsx(bd,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-white text-sm",children:k})]},$))]}),r.jsxs("div",{className:"space-y-4 p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Credentialing Status"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-green-500/10",children:[r.jsx("span",{className:"text-white",children:"Completed Checks"}),r.jsx("span",{className:"text-green-400 font-semibold",children:c?c.completedChecks:"..."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-yellow-500/10",children:[r.jsx("span",{className:"text-white",children:"In Progress"}),r.jsx("span",{className:"text-yellow-400 font-semibold",children:c?c.inProgress:"..."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-red-500/10",children:[r.jsx("span",{className:"text-white",children:"Pending Review"}),r.jsx("span",{className:"text-red-400 font-semibold",children:c?c.pendingReview:"..."})]})]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Total Security Staff: ",c?c.totalEntityStaff:"..."]}),r.jsx(F,{variant:"outline",className:"w-full mt-4 glass-button",onClick:()=>w({title:"🚧 Feature Not Implemented"}),children:"Manage Credentials"})]})]})})]})}),r.jsx(oe,{value:"onboarding",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(mt,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Onboarding & Qualification System"})]}),r.jsx(he,{className:"text-gray-400",children:"Streamlined process for new hires."})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-500/10",children:[r.jsx(_s,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"New Hires"}),r.jsx("p",{className:"text-2xl font-bold text-blue-400",children:u?u.newHires:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"This Month"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-yellow-500/10",children:[r.jsx(ut,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"In Training"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:u?u.inTraining:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Active"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-500/10",children:[r.jsx(Mn,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"Qualified"}),r.jsx("p",{className:"text-2xl font-bold text-green-400",children:u?u.qualified:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Ready for Duty"})]})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold mb-3",children:"Onboarding Process Steps"}),r.jsx("div",{className:"space-y-3",children:["Document Collection & Verification","Background Check Completion","Basic Security Training","Site-Specific Training","Equipment Assignment","Supervisor Introduction","First Week Mentoring"].map((k,$)=>r.jsxs("div",{className:"flex items-center space-x-3 p-2.5 rounded-md bg-slate-700/50",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-semibold flex-shrink-0",children:$+1}),r.jsx("span",{className:"text-white text-sm",children:k})]},$))})]})]})})]})})]}),m&&r.jsx(qy,{onClose:()=>x(!1),onSuccess:E}),v&&r.jsx(qy,{securityStaff:v,onClose:()=>g(null),onSuccess:R})]})},T6={"General Security":{description:"Basic security services for various environments",requirements:["Security License","Background Check","Basic Training"],icon:"Shield"},"Event Security":{description:"Specialized security for events and gatherings",requirements:["Event Security Certification","Crowd Management Training","Emergency Response"],icon:"Users"},"Corporate Security":{description:"High-level security for corporate environments",requirements:["Corporate Security Certification","Access Control Training","Executive Protection"],icon:"Building"},"Healthcare Security":{description:"Specialized security for healthcare facilities",requirements:["Healthcare Security Certification","HIPAA Training","Medical Emergency Response"],icon:"Heart"},"Retail Security":{description:"Loss prevention and retail security services",requirements:["Retail Security Certification","Loss Prevention Training","Customer Service"],icon:"ShoppingBag"},"Industrial Security":{description:"Security for industrial and manufacturing facilities",requirements:["Industrial Security Certification","Safety Training","Hazmat Awareness"],icon:"Factory"}},rr={1:{name:"Tier 1 - Primary",description:"Premium security companies with highest standards and capabilities",color:"bg-gradient-to-r from-blue-600 to-purple-600",textColor:"text-blue-400",badgeColor:"bg-blue-500/20 text-blue-400",requirements:["Minimum 5 years operational experience","ISO 9001 certification","Comprehensive insurance coverage ($5M+)","Advanced training programs","24/7 support capabilities","Multi-site management experience"],benefits:["Priority assignment to high-value contracts","Exclusive access to premium sites","Reduced vetting requirements","Direct client communication","Performance bonus eligibility"]},2:{name:"Tier 2 - Standard",description:"Established security companies with proven track record",color:"bg-gradient-to-r from-green-600 to-teal-600",textColor:"text-green-400",badgeColor:"bg-green-500/20 text-green-400",requirements:["Minimum 2 years operational experience","State security license","Basic insurance coverage ($1M+)","Standard training programs","Business hours support","Single-site management capability"],benefits:["Standard contract assignments","Regular site access","Standard vetting process","Supervised client communication","Standard performance metrics"]},3:{name:"Tier 3 - Development",description:"New or developing security companies building capabilities",color:"bg-gradient-to-r from-orange-600 to-red-600",textColor:"text-orange-400",badgeColor:"bg-orange-500/20 text-orange-400",requirements:["Valid security license","Basic insurance coverage ($500K+)","Fundamental training programs","Limited support hours","Single-site focus"],benefits:["Limited contract assignments","Restricted site access","Enhanced monitoring","Supervised operations","Development-focused metrics"]}},P6=async e=>{try{const t={...e,client_id:e.client_id||null},{data:s,error:n}=await M.from("subcontractor_profiles").insert([t]).select().single();if(n)throw n;return{data:s,error:null}}catch(t){return console.error("Error creating security company:",t),{data:null,error:t}}},A6=async()=>{try{const{data:e,error:t}=await M.from("subcontractor_profiles").select(`
        *,
        sites_assigned:subcontractor_sites(count)
      `).order("created_at",{ascending:!1});if(t){if(t.code==="42501")return console.error("RLS Policy Error: User not authenticated or missing permissions"),{data:null,error:{message:"Authentication required. Please log in or contact administrator to disable RLS for development."}};throw t}return{data:e,error:null}}catch(e){return console.error("Error fetching security companies:",e),{data:null,error:e}}},R6=async(e,t)=>{try{const s={...t,client_id:t.client_id||null},{data:n,error:i}=await M.from("subcontractor_profiles").update(s).eq("id",e).select().single();if(i)throw i;return{data:n,error:null}}catch(s){return console.error("Error updating security company:",s),{data:null,error:s}}},O6=async()=>{try{const{count:e,error:t}=await M.from("subcontractor_profiles").select("*",{count:"exact",head:!0});if(t)throw t;const{data:s,error:n}=await M.from("subcontractor_profiles").select("status");if(n)throw n;const{data:i,error:a}=await M.from("subcontractor_profiles").select("vetting_status");if(a)throw a;const{data:o,error:l}=await M.from("subcontractor_profiles").select("tier");if(l)throw l;const c=s.reduce((x,v)=>(x[v.status]=(x[v.status]||0)+1,x),{}),d=i.reduce((x,v)=>(x[v.vetting_status]=(x[v.vetting_status]||0)+1,x),{}),u=o.reduce((x,v)=>(x[v.tier]=(x[v.tier]||0)+1,x),{}),{count:h,error:m}=await M.from("subcontractor_profiles").select("*",{count:"exact",head:!0}).gte("performance_rating",4);if(m)throw m;return{data:{total:e,byStatus:c,byVettingStatus:d,byTier:u,topPerformers:h},error:null}}catch(e){return console.error("Error fetching security company stats:",e),{data:null,error:e}}},$6=({securityCompany:e=null,onClose:t,onSuccess:s})=>{var E,_,A,P;const[n,i]=f.useState({company_name:"",contact_person:"",contact_email:"",contact_phone:"",service_specialization:"",status:"Active",vetting_status:"Pending",tier:1,client_id:null,hourly_rate:"",max_workers:"",current_workers:"",performance_rating:"",contract_start_date:new Date().toISOString().split("T")[0],contract_end_date:"",notes:"",address:{street:"",city:"",state:"",zip:""},insurance_coverage:{general_liability:"",workers_comp:"",professional_liability:""},certifications:""}),[a,o]=f.useState(!1),[l,c]=f.useState([]),[d,u]=f.useState(!0),[h,m]=f.useState(!1),[x,v]=f.useState(""),{toast:g}=ue(),w=!!e;f.useEffect(()=>{(async()=>{try{const{data:k,error:$}=await e0();if($)throw $;c(k||[])}catch(k){console.error("Error loading clients:",k),g({title:"Error",description:"Failed to load clients.",variant:"destructive"})}finally{u(!1)}})()},[g]),f.useEffect(()=>{var O,k,$,N;e&&i({company_name:e.company_name||"",contact_person:e.contact_person||"",contact_email:e.contact_email||"",contact_phone:e.contact_phone||"",service_specialization:e.service_specialization||"",status:e.status||"Active",vetting_status:e.vetting_status||"Pending",tier:e.tier||1,client_id:e.client_id||null,hourly_rate:((O=e.hourly_rate)==null?void 0:O.toString())||"",max_workers:((k=e.max_workers)==null?void 0:k.toString())||"",current_workers:(($=e.current_workers)==null?void 0:$.toString())||"",performance_rating:((N=e.performance_rating)==null?void 0:N.toString())||"",contract_start_date:e.contract_start_date||new Date().toISOString().split("T")[0],contract_end_date:e.contract_end_date||"",notes:e.notes||"",address:e.address||{street:"",city:"",state:"",zip:""},insurance_coverage:e.insurance_coverage||{general_liability:"",workers_comp:"",professional_liability:""},certifications:Array.isArray(e.certifications)?e.certifications.join(", "):e.certifications||""})},[e]);const p=(O,k)=>{i($=>({...$,[O]:k}))},y=O=>{O==="add_new"?(m(!0),v("")):(m(!1),i(k=>({...k,client_id:O?parseInt(O):null})))},b=async()=>{if(x.trim())try{const{data:O,error:k}=await qS({name:x.trim(),contact_person:"",email:"",phone:"",industry:"General",status:"Active",address:{street:"",city:"",state:"",zip:""}});if(k)throw k;c($=>[...$,O]),i($=>({...$,client_id:O.id})),m(!1),v(""),g({title:"Client Created",description:`${x.trim()} has been added successfully.`,variant:"default"})}catch(O){console.error("Error creating client:",O),g({title:"Error",description:"Failed to create client. Please try again.",variant:"destructive"})}},j=(O,k)=>{i($=>({...$,address:{...$.address,[O]:k}}))},S=(O,k)=>{i($=>({...$,insurance_coverage:{...$.insurance_coverage,[O]:k}}))},R=async O=>{O.preventDefault(),o(!0);try{const k={...n,certifications:n.certifications.split(",").map(N=>N.trim()).filter(N=>N),hourly_rate:n.hourly_rate?parseFloat(n.hourly_rate):null,max_workers:n.max_workers?parseInt(n.max_workers):null,current_workers:n.current_workers?parseInt(n.current_workers):null,performance_rating:n.performance_rating?parseFloat(n.performance_rating):null,contract_start_date:n.contract_start_date&&n.contract_start_date.trim()!==""?n.contract_start_date:null,contract_end_date:n.contract_end_date&&n.contract_end_date.trim()!==""?n.contract_end_date:null};let $;if(w?$=await R6(e.id,k):$=await P6(k),$.error)throw $.error;g({title:w?"Security Company Updated":"Security Company Created",description:w?"Security company information has been updated successfully.":"New security company has been added successfully.",variant:"default"}),s($.data)}catch(k){console.error("Error saving security company:",k),g({title:"Error",description:k.message||"Failed to save security company. Please try again.",variant:"destructive"})}finally{o(!1)}};return r.jsx(jt,{children:r.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(W.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto bg-slate-900 rounded-lg border border-slate-700",onClick:O=>O.stopPropagation(),children:r.jsxs(H,{className:"border-0 bg-transparent",children:[r.jsx(K,{className:"border-b border-slate-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(dj,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:w?"Edit Security Company":"Add New Security Company"})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Dt,{className:"w-4 h-4"})})]})}),r.jsx(U,{className:"p-6",children:r.jsxs("form",{onSubmit:R,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"company_name",className:"text-white",children:"Company Name *"}),r.jsx(ee,{id:"company_name",value:n.company_name,onChange:O=>p("company_name",O.target.value),className:"bg-slate-800 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"contact_person",className:"text-white",children:"Contact Person"}),r.jsx(ee,{id:"contact_person",value:n.contact_person,onChange:O=>p("contact_person",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"contact_email",className:"text-white",children:"Contact Email"}),r.jsx(ee,{id:"contact_email",type:"email",value:n.contact_email,onChange:O=>p("contact_email",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"contact_phone",className:"text-white",children:"Contact Phone"}),r.jsx(ee,{id:"contact_phone",value:n.contact_phone,onChange:O=>p("contact_phone",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"service_specialization",className:"text-white",children:"Service Specialization"}),r.jsxs(we,{value:n.service_specialization,onValueChange:O=>p("service_specialization",O),children:[r.jsx(xe,{className:"bg-slate-800 border-slate-600 text-white",children:r.jsx(be,{placeholder:"Select specialization"})}),r.jsx(ge,{className:"bg-slate-800 border-slate-600",children:Object.keys(T6).map(O=>r.jsx(Z,{value:O,className:"text-white",children:O},O))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(we,{value:n.status,onValueChange:O=>p("status",O),children:[r.jsx(xe,{className:"bg-slate-800 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"Active",className:"text-white",children:"Active"}),r.jsx(Z,{value:"Inactive",className:"text-white",children:"Inactive"}),r.jsx(Z,{value:"Pending Review",className:"text-white",children:"Pending Review"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"vetting_status",className:"text-white",children:"Vetting Status"}),r.jsxs(we,{value:n.vetting_status,onValueChange:O=>p("vetting_status",O),children:[r.jsx(xe,{className:"bg-slate-800 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"Pending",className:"text-white",children:"Pending"}),r.jsx(Z,{value:"In Progress",className:"text-white",children:"In Progress"}),r.jsx(Z,{value:"Approved",className:"text-white",children:"Approved"}),r.jsx(Z,{value:"Rejected",className:"text-white",children:"Rejected"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"tier",className:"text-white",children:"Tier Classification"}),r.jsxs(we,{value:(E=n.tier)==null?void 0:E.toString(),onValueChange:O=>p("tier",parseInt(O)),children:[r.jsx(xe,{className:"bg-slate-800 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsx(ge,{className:"bg-slate-800 border-slate-600",children:Object.entries(rr).map(([O,k])=>r.jsx(Z,{value:O,className:"text-white",children:k.name},O))})]}),n.tier&&rr[n.tier]&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:rr[n.tier].description})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"client_id",className:"text-white",children:"Assigned Client"}),h?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:x,onChange:O=>v(O.target.value),placeholder:"Enter new client name",className:"bg-slate-700/50 border-slate-600 text-white",onKeyPress:O=>{O.key==="Enter"&&(O.preventDefault(),b())}}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(F,{type:"button",size:"sm",onClick:b,className:"bg-green-600 hover:bg-green-700 text-xs",children:"Add Client"}),r.jsx(F,{type:"button",size:"sm",variant:"outline",onClick:()=>{m(!1),v("")},className:"border-slate-600 text-slate-300 hover:bg-slate-700 text-xs",children:"Cancel"})]})]}):r.jsxs(we,{value:((_=n.client_id)==null?void 0:_.toString())||"",onValueChange:y,disabled:d,children:[r.jsx(xe,{className:"bg-slate-800 border-slate-600 text-white",children:r.jsx(be,{placeholder:d?"Loading clients...":"Select a client or add new..."})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"",className:"text-white",children:"No client assigned"}),d?r.jsx(Z,{value:"",disabled:!0,className:"text-white",children:"Loading clients..."}):r.jsxs(r.Fragment,{children:[l.map(O=>r.jsxs(Z,{value:O.id.toString(),className:"text-white",children:[O.name," - ",O.industry]},O.id)),r.jsx(Z,{value:"add_new",className:"text-blue-400 font-medium",children:"+ Add New Client"})]})]})]}),n.client_id&&!h&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:((A=l.find(O=>O.id===n.client_id))==null?void 0:A.contact_person)&&`Contact: ${(P=l.find(O=>O.id===n.client_id))==null?void 0:P.contact_person}`})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"hourly_rate",className:"text-white",children:"Hourly Rate ($)"}),r.jsx(ee,{id:"hourly_rate",type:"number",step:"0.01",value:n.hourly_rate,onChange:O=>p("hourly_rate",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"max_workers",className:"text-white",children:"Max Workers"}),r.jsx(ee,{id:"max_workers",type:"number",value:n.max_workers,onChange:O=>p("max_workers",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"current_workers",className:"text-white",children:"Current Workers"}),r.jsx(ee,{id:"current_workers",type:"number",value:n.current_workers,onChange:O=>p("current_workers",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"performance_rating",className:"text-white",children:"Performance Rating"}),r.jsx(ee,{id:"performance_rating",type:"number",step:"0.1",min:"0",max:"5",value:n.performance_rating,onChange:O=>p("performance_rating",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"contract_start_date",className:"text-white",children:"Contract Start Date"}),r.jsx(ee,{id:"contract_start_date",type:"date",value:n.contract_start_date,onChange:O=>p("contract_start_date",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"contract_end_date",className:"text-white",children:"Contract End Date"}),r.jsx(ee,{id:"contract_end_date",type:"date",value:n.contract_end_date,onChange:O=>p("contract_end_date",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Address Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"street",className:"text-white",children:"Street Address"}),r.jsx(ee,{id:"street",value:n.address.street,onChange:O=>j("street",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"city",className:"text-white",children:"City"}),r.jsx(ee,{id:"city",value:n.address.city,onChange:O=>j("city",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"state",className:"text-white",children:"State"}),r.jsx(ee,{id:"state",value:n.address.state,onChange:O=>j("state",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"zip",className:"text-white",children:"ZIP Code"}),r.jsx(ee,{id:"zip",value:n.address.zip,onChange:O=>j("zip",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Insurance Coverage"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"general_liability",className:"text-white",children:"General Liability ($)"}),r.jsx(ee,{id:"general_liability",type:"number",value:n.insurance_coverage.general_liability,onChange:O=>S("general_liability",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"workers_comp",className:"text-white",children:"Workers Comp ($)"}),r.jsx(ee,{id:"workers_comp",type:"number",value:n.insurance_coverage.workers_comp,onChange:O=>S("workers_comp",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"professional_liability",className:"text-white",children:"Professional Liability ($)"}),r.jsx(ee,{id:"professional_liability",type:"number",value:n.insurance_coverage.professional_liability,onChange:O=>S("professional_liability",O.target.value),className:"bg-slate-800 border-slate-600 text-white"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"certifications",className:"text-white",children:"Certifications (comma-separated)"}),r.jsx(dt,{id:"certifications",value:n.certifications,onChange:O=>p("certifications",O.target.value),placeholder:"e.g., State Security License, CPR Certification, First Aid Training",className:"bg-slate-800 border-slate-600 text-white",rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"notes",className:"text-white",children:"Notes"}),r.jsx(dt,{id:"notes",value:n.notes,onChange:O=>p("notes",O.target.value),placeholder:"Additional notes about the security company...",className:"bg-slate-800 border-slate-600 text-white",rows:4})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-slate-700",children:[r.jsx(F,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-gray-400 hover:text-white",children:"Cancel"}),r.jsx(F,{type:"submit",disabled:a,className:"bg-blue-600 hover:bg-blue-700",children:a?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[w?r.jsx(gs,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"}),r.jsx("span",{children:w?"Update Security Company":"Create Security Company"})]})})]})]})})]})})})})},L6=()=>{const[e,t]=f.useState(""),[s,n]=f.useState([]),[i,a]=f.useState([]),[o,l]=f.useState(null),[c,d]=f.useState(!0),[u,h]=f.useState(!0),[m,x]=f.useState(!1),[v,g]=f.useState(null),[w,p]=f.useState(1),{toast:y}=ue();f.useEffect(()=>{b(),j(),S()},[]);const b=async()=>{d(!0);const{data:N,error:C}=await A6();if(C)console.error("Error fetching security companies:",C),y({variant:"destructive",title:"Error",description:C.message||"Could not fetch security companies."}),n([]);else{const T=N.map(V=>{var L,I;return{...V,sites_count:((I=(L=V.sites_assigned)==null?void 0:L[0])==null?void 0:I.count)||0}});n(T)}d(!1)},j=async()=>{h(!0);const{data:N,error:C}=await O6();C?console.error("Error fetching stats:",C):l(N),h(!1)},S=async()=>{try{const{data:N,error:C}=await e0();if(C)throw C;a(N||[])}catch(N){console.error("Error fetching clients:",N)}},R=()=>{g(null),x(!0)},E=N=>{g(N),x(!0)},_=s.filter(N=>{const C=N.company_name.toLowerCase().includes(e.toLowerCase())||N.contact_person&&N.contact_person.toLowerCase().includes(e.toLowerCase())||N.service_specialization&&N.service_specialization.toLowerCase().includes(e.toLowerCase()),T=w===0||N.tier===w;return C&&T}),A=N=>{if(!N)return null;const C=i.find(T=>T.id===N);return(C==null?void 0:C.name)||"Unknown Client"},P=N=>{if(!N)return null;const C=i.find(T=>T.id===N);return(C==null?void 0:C.industry)||"Unknown Industry"},O="bg-transparent p-0 space-x-1",k="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",$="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(cr,{className:"w-8 h-8 mr-3 text-blue-400"}),"Security Companies Management"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage security company partnerships, performance, and client assignments."})]}),r.jsxs(F,{onClick:R,className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Add Security Company"]})]}),r.jsxs(Et,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(gt,{className:`${O} border-b border-slate-700`,children:[r.jsx(ie,{value:"overview",className:`${k} ${$}`,children:"Overview"}),r.jsx(ie,{value:"tiers",className:`${k} ${$}`,children:"Tier System"}),r.jsx(ie,{value:"performance",className:`${k} ${$}`,children:"Performance"}),r.jsx(ie,{value:"compliance",className:`${k} ${$}`,children:"Compliance"}),r.jsx(ie,{value:"access",className:`${k} ${$}`,children:"Data Access"})]}),r.jsx(oe,{value:"overview",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(cr,{className:"w-5 h-5 text-blue-400"}),r.jsxs("span",{children:["Active Security Companies (",_.length,")"]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-3 sm:mt-0",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(F,{variant:w===0?"default":"outline",size:"sm",onClick:()=>p(0),className:"text-xs",children:"All Tiers"}),Object.entries(rr).map(([N,C])=>r.jsxs(F,{variant:w===parseInt(N)?"default":"outline",size:"sm",onClick:()=>p(parseInt(N)),className:`text-xs ${w===parseInt(N)?C.badgeColor:""}`,children:["Tier ",N]},N))]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search security companies...",value:e,onChange:N=>t(N.target.value),className:"pl-10 w-full sm:w-64 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]})]})}),r.jsx(U,{children:c?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),r.jsx("span",{className:"ml-3 text-gray-400",children:"Loading security companies..."})]}):_.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(cr,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400 mb-2",children:e?"No security companies found matching your search.":"No security companies found."}),!e&&r.jsxs(F,{onClick:R,className:"mt-4",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Add First Security Company"]})]}):r.jsx("div",{className:"space-y-4",children:_.map(N=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer",onClick:()=>E(N),children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-1.5",children:[r.jsx("h3",{className:"text-white font-semibold text-lg",children:N.company_name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${N.status==="Active"?"bg-green-500/20 text-green-400":N.status==="Pending Review"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:N.status||"N/A"}),N.tier&&rr[N.tier]&&r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${rr[N.tier].badgeColor}`,children:rr[N.tier].name}),N.vetting_status&&r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${N.vetting_status==="Approved"?"bg-blue-500/20 text-blue-400":N.vetting_status==="In Progress"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:N.vetting_status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsx("span",{children:N.service_specialization||"General Security"}),r.jsx("span",{children:"•"}),r.jsx("span",{children:N.contact_person}),N.client_id&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Pn,{className:"w-3 h-3"}),r.jsxs("span",{children:[A(N.client_id)," (",P(N.client_id),")"]})]})]}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:[N.sites_count||0," Sites"]}),N.performance_rating&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(_s,{className:"w-3 h-3 text-yellow-400"}),r.jsxs("span",{children:[N.performance_rating,"/5.0"]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2 text-xs text-gray-500",children:[N.contact_email&&r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Vi,{className:"w-3 h-3"}),r.jsx("span",{children:N.contact_email})]}),N.contact_phone&&r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Dn,{className:"w-3 h-3"}),r.jsx("span",{children:N.contact_phone})]})]})]}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsx(F,{variant:"outline",size:"sm",onClick:C=>{C.stopPropagation(),E(N)},className:"ios-button border-slate-600 hover:bg-slate-700",children:"View Details"})})]})},N.id))})})]})}),r.jsx(oe,{value:"tiers",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(_s,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Security Company Tier System"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Manage and view security companies by their tier classification."})]}),r.jsxs(U,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.entries(rr).map(([N,C])=>{var L;const T=s.filter(I=>I.tier===parseInt(N)),V=((L=o==null?void 0:o.byTier)==null?void 0:L[N])||0;return r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:parseInt(N)*.1},children:r.jsxs(H,{className:`ios-card h-full ${C.color} bg-opacity-10 border-opacity-30`,children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center justify-between text-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_s,{className:`w-6 h-6 ${C.textColor}`}),r.jsx("span",{className:"text-lg",children:C.name})]}),r.jsx("span",{className:"text-2xl font-bold text-white",children:V})]})}),r.jsxs(U,{children:[r.jsx("p",{className:"text-gray-400 text-sm mb-4 h-12 overflow-hidden",children:C.description}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium text-xs mb-2",children:"Requirements:"}),r.jsxs("div",{className:"space-y-1",children:[C.requirements.slice(0,3).map((I,z)=>r.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-400",children:[r.jsx(nt,{className:"w-3 h-3 text-green-400 flex-shrink-0"}),r.jsx("span",{children:I})]},z)),C.requirements.length>3&&r.jsxs("p",{className:"text-xs text-slate-500",children:["...and ",C.requirements.length-3," more"]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium text-xs mb-2",children:"Benefits:"}),r.jsxs("div",{className:"space-y-1",children:[C.benefits.slice(0,2).map((I,z)=>r.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-400",children:[r.jsx(_s,{className:"w-3 h-3 text-yellow-400 flex-shrink-0"}),r.jsx("span",{children:I})]},z)),C.benefits.length>2&&r.jsxs("p",{className:"text-xs text-slate-500",children:["...and ",C.benefits.length-2," more"]})]})]})]}),r.jsxs(F,{variant:"outline",size:"sm",className:"w-full mt-4",onClick:()=>p(parseInt(N)),children:["View Tier ",N," Companies (",T.length,")"]})]})]})},N)})}),u?r.jsxs("div",{className:"flex justify-center items-center h-20 mt-6",children:[r.jsx(_s,{className:"w-6 h-6 text-purple-400 animate-spin"}),r.jsx("p",{className:"ml-2 text-white",children:"Loading tier statistics..."})]}):r.jsxs("div",{className:"mt-6 p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold mb-3",children:"Tier Distribution"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(rr).map(([N,C])=>{var I;const T=((I=o==null?void 0:o.byTier)==null?void 0:I[N])||0,V=(o==null?void 0:o.total)||0,L=V>0?Math.round(T/V*100):0;return r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-16 h-16 rounded-full ${C.color} mx-auto mb-2 flex items-center justify-center`,children:r.jsx("span",{className:"text-white font-bold text-lg",children:T})}),r.jsx("p",{className:"text-white font-medium",children:C.name}),r.jsxs("p",{className:"text-gray-400 text-sm",children:[L,"% of total"]})]},N)})})]})]})]})}),r.jsx(oe,{value:"performance",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Kr,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Performance Metrics"})]}),r.jsx(he,{className:"text-gray-400",children:"Track security company performance and KPIs."})]}),r.jsx(U,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Kr,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Performance metrics dashboard coming soon..."})]})})]})}),r.jsx(oe,{value:"compliance",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(jo,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Compliance & Vetting"})]}),r.jsx(he,{className:"text-gray-400",children:"Monitor compliance status and vetting processes."})]}),r.jsx(U,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(jo,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Compliance dashboard coming soon..."})]})})]})}),r.jsx(oe,{value:"access",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(He,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Data Access Control"})]}),r.jsx(he,{className:"text-gray-400",children:"Configure access permissions and data sharing."})]}),r.jsx(U,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(He,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Access control configuration coming soon..."})]})})]})})]}),m&&r.jsx($6,{securityCompany:v,onClose:()=>x(!1),onSuccess:N=>{n(v?C=>C.map(T=>T.id===N.id?N:T):C=>[N,...C]),x(!1),g(null),j()}})]})},D6=async()=>{try{const{data:e,error:t}=await M.from("training_courses").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}catch(e){throw console.error("Error fetching training courses:",e),e}},M6=async e=>{try{const{data:t,error:s}=await M.from("training_courses").insert([e]).select().single();if(s)throw s;return t}catch(t){throw console.error("Error creating training course:",t),t}},I6=async(e,t)=>{try{const{data:s,error:n}=await M.from("training_courses").update(t).eq("id",e).select().single();if(n)throw n;return s}catch(s){throw console.error("Error updating training course:",s),s}},F6=async e=>{try{const{error:t}=await M.from("training_courses").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){throw console.error("Error deleting training course:",t),t}},V6=async()=>{try{const{data:e,error:t}=await M.from("certificates").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}catch(e){throw console.error("Error fetching certificates:",e),e}},B6=async()=>{try{const{data:e,error:t}=await M.from("training_courses").select("id",{count:"exact"});if(t)throw t;const{data:s,error:n}=await M.from("training_enrollments").select("id",{count:"exact"});if(n)throw n;const{data:i,error:a}=await M.from("training_enrollments").select("id",{count:"exact"}).eq("status","Completed");if(a)throw a;const{data:o,error:l}=await M.from("certificate_issuances").select("id",{count:"exact"});if(l)throw l;return{totalCourses:(e==null?void 0:e.length)||0,totalEnrollments:(s==null?void 0:s.length)||0,completedEnrollments:(i==null?void 0:i.length)||0,totalCertificatesIssued:(o==null?void 0:o.length)||0,completionRate:(s==null?void 0:s.length)>0?((i==null?void 0:i.length)/(s==null?void 0:s.length)*100).toFixed(1):0}}catch(e){throw console.error("Error fetching training stats:",e),e}},z6=async e=>{try{const{data:t,error:s}=await M.from("training_courses").select("*").or(`title.ilike.%${e}%,description.ilike.%${e}%,type.ilike.%${e}%`).order("created_at",{ascending:!1});if(s)throw s;return t}catch(t){throw console.error("Error searching training courses:",t),t}},Wy={"Core Training":"Essential training required for all security personnel",Specialized:"Advanced training for specific roles or skills",Management:"Leadership and management training for supervisors",Compliance:"Training required for regulatory compliance",Elective:"Optional training for professional development"},U6=({course:e=null,onClose:t,onSuccess:s})=>{const[n,i]=f.useState({title:"",description:"",type:"",duration_hours:8,status:"Active",created_by:"System Admin"}),[a,o]=f.useState(!1),{toast:l}=ue(),c=!!e;f.useEffect(()=>{e&&i({title:e.title||"",description:e.description||"",type:e.type||"",duration_hours:e.duration_hours||8,status:e.status||"Active",created_by:e.created_by||"System Admin"})},[e]);const d=(m,x)=>{i(v=>({...v,[m]:x}))},u=async m=>{m.preventDefault(),o(!0);try{let x;if(c?x=await I6(e.id,n):x=await M6(n),x.error)throw x.error;l({title:c?"Course Updated":"Course Created",description:`${n.title} has been ${c?"updated":"created"} successfully.`,variant:"default"}),s==null||s(x),t()}catch(x){console.error("Error saving course:",x),l({title:"Error",description:x.message||"Failed to save course. Please try again.",variant:"destructive"})}finally{o(!1)}},h=Object.keys(Wy);return r.jsx(jt,{children:r.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:m=>m.stopPropagation(),children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[c?r.jsx(gs,{className:"w-5 h-5 text-blue-400"}):r.jsx(mt,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:c?"Edit Course":"Create New Course"})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Dt,{className:"w-4 h-4"})})]}),r.jsx(U,{children:r.jsxs("form",{onSubmit:u,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"title",className:"text-white",children:"Course Title"}),r.jsx(ee,{id:"title",value:n.title,onChange:m=>d("title",m.target.value),placeholder:"Enter course title",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"description",className:"text-white",children:"Description"}),r.jsx(dt,{id:"description",value:n.description,onChange:m=>d("description",m.target.value),placeholder:"Enter detailed course description",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"type",className:"text-white",children:"Course Type"}),r.jsxs(we,{value:n.type,onValueChange:m=>d("type",m),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:"Select course type"})}),r.jsx(ge,{className:"bg-slate-800 border-slate-600",children:h.map(m=>r.jsx(Z,{value:m,className:"text-white",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:m}),r.jsx("span",{className:"text-xs text-gray-400",children:Wy[m]})]})},m))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"duration_hours",className:"text-white",children:"Duration (Hours)"}),r.jsx(ee,{id:"duration_hours",type:"number",min:"1",max:"200",value:n.duration_hours,onChange:m=>d("duration_hours",parseInt(m.target.value)||1),className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(we,{value:n.status,onValueChange:m=>d("status",m),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"Active",className:"text-white",children:"Active"}),r.jsx(Z,{value:"Inactive",className:"text-white",children:"Inactive"}),r.jsx(Z,{value:"Draft",className:"text-white",children:"Draft"}),r.jsx(Z,{value:"Archived",className:"text-white",children:"Archived"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"created_by",className:"text-white",children:"Created By"}),r.jsx(ee,{id:"created_by",value:n.created_by,onChange:m=>d("created_by",m.target.value),placeholder:"System Admin",className:"bg-slate-700/50 border-slate-600 text-white"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(F,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"}),r.jsx(F,{type:"submit",disabled:a,className:"bg-blue-600 hover:bg-blue-700",children:a?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ys,{className:"w-4 h-4"}),r.jsxs("span",{children:[c?"Update":"Create"," Course"]})]})})]})]})})]})})})})},H6=()=>{const[e,t]=f.useState(""),[s,n]=f.useState([]),[i,a]=f.useState([]),[o,l]=f.useState({}),[c,d]=f.useState(!0),[u,h]=f.useState(!1),[m,x]=f.useState(!1),[v,g]=f.useState(null),{toast:w}=ue();f.useEffect(()=>{p()},[]);const p=async()=>{try{d(!0);const[P,O,k]=await Promise.all([D6(),V6(),B6()]);n(P||[]),a(O||[]),l(k||{})}catch(P){console.error("Error loading training data:",P),w({title:"Error loading training data",description:"Please try again later.",variant:"destructive"})}finally{d(!1)}},y=async P=>{if(t(P),P.trim()){h(!0);try{const O=await z6(P);n(O||[])}catch(O){console.error("Error searching courses:",O),w({title:"Error searching courses",description:"Please try again.",variant:"destructive"})}finally{h(!1)}}else p()},b=()=>{g(null),x(!0)},j=P=>{g(P),x(!0)},S=()=>{p()},R=()=>{x(!1),g(null)},E=async P=>{if(confirm(`Are you sure you want to delete "${P.title}"? This action cannot be undone.`))try{await F6(P.id),w({title:"Course Deleted",description:`${P.title} has been deleted successfully.`,variant:"default"}),p()}catch(O){console.error("Error deleting course:",O),w({title:"Error",description:"Failed to delete course. Please try again.",variant:"destructive"})}},_=()=>{w({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},A=()=>{w({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-white",children:"Training & Certification"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Create, manage, and deliver comprehensive training programs"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(F,{onClick:b,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Create Course"]}),r.jsxs(F,{onClick:_,variant:"outline",className:"border-white/20",children:[r.jsx(ku,{className:"w-4 h-4 mr-2"}),"Upload Template"]})]})]}),r.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsx(H,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsx(U,{className:"p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(mt,{className:"w-8 h-8 text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Courses"}),r.jsx("p",{className:"text-white text-2xl font-bold",children:o.totalCourses||0})]})]})})}),r.jsx(H,{className:"bg-green-500/10 border-green-500/20",children:r.jsx(U,{className:"p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ae,{className:"w-8 h-8 text-green-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Enrollments"}),r.jsx("p",{className:"text-white text-2xl font-bold",children:o.totalEnrollments||0})]})]})})}),r.jsx(H,{className:"bg-purple-500/10 border-purple-500/20",children:r.jsx(U,{className:"p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ni,{className:"w-8 h-8 text-purple-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),r.jsx("p",{className:"text-white text-2xl font-bold",children:o.completedEnrollments||0})]})]})})}),r.jsx(H,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsx(U,{className:"p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(He,{className:"w-8 h-8 text-yellow-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Completion Rate"}),r.jsxs("p",{className:"text-white text-2xl font-bold",children:[o.completionRate||0,"%"]})]})]})})})]}),r.jsxs(Et,{defaultValue:"courses",className:"space-y-6",children:[r.jsxs(gt,{className:"bg-white/10 border border-white/20",children:[r.jsx(ie,{value:"courses",children:"Training Courses"}),r.jsx(ie,{value:"certificates",children:"Certificates"}),r.jsx(ie,{value:"content",children:"Content Creator"}),r.jsx(ie,{value:"delivery",children:"Training Delivery"})]}),r.jsx(oe,{value:"courses",className:"space-y-6",children:r.jsxs(H,{children:[r.jsx(K,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Y,{className:"flex items-center space-x-2",children:[r.jsx(mt,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Active Training Programs"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search courses...",value:e,onChange:P=>y(P.target.value),className:"pl-10 w-80 bg-white/5 border-white/10"}),u&&r.jsx(ct,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 animate-spin"})]})]})}),r.jsx(U,{children:c?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ct,{className:"w-6 h-6 text-blue-400 animate-spin mr-2"}),r.jsx("span",{className:"text-gray-400",children:"Loading training courses..."})]}):s.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(mt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-white font-medium mb-2",children:"No courses found"}),r.jsx("p",{className:"text-gray-400 text-sm",children:e?"No courses match your search criteria.":"No training courses available yet."})]}):r.jsx("div",{className:"space-y-4",children:s.map(P=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:P.title}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P.type==="Core Training"?"bg-blue-500/20 text-blue-400":P.type==="Specialized"?"bg-purple-500/20 text-purple-400":"bg-yellow-500/20 text-yellow-400"}`,children:P.type})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[r.jsxs("span",{children:["Duration: ",P.duration_hours," hours"]}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Status: ",P.status]})]}),P.description&&r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:P.description})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:`text-sm ${P.status==="Active"?"text-green-400":"text-gray-400"}`,children:P.status}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(F,{variant:"outline",size:"sm",onClick:()=>j(P),className:"border-white/20 hover:bg-white/10",children:"Edit"}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>E(P),className:"border-red-500/20 text-red-400 hover:bg-red-500/10 hover:text-red-300",children:r.jsx(vn,{className:"w-4 h-4"})})]})]})]})},P.id))})})]})}),r.jsxs(oe,{value:"certificates",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-white",children:"Certificate Management"}),r.jsxs(F,{onClick:A,className:"bg-purple-600 hover:bg-purple-700",children:[r.jsx(gs,{className:"w-4 h-4 mr-2"}),"Certificate Builder"]})]}),c?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ct,{className:"w-6 h-6 text-blue-400 animate-spin mr-2"}),r.jsx("span",{className:"text-gray-400",children:"Loading certificates..."})]}):i.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ni,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-white font-medium mb-2",children:"No certificates found"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"No certificates available yet."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((P,O)=>r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:O*.1},children:r.jsxs(H,{className:"hover:scale-105 transition-transform duration-200",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2",children:[r.jsx(ni,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{className:"text-lg",children:P.name})]})}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Template"}),r.jsx("span",{className:"text-white text-sm",children:P.template_name})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Valid For"}),r.jsxs("span",{className:"text-white text-sm",children:[P.validity_months," months"]})]}),P.description&&r.jsx("div",{className:"text-gray-400 text-sm mt-2",children:P.description}),r.jsx(F,{className:"w-full mt-4",variant:"outline",onClick:()=>w({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),children:"Customize Template"})]})})]})},P.id))}),r.jsxs(H,{children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2",children:[r.jsx(ku,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Drag & Drop Certificate Builder"})]})}),r.jsx(U,{children:r.jsxs("div",{className:"border-2 border-dashed border-white/20 rounded-lg p-8 text-center",children:[r.jsx(ku,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-white font-medium mb-2",children:"Upload PDF Background"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Upload a PDF template and use our drag-and-drop editor to create custom certificates"}),r.jsx(F,{onClick:_,className:"bg-green-600 hover:bg-green-700",children:"Choose PDF File"})]})})]})]}),r.jsx(oe,{value:"content",className:"space-y-6",children:r.jsxs(H,{children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2",children:[r.jsx(He,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Dynamic Content Creator & Manager"})]})}),r.jsx(U,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{title:"Create Course",icon:mt,color:"blue"},{title:"Build Lesson",icon:He,color:"green"},{title:"Design Program",icon:ni,color:"purple"},{title:"Manage Content",icon:gs,color:"yellow"}].map((P,O)=>r.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:O*.1},className:`p-6 rounded-lg bg-${P.color}-500/10 border border-${P.color}-500/20 hover:bg-${P.color}-500/20 transition-colors cursor-pointer`,onClick:()=>w({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),children:[r.jsx(P.icon,{className:`w-8 h-8 text-${P.color}-400 mb-3`}),r.jsx("h3",{className:"text-white font-medium",children:P.title}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Create and manage training content"})]},P.title))})})]})}),r.jsx(oe,{value:"delivery",className:"space-y-6",children:r.jsxs(H,{children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2",children:[r.jsx(wj,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Training Delivery Options"})]})}),r.jsx(U,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Internal Training"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ae,{className:"w-5 h-5 text-blue-400"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium",children:"Employee Training"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Internal staff and security personnel"})]})]})}),r.jsx("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(mt,{className:"w-5 h-5 text-green-400"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium",children:"Certification Programs"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Professional development and compliance"})]})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"External Training"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ni,{className:"w-5 h-5 text-purple-400"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium",children:"Client Training"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Training services for client organizations"})]})]})}),r.jsx("div",{className:"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(He,{className:"w-5 h-5 text-yellow-400"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium",children:"Commercial Courses"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Sellable training programs and content"})]})]})})]})]})]})})]})})]}),m&&r.jsx(U6,{course:v,onClose:R,onSuccess:S})]})},q6=()=>{const[e,t]=f.useState(!1),[s,n]=f.useState(0),{toast:i}=ue(),a=[{id:1,title:"Advanced Threat Assessment Techniques",instructor:"Sarah Johnson",participants:23,status:"Live",startTime:"2:00 PM",duration:"2 hours"},{id:2,title:"Emergency Response Protocols Update",instructor:"Mike Rodriguez",participants:0,status:"Scheduled",startTime:"4:00 PM",duration:"1.5 hours"},{id:3,title:"Latest Security Technology Briefing",instructor:"Lisa Chen",participants:0,status:"Scheduled",startTime:"Tomorrow 10:00 AM",duration:"1 hour"}],o=()=>{t(!0),n(Math.floor(Math.random()*30)+5),i({title:"Live Class Started!",description:"Students can now join using the QR code or link."})},l=()=>{t(!1),n(0),i({title:"Class Ended",description:"Recording saved to class library. Attendance logged."})},c=()=>{i({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},d=()=>{i({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})};return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(op,{className:"w-8 h-8 mr-3 text-blue-400"}),"Live Training Classes"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Conduct real-time training sessions with interactive features."})]}),r.jsxs(F,{onClick:e?l:o,className:`ios-button mt-4 sm:mt-0 ${e?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:[e?r.jsx(BT,{className:"w-4 h-4 mr-2"}):r.jsx(wj,{className:"w-4 h-4 mr-2"}),e?"End Current Class":"Start New Class"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(W.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:r.jsxs(H,{className:"ios-card h-full",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center justify-between text-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Tu,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Live Stream Control Panel"})]}),e&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-red-400 text-sm font-medium",children:"LIVE"})]})]}),r.jsx(he,{className:"text-gray-400",children:"Manage your ongoing or upcoming live session."})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"aspect-video bg-slate-900 rounded-lg border-2 border-slate-700 flex items-center justify-center",children:e?r.jsxs("div",{className:"text-center p-4",children:[r.jsx(Tu,{className:"w-16 h-16 text-red-400 mx-auto mb-3"}),r.jsx("p",{className:"text-white font-medium text-lg",children:"Live Stream Active"}),r.jsxs("p",{className:"text-gray-400 text-sm",children:[s," participants connected"]})]}):r.jsxs("div",{className:"text-center p-4",children:[r.jsx(Ba,{className:"w-16 h-16 text-gray-500 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-400",children:"Camera Preview / Waiting Room"}),r.jsx("p",{className:"text-gray-500 text-sm",children:'Click "Start New Class" to begin broadcasting.'})]})}),r.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[r.jsx(F,{variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",children:r.jsx(lp,{className:"w-4 h-4"})}),r.jsx(F,{variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",children:r.jsx(Ba,{className:"w-4 h-4"})}),r.jsx(F,{variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",onClick:c,children:r.jsx(IT,{className:"w-4 h-4"})}),r.jsx(F,{variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",onClick:()=>i({title:"🚧 Feature Not Implemented"}),children:r.jsx(Ae,{className:"w-4 h-4"})})]})]})})]})}),r.jsxs(W.div,{className:"space-y-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:[r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx($T,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Student Access"})]})}),r.jsx(U,{children:r.jsxs("div",{className:"text-center space-y-3",children:[r.jsx("div",{className:"w-36 h-36 bg-white p-2 rounded-lg mx-auto flex items-center justify-center",children:r.jsx("img",{alt:"QR Code for Live Class",className:"w-full h-full",src:"https://images.unsplash.com/photo-1626682561113-d1db402cc866"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Scan to Join Live Class"}),r.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Or share direct link: secureops.pro/live/classXYZ"})]}),r.jsx(F,{onClick:c,className:"w-full ios-button bg-purple-600 hover:bg-purple-700",children:"Generate New Access Link"})]})})]}),r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Bx,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Interactive Tools"})]})}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-2.5",children:[r.jsxs(F,{onClick:d,className:"w-full ios-button bg-yellow-600 hover:bg-yellow-700 justify-start",children:[r.jsx(Bx,{className:"w-4 h-4 mr-2"}),"Send Pop Quiz"]}),r.jsxs(F,{onClick:()=>i({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),className:"w-full ios-button bg-blue-600 hover:bg-blue-700 justify-start",children:[r.jsx(yj,{className:"w-4 h-4 mr-2"}),"Open Q&A Session"]})]})})]})]})]}),r.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Tu,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Scheduled & Upcoming Classes"})]}),r.jsx(he,{className:"text-gray-400",children:"Manage your planned live training sessions."})]}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:a.map(u=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-1.5",children:[r.jsx("h3",{className:"text-white font-semibold",children:u.title}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${u.status==="Live"?"bg-red-500/20 text-red-400 animate-pulse":"bg-blue-500/20 text-blue-400"}`,children:u.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsxs("span",{children:["Instructor: ",u.instructor]}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Start: ",u.startTime]}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Duration: ",u.duration]}),u.status==="Live"&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsxs("span",{children:[u.participants," participants"]})]})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx(F,{variant:"outline",size:"sm",onClick:()=>i({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),className:"ios-button border-slate-600 hover:bg-slate-700",children:u.status==="Live"?"Join Session":"Manage Class"})})]})},u.id))})})]})})]})},W6=()=>{const[e,t]=f.useState(""),{toast:s}=ue(),n=[{id:1,tagId:"NFC-001-ALPHA",location:"Main Entrance - Building A",site:"Corporate HQ Alpha",status:"Active",lastScan:"2 hours ago",coordinates:{lat:40.7128,lng:-74.006}},{id:2,tagId:"NFC-002-BETA",location:"Emergency Exit - East Wing",site:"Metro Hospital East",status:"Active",lastScan:"45 minutes ago",coordinates:{lat:40.7589,lng:-73.9851}},{id:3,tagId:"NFC-003-GAMMA",location:"Security Checkpoint C",site:"Retail Plaza Central",status:"Inactive",lastScan:"3 days ago",coordinates:{lat:40.7505,lng:-73.9934}}],i=[{id:1,name:"Perimeter Point Alpha (North Gate)",site:"Corporate HQ Alpha",coordinates:{lat:40.7128,lng:-74.006},radius:50,status:"Active",lastCheck:"1 hour ago"},{id:2,name:"Parking Lot Patrol Zone 3",site:"Metro Hospital East",coordinates:{lat:40.7589,lng:-73.9851},radius:100,status:"Active",lastCheck:"30 minutes ago"}],a=()=>{s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},o=m=>{s({title:"NFC Tag Scanned",description:`Tag ${m} scanned successfully. Location and time logged.`})},l=()=>{s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},c=()=>{s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},d="bg-transparent p-0 space-x-1",u="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",h="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Ql,{className:"w-8 h-8 mr-3 text-blue-400"}),"NFC & GPS Management"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage NFC tags and GPS locations for automated check-ins and patrols."})]}),r.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[r.jsxs(F,{onClick:a,className:"ios-button bg-blue-600 hover:bg-blue-700",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Add NFC Tag"]}),r.jsxs(F,{onClick:l,variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(qt,{className:"w-4 h-4 mr-2"}),"Add GPS Location"]})]})]}),r.jsxs(Et,{defaultValue:"nfc_tags",className:"space-y-6",children:[r.jsxs(gt,{className:`${d} border-b border-slate-700`,children:[r.jsx(ie,{value:"nfc_tags",className:`${u} ${h}`,children:"NFC Tags"}),r.jsx(ie,{value:"gps_locations",className:`${u} ${h}`,children:"GPS Locations"}),r.jsx(ie,{value:"mobile_scanner",className:`${u} ${h}`,children:"Mobile Scanner"}),r.jsx(ie,{value:"media_attachments",className:`${u} ${h}`,children:"Media Attachments"})]}),r.jsx(oe,{value:"nfc_tags",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(bf,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"NFC Tag Registry"})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-3 sm:mt-0",children:[r.jsxs(F,{variant:"outline",size:"sm",className:"glass-button text-xs",children:[r.jsx(ST,{className:"w-3.5 h-3.5 mr-1.5"})," Filter by Site"]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search NFC tags...",value:e,onChange:m=>t(m.target.value),className:"pl-10 w-full sm:w-64 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Manage all deployed NFC tags for patrol verification."})]}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:n.filter(m=>m.tagId.toLowerCase().includes(e.toLowerCase())||m.location.toLowerCase().includes(e.toLowerCase())).map(m=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-1.5",children:[r.jsx("h3",{className:"text-white font-semibold",children:m.tagId}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${m.status==="Active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:m.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(qt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:m.location})]}),r.jsx("span",{children:"•"}),r.jsx("span",{children:m.site}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Last scan: ",m.lastScan]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>o(m.tagId),className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(Ql,{className:"w-4 h-4 mr-1"}),"Log Scan"]}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),className:"ios-button border-slate-600 hover:bg-slate-700",children:"Edit"})]})]})},m.id))})})]})}),r.jsx(oe,{value:"gps_locations",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(wf,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:'GPS "Air Tag" Locations'})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Manage geofenced GPS locations for automated check-ins."})]}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:i.map(m=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-1.5",children:[r.jsx("h3",{className:"text-white font-semibold",children:m.name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${m.status==="Active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:m.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsx("span",{children:m.site}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Radius: ",m.radius,"m"]}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Last check: ",m.lastCheck]})]}),r.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Coords: ",m.coordinates.lat.toFixed(4),", ",m.coordinates.lng.toFixed(4)]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>s({title:"GPS location marked as visited",description:"Automatic check-in logged for officer."}),className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(nt,{className:"w-4 h-4 mr-1"}),"Manual Check-In"]})})]})},m.id))})})]})}),r.jsx(oe,{value:"mobile_scanner",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(jj,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Mobile NFC Scanner Interface"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Simulated mobile scanner for NFC tag interactions."})]}),r.jsx(U,{children:r.jsxs("div",{className:"text-center space-y-6 p-6 rounded-lg bg-slate-800/40 border border-slate-700",children:[r.jsx("div",{className:"w-48 h-48 mx-auto bg-gradient-to-br from-blue-600/20 to-purple-700/30 rounded-full flex items-center justify-center border-4 border-blue-500/40 shadow-xl",children:r.jsx(Ql,{className:"w-24 h-24 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold text-lg mb-1",children:"Ready to Scan"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Hold your device near an NFC tag to automatically log location and time."})]}),r.jsx(F,{className:"ios-button bg-purple-600 hover:bg-purple-700 px-8 py-3 text-base",onClick:()=>o("DEMO-TAG-001"),children:"Simulate Scan"})]})})]})}),r.jsx(oe,{value:"media_attachments",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ba,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Media Attachments to Scans"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Attach photos, audio, or notes to NFC/GPS check-ins."})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[{icon:Ba,label:"Take Photo",color:"blue"},{icon:He,label:"Add Note",color:"green"},{icon:lp,label:"Record Audio",color:"purple"},{icon:qt,label:"Confirm GPS",color:"yellow"}].map((m,x)=>r.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:x*.05},className:`p-6 rounded-lg bg-${m.color}-500/10 border border-${m.color}-500/30 hover:bg-${m.color}-500/20 transition-colors cursor-pointer text-center flex flex-col items-center justify-center h-36`,onClick:c,children:[r.jsx(m.icon,{className:`w-8 h-8 text-${m.color}-400 mb-2`}),r.jsx("h3",{className:"text-white font-medium text-sm",children:m.label})]},m.label))}),r.jsx("div",{className:"border-2 border-dashed border-slate-700 rounded-lg p-8 bg-slate-800/30",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ba,{className:"w-12 h-12 text-gray-500 mx-auto mb-3"}),r.jsx("h3",{className:"text-white font-medium mb-1",children:"Attach Media to Location Scan"}),r.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Enhance patrol reports with visual or audio context."}),r.jsxs(F,{onClick:c,className:"ios-button bg-yellow-600 hover:bg-yellow-700",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Add Media to Last Scan"]})]})})]})})]})})]})]})},sm={async checkNewColumnsExist(){try{const{data:e,error:t}=await M.from("reports").select("site_id, entity_officer_id, security_officer_id").limit(1);return!t}catch{return!1}},async getReports(e={}){try{const t=await this.checkNewColumnsExist(),[s,n,i]=await Promise.all([(async()=>{try{let o=M.from("reports").select(t?`
                *,
                site:site_id(id, name, type),
                entity_officer:entity_officer_id(id, name, role),
                security_officer:security_officer_id(id, first_name, last_name, position)
              `:"*").order("created_at",{ascending:!1});e.status&&(o=o.eq("status",e.status)),e.type&&e.type!=="Violation"&&e.type!=="Observation"&&(o=o.eq("report_type",e.type)),e.site&&t&&(o=o.eq("site_id",e.site)),e.entityOfficer&&t&&(o=o.eq("entity_officer_id",e.entityOfficer)),e.securityOfficer&&t&&(o=o.eq("security_officer_id",e.securityOfficer)),e.dateFrom&&(o=o.gte("report_date",e.dateFrom)),e.dateTo&&(o=o.lte("report_date",e.dateTo));const{data:l,error:c}=await o;if(c)throw c;return l.map(u=>{var h,m,x;return{...u,site_name:t?((h=u.site)==null?void 0:h.name)||"Not assigned":u.site_name||"Not assigned",site_type:t&&((m=u.site)==null?void 0:m.type)||null,entity_officer_name:t?((x=u.entity_officer)==null?void 0:x.name)||"Not assigned":u.officer_name||"Not assigned",security_officer_name:t&&u.security_officer?`${u.security_officer.first_name} ${u.security_officer.last_name}`:"Not assigned",original_table:"reports"}})}catch(o){return console.error("Error fetching reports:",o),[]}})(),(async()=>{try{let o=M.from("violations").select(t?`
                *,
                site:site_id(id, name, type),
                entity_officer:entity_officer_id(id, name, role),
                security_officer:security_officer_id(id, first_name, last_name, position)
              `:"*").order("created_at",{ascending:!1});if(e.status&&(o=o.eq("status",e.status)),e.type!=="Violation"){if(e.type&&e.type!=="Violation")return[]}e.site&&t&&(o=o.eq("site_id",e.site)),e.entityOfficer&&t&&(o=o.eq("entity_officer_id",e.entityOfficer)),e.securityOfficer&&t&&(o=o.eq("security_officer_id",e.securityOfficer)),e.dateFrom&&(o=o.gte("violation_date",e.dateFrom)),e.dateTo&&(o=o.lte("violation_date",e.dateTo));const{data:l,error:c}=await o;if(c)throw c;return l.map(u=>{var h,m,x;return{id:u.id,title:u.type,report_type:"Violation",doc_number:`VR-${u.id}`,site_id:u.site_id,site_name:t?((h=u.site)==null?void 0:h.name)||"Not assigned":u.site_name||"Not assigned",site_type:t&&((m=u.site)==null?void 0:m.type)||null,entity_officer_id:u.entity_officer_id,entity_officer_name:t?((x=u.entity_officer)==null?void 0:x.name)||"Not assigned":u.reported_by_name||"Not assigned",security_officer_id:u.security_officer_id,security_officer_name:t&&u.security_officer?`${u.security_officer.first_name} ${u.security_officer.last_name}`:"Not assigned",report_date:u.violation_date,status:u.status,priority:u.severity,description:u.description,findings:u.resolution_notes,recommendations:u.corrective_actions,attachments:u.attachments,created_at:u.created_at,updated_at:u.updated_at,original_table:"violations"}})}catch(o){return console.error("Error fetching violations:",o),[]}})(),(async()=>{try{let o=M.from("observations").select(t?`
                *,
                site:site_id(id, name, type),
                entity_officer:entity_officer_id(id, name, role),
                security_officer:security_officer_id(id, first_name, last_name, position)
              `:"*").order("created_at",{ascending:!1});if(e.status&&(o=o.eq("status",e.status)),e.type!=="Observation"){if(e.type&&e.type!=="Observation")return[]}e.site&&t&&(o=o.eq("site_id",e.site)),e.entityOfficer&&t&&(o=o.eq("entity_officer_id",e.entityOfficer)),e.securityOfficer&&t&&(o=o.eq("security_officer_id",e.securityOfficer)),e.dateFrom&&(o=o.gte("observation_date",e.dateFrom)),e.dateTo&&(o=o.lte("observation_date",e.dateTo));const{data:l,error:c}=await o;if(c)throw c;return l.map(u=>{var h,m,x;return{id:u.id,title:u.type,report_type:"Observation",doc_number:`OL-${u.id}`,site_id:u.site_id,site_name:t?((h=u.site)==null?void 0:h.name)||"Not assigned":u.site_name||"Not assigned",site_type:t&&((m=u.site)==null?void 0:m.type)||null,entity_officer_id:u.entity_officer_id,entity_officer_name:t?((x=u.entity_officer)==null?void 0:x.name)||"Not assigned":u.observer_name||"Not assigned",security_officer_id:u.security_officer_id,security_officer_name:t&&u.security_officer?`${u.security_officer.first_name} ${u.security_officer.last_name}`:"Not assigned",report_date:u.observation_date,status:u.status,priority:u.priority,description:u.description,findings:u.follow_up_notes,recommendations:u.follow_up_notes,attachments:u.attachments,created_at:u.created_at,updated_at:u.updated_at,original_table:"observations"}})}catch(o){return console.error("Error fetching observations:",o),[]}})()]),a=[...s,...n,...i];return a.sort((o,l)=>new Date(l.created_at)-new Date(o.created_at)),a}catch(t){throw console.error("Error fetching reports:",t),t}},async getReport(e){var t,s,n;try{if(await this.checkNewColumnsExist()){const{data:a,error:o}=await M.from("reports").select(`
            *,
            site:site_id(id, name, type),
            entity_officer:entity_officer_id(id, name, role),
            security_officer:security_officer_id(id, first_name, last_name, position)
          `).eq("id",e).single();if(o)throw o;return{...a,site_name:((t=a.site)==null?void 0:t.name)||"Not assigned",site_type:((s=a.site)==null?void 0:s.type)||null,entity_officer_name:((n=a.entity_officer)==null?void 0:n.name)||"Not assigned",security_officer_name:a.security_officer?`${a.security_officer.first_name} ${a.security_officer.last_name}`:"Not assigned"}}else{const{data:a,error:o}=await M.from("reports").select("*").eq("id",e).single();if(o)throw o;return{...a,site_name:a.site_name||"Not assigned",site_type:null,entity_officer_name:a.officer_name||"Not assigned",security_officer_name:"Not assigned",entity_officer_id:null,security_officer_id:null,site_id:null}}}catch(i){throw console.error("Error fetching report:",i),i}},async createReport(e){try{const t=await this.checkNewColumnsExist(),s=e.report_type;let n="reports",i=e;if(s==="Violation"?(n="violations",i={type:e.title,description:e.description,severity:e.priority==="Critical"?"High":e.priority,location:e.site_name||"Not specified",site_id:e.site_id,site_name:e.site_name,reported_by_id:e.entity_officer_id||e.security_officer_id,reported_by_name:e.entity_officer_name||e.security_officer_name,violation_date:e.report_date,status:e.status,resolution_notes:e.findings,corrective_actions:e.recommendations,attachments:e.attachments,entity_officer_id:e.entity_officer_id,security_officer_id:e.security_officer_id}):s==="Observation"&&(n="observations",i={type:e.title,description:e.description,priority:e.priority,location:e.site_name||"Not specified",site_id:e.site_id,site_name:e.site_name,observer_id:e.entity_officer_id||e.security_officer_id,observer_name:e.entity_officer_name||e.security_officer_name,observation_date:e.report_date,status:e.status,follow_up_required:e.priority==="High"||e.priority==="Critical",follow_up_notes:e.recommendations,attachments:e.attachments,entity_officer_id:e.entity_officer_id,security_officer_id:e.security_officer_id}),console.log(`📋 Creating ${s} in ${n} table`),n==="reports")if(t){const{data:a,error:o}=await M.from("reports").insert([i]).select().single();if(o)throw o;return a}else{const{site_id:a,entity_officer_id:o,security_officer_id:l,...c}=i,{data:d,error:u}=await M.from("reports").insert([c]).select().single();if(u)throw u;return d}else if(n==="violations"){const{data:a,error:o}=await M.from("violations").insert([i]).select().single();if(o)throw o;return{...a,report_type:"Violation",original_table:"violations"}}else if(n==="observations"){const{data:a,error:o}=await M.from("observations").insert([i]).select().single();if(o)throw o;return{...a,report_type:"Observation",original_table:"observations"}}}catch(t){throw console.error("Error creating report:",t),t}},async updateReport(e,t){try{if(await this.checkNewColumnsExist()){const{data:n,error:i}=await M.from("reports").update(t).eq("id",e).select().single();if(i)throw i;return n}else{const{site_id:n,entity_officer_id:i,security_officer_id:a,...o}=t,{data:l,error:c}=await M.from("reports").update(o).eq("id",e).select().single();if(c)throw c;return l}}catch(s){throw console.error("Error updating report:",s),s}},async deleteReport(e){try{const{error:t}=await M.from("reports").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting report:",t),t}}},G6={async getViolations(e={}){try{let t=M.from("violations").select("*").order("created_at",{ascending:!1});e.status&&(t=t.eq("status",e.status)),e.severity&&(t=t.eq("severity",e.severity)),e.type&&(t=t.eq("type",e.type)),e.site&&(t=t.ilike("site_name",`%${e.site}%`)),e.dateFrom&&(t=t.gte("violation_date",e.dateFrom)),e.dateTo&&(t=t.lte("violation_date",e.dateTo));const{data:s,error:n}=await t;if(n)throw n;return s}catch(t){throw console.error("Error fetching violations:",t),t}},async getViolation(e){try{const{data:t,error:s}=await M.from("violations").select("*").eq("id",e).single();if(s)throw s;return t}catch(t){throw console.error("Error fetching violation:",t),t}},async createViolation(e){try{const{data:t,error:s}=await M.from("violations").insert([e]).select().single();if(s)throw s;return t}catch(t){throw console.error("Error creating violation:",t),t}},async updateViolation(e,t){try{const{data:s,error:n}=await M.from("violations").update(t).eq("id",e).select().single();if(n)throw n;return s}catch(s){throw console.error("Error updating violation:",s),s}},async deleteViolation(e){try{const{error:t}=await M.from("violations").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting violation:",t),t}}},K6={async getObservations(e={}){try{let t=M.from("observations").select("*").order("created_at",{ascending:!1});e.status&&(t=t.eq("status",e.status)),e.priority&&(t=t.eq("priority",e.priority)),e.type&&(t=t.eq("type",e.type)),e.site&&(t=t.ilike("site_name",`%${e.site}%`)),e.followUpRequired!==void 0&&(t=t.eq("follow_up_required",e.followUpRequired)),e.dateFrom&&(t=t.gte("observation_date",e.dateFrom)),e.dateTo&&(t=t.lte("observation_date",e.dateTo));const{data:s,error:n}=await t;if(n)throw n;return s}catch(t){throw console.error("Error fetching observations:",t),t}},async getObservation(e){try{const{data:t,error:s}=await M.from("observations").select("*").eq("id",e).single();if(s)throw s;return t}catch(t){throw console.error("Error fetching observation:",t),t}},async createObservation(e){try{const{data:t,error:s}=await M.from("observations").insert([e]).select().single();if(s)throw s;return t}catch(t){throw console.error("Error creating observation:",t),t}},async updateObservation(e,t){try{const{data:s,error:n}=await M.from("observations").update(t).eq("id",e).select().single();if(n)throw n;return s}catch(s){throw console.error("Error updating observation:",s),s}},async deleteObservation(e){try{const{error:t}=await M.from("observations").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting observation:",t),t}}},Y6={async getTemplates(e={}){try{let t=M.from("report_templates").select("*").order("created_at",{ascending:!1});e.type&&(t=t.eq("template_type",e.type)),e.isActive!==void 0&&(t=t.eq("is_active",e.isActive));const{data:s,error:n}=await t;if(n)throw n;return s}catch(t){throw console.error("Error fetching templates:",t),t}},async getTemplate(e){try{const{data:t,error:s}=await M.from("report_templates").select("*").eq("id",e).single();if(s)throw s;return t}catch(t){throw console.error("Error fetching template:",t),t}},async createTemplate(e){try{const{data:t,error:s}=await M.from("report_templates").insert([e]).select().single();if(s)throw s;return t}catch(t){throw console.error("Error creating template:",t),t}},async updateTemplate(e,t){try{const{data:s,error:n}=await M.from("report_templates").update(t).eq("id",e).select().single();if(n)throw n;return s}catch(s){throw console.error("Error updating template:",s),s}},async deleteTemplate(e){try{const{error:t}=await M.from("report_templates").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting template:",t),t}}},Gy=(e,t=new Date)=>{const s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${{Incident:"SIR",Patrol:"DPR",Inspection:"EIR",Assessment:"SAR",Violation:"VR",Observation:"OL"}[e]||"RPT"}-${s}-${n}${i}-${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`},Q6=["Incident","Patrol","Inspection","Assessment","Violation","Observation","Equipment","Training","Maintenance","Other"],J6=["Low","Medium","High","Critical"],X6=["Draft","Under Review","Completed","Archived"],t2=({report:e=null,onClose:t,onSuccess:s})=>{var S,R,E;const[n,i]=f.useState({title:"",report_type:"",doc_number:"",site_id:null,entity_officer_id:null,security_officer_id:null,report_date:new Date().toISOString().split("T")[0],status:"Draft",priority:"Medium",description:"",findings:"",recommendations:"",attachments:[]}),[a,o]=f.useState(!1),[l,c]=f.useState([]),[d,u]=f.useState([]),[h,m]=f.useState([]),[x,v]=f.useState(!0),{toast:g}=ue(),w=!!e;f.useEffect(()=>{(async()=>{try{v(!0);const[A,P,O]=await Promise.all([n0(),QS(),M.from("sites").select("id, name, type").order("name")]);A.error?console.error("Error fetching entity staff:",A.error):c(A.data||[]),P.error?console.error("Error fetching security staff:",P.error):u(P.data||[]),O.error?console.error("Error fetching entities:",O.error):m(O.data||[])}catch(A){console.error("Error fetching data:",A),g({title:"Error",description:"Failed to load form data. Please try again.",variant:"destructive"})}finally{v(!1)}})()},[g]),f.useEffect(()=>{if(e)i({title:e.title||"",report_type:e.report_type||"",doc_number:e.doc_number||"",site_id:e.site_id||null,site_name:e.site_name||"",entity_officer_id:e.entity_officer_id||null,security_officer_id:e.security_officer_id||null,report_date:e.report_date||new Date().toISOString().split("T")[0],status:e.status||"Draft",priority:e.priority||"Medium",description:e.description||"",findings:e.findings||"",recommendations:e.recommendations||"",attachments:e.attachments||[]});else{const _=Gy("Report",new Date);i(A=>({...A,doc_number:_}))}},[e]);const p=(_,A)=>{i(P=>({...P,[_]:A}))},y=_=>{const A=_?parseInt(_):null,P=h.find(O=>O.id===A);i(O=>({...O,site_id:A,site_name:(P==null?void 0:P.name)||""}))},b=_=>{const A=Gy(_,new Date);i(P=>({...P,report_type:_,doc_number:A}))},j=async _=>{_.preventDefault(),o(!0);try{let A;if(w?A=await sm.updateReport(e.id,n):A=await sm.createReport(n),A.error)throw A.error;g({title:w?"Report Updated":"Report Created",description:`${n.title} has been ${w?"updated":"created"} successfully.`,variant:"default"}),s==null||s(A),t()}catch(A){console.error("Error saving report:",A),g({title:"Error",description:A.message||"Failed to save report. Please try again.",variant:"destructive"})}finally{o(!1)}};return r.jsx(jt,{children:r.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:_=>_.stopPropagation(),children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[w?r.jsx(gs,{className:"w-5 h-5 text-blue-400"}):r.jsx(it,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:w?"Edit Report":"Create New Report"})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Dt,{className:"w-4 h-4"})})]}),r.jsx(U,{children:r.jsxs("form",{onSubmit:j,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white border-b border-slate-600 pb-2",children:"Basic Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"title",className:"text-white",children:"Report Title"}),r.jsx(ee,{id:"title",value:n.title,onChange:_=>p("title",_.target.value),placeholder:"Enter report title",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"report_type",className:"text-white",children:"Report Type"}),r.jsxs(we,{value:n.report_type,onValueChange:b,children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:"Select report type"})}),r.jsx(ge,{className:"bg-slate-800 border-slate-600",children:Q6.map(_=>r.jsx(Z,{value:_,className:"text-white",children:_},_))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"doc_number",className:"text-white",children:"Document Number"}),r.jsx(ee,{id:"doc_number",value:n.doc_number,onChange:_=>p("doc_number",_.target.value),placeholder:"Auto-generated",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"report_date",className:"text-white",children:"Report Date"}),r.jsx(ee,{id:"report_date",type:"date",value:n.report_date,onChange:_=>p("report_date",_.target.value),className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"site_id",className:"text-white",children:"Entity"}),r.jsxs(we,{value:((S=n.site_id)==null?void 0:S.toString())||"",onValueChange:y,disabled:x,children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:x?"Loading...":"Select entity"})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"",className:"text-white",children:"No entity selected"}),h.map(_=>r.jsxs(Z,{value:_.id.toString(),className:"text-white",children:[_.name," (",_.type,")"]},_.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"entity_officer_id",className:"text-white",children:"Entity Officer"}),r.jsxs(we,{value:((R=n.entity_officer_id)==null?void 0:R.toString())||"",onValueChange:_=>p("entity_officer_id",_?parseInt(_):null),disabled:x,children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:x?"Loading...":"Select entity officer"})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"",className:"text-white",children:"No entity officer assigned"}),l.map(_=>r.jsxs(Z,{value:_.id.toString(),className:"text-white",children:[_.name," - ",_.role]},_.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"security_officer_id",className:"text-white",children:"Security Officer"}),r.jsxs(we,{value:((E=n.security_officer_id)==null?void 0:E.toString())||"",onValueChange:_=>p("security_officer_id",_?parseInt(_):null),disabled:x,children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:x?"Loading...":"Select security officer"})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"",className:"text-white",children:"No security officer assigned"}),d.map(_=>r.jsxs(Z,{value:_.id.toString(),className:"text-white",children:[_.name," - ",_.role]},_.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"priority",className:"text-white",children:"Priority"}),r.jsxs(we,{value:n.priority,onValueChange:_=>p("priority",_),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsx(ge,{className:"bg-slate-800 border-slate-600",children:J6.map(_=>r.jsx(Z,{value:_,className:"text-white",children:_},_))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(we,{value:n.status,onValueChange:_=>p("status",_),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsx(ge,{className:"bg-slate-800 border-slate-600",children:X6.map(_=>r.jsx(Z,{value:_,className:"text-white",children:_},_))})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white border-b border-slate-600 pb-2",children:"Report Content"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"description",className:"text-white",children:"Description"}),r.jsx(dt,{id:"description",value:n.description,onChange:_=>p("description",_.target.value),placeholder:"Provide a detailed description of the incident, observation, or event...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"findings",className:"text-white",children:"Findings"}),r.jsx(dt,{id:"findings",value:n.findings,onChange:_=>p("findings",_.target.value),placeholder:"Document any findings, evidence, or observations...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"recommendations",className:"text-white",children:"Recommendations"}),r.jsx(dt,{id:"recommendations",value:n.recommendations,onChange:_=>p("recommendations",_.target.value),placeholder:"Provide recommendations for improvement, corrective actions, or follow-up...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white border-b border-slate-600 pb-2",children:"Attachments"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{className:"text-white",children:"File Attachments"}),r.jsxs("div",{className:"border-2 border-dashed border-slate-600 rounded-lg p-6 text-center",children:[r.jsx(He,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),r.jsxs("p",{className:"text-slate-400 text-sm",children:[w?"Update attachments":"Add attachments"," (Coming Soon)"]}),r.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Support for images, documents, and other files"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-600",children:[r.jsx(F,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"}),r.jsx(F,{type:"submit",disabled:a,className:"bg-blue-600 hover:bg-blue-700",children:a?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ys,{className:"w-4 h-4"}),r.jsxs("span",{children:[w?"Update":"Create"," Report"]})]})})]})]})})]})})})})},Z6=()=>{const e=Mo(),t=ln(),{toast:s}=ue(),[n,i]=f.useState(!1),a=()=>{i(!0)},o=()=>t.pathname.includes("/reports/list")?"list":t.pathname.includes("/reports/violations")?"violations":t.pathname.includes("/reports/observations")?"observations":t.pathname.includes("/reports/templates")?"templates":"list";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-white",children:"Reports & Documentation"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Manage security reports, violations, and observations"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(F,{onClick:a,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Create Report"]}),r.jsxs(F,{variant:"outline",className:"border-white/20",onClick:()=>s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),children:[r.jsx(fj,{className:"w-4 h-4 mr-2"}),"Filter"]})]})]}),r.jsxs(Et,{defaultValue:o(),onValueChange:l=>e(`/reports/${l}`),className:"space-y-6",children:[r.jsxs(gt,{className:"bg-white/10 border border-white/20",children:[r.jsx(ie,{value:"list",children:"Reports"}),r.jsx(ie,{value:"violations",children:"Violations"}),r.jsx(ie,{value:"observations",children:"Observations"}),r.jsx(ie,{value:"templates",children:"Templates"})]}),r.jsx(Cb,{})]}),n&&r.jsx(t2,{onClose:()=>i(!1),onSuccess:l=>{s({title:"Report Created",description:"The report has been created successfully.",variant:"default"}),window.location.reload()}})]})},eF=()=>{const[e,t]=f.useState(""),[s,n]=f.useState([]),[i,a]=f.useState(!0),[o,l]=f.useState(!1),[c,d]=f.useState(null),{toast:u}=ue(),h=p=>{u({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},m=p=>{d(p),l(!0)},x=p=>{u({title:"Report Export",description:"Report exported successfully to PDF format"})},v=p=>{u({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},g=async()=>{try{a(!0);const p=await sm.getReports();n(p)}catch(p){console.error("Error fetching reports:",p),u({variant:"destructive",title:"Error",description:"Failed to load reports. Please try again."})}finally{a(!1)}};f.useEffect(()=>{g()},[u]);const w=s.filter(p=>p.title.toLowerCase().includes(e.toLowerCase())||p.doc_number.toLowerCase().includes(e.toLowerCase())||p.officer_name.toLowerCase().includes(e.toLowerCase()));return r.jsxs(H,{children:[r.jsx(K,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Y,{className:"flex items-center space-x-2",children:[r.jsx(He,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Security Reports"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search reports...",value:e,onChange:p=>t(p.target.value),className:"pl-10 w-80 bg-white/5 border-white/10"})]})]})}),r.jsx(U,{children:w.length===0&&!e?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(He,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Reports Yet"}),r.jsx("p",{className:"text-gray-400",children:"Create a new report to get started."})]}):w.length===0&&e?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(Ct,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Reports Found"}),r.jsx("p",{className:"text-gray-400",children:"Try adjusting your search terms."})]}):i?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ct,{className:"w-8 h-8 text-blue-400 mx-auto mb-4 animate-spin"}),r.jsx("p",{className:"text-gray-400",children:"Loading reports..."})]}):r.jsx("div",{className:"space-y-4",children:w.map(p=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:p.title}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.priority==="High"?"bg-red-500/20 text-red-400":p.priority==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[p.priority," Priority"]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.status==="Completed"?"bg-green-500/20 text-green-400":p.status==="Under Review"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:p.status})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400 mb-2",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(wT,{className:"w-4 h-4 mr-1"}),p.doc_number]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(He,{className:"w-4 h-4 mr-1"}),p.report_type]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Rs,{className:"w-4 h-4 mr-1"}),new Date(p.report_date).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[r.jsxs("span",{children:["Site: ",p.site_name]}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Entity Officer: ",p.entity_officer_name]}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Security Officer: ",p.security_officer_name]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>h(p.id),className:"border-blue-500/30 hover:bg-blue-500/10",children:[r.jsx(Fi,{className:"w-4 h-4 mr-1"}),"View"]}),r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>m(p),className:"border-yellow-500/30 hover:bg-yellow-500/10",children:[r.jsx(gs,{className:"w-4 h-4 mr-1"}),"Edit"]}),r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>x(p.id),className:"border-green-500/30 hover:bg-green-500/10",children:[r.jsx(hj,{className:"w-4 h-4 mr-1"}),"Export"]}),r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>v(p.id),className:"border-purple-500/30 hover:bg-purple-500/10",children:[r.jsx(FT,{className:"w-4 h-4 mr-1"}),"Share"]})]})]})},p.id))})}),o&&c&&r.jsx(t2,{report:c,onClose:()=>{l(!1),d(null)},onSuccess:p=>{u({title:"Report Updated",description:"The report has been updated successfully.",variant:"default"}),g(),l(!1),d(null)}})]})},tF=()=>{const[e,t]=f.useState([]),[s,n]=f.useState(!0),{toast:i}=ue();return f.useEffect(()=>{(async()=>{try{n(!0);const o=await G6.getViolations();t(o)}catch(o){console.error("Error fetching violations:",o),i({variant:"destructive",title:"Error",description:"Failed to load violations. Please try again."})}finally{n(!1)}})()},[i]),r.jsxs(H,{children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2",children:[r.jsx(ut,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Violations & Events"})]})}),r.jsx(U,{children:s?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ct,{className:"w-8 h-8 text-red-400 mx-auto mb-4 animate-spin"}),r.jsx("p",{className:"text-gray-400",children:"Loading violations..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ut,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Violations Found"}),r.jsx("p",{className:"text-gray-400",children:"No violations have been reported yet."})]}):r.jsx("div",{className:"space-y-4",children:e.map(a=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-red-500/10 border border-red-500/20 hover:bg-red-500/20 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:a.type}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.severity==="High"?"bg-red-500/20 text-red-400":a.severity==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[a.severity," Severity"]})]}),r.jsx("p",{className:"text-gray-300 text-sm mb-2",children:a.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[r.jsx("span",{children:a.location}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Reported by: ",a.reported_by_name]}),r.jsx("span",{children:"•"}),r.jsx("span",{children:new Date(a.violation_date).toLocaleDateString()})]})]}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>i({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),className:"border-red-500/30 hover:bg-red-500/10",children:"View Details"})]})},a.id))})})]})},sF=()=>{const[e,t]=f.useState([]),[s,n]=f.useState(!0),{toast:i}=ue();return f.useEffect(()=>{(async()=>{try{n(!0);const o=await K6.getObservations();t(o)}catch(o){console.error("Error fetching observations:",o),i({variant:"destructive",title:"Error",description:"Failed to load observations. Please try again."})}finally{n(!1)}})()},[i]),r.jsxs(H,{children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2",children:[r.jsx(Fi,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Observations & Notes"})]})}),r.jsx(U,{children:s?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ct,{className:"w-8 h-8 text-blue-400 mx-auto mb-4 animate-spin"}),r.jsx("p",{className:"text-gray-400",children:"Loading observations..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(Fi,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Observations Found"}),r.jsx("p",{className:"text-gray-400",children:"No observations have been recorded yet."})]}):r.jsx("div",{className:"space-y-4",children:e.map(a=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20 hover:bg-blue-500/20 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:a.type}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.priority==="High"?"bg-red-500/20 text-red-400":a.priority==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[a.priority," Priority"]})]}),r.jsx("p",{className:"text-gray-300 text-sm mb-2",children:a.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[r.jsx("span",{children:a.location}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Observer: ",a.observer_name]}),r.jsx("span",{children:"•"}),r.jsx("span",{children:new Date(a.observation_date).toLocaleDateString()})]})]}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>i({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),className:"border-blue-500/30 hover:bg-blue-500/10",children:"View Details"})]})},a.id))})})]})},rF=()=>{const[e,t]=f.useState([]),[s,n]=f.useState(!0),{toast:i}=ue();return f.useEffect(()=>{(async()=>{try{n(!0);const o=await Y6.getTemplates();t(o)}catch(o){console.error("Error fetching templates:",o),i({variant:"destructive",title:"Error",description:"Failed to load templates. Please try again."})}finally{n(!1)}})()},[i]),r.jsxs(H,{children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2",children:[r.jsx(He,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Dynamic Report Templates"})]})}),r.jsx(U,{children:s?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ct,{className:"w-8 h-8 text-purple-400 mx-auto mb-4 animate-spin"}),r.jsx("p",{className:"text-gray-400",children:"Loading templates..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(He,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Templates Found"}),r.jsx("p",{className:"text-gray-400",children:"No report templates are available."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((a,o)=>r.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:o*.1},className:"p-4 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors cursor-pointer",onClick:()=>i({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),children:[r.jsx(He,{className:"w-8 h-8 text-purple-400 mb-3"}),r.jsx("h3",{className:"text-white font-medium mb-2",children:a.title}),r.jsx("p",{className:"text-gray-400 text-sm",children:a.description})]},a))})})]})},nF=r.jsxs(Se,{path:"reports",element:r.jsx(Z6,{}),children:[r.jsx(Se,{index:!0,element:r.jsx(cf,{to:"list",replace:!0})}),r.jsx(Se,{path:"list",element:r.jsx(eF,{})}),r.jsx(Se,{path:"violations",element:r.jsx(tF,{})}),r.jsx(Se,{path:"observations",element:r.jsx(sF,{})}),r.jsx(Se,{path:"templates",element:r.jsx(rF,{})})]}),iF=({schedule:e})=>{const{toast:t}=ue();return r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.officer}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.status==="Confirmed"?"bg-green-500/20 text-green-400":e.status==="Pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:e.status}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.compliance==="Qualified"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:e.compliance})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-400",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(qt,{className:"w-4 h-4"}),r.jsx("span",{children:e.site})]}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsx("span",{children:e.shift}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Bo,{className:"w-4 h-4"}),r.jsx("span",{children:e.time})]}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsx("span",{children:e.date})]})]}),r.jsx("div",{className:"flex items-center space-x-3 ml-2",children:r.jsx(F,{variant:"outline",size:"sm",onClick:()=>t({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),className:"border-slate-600 hover:bg-slate-700 text-gray-300",children:"Edit"})})]})})},aF=({person:e,onSchedule:t})=>(ue(),r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.name}),r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:e.position})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Start Date"}),r.jsx("p",{className:"text-white",children:e.startDate})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Training Status"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[e.trainingStatus==="Completed"?r.jsx(nt,{className:"w-4 h-4 text-green-400"}):r.jsx(Bo,{className:"w-4 h-4 text-yellow-400"}),r.jsx("span",{className:e.trainingStatus==="Completed"?"text-green-400":"text-yellow-400",children:e.trainingStatus})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Credentials"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[e.credentialsStatus==="Approved"?r.jsx(nt,{className:"w-4 h-4 text-green-400"}):r.jsx(Dt,{className:"w-4 h-4 text-red-400"}),r.jsx("span",{className:e.credentialsStatus==="Approved"?"text-green-400":"text-red-400",children:e.credentialsStatus})]})]})]})]}),r.jsx("div",{className:"flex items-center space-x-3 ml-2",children:r.jsx(F,{variant:e.canSchedule?"default":"outline",size:"sm",onClick:()=>t(e.id,e.canSchedule),className:e.canSchedule?"bg-green-600 hover:bg-green-700":"border-red-500/30 text-red-400",disabled:!e.canSchedule,children:e.canSchedule?r.jsxs(r.Fragment,{children:[r.jsx(nt,{className:"w-4 h-4 mr-1"}),"Ready"]}):r.jsxs(r.Fragment,{children:[r.jsx(ut,{className:"w-4 h-4 mr-1"}),"Cannot Schedule"]})})})]})})),oF=({event:e})=>{const{toast:t}=ue();return r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.title}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.type==="Training"?"bg-blue-500/20 text-blue-400":e.type==="Audit"?"bg-purple-500/20 text-purple-400":"bg-yellow-500/20 text-yellow-400"}`,children:e.type}),r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-500/20 text-green-400",children:e.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-400",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Rs,{className:"w-4 h-4"}),r.jsx("span",{children:e.date})]}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsxs("span",{children:["Duration: ",e.duration]}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ae,{className:"w-4 h-4"}),r.jsx("span",{children:e.participants})]})]})]}),r.jsx("div",{className:"flex items-center space-x-3 ml-2",children:r.jsx(F,{variant:"outline",size:"sm",onClick:()=>t({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),className:"border-slate-600 hover:bg-slate-700 text-gray-300",children:"Manage"})})]})})},lF=()=>{const e=["Current Security Training Certification","Valid Background Check (within 2 years)","Site-Specific Training Completion","Equipment Certification","Health & Safety Training","Emergency Response Training"];return r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(nt,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Compliance Verification System"})]})}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-500/10",children:[r.jsx(nt,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"Compliant Officers"}),r.jsx("p",{className:"text-2xl font-bold text-green-400",children:"234"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Ready for Scheduling"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-yellow-500/10",children:[r.jsx(ut,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"Training Due"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:"12"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Cannot Schedule"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-red-500/10",children:[r.jsx(Dt,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"Non-Compliant"}),r.jsx("p",{className:"text-2xl font-bold text-red-400",children:"3"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Immediate Action Required"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Compliance Requirements"}),e.map((t,s)=>r.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-slate-800/50",children:[r.jsx(nt,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-white",children:t})]},s))]})]})})]})},cF=()=>{const[e,t]=f.useState(""),{toast:s}=ue(),n=[{id:1,officer:"John Smith",site:"Corporate HQ Alpha",shift:"Day Shift",time:"08:00 - 16:00",date:"2025-07-15",status:"Confirmed",compliance:"Qualified"},{id:2,officer:"Sarah Johnson",site:"Metro Hospital East",shift:"Night Shift",time:"20:00 - 06:00",date:"2025-07-15",status:"Pending",compliance:"Training Due"},{id:3,officer:"Mike Rodriguez",site:"Retail Plaza Central",shift:"Evening Shift",time:"16:00 - 00:00",date:"2025-07-16",status:"Confirmed",compliance:"Qualified"}],i=[{id:1,title:"Annual Security Refresher Training",type:"Training",date:"2025-09-15",duration:"3 days",participants:"All Officers",status:"Scheduled"},{id:2,title:"ISO 18788 Compliance Audit",type:"Audit",date:"2025-11-20",duration:"2 days",participants:"Management Team",status:"Scheduled"},{id:3,title:"Emergency Response Full-Scale Drill",type:"Drill",date:"2026-01-10",duration:"1 day",participants:"Site Teams & ERT",status:"Planned"}],a=[{id:1,name:"Alex Thompson",position:"Security Officer",startDate:"2025-07-20",trainingStatus:"In Progress",credentialsStatus:"Pending",canSchedule:!1},{id:2,name:"Maria Garcia",position:"Site Supervisor",startDate:"2025-07-18",trainingStatus:"Completed",credentialsStatus:"Approved",canSchedule:!0},{id:3,name:"David Lee",position:"Security Officer",startDate:"2025-07-22",trainingStatus:"Scheduled",credentialsStatus:"Pending",canSchedule:!1}],o=()=>{s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},l=(h,m)=>{s(m?{title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}:{variant:"destructive",title:"Cannot Schedule Officer",description:"Officer must complete all training and credentials before scheduling."})},c="bg-transparent p-0 space-x-1",d="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",u="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Oc,{className:"w-8 h-8 mr-3 text-blue-400"}),"Scheduling System"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage employee schedules with integrated compliance verification."})]}),r.jsxs(F,{onClick:o,className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Create New Schedule"]})]}),r.jsxs(Et,{defaultValue:"schedules",className:"space-y-6",children:[r.jsxs(gt,{className:`${c} border-b border-slate-700`,children:[r.jsx(ie,{value:"schedules",className:`${d} ${u}`,children:"Current Schedules"}),r.jsx(ie,{value:"onboarding",className:`${d} ${u}`,children:"Onboarding Queue"}),r.jsx(ie,{value:"yearly",className:`${d} ${u}`,children:"Yearly Events"}),r.jsx(ie,{value:"compliance",className:`${d} ${u}`,children:"Compliance Check"})]}),r.jsx(oe,{value:"schedules",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(aT,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Active Schedules"})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search schedules (officer, site)...",value:e,onChange:h=>t(h.target.value),className:"pl-10 w-full sm:w-80 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Overview of all current and upcoming employee schedules."})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[n.filter(h=>h.officer.toLowerCase().includes(e.toLowerCase())||h.site.toLowerCase().includes(e.toLowerCase())).map(h=>r.jsx(iF,{schedule:h},h.id)),n.length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"No active schedules found."})]})})]})}),r.jsx(oe,{value:"onboarding",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ae,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Onboarding & Qualification Queue"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Track new hires through the onboarding and qualification process."})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[a.map(h=>r.jsx(aF,{person:h,onSchedule:l},h.id)),a.length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"Onboarding queue is empty."})]})})]})}),r.jsx(oe,{value:"yearly",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Oc,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Annual Event Scheduler"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Plan and manage yearly recurring events and compliance deadlines."})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[i.map(h=>r.jsx(oF,{event:h},h.id)),i.length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"No annual events scheduled."})]})})]})}),r.jsx(oe,{value:"compliance",className:"space-y-6",children:r.jsx(lF,{})})]})]})},dF=()=>{const[e,t]=f.useState(""),{toast:s}=ue(),n=[{title:"Incident Response Time",value:"4.2 min",change:"-12%",trend:"down",color:"green",icon:cj},{title:"Officer Efficiency",value:"94.8%",change:"+3.2%",trend:"up",color:"blue",icon:Ae},{title:"Site Coverage",value:"98.1%",change:"+1.5%",trend:"up",color:"purple",icon:qt},{title:"Training Compliance",value:"96.3%",change:"+2.1%",trend:"up",color:"yellow",icon:mt}],i=[{type:"Performance",title:"Peak Incident Hours Identified",description:"Analysis shows 67% of security incidents occur between 10 PM - 2 AM. Recommend increasing patrol frequency during these hours.",priority:"High",action:"Adjust Scheduling"},{type:"Efficiency",title:"Officer Rotation Optimization",description:"Current rotation patterns show 15% efficiency loss. AI suggests new rotation schedule to improve coverage by 23%.",priority:"Medium",action:"Review Schedule"},{type:"Training",title:"Skills Gap Analysis",description:"Emergency response training completion correlates with 34% faster incident resolution. Prioritize training for 12 officers.",priority:"Medium",action:"Schedule Training"}],a=()=>{if(!e.trim()){s({title:"Please enter a query",description:"Ask the AI about your security operations data"});return}s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},o=()=>{s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},l=()=>{s({title:"🚧 Data Export Not Implemented",description:"This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})};return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Kr,{className:"w-8 h-8 mr-3 text-blue-400"}),"AI-Assisted Analytics"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Unlock actionable insights from your operational data."})]}),r.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[r.jsxs(F,{onClick:o,className:"ios-button bg-purple-600 hover:bg-purple-700",children:[r.jsx(He,{className:"w-4 h-4 mr-2"}),"Generate Report"]}),r.jsxs(F,{onClick:l,variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(hj,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(F,{variant:"outline",className:"glass-button",children:[r.jsx(oT,{className:"w-4 h-4 mr-2"})," Date Range"]}),r.jsxs(F,{variant:"outline",className:"glass-button",children:[r.jsx(fj,{className:"w-4 h-4 mr-2"})," Filters"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map((c,d)=>r.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.05},children:r.jsx(H,{className:"ios-card hover-lift",children:r.jsx(U,{className:"p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:c.title}),r.jsx("p",{className:"text-2xl font-bold text-white",children:c.value}),r.jsxs("p",{className:`text-xs flex items-center mt-1 ${c.trend==="up"?"text-green-400":"text-red-400"}`,children:[r.jsx(cp,{className:`w-3 h-3 mr-1 ${c.trend==="down"?"transform rotate-180":""}`}),c.change]})]}),r.jsx("div",{className:`p-2.5 rounded-lg bg-gradient-to-br from-${c.color}-500/20 to-${c.color}-600/30`,children:r.jsx(c.icon,{className:`w-5 h-5 text-${c.color}-400`})})]})})})},c.title))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(W.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:r.jsxs(H,{className:"ios-card h-full",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Fx,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"AI Analytics Assistant"})]}),r.jsx(he,{className:"text-gray-400",children:"Ask natural language questions about your data."})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(ee,{placeholder:"E.g., 'Show incident trends for Site Alpha last month'",value:e,onChange:c=>t(c.target.value),className:"flex-1 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500",onKeyPress:c=>c.key==="Enter"&&a()}),r.jsxs(F,{onClick:a,className:"ios-button bg-purple-600 hover:bg-purple-700",children:[r.jsx(jf,{className:"w-4 h-4 mr-1"}),"Query AI"]})]}),r.jsxs("div",{className:"space-y-2 pt-2",children:[r.jsx("h4",{className:"text-white font-medium text-sm",children:"Suggested Queries:"}),["Incident trends last 30 days?","Highest risk sites?","Officer performance by region?","Predict staffing needs next month."].map((c,d)=>r.jsx("button",{onClick:()=>t(c),className:"block w-full text-left p-2.5 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors text-gray-300 text-sm",children:c},d))]})]})})]})}),r.jsx(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:r.jsxs(H,{className:"ios-card h-full",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Kr,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Performance Overview"})]}),r.jsx(he,{className:"text-gray-400",children:"Key operational charts and visualizations."})]}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:r.jsx("div",{className:"h-64 bg-gradient-to-br from-blue-600/20 to-purple-700/20 rounded-lg border border-slate-700 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Kr,{className:"w-16 h-16 text-blue-400 mx-auto mb-4 opacity-70"}),r.jsx("p",{className:"text-white font-medium",children:"Interactive Charts Area"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time performance visualization (Coming Soon)"})]})})})})]})})]}),r.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Fx,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"AI-Generated Insights"})]}),r.jsx(he,{className:"text-gray-400",children:"Actionable recommendations based on data analysis."})]}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:i.map((c,d)=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5+d*.1},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.type==="Performance"?"bg-blue-500/20 text-blue-400":c.type==="Efficiency"?"bg-green-500/20 text-green-400":"bg-purple-500/20 text-purple-400"}`,children:c.type}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.priority==="High"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:[c.priority," Priority"]})]}),r.jsx("h3",{className:"text-white font-semibold mb-1",children:c.title}),r.jsx("p",{className:"text-gray-300 text-sm mb-3",children:c.description})]}),r.jsx(F,{variant:"outline",size:"sm",onClick:()=>s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),className:"ios-button border-slate-600 hover:bg-slate-700 ml-4 mt-1",children:c.action})]})},d))})})]})})]})},uF=()=>{var w;const[e,t]=f.useState(""),[s,n]=f.useState("Channel 1 - Main"),[i,a]=f.useState(""),{toast:o}=ue(),l=[{id:1,name:"Site Alpha Team",lastMessage:"All clear on perimeter check. Standing by for next instructions.",time:"2 min ago",unread:0,type:"group",status:"online",avatar:"SA"},{id:2,name:"John Smith (Officer)",lastMessage:"Incident report #IR-0045 submitted for review.",time:"15 min ago",unread:2,type:"direct",status:"online",avatar:"JS"},{id:3,name:"Emergency Response Channel",lastMessage:"Drill completed successfully. All teams accounted for.",time:"1 hour ago",unread:0,type:"emergency",status:"active",avatar:"ER"},{id:4,name:"Management Group",lastMessage:"Weekly operations meeting scheduled for Friday 10 AM.",time:"3 hours ago",unread:1,type:"group",status:"online",avatar:"MG"}],c=[{id:1,name:"Channel 1 - Main Ops",users:23,status:"active"},{id:2,name:"Channel 2 - Emergency",users:8,status:"standby"},{id:3,name:"Channel 3 - Site Bravo",users:12,status:"active"},{id:4,name:"Channel 4 - Management",users:5,status:"private"}],d=[{id:1,sender:"Sarah Johnson",content:"Perimeter check complete. All secure.",time:"14:32",type:"received"},{id:2,sender:"You",content:"Copy that. Good work. Any anomalies to report?",time:"14:33",type:"sent"},{id:3,sender:"Sarah Johnson",content:"Negative, all clear. Sector 4 camera seems a bit foggy, might need cleaning.",time:"14:34",type:"received"},{id:4,sender:"Mike Rodriguez",content:"Maintenance crew arriving at 15:00 for camera checks.",time:"14:35",type:"received"}],u=()=>{e.trim()&&(o({title:"Message Sent",description:"Your message has been delivered to Site Alpha Team."}),t(""))},h=()=>{o({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},m=()=>{o({title:"Emergency Broadcast Sent",description:"Critical alert dispatched to all active personnel and channels."})},x="bg-transparent p-0 space-x-1",v="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",g="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(yj,{className:"w-8 h-8 mr-3 text-blue-400"}),"Real-Time Communications"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Instant messaging and radio system for seamless operations."})]}),r.jsxs(F,{onClick:m,className:"ios-button bg-red-600 hover:bg-red-700 mt-4 sm:mt-0",children:[r.jsx(ut,{className:"w-4 h-4 mr-2"}),"Emergency Broadcast"]})]}),r.jsxs(Et,{defaultValue:"messaging",className:"space-y-6",children:[r.jsxs(gt,{className:`${x} border-b border-slate-700`,children:[r.jsx(ie,{value:"messaging",className:`${v} ${g}`,children:"Instant Messaging"}),r.jsx(ie,{value:"radio",className:`${v} ${g}`,children:"Radio System"}),r.jsx(ie,{value:"emergency_log",className:`${v} ${g}`,children:"Emergency Log"})]}),r.jsx(oe,{value:"messaging",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-280px)] min-h-[500px]",children:[r.jsx(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:r.jsxs(H,{className:"ios-card h-full flex flex-col",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ae,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Conversations"})]}),r.jsxs("div",{className:"relative mt-2",children:[r.jsx(Ct,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search chats...",className:"pl-8 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500",value:i,onChange:p=>a(p.target.value)})]})]}),r.jsx(U,{className:"flex-grow overflow-y-auto scrollbar-hide pr-1",children:r.jsx("div",{className:"space-y-2",children:l.filter(p=>p.name.toLowerCase().includes(i.toLowerCase())).map(p=>r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors cursor-pointer border border-slate-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${p.status==="online"?"bg-green-500":"bg-gray-500"}`}),r.jsx("span",{className:"text-white font-medium text-sm",children:p.name})]}),p.unread>0&&r.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full px-1.5 py-0.5 font-semibold",children:p.unread})]}),r.jsx("p",{className:"text-gray-400 text-xs truncate",children:p.lastMessage}),r.jsx("p",{className:"text-gray-500 text-xs mt-0.5 text-right",children:p.time})]},p.id))})})]})}),r.jsx(W.div,{className:"lg:col-span-2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:r.jsxs(H,{className:"ios-card h-full flex flex-col",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center justify-between text-white",children:[r.jsx("span",{children:"Site Alpha Team"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2.5 h-2.5 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-400",children:"23 online"})]})]})}),r.jsxs(U,{className:"flex-grow flex flex-col overflow-hidden",children:[r.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4 p-2 bg-slate-900/30 rounded-lg scrollbar-hide",children:d.map(p=>r.jsx("div",{className:`flex ${p.type==="sent"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[70%] p-2.5 rounded-xl shadow ${p.type==="sent"?"bg-blue-600 text-white rounded-br-none":"bg-slate-700 text-white rounded-bl-none"}`,children:[p.type==="received"&&r.jsx("p",{className:"text-xs text-blue-300 mb-0.5 font-medium",children:p.sender}),r.jsx("p",{className:"text-sm",children:p.content}),r.jsx("p",{className:`text-xs opacity-70 mt-1 ${p.type==="sent"?"text-blue-200":"text-slate-400"} text-right`,children:p.time})]})},p.id))}),r.jsxs("div",{className:"flex space-x-2 items-center pt-2 border-t border-slate-700",children:[r.jsx(F,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-blue-400",children:r.jsx(AT,{className:"w-5 h-5"})}),r.jsx(ee,{placeholder:"Type your message...",value:e,onChange:p=>t(p.target.value),className:"flex-1 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500",onKeyPress:p=>p.key==="Enter"&&u()}),r.jsx(F,{onClick:u,className:"ios-button bg-blue-600 hover:bg-blue-700",children:r.jsx(MT,{className:"w-4 h-4"})})]})]})]})})]})}),r.jsx(oe,{value:"radio",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(W.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:r.jsxs(H,{className:"ios-card h-full",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(qx,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Radio Control Panel"})]}),r.jsx(he,{className:"text-gray-400",children:"Push-to-talk and channel management."})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-6 text-center",children:[r.jsx("div",{className:"w-40 h-40 bg-gradient-to-br from-green-600/20 to-emerald-700/30 rounded-full flex items-center justify-center mx-auto mb-4 border-4 border-green-500/40 shadow-lg",children:r.jsx(qx,{className:"w-20 h-20 text-green-400"})}),r.jsx("p",{className:"text-white font-semibold text-lg",children:s}),r.jsxs("p",{className:"text-gray-400 text-sm -mt-2",children:[((w=c.find(p=>p.name===s))==null?void 0:w.users)||0," users connected"]}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsxs(F,{onClick:h,className:"ios-button bg-green-600 hover:bg-green-700 px-8 py-6 text-lg rounded-xl",children:[r.jsx(lp,{className:"w-5 h-5 mr-2"}),"Push to Talk"]}),r.jsx(F,{variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700 p-4 rounded-xl",onClick:()=>o({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),children:r.jsx(RT,{className:"w-5 h-5"})})]})]})})]})}),r.jsx(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:r.jsxs(H,{className:"ios-card h-full",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ae,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Radio Channels"})]}),r.jsx(he,{className:"text-gray-400",children:"Select an active radio channel."})]}),r.jsx(U,{className:"overflow-y-auto scrollbar-hide max-h-[300px]",children:r.jsx("div",{className:"space-y-2.5",children:c.map(p=>r.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-all duration-150 ${p.name===s?"bg-green-500/20 border-green-500/40 ring-2 ring-green-500":"bg-slate-800/40 border-slate-700 hover:bg-slate-700/60"}`,onClick:()=>n(p.name),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium text-sm",children:p.name}),r.jsxs("p",{className:"text-gray-400 text-xs",children:[p.users," users"]})]}),r.jsxs("div",{className:"flex items-center space-x-1.5",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${p.status==="active"?"bg-green-500":p.status==="standby"?"bg-yellow-500":"bg-gray-500"}`}),r.jsx("span",{className:"text-xs text-gray-400 capitalize",children:p.status})]})]})},p.id))})})]})})]})}),r.jsx(oe,{value:"emergency_log",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ut,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Emergency Communications Log"})]}),r.jsx(he,{className:"text-gray-400",children:"Record of all critical alerts and broadcasts."})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-3",children:[[{type:"Drill",message:"Fire drill completed - All personnel accounted for. Duration: 15 mins.",time:"2 hours ago",status:"resolved"},{type:"Alert",message:"Severe weather warning issued for Sector Gamma. Secure outdoor equipment immediately.",time:"1 day ago",status:"resolved"},{type:"Incident",message:"Medical emergency reported at Building A, Floor 3. EMS dispatched.",time:"3 days ago",status:"active_monitoring"}].map((p,y)=>r.jsx("div",{className:"p-3.5 rounded-lg bg-slate-800/40 border border-slate-700",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2.5 mb-1.5",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${p.type==="Drill"?"bg-blue-500/20 text-blue-400":p.type==="Alert"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:p.type}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${p.status==="resolved"?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:p.status.replace("_"," ").toUpperCase()})]}),r.jsx("p",{className:"text-white text-sm",children:p.message})]}),r.jsx("p",{className:"text-gray-400 text-xs mt-0.5 ml-3 whitespace-nowrap",children:p.time})]})},y)),d.length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"No emergency communications logged yet."})]})})]})})]})]})},hF=({standard:e,index:t})=>{const s=()=>e.standard==="ISO 18788"?r.jsx(Rt,{className:"w-5 h-5 text-blue-400"}):e.standard==="ISO 14001"?r.jsx(NT,{className:"w-5 h-5 text-green-400"}):r.jsx(Ae,{className:"w-5 h-5 text-yellow-400"});return r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:t*.1},children:r.jsxs(H,{className:"ios-card hover-lift",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[s(),r.jsx("span",{className:"text-lg text-white",children:e.standard})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.status==="Certified"?"bg-green-500/20 text-green-400":e.status==="In Progress"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:e.status})]})}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-400 text-sm",children:e.title}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Compliance"}),r.jsxs("span",{className:"text-white font-semibold",children:[e.compliance,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${e.compliance>=95?"bg-green-500":e.compliance>=85?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.compliance}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Last Audit"}),r.jsx("p",{className:"text-white",children:e.lastAudit})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Next Audit"}),r.jsx("p",{className:"text-white",children:e.nextAudit})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Open Findings"}),r.jsx("span",{className:`font-semibold ${e.findings===0?"text-green-400":e.findings<=3?"text-yellow-400":"text-red-400"}`,children:e.findings})]})]})})]})})},fF=({audit:e})=>{const{toast:t}=ue(),s=n=>{t({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})};return r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.type}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.standard==="ISO 18788"?"bg-blue-500/20 text-blue-400":e.standard==="ISO 14001"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:e.standard}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.status==="Completed"?"bg-green-500/20 text-green-400":e.status==="In Progress"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:e.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-400",children:[r.jsxs("span",{children:["Auditor: ",e.auditor]}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Rs,{className:"w-4 h-4"}),r.jsx("span",{children:e.date})]}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsx("span",{children:e.site}),e.findings>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsxs("span",{className:"text-yellow-400",children:[e.findings," findings"]})]})]})]}),r.jsx("div",{className:"flex items-center space-x-3 ml-2",children:r.jsx(F,{variant:"outline",size:"sm",onClick:()=>s(e.id),className:"border-slate-600 hover:bg-slate-700 text-gray-300",children:"View Details"})})]})})};var dh="focusScope.autoFocusOnMount",uh="focusScope.autoFocusOnUnmount",Ky={bubbles:!1,cancelable:!0},mF="FocusScope",s2=f.forwardRef((e,t)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=f.useState(null),d=As(i),u=As(a),h=f.useRef(null),m=Yt(t,g=>c(g)),x=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let g=function(b){if(x.paused||!l)return;const j=b.target;l.contains(j)?h.current=j:Tr(h.current,{select:!0})},w=function(b){if(x.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||Tr(h.current,{select:!0}))},p=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&Tr(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const y=new MutationObserver(p);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),y.disconnect()}}},[n,l,x.paused]),f.useEffect(()=>{if(l){Qy.add(x);const g=document.activeElement;if(!l.contains(g)){const p=new CustomEvent(dh,Ky);l.addEventListener(dh,d),l.dispatchEvent(p),p.defaultPrevented||(pF(wF(r2(l)),{select:!0}),document.activeElement===g&&Tr(l))}return()=>{l.removeEventListener(dh,d),setTimeout(()=>{const p=new CustomEvent(uh,Ky);l.addEventListener(uh,u),l.dispatchEvent(p),p.defaultPrevented||Tr(g??document.body,{select:!0}),l.removeEventListener(uh,u),Qy.remove(x)},0)}}},[l,d,u,x]);const v=f.useCallback(g=>{if(!s&&!n||x.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,p=document.activeElement;if(w&&p){const y=g.currentTarget,[b,j]=xF(y);b&&j?!g.shiftKey&&p===j?(g.preventDefault(),s&&Tr(b,{select:!0})):g.shiftKey&&p===b&&(g.preventDefault(),s&&Tr(j,{select:!0})):p===y&&g.preventDefault()}},[s,n,x.paused]);return r.jsx(Re.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});s2.displayName=mF;function pF(e,{select:t=!1}={}){const s=document.activeElement;for(const n of e)if(Tr(n,{select:t}),document.activeElement!==s)return}function xF(e){const t=r2(e),s=Yy(t,e),n=Yy(t.reverse(),e);return[s,n]}function r2(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Yy(e,t){for(const s of e)if(!gF(s,{upTo:t}))return s}function gF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function yF(e){return e instanceof HTMLInputElement&&"select"in e}function Tr(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&yF(e)&&t&&e.select()}}var Qy=vF();function vF(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=Jy(e,t),e.unshift(t)},remove(t){var s;e=Jy(e,t),(s=e[0])==null||s.resume()}}}function Jy(e,t){const s=[...e],n=s.indexOf(t);return n!==-1&&s.splice(n,1),s}function wF(e){return e.filter(t=>t.tagName!=="A")}var hh=0;function bF(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Xy()),document.body.insertAdjacentElement("beforeend",e[1]??Xy()),hh++,()=>{hh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),hh--}},[])}function Xy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var n2=CS(),fh=function(){},Hd=f.forwardRef(function(e,t){var s=f.useRef(null),n=f.useState({onScrollCapture:fh,onWheelCapture:fh,onTouchMoveCapture:fh}),i=n[0],a=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,x=e.noRelative,v=e.noIsolation,g=e.inert,w=e.allowPinchZoom,p=e.as,y=p===void 0?"div":p,b=e.gapMode,j=Qp(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,R=_S([s,t]),E=Nt(Nt({},j),i);return f.createElement(f.Fragment,null,u&&f.createElement(S,{sideCar:n2,removeScrollBar:d,shards:h,noRelative:x,noIsolation:v,inert:g,setCallbacks:a,allowPinchZoom:!!w,lockRef:s,gapMode:b}),o?f.cloneElement(f.Children.only(l),Nt(Nt({},E),{ref:R})):f.createElement(y,Nt({},E,{className:c,ref:R}),l))});Hd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hd.classNames={fullWidth:Ja,zeroRight:Qa};var rm=!1;if(typeof window<"u")try{var Ll=Object.defineProperty({},"passive",{get:function(){return rm=!0,!0}});window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{rm=!1}var si=rm?{passive:!1}:!1,jF=function(e){return e.tagName==="TEXTAREA"},i2=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!jF(e)&&s[t]==="visible")},NF=function(e){return i2(e,"overflowY")},SF=function(e){return i2(e,"overflowX")},Zy=function(e,t){var s=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=a2(e,n);if(i){var a=o2(e,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},_F=function(e){var t=e.scrollTop,s=e.scrollHeight,n=e.clientHeight;return[t,s,n]},CF=function(e){var t=e.scrollLeft,s=e.scrollWidth,n=e.clientWidth;return[t,s,n]},a2=function(e,t){return e==="v"?NF(t):SF(t)},o2=function(e,t){return e==="v"?_F(t):CF(t)},EF=function(e,t){return e==="h"&&t==="rtl"?-1:1},kF=function(e,t,s,n,i){var a=EF(e,window.getComputedStyle(t).direction),o=a*n,l=s.target,c=t.contains(l),d=!1,u=o>0,h=0,m=0;do{if(!l)break;var x=o2(e,l),v=x[0],g=x[1],w=x[2],p=g-w-a*v;(v||p)&&a2(e,l)&&(h+=p,m+=v);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(i&&Math.abs(h)<1||!i&&o>h)||!u&&(i&&Math.abs(m)<1||!i&&-o>m))&&(d=!0),d},Dl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ev=function(e){return[e.deltaX,e.deltaY]},tv=function(e){return e&&"current"in e?e.current:e},TF=function(e,t){return e[0]===t[0]&&e[1]===t[1]},PF=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},AF=0,ri=[];function RF(e){var t=f.useRef([]),s=f.useRef([0,0]),n=f.useRef(),i=f.useState(AF++)[0],a=f.useState(Jp)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=SS([e.lockRef.current],(e.shards||[]).map(tv),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var p=Dl(g),y=s.current,b="deltaX"in g?g.deltaX:y[0]-p[0],j="deltaY"in g?g.deltaY:y[1]-p[1],S,R=g.target,E=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in g&&E==="h"&&R.type==="range")return!1;var _=Zy(E,R);if(!_)return!0;if(_?S=E:(S=E==="v"?"h":"v",_=Zy(E,R)),!_)return!1;if(!n.current&&"changedTouches"in g&&(b||j)&&(n.current=S),!S)return!0;var A=n.current||S;return kF(A,w,g,A==="h"?b:j,!0)},[]),c=f.useCallback(function(g){var w=g;if(!(!ri.length||ri[ri.length-1]!==a)){var p="deltaY"in w?ev(w):Dl(w),y=t.current.filter(function(S){return S.name===w.type&&(S.target===w.target||w.target===S.shadowParent)&&TF(S.delta,p)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(tv).filter(Boolean).filter(function(S){return S.contains(w.target)}),j=b.length>0?l(w,b[0]):!o.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),d=f.useCallback(function(g,w,p,y){var b={name:g,delta:w,target:p,should:y,shadowParent:OF(p)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),u=f.useCallback(function(g){s.current=Dl(g),n.current=void 0},[]),h=f.useCallback(function(g){d(g.type,ev(g),g.target,l(g,e.lockRef.current))},[]),m=f.useCallback(function(g){d(g.type,Dl(g),g.target,l(g,e.lockRef.current))},[]);f.useEffect(function(){return ri.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,si),document.addEventListener("touchmove",c,si),document.addEventListener("touchstart",u,si),function(){ri=ri.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,si),document.removeEventListener("touchmove",c,si),document.removeEventListener("touchstart",u,si)}},[]);var x=e.removeScrollBar,v=e.inert;return f.createElement(f.Fragment,null,v?f.createElement(a,{styles:PF(i)}):null,x?f.createElement(PS,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function OF(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const $F=kS(n2,RF);var l2=f.forwardRef(function(e,t){return f.createElement(Hd,Nt({},e,{ref:t,sideCar:$F}))});l2.classNames=Hd.classNames;const LF=l2;var qd="Dialog",[c2,a8]=Un(qd),[DF,Ls]=c2(qd),d2=e=>{const{__scopeDialog:t,children:s,open:n,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=f.useRef(null),c=f.useRef(null),[d,u]=Fo({prop:n,defaultProp:i??!1,onChange:a,caller:qd});return r.jsx(DF,{scope:t,triggerRef:l,contentRef:c,contentId:Ya(),titleId:Ya(),descriptionId:Ya(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(h=>!h),[u]),modal:o,children:s})};d2.displayName=qd;var u2="DialogTrigger",MF=f.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,i=Ls(u2,s),a=Yt(t,i.triggerRef);return r.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":l0(i.open),...n,ref:a,onClick:Pe(e.onClick,i.onOpenToggle)})});MF.displayName=u2;var a0="DialogPortal",[IF,h2]=c2(a0,{forceMount:void 0}),f2=e=>{const{__scopeDialog:t,forceMount:s,children:n,container:i}=e,a=Ls(a0,t);return r.jsx(IF,{scope:t,forceMount:s,children:f.Children.map(n,o=>r.jsx(Zi,{present:s||a.open,children:r.jsx(tp,{asChild:!0,container:i,children:o})}))})};f2.displayName=a0;var Jc="DialogOverlay",m2=f.forwardRef((e,t)=>{const s=h2(Jc,e.__scopeDialog),{forceMount:n=s.forceMount,...i}=e,a=Ls(Jc,e.__scopeDialog);return a.modal?r.jsx(Zi,{present:n||a.open,children:r.jsx(VF,{...i,ref:t})}):null});m2.displayName=Jc;var FF=bo("DialogOverlay.RemoveScroll"),VF=f.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,i=Ls(Jc,s);return r.jsx(LF,{as:FF,allowPinchZoom:!0,shards:[i.contentRef],children:r.jsx(Re.div,{"data-state":l0(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Fn="DialogContent",p2=f.forwardRef((e,t)=>{const s=h2(Fn,e.__scopeDialog),{forceMount:n=s.forceMount,...i}=e,a=Ls(Fn,e.__scopeDialog);return r.jsx(Zi,{present:n||a.open,children:a.modal?r.jsx(BF,{...i,ref:t}):r.jsx(zF,{...i,ref:t})})});p2.displayName=Fn;var BF=f.forwardRef((e,t)=>{const s=Ls(Fn,e.__scopeDialog),n=f.useRef(null),i=Yt(t,s.contentRef,n);return f.useEffect(()=>{const a=n.current;if(a)return NS(a)},[]),r.jsx(x2,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Pe(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Pe(e.onFocusOutside,a=>a.preventDefault())})}),zF=f.forwardRef((e,t)=>{const s=Ls(Fn,e.__scopeDialog),n=f.useRef(!1),i=f.useRef(!1);return r.jsx(x2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(l=s.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=s.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),x2=f.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=Ls(Fn,s),c=f.useRef(null),d=Yt(t,c);return bF(),r.jsxs(r.Fragment,{children:[r.jsx(s2,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:r.jsx(ep,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":l0(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(UF,{titleId:l.titleId}),r.jsx(qF,{contentRef:c,descriptionId:l.descriptionId})]})]})}),o0="DialogTitle",g2=f.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,i=Ls(o0,s);return r.jsx(Re.h2,{id:i.titleId,...n,ref:t})});g2.displayName=o0;var y2="DialogDescription",v2=f.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,i=Ls(y2,s);return r.jsx(Re.p,{id:i.descriptionId,...n,ref:t})});v2.displayName=y2;var w2="DialogClose",b2=f.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,i=Ls(w2,s);return r.jsx(Re.button,{type:"button",...n,ref:t,onClick:Pe(e.onClick,()=>i.onOpenChange(!1))})});b2.displayName=w2;function l0(e){return e?"open":"closed"}var j2="DialogTitleWarning",[o8,N2]=uk(j2,{contentName:Fn,titleName:o0,docsSlug:"dialog"}),UF=({titleId:e})=>{const t=N2(j2),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},HF="DialogDescriptionWarning",qF=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${N2(HF).contentName}}.`;return f.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},WF=d2,GF=f2,S2=m2,_2=p2,C2=g2,E2=v2,KF=b2;const c0=WF,YF=GF,k2=te.forwardRef(({className:e,...t},s)=>r.jsx(S2,{ref:s,className:de("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));k2.displayName=S2.displayName;const Wd=te.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(YF,{children:[r.jsx(k2,{}),r.jsxs(_2,{ref:n,className:de("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg","dark:bg-slate-900 dark:border-slate-800",e),...s,children:[t,r.jsxs(KF,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Dt,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wd.displayName=_2.displayName;const Gd=({className:e,...t})=>r.jsx("div",{className:de("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Gd.displayName="DialogHeader";const T2=({className:e,...t})=>r.jsx("div",{className:de("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});T2.displayName="DialogFooter";const Kd=te.forwardRef(({className:e,...t},s)=>r.jsx(C2,{ref:s,className:de("text-lg font-semibold leading-none tracking-tight","dark:text-white",e),...t}));Kd.displayName=C2.displayName;const Yd=te.forwardRef(({className:e,...t},s)=>r.jsx(E2,{ref:s,className:de("text-sm text-muted-foreground","dark:text-slate-400",e),...t}));Yd.displayName=E2.displayName;const QF=({isOpen:e,setIsOpen:t,inspection:s,onSuccess:n})=>{const{toast:i}=ue(),[a,o]=f.useState(!1),[l,c]=f.useState([]),[d,u]=f.useState({inspection_id:null,site_id:null,iso_standard:"",issue_description:"",corrective_action_required:"",assigned_poc_id:null,priority_level:"Medium",due_date:"",status:"Pending"});f.useEffect(()=>{s&&u(g=>({...g,inspection_id:s.id,site_id:s.site_id,iso_standard:s.standard||"General",issue_description:`Finding from ${s.type} inspection on ${s.date}.`}))},[s]);const h=f.useCallback(async()=>{try{const{data:g,error:w}=await M.from("users").select("id, full_name");if(w)throw w;c(g)}catch(g){i({variant:"destructive",title:"Error fetching users",description:g.message})}},[i]);f.useEffect(()=>{e&&h()},[e,h]);const m=g=>{const{name:w,value:p}=g.target;u(y=>({...y,[w]:p}))},x=(g,w)=>{u(p=>({...p,[g]:w}))},v=async g=>{g.preventDefault(),o(!0);try{const{error:w}=await M.from("iso_corrective_actions").insert([d]);if(w)throw w;i({title:"Corrective action logged successfully"}),n()}catch(w){i({variant:"destructive",title:"Error logging action",description:w.message})}finally{o(!1)}};return r.jsx(c0,{open:e,onOpenChange:t,children:r.jsxs(Wd,{className:"sm:max-w-[600px]",children:[r.jsxs(Gd,{children:[r.jsx(Kd,{children:"Log Corrective Action"}),r.jsx(Yd,{children:"Create a new corrective action plan for an inspection finding."})]}),r.jsxs("form",{onSubmit:v,className:"space-y-4 pt-4",children:[r.jsxs("div",{children:[r.jsx(G,{htmlFor:"issue_description",children:"Issue Description"}),r.jsx(dt,{id:"issue_description",name:"issue_description",value:d.issue_description,onChange:m,required:!0})]}),r.jsxs("div",{children:[r.jsx(G,{htmlFor:"corrective_action_required",children:"Corrective Action Required"}),r.jsx(dt,{id:"corrective_action_required",name:"corrective_action_required",value:d.corrective_action_required,onChange:m,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(G,{htmlFor:"assigned_poc_id",children:"Point of Contact"}),r.jsxs(we,{name:"assigned_poc_id",onValueChange:g=>x("assigned_poc_id",g),children:[r.jsx(xe,{children:r.jsx(be,{placeholder:"Assign a user..."})}),r.jsx(ge,{children:l.map(g=>r.jsx(Z,{value:g.id,children:g.full_name},g.id))})]})]}),r.jsxs("div",{children:[r.jsx(G,{htmlFor:"priority_level",children:"Priority Level"}),r.jsxs(we,{name:"priority_level",defaultValue:"Medium",onValueChange:g=>x("priority_level",g),children:[r.jsx(xe,{children:r.jsx(be,{})}),r.jsxs(ge,{children:[r.jsx(Z,{value:"Low",children:"Low"}),r.jsx(Z,{value:"Medium",children:"Medium"}),r.jsx(Z,{value:"High",children:"High"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(G,{htmlFor:"due_date",children:"Due Date"}),r.jsx(ee,{id:"due_date",name:"due_date",type:"date",value:d.due_date,onChange:m,required:!0})]}),r.jsxs(T2,{children:[r.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),r.jsxs(F,{type:"submit",disabled:a,children:[a?r.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(ys,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Action"]})]})]})]})})},JF=({inspection:e,onActionAdded:t})=>{const[s,n]=f.useState(!1),i=e.status!=="Passed";return r.jsxs(r.Fragment,{children:[r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.title}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.type==="Security"?"bg-blue-500/20 text-blue-400":e.type==="Environmental"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:e.type}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.status==="Passed"?"bg-green-500/20 text-green-400":e.status==="Minor Issues"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:e.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-400",children:[r.jsxs("span",{children:["Inspector: ",e.inspector]}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsx("span",{children:e.site}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Rs,{className:"w-4 h-4"}),r.jsx("span",{children:e.date})]}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsxs("span",{className:`font-medium ${e.score>=95?"text-green-400":e.score>=85?"text-yellow-400":"text-red-400"}`,children:["Score: ",e.score,"%"]})]})]}),r.jsx("div",{className:"flex items-center space-x-3 ml-2",children:i&&r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>n(!0),className:"border-yellow-600 hover:bg-yellow-700/50 text-yellow-400",children:[r.jsx(OT,{className:"w-4 h-4 mr-2"}),"Log Action"]})})]})}),r.jsx(QF,{isOpen:s,setIsOpen:n,inspection:e,onSuccess:()=>{n(!1),t&&t()}})]})},XF=({template:e,index:t})=>{const{toast:s}=ue();return r.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:t*.1},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer",onClick:()=>s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),children:[r.jsx(bd,{className:"w-8 h-8 text-blue-400 mb-3"}),r.jsx("h3",{className:"text-white font-medium mb-2",children:e}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Generate comprehensive ISO compliance reports"})]})},ZF=({action:e})=>{var n,i;const t=a=>{switch(a){case"Completed":return r.jsxs("span",{className:"flex items-center text-xs font-medium text-green-400 bg-green-500/20 px-2 py-1 rounded-full",children:[r.jsx(nt,{className:"w-3 h-3 mr-1.5"}),a]});case"In Progress":return r.jsxs("span",{className:"flex items-center text-xs font-medium text-yellow-400 bg-yellow-500/20 px-2 py-1 rounded-full",children:[r.jsx(Bo,{className:"w-3 h-3 mr-1.5"}),a]});default:return r.jsxs("span",{className:"flex items-center text-xs font-medium text-red-400 bg-red-500/20 px-2 py-1 rounded-full",children:[r.jsx(Gr,{className:"w-3 h-3 mr-1.5"}),a]})}},s=a=>{switch(a){case"High":return r.jsxs("span",{className:"flex items-center text-xs font-medium text-red-400",children:[r.jsx(Eu,{className:"w-3 h-3 mr-1.5"}),a]});case"Medium":return r.jsxs("span",{className:"flex items-center text-xs font-medium text-yellow-400",children:[r.jsx(Eu,{className:"w-3 h-3 mr-1.5"}),a]});default:return r.jsxs("span",{className:"flex items-center text-xs font-medium text-green-400",children:[r.jsx(Eu,{className:"w-3 h-3 mr-1.5"}),a]})}};return r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.iso_standard}),t(e.status)]}),r.jsx("p",{className:"text-sm text-slate-300 mb-3",children:e.issue_description}),r.jsxs("p",{className:"text-sm text-slate-400",children:[r.jsx("span",{className:"font-semibold text-slate-300",children:"Required Action:"})," ",e.corrective_action_required]})]}),r.jsxs("div",{className:"w-full sm:w-64 flex-shrink-0 sm:pl-4 sm:border-l sm:border-slate-700 space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center text-slate-400",children:[r.jsx(dj,{className:"w-4 h-4 mr-2 text-sky-400"}),r.jsxs("span",{children:["Site: ",r.jsx("span",{className:"text-slate-200",children:((n=e.sites)==null?void 0:n.name)||"N/A"})]})]}),r.jsxs("div",{className:"flex items-center text-slate-400",children:[r.jsx(Pn,{className:"w-4 h-4 mr-2 text-sky-400"}),r.jsxs("span",{children:["POC: ",r.jsx("span",{className:"text-slate-200",children:((i=e.users)==null?void 0:i.full_name)||"Unassigned"})]})]}),r.jsxs("div",{className:"flex items-center text-slate-400",children:[r.jsx(Rs,{className:"w-4 h-4 mr-2 text-sky-400"}),r.jsxs("span",{children:["Due: ",r.jsx("span",{className:"text-slate-200",children:e.due_date})]})]}),r.jsx("div",{className:"flex items-center text-slate-400",children:s(e.priority_level)})]})]})})},e7=()=>{const[e,t]=f.useState(""),{toast:s}=ue(),[n,i]=f.useState([]),[a,o]=f.useState(!0),l=f.useCallback(async()=>{o(!0);try{const{data:p,error:y}=await M.from("iso_corrective_actions").select(`
          *,
          users (full_name),
          sites (name)
        `).order("created_at",{ascending:!1});if(y)throw y;i(p)}catch(p){s({variant:"destructive",title:"Error fetching corrective actions",description:p.message})}finally{o(!1)}},[s]);f.useEffect(()=>{l()},[l]);const c=[{id:1,standard:"ISO 18788",title:"Security Operations Management Systems",status:"Certified",lastAudit:"2024-11-15",nextAudit:"2025-11-15",compliance:98,findings:2},{id:2,standard:"ISO 14001",title:"Environmental Management Systems",status:"Certified",lastAudit:"2024-09-20",nextAudit:"2025-09-20",compliance:95,findings:3},{id:3,standard:"ISO 45001",title:"Occupational Health & Safety Management Systems",status:"In Progress",lastAudit:"2025-02-10",nextAudit:"2025-08-10",compliance:87,findings:5}],d=[{id:1,type:"Internal Audit",standard:"ISO 18788",auditor:"Sarah Johnson",date:"2025-01-15",status:"Completed",findings:2,site:"Corporate HQ Alpha"},{id:2,type:"External Audit",standard:"ISO 14001",auditor:"External Auditor Ltd.",date:"2025-03-20",status:"Scheduled",findings:0,site:"All Sites"},{id:3,type:"Surveillance Audit",standard:"ISO 45001",auditor:"Mike Rodriguez",date:"2025-04-12",status:"In Progress",findings:1,site:"Metro Hospital East"}],u=[{id:1,title:"Security Equipment Inspection",type:"Security",inspector:"John Smith",site:"Corporate HQ Alpha",date:"2025-01-15",status:"Passed",score:95},{id:2,title:"Environmental Compliance Check",type:"Environmental",inspector:"Lisa Chen",site:"Retail Plaza Central",date:"2025-02-14",status:"Minor Issues",score:88},{id:3,title:"Safety Protocol Review",type:"Safety",inspector:"Mike Rodriguez",site:"Metro Hospital East",date:"2025-03-13",status:"Passed",score:92}],h=["Monthly Compliance Report","Audit Findings Summary","Corrective Actions Report","Management Review Report","Risk Assessment Report","Training Compliance Report"],m=()=>{s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},x=()=>{s({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},v="bg-transparent p-0 space-x-1",g="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",w="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(mj,{className:"w-8 h-8 mr-3 text-blue-400"}),"ISO Compliance Management"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage ISO 18788, 14001, and 45001 standards, audits, and inspections."})]}),r.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[r.jsxs(F,{onClick:m,className:"ios-button bg-blue-600 hover:bg-blue-700",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Schedule Audit"]}),r.jsxs(F,{onClick:x,variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(cT,{className:"w-4 h-4 mr-2"}),"New Inspection"]})]})]}),r.jsxs(Et,{defaultValue:"standards",className:"space-y-6",children:[r.jsxs(gt,{className:`${v} border-b border-slate-700`,children:[r.jsx(ie,{value:"standards",className:`${g} ${w}`,children:"ISO Standards"}),r.jsx(ie,{value:"audits",className:`${g} ${w}`,children:"Audits"}),r.jsx(ie,{value:"inspections",className:`${g} ${w}`,children:"Inspections"}),r.jsx(ie,{value:"corrective_actions",className:`${g} ${w}`,children:"Corrective Actions"}),r.jsx(ie,{value:"reports",className:`${g} ${w}`,children:"Reports"})]}),r.jsx(oe,{value:"standards",className:"space-y-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((p,y)=>r.jsx(hF,{standard:p,index:y},p.id))})}),r.jsx(oe,{value:"audits",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ni,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"ISO Audits Log"})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search audits...",value:e,onChange:p=>t(p.target.value),className:"pl-10 w-full sm:w-80 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Track internal and external ISO audits."})]}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:d.filter(p=>p.type.toLowerCase().includes(e.toLowerCase())||p.standard.toLowerCase().includes(e.toLowerCase())).map(p=>r.jsx(fF,{audit:p},p.id))})})]})}),r.jsx(oe,{value:"inspections",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(gj,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Security, Safety & Environmental Inspections"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Log and manage site inspections and security tours."})]}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:u.map(p=>r.jsx(JF,{inspection:p,onActionAdded:l},p.id))})})]})}),r.jsx(oe,{value:"corrective_actions",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(jo,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Corrective Actions Tracker"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Monitor and manage all open and completed corrective actions."})]}),r.jsx(U,{children:a?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Loading actions..."}):r.jsx("div",{className:"space-y-4",children:n.map(p=>r.jsx(ZF,{action:p},p.id))})})]})}),r.jsx(oe,{value:"reports",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(bd,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"ISO Compliance Reports"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Generate and manage ISO compliance documentation."})]}),r.jsx(U,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map((p,y)=>r.jsx(XF,{template:p,index:y},p))})})]})})]})]})},t7=({isOpen:e,setIsOpen:t,siteId:s,onSuccess:n})=>(ue(),r.jsx(c0,{open:e,onOpenChange:t,children:r.jsx(Wd,{children:r.jsxs(Gd,{children:[r.jsx(Kd,{children:"Guide Form"}),r.jsx(Yd,{children:"This feature is not yet implemented."})]})})})),s7=({isOpen:e,setIsOpen:t,siteId:s,onSuccess:n})=>(ue(),r.jsx(c0,{open:e,onOpenChange:t,children:r.jsx(Wd,{children:r.jsxs(Gd,{children:[r.jsx(Kd,{children:"Contact Form"}),r.jsx(Yd,{children:"This feature is not yet implemented."})]})})})),r7=()=>{const{toast:e}=ue(),[t,s]=f.useState([]),[n,i]=f.useState(null),[a,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState(!0),[h,m]=f.useState(!1),[x,v]=f.useState(!1),g=f.useCallback(async()=>{try{const{data:j,error:S}=await M.from("sites").select("id, name");if(S)throw S;s(j),j.length>0&&i(j[0].id)}catch(j){e({variant:"destructive",title:"Error fetching sites",description:j.message})}},[e]),w=f.useCallback(async()=>{if(n){u(!0);try{const{data:j,error:S}=await M.from("incident_command_guides").select("*").eq("site_id",n);if(S)throw S;o(j);const{data:R,error:E}=await M.from("incident_command_contacts").select("*").eq("site_id",n);if(E)throw E;c(R)}catch(j){e({variant:"destructive",title:"Error fetching site data",description:j.message})}finally{u(!1)}}},[n,e]);f.useEffect(()=>{g()},[g]),f.useEffect(()=>{w()},[w]);const p="bg-transparent p-0 space-x-1",y="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",b="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(VT,{className:"w-8 h-8 mr-3 text-red-500"}),"Incident Command Center"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage emergency guides and contacts for each site."})]}),r.jsx("div",{className:"w-full sm:w-auto mt-4 sm:mt-0",children:r.jsxs(we,{onValueChange:j=>i(j),value:n||"",children:[r.jsx(xe,{className:"w-full sm:w-72",children:r.jsx(be,{placeholder:"Select a site..."})}),r.jsx(ge,{children:t.map(j=>r.jsx(Z,{value:j.id,children:j.name},j.id))})]})})]}),r.jsxs(Et,{defaultValue:"guides",className:"space-y-6",children:[r.jsxs(gt,{className:`${p} border-b border-slate-700`,children:[r.jsx(ie,{value:"guides",className:`${y} ${b}`,children:"Quick Guides"}),r.jsx(ie,{value:"contacts",className:`${y} ${b}`,children:"Emergency Contacts"})]}),r.jsx(oe,{value:"guides",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(Y,{className:"flex items-center",children:[r.jsx(op,{className:"mr-2 text-blue-400"}),"Emergency Guides"]}),r.jsxs(F,{onClick:()=>e({title:"🚧 Feature not implemented"}),children:[r.jsx(it,{className:"mr-2 h-4 w-4"}),"Add Guide"]})]}),r.jsx(he,{children:"Site-specific procedures for emergencies."})]}),r.jsx(U,{children:d?r.jsx("p",{children:"Loading..."}):a.map(j=>r.jsx("div",{className:"p-2 border-b border-slate-700",children:j.guide_title},j.id))})]})}),r.jsx(oe,{value:"contacts",children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(Y,{className:"flex items-center",children:[r.jsx(Dn,{className:"mr-2 text-green-400"}),"Emergency Contacts"]}),r.jsxs(F,{onClick:()=>e({title:"🚧 Feature not implemented"}),children:[r.jsx(it,{className:"mr-2 h-4 w-4"}),"Add Contact"]})]}),r.jsx(he,{children:"Key personnel and services to contact during an incident."})]}),r.jsx(U,{children:d?r.jsx("p",{children:"Loading..."}):l.map(j=>r.jsxs("div",{className:"p-2 border-b border-slate-700",children:[j.contact_name," - ",j.contact_title]},j.id))})]})})]}),r.jsx(t7,{isOpen:h,setIsOpen:m,siteId:n,onSuccess:w}),r.jsx(s7,{isOpen:x,setIsOpen:v,siteId:n,onSuccess:w})]})},n7=()=>{const[e,t]=f.useState(""),[s,n]=f.useState(""),{toast:i}=ue(),a=[{id:1,name:"Visitor Management System",type:"Web Application",url:"https://visitor.example.com",status:"Connected",lastSync:"2 minutes ago",icon:Ae},{id:2,name:"Asset Tracking Mobile App",type:"Mobile Application",url:"https://assets.example.com",status:"Connected",lastSync:"15 minutes ago",icon:jj},{id:3,name:"Emergency Response Portal",type:"Web Portal",url:"https://emergency.example.com",status:"Disconnected",lastSync:"2 hours ago",icon:ut}],o=[{title:"Web Application",description:"Embed external web apps via iframe for seamless integration.",icon:vf,features:["Full screen embedding","Responsive design support","Cross-domain communication (if configured)"]},{title:"API Integration",description:"Connect mobile or backend services via secure API endpoints.",icon:jf,features:["REST/GraphQL support","Real-time data sync","OAuth 2.0 authentication"]},{title:"Desktop Connector",description:"Bridge desktop apps with web services for data exchange.",icon:Ux,features:["Local network access","Secure data tunneling","Scheduled sync tasks"]}],l=()=>{if(!e.trim()){i({variant:"destructive",title:"URL Required",description:"Please enter the URL of the external application."});return}if(!e.startsWith("http://")&&!e.startsWith("https://")){i({variant:"destructive",title:"Invalid URL",description:"Please enter a valid URL starting with http:// or https://."});return}n(e),i({title:"Application Preview Loaded",description:`Previewing ${e}. Note: Full integration may require further configuration.`})},c=u=>{i({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})},d=u=>{i({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"})};return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(zx,{className:"w-8 h-8 mr-3 text-blue-400"}),"External App Integrations"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Connect and manage third-party applications within SecureOps Pro."})]}),r.jsxs(F,{onClick:()=>i({title:"🚧 This feature isn't implemented yet—but don't worry! You can request it in your next prompt! 🚀"}),className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Add New Integration"]})]}),r.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(jf,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Quick Connect Web App"})]}),r.jsx(he,{className:"text-gray-400",children:"Enter a URL to preview and embed a web application."})]}),r.jsx(U,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:[r.jsx(ee,{placeholder:"Enter external application URL (e.g., https://example.com)",value:e,onChange:u=>t(u.target.value),className:"flex-1 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"}),r.jsxs(F,{onClick:l,className:"ios-button bg-green-600 hover:bg-green-700",children:[r.jsx(zx,{className:"w-4 h-4 mr-2"}),"Preview & Connect"]})]})})]})}),s&&r.jsx(W.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{delay:.2},children:r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center justify-between text-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ux,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Integrated Application Preview"})]}),r.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>n(""),className:"text-red-400 hover:text-red-300",children:[r.jsx(Hx,{className:"w-4 h-4 mr-1"})," Close Preview"]})]})}),r.jsxs(U,{children:[r.jsx("iframe",{src:s,title:"External Application Preview",className:"w-full h-[500px] rounded-lg border border-slate-700 bg-white",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Note: Some applications may not allow embedding due to security policies (X-Frame-Options)."})]})]})}),r.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s?.3:.2},children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Bi,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Integration Methods"})]}),r.jsx(he,{className:"text-gray-400",children:"Explore different ways to integrate external services."})]}),r.jsx(U,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map((u,h)=>r.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:(s?.4:.3)+h*.1},className:"p-6 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors flex flex-col h-full",children:[r.jsx(u.icon,{className:"w-10 h-10 text-blue-400 mb-3"}),r.jsx("h3",{className:"text-white font-semibold text-lg mb-2",children:u.title}),r.jsx("p",{className:"text-gray-400 text-sm mb-3 flex-grow",children:u.description}),r.jsx("div",{className:"space-y-1.5 mt-auto",children:u.features.map((m,x)=>r.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-300",children:[r.jsx(nt,{className:"w-3.5 h-3.5 text-green-400 flex-shrink-0"}),r.jsx("span",{children:m})]},x))})]},u.title))})})]})}),r.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s?.5:.4},children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Vx,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Currently Connected Applications"})]}),r.jsx(he,{className:"text-gray-400",children:"Manage your existing integrations."})]}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:a.map(u=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-1.5",children:[r.jsx(u.icon,{className:`w-5 h-5 ${u.status==="Connected"?"text-green-400":"text-red-400"}`}),r.jsx("h3",{className:"text-white font-semibold",children:u.name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${u.status==="Connected"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:u.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsx("span",{className:"truncate max-w-[200px] sm:max-w-xs",title:u.url,children:u.url}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Last sync: ",u.lastSync]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2 sm:mt-0",children:[r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>d(u.id),className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(Bi,{className:"w-3.5 h-3.5 mr-1 sm:mr-0"})," ",r.jsx("span",{className:"hidden sm:inline ml-1",children:"Config"})]}),r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>window.open(u.url,"_blank"),className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(Vx,{className:"w-3.5 h-3.5 mr-1 sm:mr-0"})," ",r.jsx("span",{className:"hidden sm:inline ml-1",children:"Open"})]}),r.jsxs(F,{variant:"outline",size:"sm",onClick:()=>c(u.id),className:"ios-button border-red-500/50 text-red-400 hover:bg-red-500/20",children:[r.jsx(Hx,{className:"w-3.5 h-3.5 mr-1 sm:mr-0"})," ",r.jsx("span",{className:"hidden sm:inline ml-1",children:"Off"})]})]})]})},u.id))})})]})})]})};function i7(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function a7(e){const[t,s]=f.useState(void 0);return qs(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;s({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else s(void 0)},[e]),t}var Qd="Switch",[o7,l8]=Un(Qd),[l7,c7]=o7(Qd),P2=f.forwardRef((e,t)=>{const{__scopeSwitch:s,name:n,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[m,x]=f.useState(null),v=Yt(t,b=>x(b)),g=f.useRef(!1),w=m?u||!!m.closest("form"):!0,[p,y]=Fo({prop:i,defaultProp:a??!1,onChange:d,caller:Qd});return r.jsxs(l7,{scope:s,checked:p,disabled:l,children:[r.jsx(Re.button,{type:"button",role:"switch","aria-checked":p,"aria-required":o,"data-state":$2(p),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:Pe(e.onClick,b=>{y(j=>!j),w&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),w&&r.jsx(O2,{control:m,bubbles:!g.current,name:n,value:c,checked:p,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});P2.displayName=Qd;var A2="SwitchThumb",R2=f.forwardRef((e,t)=>{const{__scopeSwitch:s,...n}=e,i=c7(A2,s);return r.jsx(Re.span,{"data-state":$2(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});R2.displayName=A2;var d7="SwitchBubbleInput",O2=f.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:n=!0,...i},a)=>{const o=f.useRef(null),l=Yt(o,a),c=i7(s),d=a7(t);return f.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==s&&x){const v=new Event("click",{bubbles:n});x.call(u,s),u.dispatchEvent(v)}},[c,s,n]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});O2.displayName=d7;function $2(e){return e?"checked":"unchecked"}var L2=P2,u7=R2;const D2=te.forwardRef(({className:e,...t},s)=>r.jsx(L2,{className:de("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input","data-[state=checked]:bg-blue-600 data-[state=unchecked]:bg-slate-700",e),...t,ref:s,children:r.jsx(u7,{className:de("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0","bg-white")})}));D2.displayName=L2.displayName;const h7=()=>{const{toast:e}=ue(),[t,s]=f.useState({}),[n,i]=f.useState(!0),[a,o]=f.useState(!1),l=[{key:"default_incident_distribution_high_severity",label:"High Severity Incident Distribution",type:"json",description:'JSON defining levels (e.g., ["national"]) and roles (e.g., ["executive"]) for high severity incident report distribution.',icon:Ix,category:"Distribution"},{key:"default_violation_distribution_critical",label:"Critical Violation Distribution",type:"json",description:"JSON defining distribution for critical violations.",icon:Ix,category:"Distribution"},{key:"allow_security_company_data_sharing",label:"Allow Security Company Data Sharing with Client",type:"boolean",description:"If enabled, clients can view relevant data from assigned security companies.",icon:Ae,category:"Access Control"},{key:"max_incident_attachment_size_mb",label:"Max Incident Attachment Size (MB)",type:"number",description:"Maximum file size in MB for attachments to incident reports.",icon:Rt,category:"System"},{key:"auto_archive_reports_days",label:"Auto-Archive Reports After (Days)",type:"number",description:"Number of days after which completed reports are auto-archived. 0 to disable.",icon:ys,category:"System"},{key:"api_key_external_integrations",label:"External Integrations API Key",type:"text",description:"API Key for secure communication with external partner applications.",icon:pj,category:"Integrations"}],c=f.useCallback(async()=>{i(!0);try{const{data:m,error:x}=await M.from("admin_settings").select("setting_key, setting_value");if(x)throw x;const v=m.reduce((w,{setting_key:p,setting_value:y})=>(w[p]=y,w),{}),g={};l.forEach(w=>{g[w.key]=v[w.key]??(w.type==="json"?{}:w.type==="boolean"?!1:w.type==="number"?0:"")}),s(g)}catch(m){e({variant:"destructive",title:"Error fetching settings",description:m.message})}finally{i(!1)}},[e]);f.useEffect(()=>{c()},[c]);const d=(m,x,v)=>{s(v==="number"?g=>({...g,[m]:x===""?"":Number(x)}):g=>({...g,[m]:x}))},u=async()=>{o(!0);const m=l.map(x=>{let v=t[x.key];if(x.type==="json"&&typeof v=="string")try{v=v.trim()===""?{}:JSON.parse(v)}catch{return e({variant:"destructive",title:`Invalid JSON for ${x.label}`,description:"Please correct the JSON format."}),Promise.reject(new Error(`Invalid JSON for ${x.label}`))}return M.from("admin_settings").upsert({setting_key:x.key,setting_value:v,description:x.description},{onConflict:"setting_key"})});try{await Promise.all(m),e({title:"Settings Saved",description:"All admin settings have been updated successfully."})}catch(x){x.message.startsWith("Invalid JSON")||e({variant:"destructive",title:"Error Saving Settings",description:x.message})}finally{o(!1)}};if(n)return r.jsx("div",{className:"text-center py-10 text-white",children:"Loading Admin Settings..."});const h=l.reduce((m,x)=>{const v=x.category||"General";return m[v]=m[v]?[...m[v],x]:[x],m},{});return r.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8 pb-10",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Bi,{className:"w-8 h-8 mr-3 text-blue-400"}),"Admin Settings"]})}),Object.entries(h).map(([m,x])=>r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"text-xl text-white flex items-center",children:[te.createElement(x[0].icon,{className:"w-6 h-6 mr-2 text-blue-400"}),m," Settings"]})}),r.jsx(U,{className:"space-y-6",children:x.map(v=>r.jsxs("div",{className:"space-y-2 p-4 border border-slate-700 rounded-lg bg-slate-800/40",children:[r.jsxs(G,{htmlFor:v.key,className:"text-base font-medium text-gray-200 flex items-center",children:[te.createElement(v.icon,{className:"w-4 h-4 mr-2 text-slate-400"})," ",v.label]}),r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:v.description}),v.type==="json"&&r.jsx(dt,{id:v.key,value:typeof t[v.key]=="object"?JSON.stringify(t[v.key],null,2):t[v.key],onChange:g=>d(v.key,g.target.value,"json"),rows:3}),v.type==="boolean"&&r.jsxs("div",{className:"flex items-center space-x-2 pt-1",children:[r.jsx(D2,{id:v.key,checked:!!t[v.key],onCheckedChange:g=>d(v.key,g,"boolean"),className:"data-[state=checked]:bg-blue-500"}),r.jsx(G,{htmlFor:v.key,className:"text-sm text-gray-300",children:t[v.key]?"Enabled":"Disabled"})]}),v.type==="number"&&r.jsx(ee,{id:v.key,type:"number",value:t[v.key]??"",onChange:g=>d(v.key,g.target.value,"number")}),v.type==="text"&&r.jsx(ee,{id:v.key,type:"text",value:t[v.key]||"",onChange:g=>d(v.key,g.target.value,"text")})]},v.key))})]},m)),r.jsx("div",{className:"flex justify-end mt-8",children:r.jsxs(F,{onClick:u,disabled:a||n,className:"bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg text-base",children:[r.jsx(ys,{className:"w-5 h-5 mr-2"}),a?"Saving...":"Save All Settings"]})})]})},Xa={async getIncidents(){const{data:e,error:t}=await M.from("health_safety_incidents").select(`
        id, 
        site_id, 
        description, 
        incident_date, 
        investigation_status, 
        report_url,
        created_at,
        sites ( name )
      `).order("incident_date",{ascending:!1});if(t)throw t;return e.map(s=>{var n;return{...s,site_name:((n=s.sites)==null?void 0:n.name)||"N/A",reported_by_name:"N/A (User info not available)"}})},async getSites(){const{data:e,error:t}=await M.from("sites").select("id, name").order("name");if(t)throw t;return e},async createIncident(e){const{data:t,error:s}=await M.from("health_safety_incidents").insert([e]).select();if(s)throw s;return t[0]},async updateIncident(e,t){const{data:s,error:n}=await M.from("health_safety_incidents").update(t).eq("id",e).select();if(n)throw n;return s[0]},async updateIncidentStatus(e,t){const{data:s,error:n}=await M.from("health_safety_incidents").update({investigation_status:t}).eq("id",e).select();if(n)throw n;return s[0]},async deleteIncident(e){const{error:t}=await M.from("health_safety_incidents").delete().eq("id",e);if(t)throw t;return!0},async getIncidentStats(){const{data:e,error:t}=await M.from("health_safety_incidents").select("investigation_status, incident_date");if(t)throw t;return{total:e.length,open:e.filter(n=>n.investigation_status==="open").length,inProgress:e.filter(n=>n.investigation_status==="in_progress").length,closed:e.filter(n=>n.investigation_status==="closed").length,thisMonth:e.filter(n=>{const i=new Date(n.incident_date),a=new Date;return i.getMonth()===a.getMonth()&&i.getFullYear()===a.getFullYear()}).length}},async searchIncidents(e){const{data:t,error:s}=await M.from("health_safety_incidents").select(`
        id, 
        site_id, 
        description, 
        incident_date, 
        investigation_status, 
        report_url,
        created_at,
        sites ( name )
      `).or(`description.ilike.%${e}%,sites.name.ilike.%${e}%`).order("incident_date",{ascending:!1});if(s)throw s;return t.map(n=>{var i;return{...n,site_name:((i=n.sites)==null?void 0:i.name)||"N/A",reported_by_name:"N/A (User info not available)"}})}},f7=({incident:e=null,onClose:t,onSuccess:s})=>{const[n,i]=f.useState({site_id:"",description:"",incident_date:new Date().toISOString().split("T")[0],investigation_status:"open",report_file:null}),[a,o]=f.useState([]),[l,c]=f.useState(!1),[d,u]=f.useState(null),{toast:h}=ue(),m=!!e;f.useEffect(()=>{(async()=>{try{const{data:{user:p}}=await M.auth.getUser();u(p);const y=await Xa.getSites();o(y)}catch(p){console.error("Error fetching initial data:",p),h({title:"Error",description:"Failed to load form data. Please try again.",variant:"destructive"})}})()},[h]),f.useEffect(()=>{e&&i({site_id:e.site_id||"",description:e.description||"",incident_date:e.incident_date?new Date(e.incident_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],investigation_status:e.investigation_status||"open",report_file:null})},[e]);const x=(w,p)=>{i(y=>({...y,[w]:p}))},v=w=>{var y;const p=(y=w.target.files)==null?void 0:y[0];p&&(i(b=>({...b,report_file:p})),h({title:"File Selected",description:`File "${p.name}" selected for upload.`}))},g=async w=>{if(w.preventDefault(),!d){h({title:"Authentication Required",description:"Please log in to report an incident.",variant:"destructive"});return}c(!0);try{const p={site_id:n.site_id,description:n.description,incident_date:n.incident_date,reported_by_id:d.id,investigation_status:n.investigation_status};let y;m?y=await Xa.updateIncident(e.id,p):y=await Xa.createIncident(p),h({title:m?"Incident Updated":"Incident Reported",description:`Health & safety incident has been ${m?"updated":"reported"} successfully.`,variant:"default"}),s==null||s(y),t()}catch(p){console.error("Error saving incident:",p),h({title:"Error",description:p.message||"Failed to save incident. Please try again.",variant:"destructive"})}finally{c(!1)}};return r.jsx(jt,{children:r.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:w=>w.stopPropagation(),children:r.jsxs(H,{className:"ios-card",children:[r.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[m?r.jsx(gs,{className:"w-5 h-5 text-blue-400"}):r.jsx(ut,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:m?"Edit Incident":"Report New Incident"})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Dt,{className:"w-4 h-4"})})]}),r.jsx(U,{children:r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"site_id",className:"text-white",children:"Site"}),r.jsxs(we,{value:n.site_id,onValueChange:w=>x("site_id",w),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{placeholder:"Select site"})}),r.jsx(ge,{className:"bg-slate-800 border-slate-600",children:a.map(w=>r.jsx(Z,{value:w.id,className:"text-white",children:w.name},w.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"incident_date",className:"text-white",children:"Incident Date"}),r.jsx(ee,{id:"incident_date",type:"date",value:n.incident_date,onChange:w=>x("incident_date",w.target.value),className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),m&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"investigation_status",className:"text-white",children:"Investigation Status"}),r.jsxs(we,{value:n.investigation_status,onValueChange:w=>x("investigation_status",w),children:[r.jsx(xe,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(be,{})}),r.jsxs(ge,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"open",className:"text-white",children:"Open"}),r.jsx(Z,{value:"in_progress",className:"text-white",children:"In Progress"}),r.jsx(Z,{value:"closed",className:"text-white",children:"Closed"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"description",className:"text-white",children:"Description of Incident"}),r.jsx(dt,{id:"description",value:n.description,onChange:w=>x("description",w.target.value),placeholder:"Describe what happened, when, where, and any relevant details...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[120px]",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{htmlFor:"report_file",className:"text-white",children:"Upload Report/Media (Optional)"}),r.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-600 border-dashed rounded-md bg-slate-800/30",children:r.jsxs("div",{className:"space-y-1 text-center",children:[r.jsx(UT,{className:"mx-auto h-12 w-12 text-slate-400"}),r.jsxs("div",{className:"flex text-sm text-slate-500",children:[r.jsxs("label",{htmlFor:"report_file",className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500 focus-within:ring-offset-slate-900",children:[r.jsx("span",{children:"Upload a file"}),r.jsx(ee,{id:"report_file",name:"report_file",type:"file",className:"sr-only",onChange:v,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx"})]}),r.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"PDF, JPG, PNG, DOC up to 10MB"})]})}),n.report_file&&r.jsxs("p",{className:"text-sm text-green-400 mt-2",children:["File selected: ",n.report_file.name]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(F,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"}),r.jsx(F,{type:"submit",disabled:l,className:"bg-red-600 hover:bg-red-700",children:l?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ys,{className:"w-4 h-4"}),r.jsxs("span",{children:[m?"Update":"Report"," Incident"]})]})})]})]})})]})})})})},m7=()=>{const{toast:e}=ue(),[t,s]=f.useState([]),[n,i]=f.useState(!0),[a,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState(""),h=f.useCallback(async()=>{i(!0);try{const p=await Xa.getIncidents();s(p)}catch(p){e({variant:"destructive",title:"Error fetching data",description:p.message})}finally{i(!1)}},[e]);f.useEffect(()=>{h()},[h]);const m=()=>{h()},x=p=>{c(p),o(!0)},v=()=>{o(!1),c(null)},g=async(p,y)=>{if(window.confirm(`Are you sure you want to change status to "${y.replace("_"," ")}"?`)){i(!0);try{await Xa.updateIncidentStatus(p,y),e({title:"Incident status updated successfully"}),h()}catch(b){e({variant:"destructive",title:"Error updating status",description:b.message})}finally{i(!1)}}},w=t.filter(p=>p.site_name.toLowerCase().includes(d.toLowerCase())||p.description.toLowerCase().includes(d.toLowerCase())||p.reported_by_name.toLowerCase().includes(d.toLowerCase()));return n&&t.length===0&&!a?r.jsx("div",{className:"text-center py-10 text-white",children:"Loading Health & Safety Incidents..."}):r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Io,{to:"/",className:"p-2 rounded-full hover:bg-slate-700/50 transition-colors bg-[#607D8B] hover:bg-[#546E7A] text-white",children:r.jsx(ap,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(bj,{className:"w-8 h-8 mr-3 text-red-400"}),"Health & Safety"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Report and manage workplace health and safety incidents."})]})]}),!a&&r.jsxs(F,{onClick:()=>o(!0),className:"bg-[#607D8B] hover:bg-[#546E7A] text-white mt-4 sm:mt-0",children:[r.jsx(it,{className:"w-4 h-4 mr-2"}),"Report New Incident"]})]}),a&&r.jsx(f7,{incident:l,onClose:v,onSuccess:m}),!a&&r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Y,{className:"text-xl text-white",children:"Incident Log"}),r.jsx(he,{className:"text-gray-400",children:"Review all reported health and safety incidents."})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search incidents...",value:d,onChange:p=>u(p.target.value),className:"pl-10 w-full sm:w-72 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]})}),r.jsx(U,{children:n&&t.length===0?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Loading incidents..."}):!n&&t.length===0?r.jsx("p",{className:"text-center text-gray-400 py-4",children:'No health & safety incidents reported yet. Click "Report New Incident" to get started.'}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(t0,{children:[r.jsx(s0,{className:"ios-table-header",children:r.jsxs(Po,{children:[r.jsx(us,{children:"Site"}),r.jsx(us,{children:"Description"}),r.jsx(us,{children:"Date"}),r.jsx(us,{children:"Status"}),r.jsx(us,{children:"Reported By"}),r.jsx(us,{className:"text-right",children:"Actions"})]})}),r.jsx(r0,{className:"dark-table-row-hover",children:w.map(p=>r.jsxs(Po,{children:[r.jsx(hs,{className:"font-medium text-white",children:p.site_name}),r.jsx(hs,{className:"max-w-xs truncate",title:p.description,children:p.description}),r.jsx(hs,{children:new Date(p.incident_date).toLocaleDateString()}),r.jsx(hs,{children:r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${p.investigation_status==="open"?"bg-yellow-500/20 text-yellow-400":p.investigation_status==="in_progress"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:p.investigation_status.replace("_"," ").toUpperCase()})}),r.jsx(hs,{children:p.reported_by_name}),r.jsxs(hs,{className:"text-right space-x-1 md:space-x-2",children:[r.jsx(F,{variant:"ghost",size:"icon",onClick:()=>x(p),className:"hover:bg-blue-500/20 text-blue-400 bg-[#607D8B] hover:bg-[#546E7A] p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8",children:r.jsx(gs,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),p.investigation_status==="open"&&r.jsx(F,{variant:"ghost",size:"icon",onClick:()=>g(p.id,"in_progress"),className:"hover:bg-orange-500/20 text-orange-400 bg-[#607D8B] hover:bg-[#546E7A] p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8",children:r.jsx(Ct,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),p.investigation_status==="in_progress"&&r.jsx(F,{variant:"ghost",size:"icon",onClick:()=>g(p.id,"closed"),className:"hover:bg-green-500/20 text-green-400 bg-[#607D8B] hover:bg-[#546E7A] p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8",children:r.jsx(lT,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),p.report_url&&r.jsx(F,{variant:"ghost",size:"icon",onClick:()=>e({title:"Feature Not Implemented",description:"Viewing/downloading reports is not yet implemented. 🚧"}),className:"hover:bg-purple-500/20 text-purple-400 bg-[#607D8B] hover:bg-[#546E7A] p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8",children:r.jsx(He,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]})]},p.id))})]})})})]})]})},sv={title:"GS-3 SecureOps Pro Platform",version:"1.0.0",lastUpdated:new Date().toISOString().split("T")[0],description:"A comprehensive security operations management platform designed to streamline and enhance protective services through real-time monitoring, AI-driven analytics, and robust reporting tools. This portal provides an in-depth look at the project's architecture and codebase.",keyFeatures:[{title:"Unified Dashboard",description:"Centralized view of all operational metrics, active alerts, and system statuses.",icon:"LayoutDashboard"},{title:"Hierarchical Site Management",description:"Flexible system to define and manage sites, regions, and national entities.",icon:"Network"},{title:"Real-time Alerts & Notifications",description:"A dynamic ticker and notification system for immediate operational awareness.",icon:"AlertTriangle"},{title:"Role-Based Access Control (RBAC)",description:"Granular permission system to tailor user access based on roles like Admin, Supervisor, and Client.",icon:"Users"},{title:"ISO & Health/Safety Compliance",description:"Dedicated modules for tracking compliance, incidents, and audits.",icon:"ShieldCheck"},{title:"Extensible Admin Settings",description:"UI for configuring system-wide parameters and integration settings.",icon:"Settings"}],techStack:[{name:"React",version:"18.2.0",type:"Frontend Library"},{name:"Vite",version:"4.4.5",type:"Build Tool"},{name:"TailwindCSS",version:"3.3.3",type:"CSS Framework"},{name:"Supabase",version:"2.30.0",type:"Backend as a Service"},{name:"Framer Motion",version:"10.16.4",type:"Animation Library"},{name:"shadcn/ui",version:"Latest",type:"Component Library"}]},p7={name:"package.json",type:"file",content:`{
  "name": "security-management-platform",
  "type": "module",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@radix-ui/react-alert-dialog": "^1.0.5",
    "@radix-ui/react-avatar": "^1.0.3",
    "@radix-ui/react-checkbox": "^1.0.4",
    "@radix-ui/react-dialog": "^1.0.5",
    "@radix-ui/react-dropdown-menu": "^2.0.5",
    "@radix-ui/react-label": "^2.0.2",
    "@radix-ui/react-slot": "^1.0.2",
    "@radix-ui/react-tabs": "^1.0.4",
    "@radix-ui/react-toast": "^1.1.5",
    "@radix-ui/react-slider": "^1.1.2",
    "@radix-ui/react-select": "^1.2.2",
    "@radix-ui/react-switch": "^1.0.3",
    "@supabase/supabase-js": "2.30.0",
    "class-variance-authority": "^0.7.0",
    "clsx": "^2.0.0",
    "framer-motion": "^10.16.4",
    "lucide-react": "^0.285.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-helmet": "^6.1.0",
    "react-router-dom": "^6.16.0",
    "tailwind-merge": "^1.14.0",
    "tailwindcss-animate": "^1.0.7"
  },
  "devDependencies": {
    "@types/node": "^20.8.3",
    "@types/react": "^18.2.15",
    "@types/react-dom": "^18.2.7",
    "@vitejs/plugin-react": "^4.0.3",
    "autoprefixer": "^10.4.16",
    "postcss": "^8.4.31",
    "tailwindcss": "^3.3.3",
    "vite": "^4.4.5"
  }
}`},x7=[p7,{name:"tailwind.config.js",type:"file",content:"// Not relevant for this snapshot"},{name:"postcss.config.js",type:"file",content:"// Not relevant for this snapshot"},{name:"index.html",type:"file",content:"// Not relevant for this snapshot"},{name:"vite.config.js",type:"file",content:"// Not relevant for this snapshot"}],g7=`import React, { useEffect, useState, useCallback } from 'react';
import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import { Helmet } from 'react-helmet';
import { Toaster } from '@/components/ui/toaster';
import Layout from '@/components/Layout';
import Dashboard from '@/pages/Dashboard';
import Assessments from '@/pages/Assessments';
import Sites from '@/pages/Sites';
import Employees from '@/pages/Employees';
import SecurityCompanies from '@/pages/SecurityCompanies';
import Training from '@/pages/Training';
import LiveClasses from '@/pages/LiveClasses';
import NFCManagement from '@/pages/NFCManagement';
import reportRoutes from '@/routes/reportRoutes';
import Scheduling from '@/pages/Scheduling';
import Analytics from '@/pages/Analytics';
import Messaging from '@/pages/Messaging';
import ISO from '@/pages/ISO';
import ExternalApp from '@/pages/ExternalApp';
import AdminSettings from '@/pages/AdminSettings';
import HealthSafety from '@/pages/HealthSafety';
import DeveloperPage from '@/pages/DeveloperPage';
import { supabase } from '@/lib/supabaseClient';
import { useToast } from '@/components/ui/use-toast';

const PerformancePage = () => <div className="text-white p-5"><h1>Performance Evaluations Page</h1><p>Content coming soon...</p></div>;
const IncidentsPage = () => <div className="text-white p-5"><h1>Incidents Page</h1><p>Content coming soon...</p></div>;
const ObservationsPage = () => <div className="text-white p-5"><h1>Observations Page</h1><p>Content coming soon...</p></div>;
const LoginManagementPage = () => <div className="text-white p-5"><h1>Login Management Page</h1><p>Content coming soon...</p></div>;

function App() {
  const { toast } = useToast();
  const [userRole, setUserRole] = useState(null);
  const [loadingRole, setLoadingRole] = useState(true);

  const checkUserSession = useCallback(async () => {
    try {
      const { data: { session }, error: sessionError } = await supabase.auth.getSession();

      if (sessionError) {
        if (sessionError.message.includes('bad_jwt')) {
          console.error("Bad JWT detected. Forcing sign-out.");
          await supabase.auth.signOut();
          setUserRole(null);
          toast({
            variant: "destructive",
            title: "Session Invalid",
            description: "Your session has expired or is invalid. Please log in again.",
          });
          return;
        }
        throw new Error(\`Supabase session error: \${sessionError.message}\`);
      }

      if (session?.user) {
        const { data: userData, error: userError } = await supabase
          .from('users')
          .select('role, full_name')
          .eq('auth_user_id', session.user.id)
          .single();

        if (userError || !userData) {
          console.error('Error fetching user profile or user not found. Forcing sign-out.', userError?.message);
          await supabase.auth.signOut();
          setUserRole(null);
          toast({
            variant: "destructive",
            title: "User Profile Error",
            description: "Could not find your user profile. Please log in again or contact support.",
          });
        } else {
          setUserRole(userData.role);
        }
      } else {
        setUserRole(null);
      }
    } catch (error) {
      console.error('Critical error in user session check. Forcing sign-out.', error);
      await supabase.auth.signOut().catch(e => console.error("Sign out failed during error handling:", e));
      setUserRole(null);
      toast({
        variant: "destructive",
        title: "Application Error",
        description: "An unexpected error occurred. Please try logging in again.",
      });
    } finally {
      setLoadingRole(false);
    }
  }, [toast]);

  useEffect(() => {
    checkUserSession();

    const { data: { subscription } } = supabase.auth.onAuthStateChange((event) => {
      if (event === 'SIGNED_OUT') {
        setUserRole(null);
      } else if (event === 'SIGNED_IN' || event === 'TOKEN_REFRESHED' || event === 'USER_UPDATED') {
        checkUserSession();
      }
    });

    return () => {
      subscription?.unsubscribe();
    };
  }, [checkUserSession]);

  if (loadingRole) {
    return (
      <div className="min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 to-black text-white p-4">
        <img  alt="GS-3 SecureOps Pro Logo loading" className="w-32 h-32 mb-6 animate-pulse" src="https://images.unsplash.com/photo-1575821104894-b683ce7525ff" />
        <h1 className="text-2xl font-semibold mb-2">GS-3 SecureOps Pro</h1>
        <p className="text-slate-400">Initializing Security Management Platform...</p>
        <div className="mt-8 w-16 h-16 border-4 border-dashed rounded-full animate-spin border-blue-500"></div>
      </div>
    );
  }

  return (
    <>
      <Helmet>
        <title>GS-3 SecureOps Pro | Advanced Security Management</title>
        <meta name="description" content="GS-3 SecureOps Pro: Leading security operations platform with AI analytics, real-time monitoring, and comprehensive tools for protective services. Domain: gs-3.pro" />
        <link rel="canonical" href="https://gs-3.pro" />
      </Helmet>
      <Router>
        <div className="min-h-screen bg-gradient-to-br from-slate-900 to-black">
          <Routes>
            <Route path="/developer" element={<DeveloperPage />} />
            <Route path="/" element={<Layout userRole={userRole} />}>
              <Route index element={<Dashboard userRole={userRole} />} />
              <Route path="assessments" element={<Assessments />} />
              <Route path="sites" element={<Sites />} />
              <Route path="employees" element={<Employees />} />
              <Route path="performance" element={<PerformancePage />} />
              <Route path="security-companies" element={<SecurityCompanies />} />
              <Route path="training" element={<Training />} />
              <Route path="live-classes" element={<LiveClasses />} />
              <Route path="nfc" element={<NFCManagement />} />
              {reportRoutes}
              <Route path="reports/incidents" element={<IncidentsPage />} />
              <Route path="reports/observations" element={<ObservationsPage />} />
              <Route path="scheduling" element={<Scheduling />} />
              <Route path="analytics" element={<Analytics />} />
              <Route path="messaging" element={<Messaging />} />
              <Route path="iso" element={<ISO />} />
              <Route path="health-safety" element={<HealthSafety />} />
              <Route path="external-app" element={<ExternalApp />} />
              <Route path="login-management" element={<LoginManagementPage />} />
              <Route path="admin-settings" element={userRole === 'admin' ? <AdminSettings /> : <Navigate to="/" replace />} />
              <Route path="*" element={<Navigate to="/" replace />} />
            </Route>
          </Routes>
          <Toaster />
        </div>
      </Router>
    </>
  );
}

export default App;
`,y7=`import React from 'react';
import ReactDOM from 'react-dom/client';
import App from '@/App';
import '@/index.css';

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
`,v7=`@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 224 71% 4%;
    --foreground: 210 40% 98%;
    --card: 224 71% 10%;
    --card-foreground: 210 40% 98%;
    --popover: 224 71% 4%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 50.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217 32.6% 17.5%;
    --input: 217 32.6% 17.5%;
    --ring: 216 80% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-thin::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
.scrollbar-thin::-webkit-scrollbar-track {
  @apply bg-slate-800/50 rounded-full;
}
.scrollbar-thin::-webkit-scrollbar-thumb {
  @apply bg-slate-700 rounded-full;
}
.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  @apply bg-slate-600;
}

.glass-effect {
  background: rgba(30, 41, 59, 0.6);
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.ios-card {
  @apply bg-slate-800/70 backdrop-blur-md border border-slate-700/80 rounded-xl shadow-xl;
}
.ios-card .card-header { @apply p-4 sm:p-5; }
.ios-card .card-content { @apply p-4 sm:p-5; }
.ios-card .card-title { @apply text-lg sm:text-xl; }

.ios-table-header {
  @apply border-b border-slate-700;
}
.ios-table-header th {
  @apply text-xs uppercase text-slate-400 tracking-wider font-semibold py-3 px-4;
}
.dark-table-row-hover tbody tr {
  @apply border-b border-slate-700/50 transition-colors duration-150;
}
.dark-table-row-hover tbody tr:hover {
  @apply bg-slate-700/30;
}
.dark-table-row-hover tbody tr td {
  @apply py-3 px-4 text-sm text-slate-300;
}

.hover-lift {
  @apply transition-all duration-300 ease-in-out;
}
.hover-lift:hover {
  @apply transform -translate-y-1 shadow-2xl;
}

.glass-button {
  @apply bg-slate-700/50 backdrop-blur-sm border border-slate-600/70 text-slate-200 hover:bg-slate-600/70 hover:border-slate-500/70 transition-all duration-200;
}

.nav-blur {
  background: rgba(15, 23, 42, 0.85);
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  border-right: 1px solid rgba(51, 65, 85, 0.5);
}

.ticker-red { @apply bg-red-600/70 hover:bg-red-500/70; }
.ticker-orange { @apply bg-orange-500/70 hover:bg-orange-400/70; }
.ticker-yellow { @apply bg-yellow-500/70 hover:bg-yellow-400/70; }
.ticker-green { @apply bg-green-600/70 hover:bg-green-500/70; }
.ticker-blue { @apply bg-blue-600/70 hover:bg-blue-500/70; }
.ticker-slate { @apply bg-slate-600/70 hover:bg-slate-500/70; }
`,w7=`import React, { useState, useEffect } from 'react';
import { motion } from 'framer-motion';
import { Loader2, AlertTriangle, Code } from 'lucide-react';

const CodeViewer = ({ file }) => {
  const [content, setContent] = useState('Select a file to view its content.');
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState(null);

  useEffect(() => {
    if (file) {
      setIsLoading(true);
      setError(null);
      
      setTimeout(() => {
        if (file.content) {
          setContent(file.content);
        } else {
          setError('File content is not available or could not be loaded.');
          setContent('');
        }
        setIsLoading(false);
      }, 200);
    }
  }, [file]);

  const renderContent = () => {
    if (isLoading) {
      return (
        <div className="flex flex-col items-center justify-center h-full text-slate-400">
          <Loader2 className="w-8 h-8 animate-spin mb-4" />
          <p>Loading file content...</p>
        </div>
      );
    }
    if (error) {
      return (
        <div className="flex flex-col items-center justify-center h-full text-yellow-400">
          <AlertTriangle className="w-8 h-8 mb-4" />
          <p>{error}</p>
        </div>
      );
    }
    if (!file) {
        return (
             <div className="flex flex-col items-center justify-center h-full text-slate-400">
                <Code className="w-12 h-12 mb-4 text-sky-400" />
                <h3 className="text-lg font-semibold text-white">Select a file</h3>
                <p>Choose a file from the tree on the left to view its source code.</p>
            </div>
        )
    }
    return (
      <pre className="p-4"><code className="text-sm">{content}</code></pre>
    );
  };

  return (
    <div className="bg-slate-900/70 text-white font-mono rounded-lg h-full overflow-auto scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-800/50">
      {renderContent()}
    </div>
  );
};

export default CodeViewer;
`,b7=`import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { File, Folder, ChevronRight, ChevronDown, Loader2 } from 'lucide-react';
import { projectFiles } from '@/data/projectFiles.js';

const FileNode = ({ node, onFileSelect, level = 0 }) => {
  const [isOpen, setIsOpen] = useState(level < 1);

  const handleToggle = () => {
    if (node.type === 'folder') {
      setIsOpen(!isOpen);
    } else {
      onFileSelect(node);
    }
  };

  const isFolder = node.type === 'folder';

  return (
    <div>
      <div
        onClick={handleToggle}
        className="flex items-center p-1.5 rounded-md hover:bg-slate-700/50 cursor-pointer transition-colors"
        style={{ paddingLeft: \`\${level * 1.25 + 0.5}rem\` }}
      >
        {isFolder ? (
          isOpen ? <ChevronDown className="w-4 h-4 mr-2 flex-shrink-0" /> : <ChevronRight className="w-4 h-4 mr-2 flex-shrink-0" />
        ) : (
          <File className="w-4 h-4 mr-2 flex-shrink-0 text-sky-400" />
        )}
        {isFolder ? (
          <Folder className="w-4 h-4 mr-2 flex-shrink-0 text-yellow-400" />
        ) : null}
        <span className="text-sm text-slate-300 truncate">{node.name}</span>
      </div>
      <AnimatePresence>
        {isFolder && isOpen && (
          <motion.div
            initial={{ height: 0, opacity: 0 }}
            animate={{ height: 'auto', opacity: 1 }}
            exit={{ height: 0, opacity: 0 }}
            className="overflow-hidden"
          >
            {node.children.map((childNode, index) => (
              <FileNode key={index} node={childNode} onFileSelect={onFileSelect} level={level + 1} />
            ))}
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
};

const FileTree = ({ onFileSelect }) => {
  const [fileStructure, setFileStructure] = useState(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    setTimeout(() => {
      setFileStructure(projectFiles);
      setIsLoading(false);
    }, 100);
  }, []);

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-full text-slate-400">
        <Loader2 className="w-6 h-6 animate-spin mr-2" />
        <span>Loading Project...</span>
      </div>
    );
  }

  return (
    <div className="bg-slate-800/50 text-white rounded-lg p-2 h-full overflow-y-auto border-r border-slate-700">
      {fileStructure.map((node, index) => (
        <FileNode key={index} node={node} onFileSelect={onFileSelect} />
      ))}
    </div>
  );
};

export default FileTree;
`,j7={name:"App.jsx",type:"file",content:g7},N7={name:"main.jsx",type:"file",content:y7},S7={name:"index.css",type:"file",content:v7},_7={name:"CodeViewer.jsx",type:"file",content:w7},C7={name:"FileTree.jsx",type:"file",content:b7},E7={name:"developer",type:"folder",children:[_7,C7]},k7={name:"components",type:"folder",children:[E7]},T7={name:"src",type:"folder",children:[j7,N7,S7,k7]},P7=[...x7,T7],M2=({node:e,onFileSelect:t,level:s=0})=>{const[n,i]=f.useState(s<1),a=()=>{e.type==="folder"?i(!n):t(e)},o=e.type==="folder";return r.jsxs("div",{children:[r.jsxs("div",{onClick:a,className:"flex items-center p-1.5 rounded-md hover:bg-slate-700/50 cursor-pointer transition-colors",style:{paddingLeft:`${s*1.25+.5}rem`},children:[o?n?r.jsx(uj,{className:"w-4 h-4 mr-2 flex-shrink-0"}):r.jsx(uT,{className:"w-4 h-4 mr-2 flex-shrink-0"}):r.jsx(xT,{className:"w-4 h-4 mr-2 flex-shrink-0 text-sky-400"}),o?r.jsx(gT,{className:"w-4 h-4 mr-2 flex-shrink-0 text-yellow-400"}):null,r.jsx("span",{className:"text-sm text-slate-300 truncate",children:e.name})]}),r.jsx(jt,{children:o&&n&&r.jsx(W.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.children.map((l,c)=>r.jsx(M2,{node:l,onFileSelect:t,level:s+1},c))})})]})},A7=({onFileSelect:e})=>{const[t,s]=f.useState(null),[n,i]=f.useState(!0);return f.useEffect(()=>{setTimeout(()=>{s(P7),i(!1)},100)},[]),n?r.jsxs("div",{className:"flex items-center justify-center h-full text-slate-400",children:[r.jsx(ct,{className:"w-6 h-6 animate-spin mr-2"}),r.jsx("span",{children:"Loading Project..."})]}):r.jsx("div",{className:"bg-slate-800/50 text-white rounded-lg p-2 h-full overflow-y-auto border-r border-slate-700",children:t.map((a,o)=>r.jsx(M2,{node:a,onFileSelect:e},o))})},R7=({file:e})=>{const[t,s]=f.useState("Select a file to view its content."),[n,i]=f.useState(!1),[a,o]=f.useState(null);f.useEffect(()=>{e&&(i(!0),o(null),setTimeout(()=>{e.content?s(e.content):(o("File content is not available or could not be loaded."),s("")),i(!1)},200))},[e]);const l=()=>n?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[r.jsx(ct,{className:"w-8 h-8 animate-spin mb-4"}),r.jsx("p",{children:"Loading file content..."})]}):a?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-yellow-400",children:[r.jsx(ut,{className:"w-8 h-8 mb-4"}),r.jsx("p",{children:a})]}):e?r.jsx("pre",{className:"p-4",children:r.jsx("code",{className:"text-sm",children:t})}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[r.jsx(wd,{className:"w-12 h-12 mb-4 text-sky-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Select a file"}),r.jsx("p",{children:"Choose a file from the tree on the left to view its source code."})]});return r.jsx("div",{className:"bg-slate-900/70 text-white font-mono rounded-lg h-full overflow-auto scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-800/50",children:l()})},O7={LayoutDashboard:xj,Network:Ts,AlertTriangle:ut,Users:Ae,ShieldCheck:jo,Settings:Bi,Database:mT,Cpu:hT,Wrench:HT,Package:vj,Code:wd,Eye:Fi},$7=()=>{const[e,t]=f.useState(!1),[s,n]=f.useState(""),[i,a]=f.useState(""),[o,l]=f.useState(!1),[c,d]=f.useState(null),[u,h]=f.useState(sv),[m,x]=f.useState([]),[v,g]=f.useState(!1),[w,p]=f.useState(!0),{toast:y}=ue(),b=f.useCallback(async()=>{p(!0);const{data:E,error:_}=await M.from("developer_portal_snapshots").select("id, created_at, version_name").order("created_at",{ascending:!1});_?y({variant:"destructive",title:"Error fetching snapshots",description:_.message}):x(E),p(!1)},[y]);f.useEffect(()=>{e&&b()},[e,b]);const j=E=>{E.preventDefault(),l(!0),setTimeout(()=>{s==="mg@gs-3.com"&&i==="Developer2025!"?(t(!0),y({title:"Login Successful",description:"Welcome to the Developer Portal."})):y({variant:"destructive",title:"Login Failed",description:"Invalid credentials."}),l(!1)},500)},S=async()=>{g(!0);const E=`v${u.version} - ${new Date().toISOString()}`,{error:_}=await M.from("developer_portal_snapshots").insert([{version_name:E,snapshot_content:u}]);_?y({variant:"destructive",title:"Failed to save snapshot",description:_.message}):(y({title:"Snapshot Saved",description:`Version "${E}" has been saved.`}),b()),g(!1)},R=async E=>{if(!E||E==="latest"){h(sv),y({title:"Loaded Latest Version",description:"Displaying the current project overview."});return}const{data:_,error:A}=await M.from("developer_portal_snapshots").select("snapshot_content").eq("id",E).single();A?y({variant:"destructive",title:"Failed to load snapshot",description:A.message}):(h(_.snapshot_content),y({title:"Snapshot Loaded",description:"Version data has been loaded into the overview."}))};return e?r.jsxs(r.Fragment,{children:[r.jsx(wo,{children:r.jsx("title",{children:"Developer Portal | GS-3 SecureOps"})}),r.jsxs("div",{className:"text-white p-4 sm:p-6 lg:p-8",children:[r.jsx(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-6",children:r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(zT,{className:"w-8 h-8 mr-3 text-sky-400"}),"Developer Portal"]})}),r.jsxs(Et,{defaultValue:"overview",className:"w-full",children:[r.jsxs(gt,{className:"grid w-full grid-cols-2 max-w-md bg-slate-800/80 border border-slate-700",children:[r.jsxs(ie,{value:"overview",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:[r.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Overview"]}),r.jsxs(ie,{value:"code",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Code Artifacts"]})]}),r.jsx(oe,{value:"overview",className:"mt-4",children:r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx(Y,{className:"text-2xl text-white",children:u.title}),r.jsxs(he,{className:"text-slate-400",children:["Version: ",u.version," | Last Updated: ",u.lastUpdated]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-4 sm:mt-0",children:[r.jsxs(we,{onValueChange:R,disabled:w,children:[r.jsxs(xe,{className:"w-[240px] glass-button",children:[r.jsx(bT,{className:"w-4 h-4 mr-2"}),r.jsx(be,{placeholder:"Load Version Snapshot..."})]}),r.jsxs(ge,{children:[r.jsx(Z,{value:"latest",children:"Latest Version (Default)"}),m.map(E=>r.jsxs(Z,{value:E.id,children:[new Date(E.created_at).toLocaleString()," - ",E.version_name]},E.id))]})]}),r.jsxs(F,{onClick:S,disabled:v,className:"bg-sky-600 hover:bg-sky-700",children:[v?r.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(ys,{className:"w-4 h-4 mr-2"}),v?"Saving...":"Save Snapshot"]})]})]})}),r.jsxs(U,{className:"space-y-6 pt-4",children:[r.jsx("p",{className:"text-slate-300",children:u.description}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Key Features"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.keyFeatures.map(E=>{const _=O7[E.icon]||Fi;return r.jsxs("div",{className:"p-4 bg-slate-800/60 rounded-lg border border-slate-700 hover-lift",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(_,{className:"w-5 h-5 mr-3 text-sky-400"}),r.jsx("h4",{className:"font-semibold text-white",children:E.title})]}),r.jsx("p",{className:"text-sm text-slate-400",children:E.description})]},E.title)})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Technology Stack"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.techStack.map(E=>r.jsxs("div",{className:"p-4 bg-slate-800/60 rounded-lg border border-slate-700",children:[r.jsxs("h4",{className:"font-semibold text-white",children:[E.name," ",r.jsx("span",{className:"text-xs text-slate-400 font-normal ml-1",children:E.version})]}),r.jsx("p",{className:"text-sm text-slate-400",children:E.type})]},E.name))})]})]})]})}),r.jsx(oe,{value:"code",className:"mt-4",children:r.jsx(H,{className:"ios-card",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 h-[calc(100vh-220px)] min-h-[600px]",children:[r.jsx("div",{className:"md:col-span-3 lg:col-span-3 border-r border-slate-700 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-800/50",children:r.jsx(A7,{onFileSelect:d})}),r.jsx("div",{className:"md:col-span-9 lg:col-span-9 overflow-hidden",children:r.jsx(R7,{file:c})})]})})})]})]})]}):r.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-900 to-black p-4",children:[r.jsx(wo,{children:r.jsx("title",{children:"Developer Portal Login"})}),r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:r.jsxs(H,{className:"w-[380px] ios-card",children:[r.jsxs(K,{className:"text-center",children:[r.jsx("div",{className:"mx-auto bg-slate-700/50 p-3 rounded-full w-fit mb-4",children:r.jsx(pj,{className:"w-8 h-8 text-sky-400"})}),r.jsx(Y,{className:"text-2xl text-white",children:"Developer Portal Access"}),r.jsx(he,{className:"text-slate-400",children:"Enter credentials to continue"})]}),r.jsx(U,{children:r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{className:"text-slate-300",htmlFor:"username",children:"Username"}),r.jsx(ee,{id:"username",type:"email",placeholder:"mg@gs-3.com",value:s,onChange:E=>n(E.target.value),required:!0,className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(G,{className:"text-slate-300",htmlFor:"password",children:"Password"}),r.jsx(ee,{id:"password",type:"password",placeholder:"••••••••••••",value:i,onChange:E=>a(E.target.value),required:!0,className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs(F,{type:"submit",disabled:o,className:"w-full bg-sky-600 hover:bg-sky-700 text-white",children:[o?r.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(CT,{className:"w-4 h-4 mr-2"}),"Sign In"]})]})})]})})]})},L7=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[i,a]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState([]),[u,h]=f.useState(!0),[m,x]=f.useState(""),[v,g]=f.useState(null),[w,p]=f.useState(!1),[y,b]=f.useState("employees"),{toast:j}=ue(),S=async()=>{h(!0);try{const{data:N,error:C}=await n0();if(C)throw C;const T=N.filter(je=>je.status==="Archived");t(T);const{data:V,error:L}=await M.from("sites").select("*").eq("is_active",!1);L||n(V||[]);const{data:I,error:z}=await M.from("subcontractor_profiles").select("*").eq("status","Archived");z||a(I||[]);const{data:D,error:J}=await M.from("training_courses").select("*").eq("status","Archived");J||l(D||[]);const{data:ne,error:re}=await M.from("health_safety_incidents").select("*").eq("status","Archived");re||d(ne||[])}catch(N){console.error("Error fetching archived data:",N),j({title:"Error",description:"Failed to load archived data.",variant:"destructive"})}finally{h(!1)}};f.useEffect(()=>{S()},[]);const R=async(N,C)=>{try{let T;switch(C){case"employee":T=await Yc(N.id,{...N,status:"Active"});break;case"site":T=await M.from("sites").update({is_active:!0}).eq("id",N.id);break;case"security-company":T=await M.from("subcontractor_profiles").update({status:"Active"}).eq("id",N.id);break;case"training":T=await M.from("training_courses").update({status:"Active"}).eq("id",N.id);break;case"incident":T=await M.from("health_safety_incidents").update({status:"Active"}).eq("id",N.id);break;default:throw new Error("Unknown item type")}if(T!=null&&T.error)throw T.error;j({title:"Item Restored",description:`${N.name||N.title||"Item"} has been restored to active status.`,variant:"default"}),S(),p(!1)}catch(T){console.error("Error restoring item:",T),j({title:"Error",description:"Failed to restore item.",variant:"destructive"})}},E=async(N,C)=>{const T=N.name||N.title||"Item";if(window.confirm(`Are you sure you want to permanently delete ${T}? This action cannot be undone.`))try{let V;switch(C){case"employee":V=await c6(N.id);break;case"site":V=await M.from("sites").delete().eq("id",N.id);break;case"security-company":V=await M.from("subcontractor_profiles").delete().eq("id",N.id);break;case"training":V=await M.from("training_courses").delete().eq("id",N.id);break;case"incident":V=await M.from("health_safety_incidents").delete().eq("id",N.id);break;default:throw new Error("Unknown item type")}if(V!=null&&V.error)throw V.error;j({title:"Item Deleted",description:`${T} has been permanently deleted.`,variant:"default"}),S(),p(!1)}catch(V){console.error("Error deleting item:",V),j({title:"Error",description:"Failed to delete item.",variant:"destructive"})}},_=N=>{switch(N){case"Active":return"bg-green-500/20 text-green-400 border-green-500/30";case"Inactive":return"bg-red-500/20 text-red-400 border-red-500/30";case"On Leave":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"Terminated":return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"Archived":return"bg-purple-500/20 text-purple-400 border-purple-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},A=N=>N>=95?"text-green-400":N>=85?"text-yellow-400":"text-red-400",P=N=>N>=95?r.jsx(nt,{className:"w-4 h-4 text-green-400"}):N>=85?r.jsx(Gr,{className:"w-4 h-4 text-yellow-400"}):r.jsx(Gr,{className:"w-4 h-4 text-red-400"}),O=(N,C)=>C?N.filter(T=>[T.name||T.title||"",T.role||"",T.site||T.location||"",T.type||T.category||""].join(" ").toLowerCase().includes(C.toLowerCase())):N,$=(()=>{const N=O(e,m),C=O(s,m),T=O(i,m),V=O(o,m),L=O(c,m);return{employees:{total:e.length,filtered:N.length},sites:{total:s.length,filtered:C.length},securityCompanies:{total:i.length,filtered:T.length},training:{total:o.length,filtered:V.length},incidents:{total:c.length,filtered:L.length}}})();return u?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-white",children:"Loading archived data..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Rc,{className:"w-8 h-8 text-purple-400"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"System Archive"}),r.jsx("p",{className:"text-slate-400",children:"Manage archived items across all system modules"})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs(F,{variant:"outline",onClick:S,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[r.jsx(DT,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsx(H,{className:"ios-card",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ae,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{className:"text-white font-semibold",children:"Employees"})]}),r.jsx("p",{className:"text-2xl font-bold text-white mt-2",children:$.employees.total})]})}),r.jsx(H,{className:"ios-card",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(sr,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-white font-semibold",children:"Sites"})]}),r.jsx("p",{className:"text-2xl font-bold text-white mt-2",children:$.sites.total})]})}),r.jsx(H,{className:"ios-card",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(cr,{className:"w-5 h-5 text-orange-400"}),r.jsx("span",{className:"text-white font-semibold",children:"Security Companies"})]}),r.jsx("p",{className:"text-2xl font-bold text-white mt-2",children:$.securityCompanies.total})]})}),r.jsx(H,{className:"ios-card",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(mt,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-white font-semibold",children:"Training"})]}),r.jsx("p",{className:"text-2xl font-bold text-white mt-2",children:$.training.total})]})}),r.jsx(H,{className:"ios-card",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ut,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{className:"text-white font-semibold",children:"Incidents"})]}),r.jsx("p",{className:"text-2xl font-bold text-white mt-2",children:$.incidents.total})]})})]}),r.jsx(H,{className:"ios-card",children:r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx(ee,{placeholder:"Search archived items...",value:m,onChange:N=>x(N.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white"})]})})}),r.jsxs(Et,{value:y,onValueChange:b,className:"space-y-6",children:[r.jsxs(gt,{className:"grid w-full grid-cols-5 bg-slate-800 border border-slate-600",children:[r.jsxs(ie,{value:"employees",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white",children:[r.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Employees (",$.employees.filtered,")"]}),r.jsxs(ie,{value:"sites",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white",children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Sites (",$.sites.filtered,")"]}),r.jsxs(ie,{value:"security-companies",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white",children:[r.jsx(cr,{className:"w-4 h-4 mr-2"}),"Security Companies (",$.securityCompanies.filtered,")"]}),r.jsxs(ie,{value:"training",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white",children:[r.jsx(mt,{className:"w-4 h-4 mr-2"}),"Training (",$.training.filtered,")"]}),r.jsxs(ie,{value:"incidents",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white",children:[r.jsx(ut,{className:"w-4 h-4 mr-2"}),"Incidents (",$.incidents.filtered,")"]})]}),r.jsx(oe,{value:"employees",className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(jt,{children:O(e,m).map(N=>r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:r.jsx(H,{className:"ios-card hover:bg-slate-700/30 transition-all duration-200 cursor-pointer group",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:N.name.split(" ").map(C=>C[0]).join("")}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold group-hover:text-purple-300 transition-colors",children:N.name}),r.jsx("p",{className:"text-slate-400 text-sm",children:N.role})]})]}),r.jsx(Fe,{className:_(N.status),children:N.status})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Vi,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.email})]}),N.phone&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Dn,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.phone})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(qt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.site})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[P(N.compliance),r.jsxs("span",{className:`font-medium ${A(N.compliance)}`,children:[N.compliance,"% Compliant"]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{size:"sm",variant:"outline",onClick:()=>{g(N),p(!0)},className:"flex-1 border-slate-600 text-slate-300 hover:bg-slate-700",children:[r.jsx(Pn,{className:"w-4 h-4 mr-2"}),"View"]}),r.jsxs(F,{size:"sm",onClick:()=>R(N,"employee"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(ii,{className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsx(F,{size:"sm",variant:"destructive",onClick:()=>E(N,"employee"),className:"bg-red-600 hover:bg-red-700",children:r.jsx(vn,{className:"w-4 h-4"})})]})]})})},N.id))})})}),r.jsx(oe,{value:"sites",className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(jt,{children:O(s,m).map(N=>r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:r.jsx(H,{className:"ios-card hover:bg-slate-700/30 transition-all duration-200",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:N.name.split(" ").map(C=>C[0]).join("")}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:N.name}),r.jsx("p",{className:"text-slate-400 text-sm",children:N.type})]})]}),r.jsx(Fe,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"Archived"})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(qt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.location||"No location"})]}),N.description&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(He,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-300",children:[N.description.substring(0,50),"..."]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{size:"sm",onClick:()=>R(N,"site"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(ii,{className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsx(F,{size:"sm",variant:"destructive",onClick:()=>E(N,"site"),className:"bg-red-600 hover:bg-red-700",children:r.jsx(vn,{className:"w-4 h-4"})})]})]})})},N.id))})})}),r.jsx(oe,{value:"security-companies",className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(jt,{children:O(i,m).map(N=>{var C;return r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:r.jsx(H,{className:"ios-card hover:bg-slate-700/30 transition-all duration-200",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:N.company_name.split(" ").map(T=>T[0]).join("")}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:N.company_name}),r.jsx("p",{className:"text-slate-400 text-sm",children:N.service_specialization})]})]}),r.jsx(Fe,{className:_(N.status),children:N.status})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[N.contact_email&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Vi,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.contact_email})]}),N.contact_phone&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Dn,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.contact_phone})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(qt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:((C=N.address)==null?void 0:C.city)||"No location"})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{size:"sm",onClick:()=>R(N,"security-company"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(ii,{className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsx(F,{size:"sm",variant:"destructive",onClick:()=>E(N,"security-company"),className:"bg-red-600 hover:bg-red-700",children:r.jsx(vn,{className:"w-4 h-4"})})]})]})})},N.id)})})})}),r.jsx(oe,{value:"training",className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(jt,{children:O(o,m).map(N=>r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:r.jsx(H,{className:"ios-card hover:bg-slate-700/30 transition-all duration-200",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:N.title.split(" ").map(C=>C[0]).join("")}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:N.title}),r.jsx("p",{className:"text-slate-400 text-sm",children:N.category})]})]}),r.jsx(Fe,{className:_(N.status),children:N.status})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(mt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.duration||"No duration"})]}),N.description&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(He,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-300",children:[N.description.substring(0,50),"..."]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{size:"sm",onClick:()=>R(N,"training"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(ii,{className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsx(F,{size:"sm",variant:"destructive",onClick:()=>E(N,"training"),className:"bg-red-600 hover:bg-red-700",children:r.jsx(vn,{className:"w-4 h-4"})})]})]})})},N.id))})})}),r.jsx(oe,{value:"incidents",className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(jt,{children:O(c,m).map(N=>r.jsx(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:r.jsx(H,{className:"ios-card hover:bg-slate-700/30 transition-all duration-200",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-orange-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:N.title.split(" ").map(C=>C[0]).join("")}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:N.title}),r.jsx("p",{className:"text-slate-400 text-sm",children:N.type})]})]}),r.jsx(Fe,{className:_(N.status),children:N.status})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Rs,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:new Date(N.incident_date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(qt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.location||"No location"})]}),N.description&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(He,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-300",children:[N.description.substring(0,50),"..."]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{size:"sm",onClick:()=>R(N,"incident"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(ii,{className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsx(F,{size:"sm",variant:"destructive",onClick:()=>E(N,"incident"),className:"bg-red-600 hover:bg-red-700",children:r.jsx(vn,{className:"w-4 h-4"})})]})]})})},N.id))})})})]}),Object.values($).every(N=>N.filtered===0)&&r.jsx(H,{className:"ios-card",children:r.jsxs(U,{className:"p-8 text-center",children:[r.jsx(Rc,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:m?"No matching archived items":"No archived items"}),r.jsx("p",{className:"text-slate-400",children:m?"Try adjusting your search criteria.":"Items will appear here when they are archived."})]})}),w&&v&&r.jsx(e2,{employee:v,onClose:()=>{p(!1),g(null)},onUpdate:N=>{S(),p(!1),g(null)}})]})},D7=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[i,a]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState([]),[u,h]=f.useState([]),[m,x]=f.useState("org_chart"),{toast:v}=ue();f.useEffect(()=>{g()},[]);const g=async()=>{a(!0);try{const[j,S]=await Promise.all([f6(),m6()]);if(j.error)throw j.error;if(S.error)throw S.error;t(j.data||[]),n(S.data||[])}catch(j){v({variant:"destructive",title:"Error loading chain of command data",description:j.message})}finally{a(!1)}},w=async j=>{l(j);try{const[S,R]=await Promise.all([u6(j.id),h6(j.id)]);if(S.error)throw S.error;if(R.error)throw R.error;d(S.data||[]),h(R.data||[])}catch(S){v({variant:"destructive",title:"Error loading employee details",description:S.message})}},p=j=>{switch(j){case"Operations Management":return r.jsx(fT,{className:"w-4 h-4 text-purple-400"});case"Supervisor":return r.jsx(_s,{className:"w-4 h-4 text-yellow-400"});case"Consultant":return r.jsx(mt,{className:"w-4 h-4 text-green-400"});case"Standard Officer":return r.jsx(Rt,{className:"w-4 h-4 text-blue-400"});default:return r.jsx(Ae,{className:"w-4 h-4 text-gray-400"})}},y=j=>{switch(j){case"Active":return"bg-green-500/20 text-green-400 border-green-500/30";case"Inactive":return"bg-red-500/20 text-red-400 border-red-500/30";case"On Leave":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},b=(j,S=0)=>r.jsx("div",{className:"space-y-4",children:j.map(R=>r.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`relative ${S>0?"ml-8 border-l-2 border-slate-600 pl-4":""}`,children:[r.jsx(H,{className:`cursor-pointer transition-all hover:bg-slate-700/50 ${(o==null?void 0:o.id)===R.id?"ring-2 ring-blue-500":""}`,onClick:()=>w(R),children:r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[p(R.type),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-white",children:R.name}),r.jsx("p",{className:"text-sm text-gray-400",children:R.role}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx(Fe,{className:`text-xs ${y(R.status)}`,children:R.status}),r.jsx(Fe,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30 text-xs",children:R.type}),R.has_reports&&r.jsx(Fe,{className:"bg-green-500/20 text-green-400 border-green-500/30 text-xs",children:"Has Reports"})]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"text-sm text-gray-400",children:[R.compliance,"% Compliant"]})})]})})}),R.has_reports&&r.jsx("div",{className:"mt-4",children:b(e.filter(E=>E.supervisor_id===R.id),S+1)})]},R.id))});return i?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),r.jsx("span",{className:"ml-3 text-gray-400",children:"Loading chain of command..."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(W.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Ts,{className:"w-8 h-8 mr-3 text-blue-400"}),"Chain of Command"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"View and manage organizational hierarchy and reporting relationships."})]})}),r.jsxs(Et,{value:m,onValueChange:x,className:"space-y-6",children:[r.jsxs(gt,{className:"bg-slate-800 border border-slate-600",children:[r.jsx(ie,{value:"org_chart",className:"text-white",children:"Organizational Chart"}),r.jsx(ie,{value:"employee_list",className:"text-white",children:"Employee List"}),r.jsx(ie,{value:"employee_detail",className:"text-white",children:"Employee Details"})]}),r.jsx(oe,{value:"org_chart",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ts,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Organizational Hierarchy"})]})}),r.jsx(U,{children:e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ts,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"No organizational data available."})]}):r.jsx("div",{className:"space-y-6",children:b(e.filter(j=>j.level===0))})})]})}),r.jsx(oe,{value:"employee_list",className:"space-y-6",children:r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ae,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"All Employees with Supervisors"})]})}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:s.map(j=>r.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer",onClick:()=>w(j),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[p(j.type),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-white",children:j.name}),r.jsx("p",{className:"text-sm text-gray-400",children:j.role}),j.supervisor_name&&r.jsxs("p",{className:"text-xs text-blue-400",children:["Reports to: ",j.supervisor_name]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(Fe,{className:`text-xs ${y(j.status)}`,children:j.status}),r.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[j.compliance,"% Compliant"]})]})]})},j.id))})})]})}),r.jsx(oe,{value:"employee_detail",className:"space-y-6",children:o?r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Mn,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Employee Information"})]})}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[p(o.type),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-white text-lg",children:o.name}),r.jsx("p",{className:"text-gray-400",children:o.role})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Type"}),r.jsx("p",{className:"text-white",children:o.type})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Status"}),r.jsx(Fe,{className:`text-xs ${y(o.status)}`,children:o.status})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Compliance"}),r.jsxs("p",{className:"text-white",children:[o.compliance,"%"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Hire Date"}),r.jsx("p",{className:"text-white",children:new Date(o.hire_date).toLocaleDateString()})]})]})]})})]}),r.jsxs(H,{className:"ios-card",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(cp,{className:"w-5 h-5 text-green-400"}),r.jsxs("span",{children:["Direct Reports (",c.length,")"]})]})}),r.jsx(U,{children:c.length===0?r.jsx("p",{className:"text-gray-400",children:"No direct reports"}):r.jsx("div",{className:"space-y-3",children:c.map(j=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[p(j.type),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:j.name}),r.jsx("p",{className:"text-sm text-gray-400",children:j.role})]})]}),r.jsx(Fe,{className:`text-xs ${y(j.status)}`,children:j.status})]},j.id))})})]}),r.jsxs(H,{className:"ios-card lg:col-span-2",children:[r.jsx(K,{children:r.jsxs(Y,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Mx,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Reporting Chain"})]})}),r.jsx(U,{children:u.length===0?r.jsx("p",{className:"text-gray-400",children:"No supervisors in chain"}):r.jsx("div",{className:"flex items-center space-x-4",children:u.map((j,S)=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-slate-700/30 rounded-lg",children:[p(j.type),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:j.name}),r.jsx("p",{className:"text-sm text-gray-400",children:j.role})]})]}),S<u.length-1&&r.jsx(Mx,{className:"w-4 h-4 text-gray-400"})]},j.id))})})]})]}):r.jsx(H,{className:"ios-card",children:r.jsxs(U,{className:"text-center py-12",children:[r.jsx(Mn,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Select an employee to view detailed information"})]})})})]})]})},M7=()=>r.jsx(D7,{}),I7=()=>r.jsxs("div",{className:"text-white p-5",children:[r.jsx("h1",{children:"Performance Evaluations Page"}),r.jsx("p",{children:"Content coming soon..."})]}),F7=()=>r.jsxs("div",{className:"text-white p-5",children:[r.jsx("h1",{children:"Incidents Page"}),r.jsx("p",{children:"Content coming soon..."})]}),V7=()=>r.jsxs("div",{className:"text-white p-5",children:[r.jsx("h1",{children:"Observations Page"}),r.jsx("p",{children:"Content coming soon..."})]}),B7=()=>r.jsxs("div",{className:"text-white p-5",children:[r.jsx("h1",{children:"Login Management Page"}),r.jsx("p",{children:"Content coming soon..."})]});function z7(){const{toast:e}=ue(),[t,s]=f.useState("admin"),[n,i]=f.useState(!1);return f.useCallback(async()=>{try{const{data:{session:a},error:o}=await M.auth.getSession();if(o){if(o.message.includes("bad_jwt")){console.error("Bad JWT detected. Forcing sign-out."),await M.auth.signOut(),s(null),e({variant:"destructive",title:"Session Invalid",description:"Your session has expired or is invalid. Please log in again."});return}throw new Error(`Supabase session error: ${o.message}`)}if(a!=null&&a.user){const{data:l,error:c}=await M.from("users").select("role, full_name").eq("auth_user_id",a.user.id).single();c||!l?(console.error("Error fetching user profile or user not found. Forcing sign-out.",c==null?void 0:c.message),await M.auth.signOut(),s(null),e({variant:"destructive",title:"User Profile Error",description:"Could not find your user profile. Please log in again or contact support."})):s(l.role)}else s(null)}catch(a){console.error("Critical error in user session check. Forcing sign-out.",a),await M.auth.signOut().catch(o=>console.error("Sign out failed during error handling:",o)),s(null),e({variant:"destructive",title:"Application Error",description:"An unexpected error occurred. Please try logging in again."})}finally{i(!1)}},[e]),n?r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 to-black text-white p-4",children:[r.jsx("img",{alt:"GS-3 SecureOps Pro Logo loading",className:"w-32 h-32 mb-6 animate-pulse",src:"https://images.unsplash.com/photo-1575821104894-b683ce7525ff"}),r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"GS-3 SecureOps Pro"}),r.jsx("p",{className:"text-slate-400",children:"Initializing Security Management Platform..."}),r.jsx("div",{className:"mt-8 w-16 h-16 border-4 border-dashed rounded-full animate-spin border-blue-500"})]}):r.jsxs(r.Fragment,{children:[r.jsxs(wo,{children:[r.jsx("title",{children:"GS-3 SecureOps Pro | Advanced Security Management"}),r.jsx("meta",{name:"description",content:"GS-3 SecureOps Pro: Leading security operations platform with AI analytics, real-time monitoring, and comprehensive tools for protective services. Domain: gs-3.pro"}),r.jsx("link",{rel:"canonical",href:"https://gs-3.pro"})]}),r.jsx(dE,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-black",children:[r.jsxs(sE,{children:[r.jsx(Se,{path:"/developer",element:r.jsx($7,{})}),r.jsxs(Se,{path:"/",element:r.jsx(mL,{userRole:t}),children:[r.jsx(Se,{index:!0,element:r.jsx(xL,{userRole:t})}),r.jsx(Se,{path:"assessments",element:r.jsx(s6,{})}),r.jsx(Se,{path:"sites",element:r.jsx(C6,{})}),r.jsx(Se,{path:"employees",element:r.jsx(k6,{})}),r.jsx(Se,{path:"chain-of-command",element:r.jsx(M7,{})}),r.jsx(Se,{path:"entity-staff",element:r.jsx(E6,{})}),r.jsx(Se,{path:"performance",element:r.jsx(I7,{})}),r.jsx(Se,{path:"security-companies",element:r.jsx(L6,{})}),r.jsx(Se,{path:"training",element:r.jsx(H6,{})}),r.jsx(Se,{path:"live-classes",element:r.jsx(q6,{})}),r.jsx(Se,{path:"nfc",element:r.jsx(W6,{})}),nF,r.jsx(Se,{path:"reports/incidents",element:r.jsx(F7,{})}),r.jsx(Se,{path:"reports/observations",element:r.jsx(V7,{})}),r.jsx(Se,{path:"scheduling",element:r.jsx(cF,{})}),r.jsx(Se,{path:"analytics",element:r.jsx(dF,{})}),r.jsx(Se,{path:"messaging",element:r.jsx(uF,{})}),r.jsx(Se,{path:"iso",element:r.jsx(e7,{})}),r.jsx(Se,{path:"incident-command",element:r.jsx(r7,{})}),r.jsx(Se,{path:"health-safety",element:r.jsx(m7,{})}),r.jsx(Se,{path:"archive",element:r.jsx(L7,{})}),r.jsx(Se,{path:"external-app",element:r.jsx(n7,{})}),r.jsx(Se,{path:"login-management",element:r.jsx(B7,{})}),r.jsx(Se,{path:"admin-settings",element:t==="admin"?r.jsx(h7,{}):r.jsx(cf,{to:"/",replace:!0})}),r.jsx(Se,{path:"*",element:r.jsx(cf,{to:"/",replace:!0})})]})]}),r.jsx(EP,{})]})})]})}mh.createRoot(document.getElementById("root")).render(r.jsx(te.StrictMode,{children:r.jsx(z7,{})}));export{V2 as g};
