function yv(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),s}var vv={exports:{}},ud={},wv={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=Symbol.for("react.element"),r_=Symbol.for("react.portal"),n_=Symbol.for("react.fragment"),a_=Symbol.for("react.strict_mode"),i_=Symbol.for("react.profiler"),o_=Symbol.for("react.provider"),l_=Symbol.for("react.context"),c_=Symbol.for("react.forward_ref"),d_=Symbol.for("react.suspense"),u_=Symbol.for("react.memo"),h_=Symbol.for("react.lazy"),Sx=Symbol.iterator;function f_(e){return e===null||typeof e!="object"?null:(e=Sx&&e[Sx]||e["@@iterator"],typeof e=="function"?e:null)}var bv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jv=Object.assign,Nv={};function ri(e,t,s){this.props=e,this.context=t,this.refs=Nv,this.updater=s||bv}ri.prototype.isReactComponent={};ri.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ri.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Sv(){}Sv.prototype=ri.prototype;function gm(e,t,s){this.props=e,this.context=t,this.refs=Nv,this.updater=s||bv}var ym=gm.prototype=new Sv;ym.constructor=gm;jv(ym,ri.prototype);ym.isPureReactComponent=!0;var _x=Array.isArray,_v=Object.prototype.hasOwnProperty,vm={current:null},Cv={key:!0,ref:!0,__self:!0,__source:!0};function Ev(e,t,s){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)_v.call(t,n)&&!Cv.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Ho,type:e,key:i,ref:o,props:a,_owner:vm.current}}function m_(e,t){return{$$typeof:Ho,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ho}function p_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Cx=/\/+/g;function du(e,t){return typeof e=="object"&&e!==null&&e.key!=null?p_(""+e.key):t.toString(36)}function Kl(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ho:case r_:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+du(o,0):n,_x(a)?(s="",e!=null&&(s=e.replace(Cx,"$&/")+"/"),Kl(a,t,s,"",function(d){return d})):a!=null&&(wm(a)&&(a=m_(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Cx,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",_x(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+du(i,l);o+=Kl(i,t,s,c,a)}else if(c=f_(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+du(i,l++),o+=Kl(i,t,s,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function cl(e,t,s){if(e==null)return e;var n=[],a=0;return Kl(e,n,"","",function(i){return t.call(s,i,a++)}),n}function x_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ft={current:null},Yl={transition:null},g_={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Yl,ReactCurrentOwner:vm};function kv(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:cl,forEach:function(e,t,s){cl(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return cl(e,function(){t++}),t},toArray:function(e){return cl(e,function(t){return t})||[]},only:function(e){if(!wm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=ri;ve.Fragment=n_;ve.Profiler=i_;ve.PureComponent=gm;ve.StrictMode=a_;ve.Suspense=d_;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g_;ve.act=kv;ve.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jv({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=vm.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_v.call(t,c)&&!Cv.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ho,type:e.type,key:a,ref:i,props:n,_owner:o}};ve.createContext=function(e){return e={$$typeof:l_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:o_,_context:e},e.Consumer=e};ve.createElement=Ev;ve.createFactory=function(e){var t=Ev.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:c_,render:e}};ve.isValidElement=wm;ve.lazy=function(e){return{$$typeof:h_,_payload:{_status:-1,_result:e},_init:x_}};ve.memo=function(e,t){return{$$typeof:u_,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=Yl.transition;Yl.transition={};try{e()}finally{Yl.transition=t}};ve.unstable_act=kv;ve.useCallback=function(e,t){return Ft.current.useCallback(e,t)};ve.useContext=function(e){return Ft.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return Ft.current.useDeferredValue(e)};ve.useEffect=function(e,t){return Ft.current.useEffect(e,t)};ve.useId=function(){return Ft.current.useId()};ve.useImperativeHandle=function(e,t,s){return Ft.current.useImperativeHandle(e,t,s)};ve.useInsertionEffect=function(e,t){return Ft.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return Ft.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return Ft.current.useMemo(e,t)};ve.useReducer=function(e,t,s){return Ft.current.useReducer(e,t,s)};ve.useRef=function(e){return Ft.current.useRef(e)};ve.useState=function(e){return Ft.current.useState(e)};ve.useSyncExternalStore=function(e,t,s){return Ft.current.useSyncExternalStore(e,t,s)};ve.useTransition=function(){return Ft.current.useTransition()};ve.version="18.3.1";wv.exports=ve;var f=wv.exports;const te=Xn(f),hd=yv({__proto__:null,default:te},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_=f,v_=Symbol.for("react.element"),w_=Symbol.for("react.fragment"),b_=Object.prototype.hasOwnProperty,j_=y_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N_={key:!0,ref:!0,__self:!0,__source:!0};function Tv(e,t,s){var n,a={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)b_.call(t,n)&&!N_.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:v_,type:e,key:i,ref:o,props:a,_owner:j_.current}}ud.Fragment=w_;ud.jsx=Tv;ud.jsxs=Tv;vv.exports=ud;var r=vv.exports,Ch={},Pv={exports:{}},cs={},Av={exports:{}},Rv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,F){var q=M.length;M.push(F);e:for(;0<q;){var L=q-1>>>1,J=M[L];if(0<a(J,F))M[L]=F,M[q]=J,q=L;else break e}}function s(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var F=M[0],q=M.pop();if(q!==F){M[0]=q;e:for(var L=0,J=M.length,ne=J>>>1;L<ne;){var re=2*(L+1)-1,Ne=M[re],pe=re+1,le=M[pe];if(0>a(Ne,q))pe<J&&0>a(le,Ne)?(M[L]=le,M[pe]=q,L=pe):(M[L]=Ne,M[re]=q,L=re);else if(pe<J&&0>a(le,q))M[L]=le,M[pe]=q,L=pe;else break e}}return F}function a(M,F){var q=M.sortIndex-F.sortIndex;return q!==0?q:M.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,g=!1,x=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(M){for(var F=s(d);F!==null;){if(F.callback===null)n(d);else if(F.startTime<=M)n(d),F.sortIndex=F.expirationTime,t(c,F);else break;F=s(d)}}function j(M){if(y=!1,b(M),!x)if(s(c)!==null)x=!0,P(S);else{var F=s(d);F!==null&&U(j,F.startTime-M)}}function S(M,F){x=!1,y&&(y=!1,p(C),C=-1),g=!0;var q=m;try{for(b(F),h=s(c);h!==null&&(!(h.expirationTime>F)||M&&!R());){var L=h.callback;if(typeof L=="function"){h.callback=null,m=h.priorityLevel;var J=L(h.expirationTime<=F);F=e.unstable_now(),typeof J=="function"?h.callback=J:h===s(c)&&n(c),b(F)}else n(c);h=s(c)}if(h!==null)var ne=!0;else{var re=s(d);re!==null&&U(j,re.startTime-F),ne=!1}return ne}finally{h=null,m=q,g=!1}}var _=!1,E=null,C=-1,O=5,A=-1;function R(){return!(e.unstable_now()-A<O)}function T(){if(E!==null){var M=e.unstable_now();A=M;var F=!0;try{F=E(!0,M)}finally{F?D():(_=!1,E=null)}}else _=!1}var D;if(typeof v=="function")D=function(){v(T)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,k=N.port2;N.port1.onmessage=T,D=function(){k.postMessage(null)}}else D=function(){w(T,0)};function P(M){E=M,_||(_=!0,D())}function U(M,F){C=w(function(){M(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,P(S))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var q=m;m=F;try{return M()}finally{m=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var q=m;m=M;try{return F()}finally{m=q}},e.unstable_scheduleCallback=function(M,F,q){var L=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?L+q:L):q=L,M){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,M={id:u++,callback:F,priorityLevel:M,startTime:q,expirationTime:J,sortIndex:-1},q>L?(M.sortIndex=q,t(d,M),s(c)===null&&M===s(d)&&(y?(p(C),C=-1):y=!0,U(j,q-L))):(M.sortIndex=J,t(c,M),x||g||(x=!0,P(S))),M},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(M){var F=m;return function(){var q=m;m=F;try{return M.apply(this,arguments)}finally{m=q}}}})(Rv);Av.exports=Rv;var S_=Av.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __=f,os=S_;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ov=new Set,uo={};function Zn(e,t){za(e,t),za(e+"Capture",t)}function za(e,t){for(uo[e]=t,e=0;e<t.length;e++)Ov.add(t[e])}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eh=Object.prototype.hasOwnProperty,C_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ex={},kx={};function E_(e){return Eh.call(kx,e)?!0:Eh.call(Ex,e)?!1:C_.test(e)?kx[e]=!0:(Ex[e]=!0,!1)}function k_(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function T_(e,t,s,n){if(t===null||typeof t>"u"||k_(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vt(e,t,s,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wt[e]=new Vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wt[t]=new Vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wt[e]=new Vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wt[e]=new Vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wt[e]=new Vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wt[e]=new Vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wt[e]=new Vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wt[e]=new Vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wt[e]=new Vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var bm=/[\-:]([a-z])/g;function jm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bm,jm);wt[t]=new Vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bm,jm);wt[t]=new Vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bm,jm);wt[t]=new Vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wt[e]=new Vt(e,1,!1,e.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wt[e]=new Vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Nm(e,t,s,n){var a=wt.hasOwnProperty(t)?wt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(T_(t,s,a,n)&&(s=null),n||a===null?E_(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var Pr=__.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),ga=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),Sm=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),Dv=Symbol.for("react.provider"),Mv=Symbol.for("react.context"),_m=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ph=Symbol.for("react.suspense_list"),Cm=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),$v=Symbol.for("react.offscreen"),Tx=Symbol.iterator;function gi(e){return e===null||typeof e!="object"?null:(e=Tx&&e[Tx]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,uu;function Li(e){if(uu===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);uu=t&&t[1]||""}return`
`+uu+e}var hu=!1;function fu(e,t){if(!e||hu)return"";hu=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{hu=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Li(e):""}function P_(e){switch(e.tag){case 5:return Li(e.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return e=fu(e.type,!1),e;case 11:return e=fu(e.type.render,!1),e;case 1:return e=fu(e.type,!0),e;default:return""}}function Ah(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case ga:return"Portal";case kh:return"Profiler";case Sm:return"StrictMode";case Th:return"Suspense";case Ph:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mv:return(e.displayName||"Context")+".Consumer";case Dv:return(e._context.displayName||"Context")+".Provider";case _m:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cm:return t=e.displayName||null,t!==null?t:Ah(e.type)||"Memo";case Fr:t=e._payload,e=e._init;try{return Ah(e(t))}catch{}}return null}function A_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ah(t);case 8:return t===Sm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function an(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function R_(e){var t=Lv(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ul(e){e._valueTracker||(e._valueTracker=R_(e))}function Iv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=Lv(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function pc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rh(e,t){var s=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Px(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=an(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fv(e,t){t=t.checked,t!=null&&Nm(e,"checked",t,!1)}function Oh(e,t){Fv(e,t);var s=an(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dh(e,t.type,s):t.hasOwnProperty("defaultValue")&&Dh(e,t.type,an(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ax(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Dh(e,t,s){(t!=="number"||pc(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ii=Array.isArray;function Oa(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+an(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Mh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rx(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(Q(92));if(Ii(s)){if(1<s.length)throw Error(Q(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:an(s)}}function Vv(e,t){var s=an(t.value),n=an(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function Ox(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $h(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hl,zv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ho(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O_=["Webkit","ms","Moz","O"];Object.keys(Ui).forEach(function(e){O_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ui[t]=Ui[e]})});function Uv(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Ui.hasOwnProperty(e)&&Ui[e]?(""+t).trim():t+"px"}function Hv(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=Uv(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var D_=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lh(e,t){if(t){if(D_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Ih(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fh=null;function Em(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vh=null,Da=null,Ma=null;function Dx(e){if(e=Go(e)){if(typeof Vh!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=gd(t),Vh(e.stateNode,e.type,t))}}function qv(e){Da?Ma?Ma.push(e):Ma=[e]:Da=e}function Wv(){if(Da){var e=Da,t=Ma;if(Ma=Da=null,Dx(e),t)for(e=0;e<t.length;e++)Dx(t[e])}}function Gv(e,t){return e(t)}function Kv(){}var mu=!1;function Yv(e,t,s){if(mu)return e(t,s);mu=!0;try{return Gv(e,t,s)}finally{mu=!1,(Da!==null||Ma!==null)&&(Kv(),Wv())}}function fo(e,t){var s=e.stateNode;if(s===null)return null;var n=gd(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Q(231,t,typeof s));return s}var Bh=!1;if(br)try{var yi={};Object.defineProperty(yi,"passive",{get:function(){Bh=!0}}),window.addEventListener("test",yi,yi),window.removeEventListener("test",yi,yi)}catch{Bh=!1}function M_(e,t,s,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var Hi=!1,xc=null,gc=!1,zh=null,$_={onError:function(e){Hi=!0,xc=e}};function L_(e,t,s,n,a,i,o,l,c){Hi=!1,xc=null,M_.apply($_,arguments)}function I_(e,t,s,n,a,i,o,l,c){if(L_.apply(this,arguments),Hi){if(Hi){var d=xc;Hi=!1,xc=null}else throw Error(Q(198));gc||(gc=!0,zh=d)}}function ea(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Qv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mx(e){if(ea(e)!==e)throw Error(Q(188))}function F_(e){var t=e.alternate;if(!t){if(t=ea(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return Mx(a),e;if(i===n)return Mx(a),t;i=i.sibling}throw Error(Q(188))}if(s.return!==n.return)s=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o)throw Error(Q(189))}}if(s.alternate!==n)throw Error(Q(190))}if(s.tag!==3)throw Error(Q(188));return s.stateNode.current===s?e:t}function Jv(e){return e=F_(e),e!==null?Xv(e):null}function Xv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xv(e);if(t!==null)return t;e=e.sibling}return null}var Zv=os.unstable_scheduleCallback,$x=os.unstable_cancelCallback,V_=os.unstable_shouldYield,B_=os.unstable_requestPaint,st=os.unstable_now,z_=os.unstable_getCurrentPriorityLevel,km=os.unstable_ImmediatePriority,ew=os.unstable_UserBlockingPriority,yc=os.unstable_NormalPriority,U_=os.unstable_LowPriority,tw=os.unstable_IdlePriority,fd=null,Gs=null;function H_(e){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(fd,e,void 0,(e.current.flags&128)===128)}catch{}}var Os=Math.clz32?Math.clz32:G_,q_=Math.log,W_=Math.LN2;function G_(e){return e>>>=0,e===0?32:31-(q_(e)/W_|0)|0}var fl=64,ml=4194304;function Fi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vc(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~a;l!==0?n=Fi(l):(i&=o,i!==0&&(n=Fi(i)))}else o=s&~a,o!==0?n=Fi(o):i!==0&&(n=Fi(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-Os(t),a=1<<s,n|=e[s],t&=~a;return n}function K_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y_(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Os(i),l=1<<o,c=a[o];c===-1?(!(l&s)||l&n)&&(a[o]=K_(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Uh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sw(){var e=fl;return fl<<=1,!(fl&4194240)&&(fl=64),e}function pu(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function qo(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Os(t),e[t]=s}function Q_(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-Os(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function Tm(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Os(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var Ae=0;function rw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nw,Pm,aw,iw,ow,Hh=!1,pl=[],Kr=null,Yr=null,Qr=null,mo=new Map,po=new Map,zr=[],J_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lx(e,t){switch(e){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":mo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(t.pointerId)}}function vi(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Go(t),t!==null&&Pm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function X_(e,t,s,n,a){switch(t){case"focusin":return Kr=vi(Kr,e,t,s,n,a),!0;case"dragenter":return Yr=vi(Yr,e,t,s,n,a),!0;case"mouseover":return Qr=vi(Qr,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return mo.set(i,vi(mo.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,po.set(i,vi(po.get(i)||null,e,t,s,n,a)),!0}return!1}function lw(e){var t=An(e.target);if(t!==null){var s=ea(t);if(s!==null){if(t=s.tag,t===13){if(t=Qv(s),t!==null){e.blockedOn=t,ow(e.priority,function(){aw(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ql(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=qh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);Fh=n,s.target.dispatchEvent(n),Fh=null}else return t=Go(s),t!==null&&Pm(t),e.blockedOn=s,!1;t.shift()}return!0}function Ix(e,t,s){Ql(e)&&s.delete(t)}function Z_(){Hh=!1,Kr!==null&&Ql(Kr)&&(Kr=null),Yr!==null&&Ql(Yr)&&(Yr=null),Qr!==null&&Ql(Qr)&&(Qr=null),mo.forEach(Ix),po.forEach(Ix)}function wi(e,t){e.blockedOn===t&&(e.blockedOn=null,Hh||(Hh=!0,os.unstable_scheduleCallback(os.unstable_NormalPriority,Z_)))}function xo(e){function t(a){return wi(a,e)}if(0<pl.length){wi(pl[0],e);for(var s=1;s<pl.length;s++){var n=pl[s];n.blockedOn===e&&(n.blockedOn=null)}}for(Kr!==null&&wi(Kr,e),Yr!==null&&wi(Yr,e),Qr!==null&&wi(Qr,e),mo.forEach(t),po.forEach(t),s=0;s<zr.length;s++)n=zr[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<zr.length&&(s=zr[0],s.blockedOn===null);)lw(s),s.blockedOn===null&&zr.shift()}var $a=Pr.ReactCurrentBatchConfig,wc=!0;function e4(e,t,s,n){var a=Ae,i=$a.transition;$a.transition=null;try{Ae=1,Am(e,t,s,n)}finally{Ae=a,$a.transition=i}}function t4(e,t,s,n){var a=Ae,i=$a.transition;$a.transition=null;try{Ae=4,Am(e,t,s,n)}finally{Ae=a,$a.transition=i}}function Am(e,t,s,n){if(wc){var a=qh(e,t,s,n);if(a===null)_u(e,t,n,bc,s),Lx(e,n);else if(X_(a,e,t,s,n))n.stopPropagation();else if(Lx(e,n),t&4&&-1<J_.indexOf(e)){for(;a!==null;){var i=Go(a);if(i!==null&&nw(i),i=qh(e,t,s,n),i===null&&_u(e,t,n,bc,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else _u(e,t,n,null,s)}}var bc=null;function qh(e,t,s,n){if(bc=null,e=Em(n),e=An(e),e!==null)if(t=ea(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Qv(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bc=e,null}function cw(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z_()){case km:return 1;case ew:return 4;case yc:case U_:return 16;case tw:return 536870912;default:return 16}default:return 16}}var Hr=null,Rm=null,Jl=null;function dw(){if(Jl)return Jl;var e,t=Rm,s=t.length,n,a="value"in Hr?Hr.value:Hr.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===a[i-n];n++);return Jl=a.slice(e,1<n?1-n:void 0)}function Xl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xl(){return!0}function Fx(){return!1}function ds(e){function t(s,n,a,i,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xl:Fx,this.isPropagationStopped=Fx,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),t}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Om=ds(ni),Wo=Xe({},ni,{view:0,detail:0}),s4=ds(Wo),xu,gu,bi,md=Xe({},Wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bi&&(bi&&e.type==="mousemove"?(xu=e.screenX-bi.screenX,gu=e.screenY-bi.screenY):gu=xu=0,bi=e),xu)},movementY:function(e){return"movementY"in e?e.movementY:gu}}),Vx=ds(md),r4=Xe({},md,{dataTransfer:0}),n4=ds(r4),a4=Xe({},Wo,{relatedTarget:0}),yu=ds(a4),i4=Xe({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),o4=ds(i4),l4=Xe({},ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),c4=ds(l4),d4=Xe({},ni,{data:0}),Bx=ds(d4),u4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=f4[e])?!!t[e]:!1}function Dm(){return m4}var p4=Xe({},Wo,{key:function(e){if(e.key){var t=u4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?h4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dm,charCode:function(e){return e.type==="keypress"?Xl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),x4=ds(p4),g4=Xe({},md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zx=ds(g4),y4=Xe({},Wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dm}),v4=ds(y4),w4=Xe({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),b4=ds(w4),j4=Xe({},md,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),N4=ds(j4),S4=[9,13,27,32],Mm=br&&"CompositionEvent"in window,qi=null;br&&"documentMode"in document&&(qi=document.documentMode);var _4=br&&"TextEvent"in window&&!qi,uw=br&&(!Mm||qi&&8<qi&&11>=qi),Ux=String.fromCharCode(32),Hx=!1;function hw(e,t){switch(e){case"keyup":return S4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var va=!1;function C4(e,t){switch(e){case"compositionend":return fw(t);case"keypress":return t.which!==32?null:(Hx=!0,Ux);case"textInput":return e=t.data,e===Ux&&Hx?null:e;default:return null}}function E4(e,t){if(va)return e==="compositionend"||!Mm&&hw(e,t)?(e=dw(),Jl=Rm=Hr=null,va=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uw&&t.locale!=="ko"?null:t.data;default:return null}}var k4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!k4[e.type]:t==="textarea"}function mw(e,t,s,n){qv(n),t=jc(t,"onChange"),0<t.length&&(s=new Om("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Wi=null,go=null;function T4(e){_w(e,0)}function pd(e){var t=ja(e);if(Iv(t))return e}function P4(e,t){if(e==="change")return t}var pw=!1;if(br){var vu;if(br){var wu="oninput"in document;if(!wu){var Wx=document.createElement("div");Wx.setAttribute("oninput","return;"),wu=typeof Wx.oninput=="function"}vu=wu}else vu=!1;pw=vu&&(!document.documentMode||9<document.documentMode)}function Gx(){Wi&&(Wi.detachEvent("onpropertychange",xw),go=Wi=null)}function xw(e){if(e.propertyName==="value"&&pd(go)){var t=[];mw(t,go,e,Em(e)),Yv(T4,t)}}function A4(e,t,s){e==="focusin"?(Gx(),Wi=t,go=s,Wi.attachEvent("onpropertychange",xw)):e==="focusout"&&Gx()}function R4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pd(go)}function O4(e,t){if(e==="click")return pd(t)}function D4(e,t){if(e==="input"||e==="change")return pd(t)}function M4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ms=typeof Object.is=="function"?Object.is:M4;function yo(e,t){if(Ms(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Eh.call(t,a)||!Ms(e[a],t[a]))return!1}return!0}function Kx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yx(e,t){var s=Kx(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Kx(s)}}function gw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yw(){for(var e=window,t=pc();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=pc(e.document)}return t}function $m(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $4(e){var t=yw(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&gw(s.ownerDocument.documentElement,s)){if(n!==null&&$m(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Yx(s,i);var o=Yx(s,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var L4=br&&"documentMode"in document&&11>=document.documentMode,wa=null,Wh=null,Gi=null,Gh=!1;function Qx(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Gh||wa==null||wa!==pc(n)||(n=wa,"selectionStart"in n&&$m(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Gi&&yo(Gi,n)||(Gi=n,n=jc(Wh,"onSelect"),0<n.length&&(t=new Om("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=wa)))}function gl(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ba={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionend:gl("Transition","TransitionEnd")},bu={},vw={};br&&(vw=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function xd(e){if(bu[e])return bu[e];if(!ba[e])return e;var t=ba[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in vw)return bu[e]=t[s];return e}var ww=xd("animationend"),bw=xd("animationiteration"),jw=xd("animationstart"),Nw=xd("transitionend"),Sw=new Map,Jx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fn(e,t){Sw.set(e,t),Zn(t,[e])}for(var ju=0;ju<Jx.length;ju++){var Nu=Jx[ju],I4=Nu.toLowerCase(),F4=Nu[0].toUpperCase()+Nu.slice(1);fn(I4,"on"+F4)}fn(ww,"onAnimationEnd");fn(bw,"onAnimationIteration");fn(jw,"onAnimationStart");fn("dblclick","onDoubleClick");fn("focusin","onFocus");fn("focusout","onBlur");fn(Nw,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function Xx(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,I_(n,t,void 0,e),e.currentTarget=null}function _w(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Xx(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Xx(a,l,d),i=c}}}if(gc)throw e=zh,gc=!1,zh=null,e}function Fe(e,t){var s=t[Xh];s===void 0&&(s=t[Xh]=new Set);var n=e+"__bubble";s.has(n)||(Cw(t,e,2,!1),s.add(n))}function Su(e,t,s){var n=0;t&&(n|=4),Cw(s,e,n,t)}var yl="_reactListening"+Math.random().toString(36).slice(2);function vo(e){if(!e[yl]){e[yl]=!0,Ov.forEach(function(s){s!=="selectionchange"&&(V4.has(s)||Su(s,!1,e),Su(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yl]||(t[yl]=!0,Su("selectionchange",!1,t))}}function Cw(e,t,s,n){switch(cw(t)){case 1:var a=e4;break;case 4:a=t4;break;default:a=Am}s=a.bind(null,t,s,e),a=void 0,!Bh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function _u(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=An(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Yv(function(){var d=i,u=Em(s),h=[];e:{var m=Sw.get(e);if(m!==void 0){var g=Om,x=e;switch(e){case"keypress":if(Xl(s)===0)break e;case"keydown":case"keyup":g=x4;break;case"focusin":x="focus",g=yu;break;case"focusout":x="blur",g=yu;break;case"beforeblur":case"afterblur":g=yu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=n4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=v4;break;case ww:case bw:case jw:g=o4;break;case Nw:g=b4;break;case"scroll":g=s4;break;case"wheel":g=N4;break;case"copy":case"cut":case"paste":g=c4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=zx}var y=(t&4)!==0,w=!y&&e==="scroll",p=y?m!==null?m+"Capture":null:m;y=[];for(var v=d,b;v!==null;){b=v;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,p!==null&&(j=fo(v,p),j!=null&&y.push(wo(v,j,b)))),w)break;v=v.return}0<y.length&&(m=new g(m,x,null,s,u),h.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&s!==Fh&&(x=s.relatedTarget||s.fromElement)&&(An(x)||x[jr]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=s.relatedTarget||s.toElement,g=d,x=x?An(x):null,x!==null&&(w=ea(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(y=Vx,j="onMouseLeave",p="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=zx,j="onPointerLeave",p="onPointerEnter",v="pointer"),w=g==null?m:ja(g),b=x==null?m:ja(x),m=new y(j,v+"leave",g,s,u),m.target=w,m.relatedTarget=b,j=null,An(u)===d&&(y=new y(p,v+"enter",x,s,u),y.target=b,y.relatedTarget=w,j=y),w=j,g&&x)t:{for(y=g,p=x,v=0,b=y;b;b=oa(b))v++;for(b=0,j=p;j;j=oa(j))b++;for(;0<v-b;)y=oa(y),v--;for(;0<b-v;)p=oa(p),b--;for(;v--;){if(y===p||p!==null&&y===p.alternate)break t;y=oa(y),p=oa(p)}y=null}else y=null;g!==null&&Zx(h,m,g,y,!1),x!==null&&w!==null&&Zx(h,w,x,y,!0)}}e:{if(m=d?ja(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var S=P4;else if(qx(m))if(pw)S=D4;else{S=R4;var _=A4}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=O4);if(S&&(S=S(e,d))){mw(h,S,s,u);break e}_&&_(e,m,d),e==="focusout"&&(_=m._wrapperState)&&_.controlled&&m.type==="number"&&Dh(m,"number",m.value)}switch(_=d?ja(d):window,e){case"focusin":(qx(_)||_.contentEditable==="true")&&(wa=_,Wh=d,Gi=null);break;case"focusout":Gi=Wh=wa=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,Qx(h,s,u);break;case"selectionchange":if(L4)break;case"keydown":case"keyup":Qx(h,s,u)}var E;if(Mm)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else va?hw(e,s)&&(C="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(C="onCompositionStart");C&&(uw&&s.locale!=="ko"&&(va||C!=="onCompositionStart"?C==="onCompositionEnd"&&va&&(E=dw()):(Hr=u,Rm="value"in Hr?Hr.value:Hr.textContent,va=!0)),_=jc(d,C),0<_.length&&(C=new Bx(C,e,null,s,u),h.push({event:C,listeners:_}),E?C.data=E:(E=fw(s),E!==null&&(C.data=E)))),(E=_4?C4(e,s):E4(e,s))&&(d=jc(d,"onBeforeInput"),0<d.length&&(u=new Bx("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=E))}_w(h,t)})}function wo(e,t,s){return{instance:e,listener:t,currentTarget:s}}function jc(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=fo(e,s),i!=null&&n.unshift(wo(e,i,a)),i=fo(e,t),i!=null&&n.push(wo(e,i,a))),e=e.return}return n}function oa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zx(e,t,s,n,a){for(var i=t._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=fo(s,i),c!=null&&o.unshift(wo(s,c,l))):a||(c=fo(s,i),c!=null&&o.push(wo(s,c,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var B4=/\r\n?/g,z4=/\u0000|\uFFFD/g;function e0(e){return(typeof e=="string"?e:""+e).replace(B4,`
`).replace(z4,"")}function vl(e,t,s){if(t=e0(t),e0(e)!==t&&s)throw Error(Q(425))}function Nc(){}var Kh=null,Yh=null;function Qh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jh=typeof setTimeout=="function"?setTimeout:void 0,U4=typeof clearTimeout=="function"?clearTimeout:void 0,t0=typeof Promise=="function"?Promise:void 0,H4=typeof queueMicrotask=="function"?queueMicrotask:typeof t0<"u"?function(e){return t0.resolve(null).then(e).catch(q4)}:Jh;function q4(e){setTimeout(function(){throw e})}function Cu(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),xo(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);xo(t)}function Jr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function s0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var ai=Math.random().toString(36).slice(2),qs="__reactFiber$"+ai,bo="__reactProps$"+ai,jr="__reactContainer$"+ai,Xh="__reactEvents$"+ai,W4="__reactListeners$"+ai,G4="__reactHandles$"+ai;function An(e){var t=e[qs];if(t)return t;for(var s=e.parentNode;s;){if(t=s[jr]||s[qs]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=s0(e);e!==null;){if(s=e[qs])return s;e=s0(e)}return t}e=s,s=e.parentNode}return null}function Go(e){return e=e[qs]||e[jr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ja(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function gd(e){return e[bo]||null}var Zh=[],Na=-1;function mn(e){return{current:e}}function Be(e){0>Na||(e.current=Zh[Na],Zh[Na]=null,Na--)}function $e(e,t){Na++,Zh[Na]=e.current,e.current=t}var on={},At=mn(on),Qt=mn(!1),Vn=on;function Ua(e,t){var s=e.type.contextTypes;if(!s)return on;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Jt(e){return e=e.childContextTypes,e!=null}function Sc(){Be(Qt),Be(At)}function r0(e,t,s){if(At.current!==on)throw Error(Q(168));$e(At,t),$e(Qt,s)}function Ew(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Q(108,A_(e)||"Unknown",a));return Xe({},s,n)}function _c(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||on,Vn=At.current,$e(At,e),$e(Qt,Qt.current),!0}function n0(e,t,s){var n=e.stateNode;if(!n)throw Error(Q(169));s?(e=Ew(e,t,Vn),n.__reactInternalMemoizedMergedChildContext=e,Be(Qt),Be(At),$e(At,e)):Be(Qt),$e(Qt,s)}var cr=null,yd=!1,Eu=!1;function kw(e){cr===null?cr=[e]:cr.push(e)}function K4(e){yd=!0,kw(e)}function pn(){if(!Eu&&cr!==null){Eu=!0;var e=0,t=Ae;try{var s=cr;for(Ae=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}cr=null,yd=!1}catch(a){throw cr!==null&&(cr=cr.slice(e+1)),Zv(km,pn),a}finally{Ae=t,Eu=!1}}return null}var Sa=[],_a=0,Cc=null,Ec=0,fs=[],ms=0,Bn=null,hr=1,fr="";function Nn(e,t){Sa[_a++]=Ec,Sa[_a++]=Cc,Cc=e,Ec=t}function Tw(e,t,s){fs[ms++]=hr,fs[ms++]=fr,fs[ms++]=Bn,Bn=e;var n=hr;e=fr;var a=32-Os(n)-1;n&=~(1<<a),s+=1;var i=32-Os(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,hr=1<<32-Os(t)+a|s<<a|n,fr=i+e}else hr=1<<i|s<<a|n,fr=e}function Lm(e){e.return!==null&&(Nn(e,1),Tw(e,1,0))}function Im(e){for(;e===Cc;)Cc=Sa[--_a],Sa[_a]=null,Ec=Sa[--_a],Sa[_a]=null;for(;e===Bn;)Bn=fs[--ms],fs[ms]=null,fr=fs[--ms],fs[ms]=null,hr=fs[--ms],fs[ms]=null}var as=null,ns=null,We=!1,Ps=null;function Pw(e,t){var s=gs(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function a0(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,as=e,ns=Jr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,as=e,ns=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Bn!==null?{id:hr,overflow:fr}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=gs(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,as=e,ns=null,!0):!1;default:return!1}}function ef(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tf(e){if(We){var t=ns;if(t){var s=t;if(!a0(e,t)){if(ef(e))throw Error(Q(418));t=Jr(s.nextSibling);var n=as;t&&a0(e,t)?Pw(n,s):(e.flags=e.flags&-4097|2,We=!1,as=e)}}else{if(ef(e))throw Error(Q(418));e.flags=e.flags&-4097|2,We=!1,as=e}}}function i0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;as=e}function wl(e){if(e!==as)return!1;if(!We)return i0(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qh(e.type,e.memoizedProps)),t&&(t=ns)){if(ef(e))throw Aw(),Error(Q(418));for(;t;)Pw(e,t),t=Jr(t.nextSibling)}if(i0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){ns=Jr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}ns=null}}else ns=as?Jr(e.stateNode.nextSibling):null;return!0}function Aw(){for(var e=ns;e;)e=Jr(e.nextSibling)}function Ha(){ns=as=null,We=!1}function Fm(e){Ps===null?Ps=[e]:Ps.push(e)}var Y4=Pr.ReactCurrentBatchConfig;function ji(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Q(309));var n=s.stateNode}if(!n)throw Error(Q(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Q(284));if(!s._owner)throw Error(Q(290,e))}return e}function bl(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function o0(e){var t=e._init;return t(e._payload)}function Rw(e){function t(p,v){if(e){var b=p.deletions;b===null?(p.deletions=[v],p.flags|=16):b.push(v)}}function s(p,v){if(!e)return null;for(;v!==null;)t(p,v),v=v.sibling;return null}function n(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function a(p,v){return p=tn(p,v),p.index=0,p.sibling=null,p}function i(p,v,b){return p.index=b,e?(b=p.alternate,b!==null?(b=b.index,b<v?(p.flags|=2,v):b):(p.flags|=2,v)):(p.flags|=1048576,v)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,v,b,j){return v===null||v.tag!==6?(v=Du(b,p.mode,j),v.return=p,v):(v=a(v,b),v.return=p,v)}function c(p,v,b,j){var S=b.type;return S===ya?u(p,v,b.props.children,j,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Fr&&o0(S)===v.type)?(j=a(v,b.props),j.ref=ji(p,v,b),j.return=p,j):(j=ac(b.type,b.key,b.props,null,p.mode,j),j.ref=ji(p,v,b),j.return=p,j)}function d(p,v,b,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Mu(b,p.mode,j),v.return=p,v):(v=a(v,b.children||[]),v.return=p,v)}function u(p,v,b,j,S){return v===null||v.tag!==7?(v=Ln(b,p.mode,j,S),v.return=p,v):(v=a(v,b),v.return=p,v)}function h(p,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Du(""+v,p.mode,b),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case dl:return b=ac(v.type,v.key,v.props,null,p.mode,b),b.ref=ji(p,null,v),b.return=p,b;case ga:return v=Mu(v,p.mode,b),v.return=p,v;case Fr:var j=v._init;return h(p,j(v._payload),b)}if(Ii(v)||gi(v))return v=Ln(v,p.mode,b,null),v.return=p,v;bl(p,v)}return null}function m(p,v,b,j){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(p,v,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dl:return b.key===S?c(p,v,b,j):null;case ga:return b.key===S?d(p,v,b,j):null;case Fr:return S=b._init,m(p,v,S(b._payload),j)}if(Ii(b)||gi(b))return S!==null?null:u(p,v,b,j,null);bl(p,b)}return null}function g(p,v,b,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(b)||null,l(v,p,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case dl:return p=p.get(j.key===null?b:j.key)||null,c(v,p,j,S);case ga:return p=p.get(j.key===null?b:j.key)||null,d(v,p,j,S);case Fr:var _=j._init;return g(p,v,b,_(j._payload),S)}if(Ii(j)||gi(j))return p=p.get(b)||null,u(v,p,j,S,null);bl(v,j)}return null}function x(p,v,b,j){for(var S=null,_=null,E=v,C=v=0,O=null;E!==null&&C<b.length;C++){E.index>C?(O=E,E=null):O=E.sibling;var A=m(p,E,b[C],j);if(A===null){E===null&&(E=O);break}e&&E&&A.alternate===null&&t(p,E),v=i(A,v,C),_===null?S=A:_.sibling=A,_=A,E=O}if(C===b.length)return s(p,E),We&&Nn(p,C),S;if(E===null){for(;C<b.length;C++)E=h(p,b[C],j),E!==null&&(v=i(E,v,C),_===null?S=E:_.sibling=E,_=E);return We&&Nn(p,C),S}for(E=n(p,E);C<b.length;C++)O=g(E,p,C,b[C],j),O!==null&&(e&&O.alternate!==null&&E.delete(O.key===null?C:O.key),v=i(O,v,C),_===null?S=O:_.sibling=O,_=O);return e&&E.forEach(function(R){return t(p,R)}),We&&Nn(p,C),S}function y(p,v,b,j){var S=gi(b);if(typeof S!="function")throw Error(Q(150));if(b=S.call(b),b==null)throw Error(Q(151));for(var _=S=null,E=v,C=v=0,O=null,A=b.next();E!==null&&!A.done;C++,A=b.next()){E.index>C?(O=E,E=null):O=E.sibling;var R=m(p,E,A.value,j);if(R===null){E===null&&(E=O);break}e&&E&&R.alternate===null&&t(p,E),v=i(R,v,C),_===null?S=R:_.sibling=R,_=R,E=O}if(A.done)return s(p,E),We&&Nn(p,C),S;if(E===null){for(;!A.done;C++,A=b.next())A=h(p,A.value,j),A!==null&&(v=i(A,v,C),_===null?S=A:_.sibling=A,_=A);return We&&Nn(p,C),S}for(E=n(p,E);!A.done;C++,A=b.next())A=g(E,p,C,A.value,j),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?C:A.key),v=i(A,v,C),_===null?S=A:_.sibling=A,_=A);return e&&E.forEach(function(T){return t(p,T)}),We&&Nn(p,C),S}function w(p,v,b,j){if(typeof b=="object"&&b!==null&&b.type===ya&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case dl:e:{for(var S=b.key,_=v;_!==null;){if(_.key===S){if(S=b.type,S===ya){if(_.tag===7){s(p,_.sibling),v=a(_,b.props.children),v.return=p,p=v;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Fr&&o0(S)===_.type){s(p,_.sibling),v=a(_,b.props),v.ref=ji(p,_,b),v.return=p,p=v;break e}s(p,_);break}else t(p,_);_=_.sibling}b.type===ya?(v=Ln(b.props.children,p.mode,j,b.key),v.return=p,p=v):(j=ac(b.type,b.key,b.props,null,p.mode,j),j.ref=ji(p,v,b),j.return=p,p=j)}return o(p);case ga:e:{for(_=b.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){s(p,v.sibling),v=a(v,b.children||[]),v.return=p,p=v;break e}else{s(p,v);break}else t(p,v);v=v.sibling}v=Mu(b,p.mode,j),v.return=p,p=v}return o(p);case Fr:return _=b._init,w(p,v,_(b._payload),j)}if(Ii(b))return x(p,v,b,j);if(gi(b))return y(p,v,b,j);bl(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(s(p,v.sibling),v=a(v,b),v.return=p,p=v):(s(p,v),v=Du(b,p.mode,j),v.return=p,p=v),o(p)):s(p,v)}return w}var qa=Rw(!0),Ow=Rw(!1),kc=mn(null),Tc=null,Ca=null,Vm=null;function Bm(){Vm=Ca=Tc=null}function zm(e){var t=kc.current;Be(kc),e._currentValue=t}function sf(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function La(e,t){Tc=e,Vm=Ca=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Yt=!0),e.firstContext=null)}function bs(e){var t=e._currentValue;if(Vm!==e)if(e={context:e,memoizedValue:t,next:null},Ca===null){if(Tc===null)throw Error(Q(308));Ca=e,Tc.dependencies={lanes:0,firstContext:e}}else Ca=Ca.next=e;return t}var Rn=null;function Um(e){Rn===null?Rn=[e]:Rn.push(e)}function Dw(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,Um(t)):(s.next=a.next,a.next=s),t.interleaved=s,Nr(e,n)}function Nr(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Vr=!1;function Hm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xr(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ee&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Nr(e,s)}return a=n.interleaved,a===null?(t.next=t,Um(n)):(t.next=a.next,a.next=t),n.interleaved=t,Nr(e,s)}function Zl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Tm(e,s)}}function l0(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Pc(e,t,s,n){var a=e.updateQueue;Vr=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,y=l;switch(m=t,g=s,y.tag){case 1:if(x=y.payload,typeof x=="function"){h=x.call(g,h,m);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,m=typeof x=="function"?x.call(g,h,m):x,m==null)break e;h=Xe({},h,m);break e;case 2:Vr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=h):u=u.next=g,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(1);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Un|=o,e.lanes=o,e.memoizedState=h}}function c0(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(Q(191,a));a.call(n)}}}var Ko={},Ks=mn(Ko),jo=mn(Ko),No=mn(Ko);function On(e){if(e===Ko)throw Error(Q(174));return e}function qm(e,t){switch($e(No,t),$e(jo,e),$e(Ks,Ko),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$h(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$h(t,e)}Be(Ks),$e(Ks,t)}function Wa(){Be(Ks),Be(jo),Be(No)}function $w(e){On(No.current);var t=On(Ks.current),s=$h(t,e.type);t!==s&&($e(jo,e),$e(Ks,s))}function Wm(e){jo.current===e&&(Be(Ks),Be(jo))}var Ge=mn(0);function Ac(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ku=[];function Gm(){for(var e=0;e<ku.length;e++)ku[e]._workInProgressVersionPrimary=null;ku.length=0}var ec=Pr.ReactCurrentDispatcher,Tu=Pr.ReactCurrentBatchConfig,zn=0,Qe=null,ot=null,ut=null,Rc=!1,Ki=!1,So=0,Q4=0;function jt(){throw Error(Q(321))}function Km(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ms(e[s],t[s]))return!1;return!0}function Ym(e,t,s,n,a,i){if(zn=i,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ec.current=e===null||e.memoizedState===null?eC:tC,e=s(n,a),Ki){i=0;do{if(Ki=!1,So=0,25<=i)throw Error(Q(301));i+=1,ut=ot=null,t.updateQueue=null,ec.current=sC,e=s(n,a)}while(Ki)}if(ec.current=Oc,t=ot!==null&&ot.next!==null,zn=0,ut=ot=Qe=null,Rc=!1,t)throw Error(Q(300));return e}function Qm(){var e=So!==0;return So=0,e}function Us(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Qe.memoizedState=ut=e:ut=ut.next=e,ut}function js(){if(ot===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=ut===null?Qe.memoizedState:ut.next;if(t!==null)ut=t,ot=e;else{if(e===null)throw Error(Q(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ut===null?Qe.memoizedState=ut=e:ut=ut.next=e}return ut}function _o(e,t){return typeof t=="function"?t(e):t}function Pu(e){var t=js(),s=t.queue;if(s===null)throw Error(Q(311));s.lastRenderedReducer=e;var n=ot,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((zn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Qe.lanes|=u,Un|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Ms(n,t.memoizedState)||(Yt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,Qe.lanes|=i,Un|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Au(e){var t=js(),s=t.queue;if(s===null)throw Error(Q(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ms(i,t.memoizedState)||(Yt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function Lw(){}function Iw(e,t){var s=Qe,n=js(),a=t(),i=!Ms(n.memoizedState,a);if(i&&(n.memoizedState=a,Yt=!0),n=n.queue,Jm(Bw.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||ut!==null&&ut.memoizedState.tag&1){if(s.flags|=2048,Co(9,Vw.bind(null,s,n,a,t),void 0,null),ht===null)throw Error(Q(349));zn&30||Fw(s,t,a)}return a}function Fw(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Vw(e,t,s,n){t.value=s,t.getSnapshot=n,zw(t)&&Uw(e)}function Bw(e,t,s){return s(function(){zw(t)&&Uw(e)})}function zw(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ms(e,s)}catch{return!0}}function Uw(e){var t=Nr(e,1);t!==null&&Ds(t,e,1,-1)}function d0(e){var t=Us();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=Z4.bind(null,Qe,e),[t.memoizedState,e]}function Co(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function Hw(){return js().memoizedState}function tc(e,t,s,n){var a=Us();Qe.flags|=e,a.memoizedState=Co(1|t,s,void 0,n===void 0?null:n)}function vd(e,t,s,n){var a=js();n=n===void 0?null:n;var i=void 0;if(ot!==null){var o=ot.memoizedState;if(i=o.destroy,n!==null&&Km(n,o.deps)){a.memoizedState=Co(t,s,i,n);return}}Qe.flags|=e,a.memoizedState=Co(1|t,s,i,n)}function u0(e,t){return tc(8390656,8,e,t)}function Jm(e,t){return vd(2048,8,e,t)}function qw(e,t){return vd(4,2,e,t)}function Ww(e,t){return vd(4,4,e,t)}function Gw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kw(e,t,s){return s=s!=null?s.concat([e]):null,vd(4,4,Gw.bind(null,t,e),s)}function Xm(){}function Yw(e,t){var s=js();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Km(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function Qw(e,t){var s=js();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Km(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function Jw(e,t,s){return zn&21?(Ms(s,t)||(s=sw(),Qe.lanes|=s,Un|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Yt=!0),e.memoizedState=s)}function J4(e,t){var s=Ae;Ae=s!==0&&4>s?s:4,e(!0);var n=Tu.transition;Tu.transition={};try{e(!1),t()}finally{Ae=s,Tu.transition=n}}function Xw(){return js().memoizedState}function X4(e,t,s){var n=en(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Zw(e))eb(t,s);else if(s=Dw(e,t,s,n),s!==null){var a=It();Ds(s,e,n,a),tb(s,t,n)}}function Z4(e,t,s){var n=en(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Zw(e))eb(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,s);if(a.hasEagerState=!0,a.eagerState=l,Ms(l,o)){var c=t.interleaved;c===null?(a.next=a,Um(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=Dw(e,t,a,n),s!==null&&(a=It(),Ds(s,e,n,a),tb(s,t,n))}}function Zw(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function eb(e,t){Ki=Rc=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function tb(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Tm(e,s)}}var Oc={readContext:bs,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},eC={readContext:bs,useCallback:function(e,t){return Us().memoizedState=[e,t===void 0?null:t],e},useContext:bs,useEffect:u0,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,tc(4194308,4,Gw.bind(null,t,e),s)},useLayoutEffect:function(e,t){return tc(4194308,4,e,t)},useInsertionEffect:function(e,t){return tc(4,2,e,t)},useMemo:function(e,t){var s=Us();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=Us();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=X4.bind(null,Qe,e),[n.memoizedState,e]},useRef:function(e){var t=Us();return e={current:e},t.memoizedState=e},useState:d0,useDebugValue:Xm,useDeferredValue:function(e){return Us().memoizedState=e},useTransition:function(){var e=d0(!1),t=e[0];return e=J4.bind(null,e[1]),Us().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Qe,a=Us();if(We){if(s===void 0)throw Error(Q(407));s=s()}else{if(s=t(),ht===null)throw Error(Q(349));zn&30||Fw(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,u0(Bw.bind(null,n,i,e),[e]),n.flags|=2048,Co(9,Vw.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=Us(),t=ht.identifierPrefix;if(We){var s=fr,n=hr;s=(n&~(1<<32-Os(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=So++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Q4++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tC={readContext:bs,useCallback:Yw,useContext:bs,useEffect:Jm,useImperativeHandle:Kw,useInsertionEffect:qw,useLayoutEffect:Ww,useMemo:Qw,useReducer:Pu,useRef:Hw,useState:function(){return Pu(_o)},useDebugValue:Xm,useDeferredValue:function(e){var t=js();return Jw(t,ot.memoizedState,e)},useTransition:function(){var e=Pu(_o)[0],t=js().memoizedState;return[e,t]},useMutableSource:Lw,useSyncExternalStore:Iw,useId:Xw,unstable_isNewReconciler:!1},sC={readContext:bs,useCallback:Yw,useContext:bs,useEffect:Jm,useImperativeHandle:Kw,useInsertionEffect:qw,useLayoutEffect:Ww,useMemo:Qw,useReducer:Au,useRef:Hw,useState:function(){return Au(_o)},useDebugValue:Xm,useDeferredValue:function(e){var t=js();return ot===null?t.memoizedState=e:Jw(t,ot.memoizedState,e)},useTransition:function(){var e=Au(_o)[0],t=js().memoizedState;return[e,t]},useMutableSource:Lw,useSyncExternalStore:Iw,useId:Xw,unstable_isNewReconciler:!1};function Es(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function rf(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:Xe({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var wd={isMounted:function(e){return(e=e._reactInternals)?ea(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=It(),a=en(e),i=xr(n,a);i.payload=t,s!=null&&(i.callback=s),t=Xr(e,i,a),t!==null&&(Ds(t,e,a,n),Zl(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=It(),a=en(e),i=xr(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=Xr(e,i,a),t!==null&&(Ds(t,e,a,n),Zl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=It(),n=en(e),a=xr(s,n);a.tag=2,t!=null&&(a.callback=t),t=Xr(e,a,n),t!==null&&(Ds(t,e,n,s),Zl(t,e,n))}};function h0(e,t,s,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!yo(s,n)||!yo(a,i):!0}function sb(e,t,s){var n=!1,a=on,i=t.contextType;return typeof i=="object"&&i!==null?i=bs(i):(a=Jt(t)?Vn:At.current,n=t.contextTypes,i=(n=n!=null)?Ua(e,a):on),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function f0(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&wd.enqueueReplaceState(t,t.state,null)}function nf(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},Hm(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=bs(i):(i=Jt(t)?Vn:At.current,a.context=Ua(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(rf(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&wd.enqueueReplaceState(a,a.state,null),Pc(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ga(e,t){try{var s="",n=t;do s+=P_(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Ru(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function af(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var rC=typeof WeakMap=="function"?WeakMap:Map;function rb(e,t,s){s=xr(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Mc||(Mc=!0,xf=n),af(e,t)},s}function nb(e,t,s){s=xr(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){af(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){af(e,t),typeof n!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function m0(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new rC;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=gC.bind(null,e,t,s),t.then(e,e))}function p0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function x0(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=xr(-1,1),t.tag=2,Xr(s,t,1))),s.lanes|=1),e)}var nC=Pr.ReactCurrentOwner,Yt=!1;function $t(e,t,s,n){t.child=e===null?Ow(t,null,s,n):qa(t,e.child,s,n)}function g0(e,t,s,n,a){s=s.render;var i=t.ref;return La(t,a),n=Ym(e,t,s,n,i,a),s=Qm(),e!==null&&!Yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Sr(e,t,a)):(We&&s&&Lm(t),t.flags|=1,$t(e,t,n,a),t.child)}function y0(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!ip(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,ab(e,t,i,n,a)):(e=ac(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:yo,s(o,n)&&e.ref===t.ref)return Sr(e,t,a)}return t.flags|=1,e=tn(i,n),e.ref=t.ref,e.return=t,t.child=e}function ab(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(yo(i,n)&&e.ref===t.ref)if(Yt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Yt=!0);else return t.lanes=e.lanes,Sr(e,t,a)}return of(e,t,s,n,a)}function ib(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(ka,ss),ss|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(ka,ss),ss|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,$e(ka,ss),ss|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,$e(ka,ss),ss|=n;return $t(e,t,a,s),t.child}function ob(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function of(e,t,s,n,a){var i=Jt(s)?Vn:At.current;return i=Ua(t,i),La(t,a),s=Ym(e,t,s,n,i,a),n=Qm(),e!==null&&!Yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Sr(e,t,a)):(We&&n&&Lm(t),t.flags|=1,$t(e,t,s,a),t.child)}function v0(e,t,s,n,a){if(Jt(s)){var i=!0;_c(t)}else i=!1;if(La(t,a),t.stateNode===null)sc(e,t),sb(t,s,n),nf(t,s,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=bs(d):(d=Jt(s)?Vn:At.current,d=Ua(t,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&f0(t,o,n,d),Vr=!1;var m=t.memoizedState;o.state=m,Pc(t,n,o,a),c=t.memoizedState,l!==n||m!==c||Qt.current||Vr?(typeof u=="function"&&(rf(t,s,u,n),c=t.memoizedState),(l=Vr||h0(t,s,l,n,m,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Mw(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Es(t.type,l),o.props=d,h=t.pendingProps,m=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=bs(c):(c=Jt(s)?Vn:At.current,c=Ua(t,c));var g=s.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&f0(t,o,n,c),Vr=!1,m=t.memoizedState,o.state=m,Pc(t,n,o,a);var x=t.memoizedState;l!==h||m!==x||Qt.current||Vr?(typeof g=="function"&&(rf(t,s,g,n),x=t.memoizedState),(d=Vr||h0(t,s,d,n,m,x,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return lf(e,t,s,n,i,a)}function lf(e,t,s,n,a,i){ob(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&n0(t,s,!1),Sr(e,t,i);n=t.stateNode,nC.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=qa(t,e.child,null,i),t.child=qa(t,null,l,i)):$t(e,t,l,i),t.memoizedState=n.state,a&&n0(t,s,!0),t.child}function lb(e){var t=e.stateNode;t.pendingContext?r0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&r0(e,t.context,!1),qm(e,t.containerInfo)}function w0(e,t,s,n,a){return Ha(),Fm(a),t.flags|=256,$t(e,t,s,n),t.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function df(e){return{baseLanes:e,cachePool:null,transitions:null}}function cb(e,t,s){var n=t.pendingProps,a=Ge.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),$e(Ge,a&1),e===null)return tf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nd(o,n,0,null),e=Ln(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=df(s),t.memoizedState=cf,e):Zm(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return aC(e,t,o,n,l,a,s);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=tn(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=tn(l,i):(i=Ln(i,o,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?df(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=cf,n}return i=e.child,e=i.sibling,n=tn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Zm(e,t){return t=Nd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jl(e,t,s,n){return n!==null&&Fm(n),qa(t,e.child,null,s),e=Zm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aC(e,t,s,n,a,i,o){if(s)return t.flags&256?(t.flags&=-257,n=Ru(Error(Q(422))),jl(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Nd({mode:"visible",children:n.children},a,0,null),i=Ln(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&qa(t,e.child,null,o),t.child.memoizedState=df(o),t.memoizedState=cf,i);if(!(t.mode&1))return jl(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Q(419)),n=Ru(i,n,void 0),jl(e,t,o,n)}if(l=(o&e.childLanes)!==0,Yt||l){if(n=ht,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Nr(e,a),Ds(n,e,a,-1))}return ap(),n=Ru(Error(Q(421))),jl(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=yC.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ns=Jr(a.nextSibling),as=t,We=!0,Ps=null,e!==null&&(fs[ms++]=hr,fs[ms++]=fr,fs[ms++]=Bn,hr=e.id,fr=e.overflow,Bn=t),t=Zm(t,n.children),t.flags|=4096,t)}function b0(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),sf(e.return,t,s)}function Ou(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function db(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if($t(e,t,n.children,s),n=Ge.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&b0(e,s,t);else if(e.tag===19)b0(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if($e(Ge,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&Ac(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Ou(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ac(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Ou(t,!0,s,null,i);break;case"together":Ou(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Sr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,s=tn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=tn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function iC(e,t,s){switch(t.tag){case 3:lb(t),Ha();break;case 5:$w(t);break;case 1:Jt(t.type)&&_c(t);break;case 4:qm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;$e(kc,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?($e(Ge,Ge.current&1),t.flags|=128,null):s&t.child.childLanes?cb(e,t,s):($e(Ge,Ge.current&1),e=Sr(e,t,s),e!==null?e.sibling:null);$e(Ge,Ge.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return db(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$e(Ge,Ge.current),n)break;return null;case 22:case 23:return t.lanes=0,ib(e,t,s)}return Sr(e,t,s)}var ub,uf,hb,fb;ub=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};uf=function(){};hb=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,On(Ks.current);var i=null;switch(s){case"input":a=Rh(e,a),n=Rh(e,n),i=[];break;case"select":a=Xe({},a,{value:void 0}),n=Xe({},n,{value:void 0}),i=[];break;case"textarea":a=Mh(e,a),n=Mh(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Nc)}Lh(s,n);var o;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(uo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(uo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Fe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};fb=function(e,t,s,n){s!==n&&(t.flags|=4)};function Ni(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function oC(e,t,s){var n=t.pendingProps;switch(Im(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(t),null;case 1:return Jt(t.type)&&Sc(),Nt(t),null;case 3:return n=t.stateNode,Wa(),Be(Qt),Be(At),Gm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(wl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ps!==null&&(vf(Ps),Ps=null))),uf(e,t),Nt(t),null;case 5:Wm(t);var a=On(No.current);if(s=t.type,e!==null&&t.stateNode!=null)hb(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Q(166));return Nt(t),null}if(e=On(Ks.current),wl(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[qs]=t,n[bo]=i,e=(t.mode&1)!==0,s){case"dialog":Fe("cancel",n),Fe("close",n);break;case"iframe":case"object":case"embed":Fe("load",n);break;case"video":case"audio":for(a=0;a<Vi.length;a++)Fe(Vi[a],n);break;case"source":Fe("error",n);break;case"img":case"image":case"link":Fe("error",n),Fe("load",n);break;case"details":Fe("toggle",n);break;case"input":Px(n,i),Fe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",n);break;case"textarea":Rx(n,i),Fe("invalid",n)}Lh(s,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&vl(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&vl(n.textContent,l,e),a=["children",""+l]):uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Fe("scroll",n)}switch(s){case"input":ul(n),Ax(n,i,!0);break;case"textarea":ul(n),Ox(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Nc)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bv(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[qs]=t,e[bo]=n,ub(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ih(s,n),s){case"dialog":Fe("cancel",e),Fe("close",e),a=n;break;case"iframe":case"object":case"embed":Fe("load",e),a=n;break;case"video":case"audio":for(a=0;a<Vi.length;a++)Fe(Vi[a],e);a=n;break;case"source":Fe("error",e),a=n;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),a=n;break;case"details":Fe("toggle",e),a=n;break;case"input":Px(e,n),a=Rh(e,n),Fe("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Xe({},n,{value:void 0}),Fe("invalid",e);break;case"textarea":Rx(e,n),a=Mh(e,n),Fe("invalid",e);break;default:a=n}Lh(s,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Hv(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&zv(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&ho(e,c):typeof c=="number"&&ho(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Fe("scroll",e):c!=null&&Nm(e,i,c,o))}switch(s){case"input":ul(e),Ax(e,n,!1);break;case"textarea":ul(e),Ox(e);break;case"option":n.value!=null&&e.setAttribute("value",""+an(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Oa(e,!!n.multiple,i,!1):n.defaultValue!=null&&Oa(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Nc)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Nt(t),null;case 6:if(e&&t.stateNode!=null)fb(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Q(166));if(s=On(No.current),On(Ks.current),wl(t)){if(n=t.stateNode,s=t.memoizedProps,n[qs]=t,(i=n.nodeValue!==s)&&(e=as,e!==null))switch(e.tag){case 3:vl(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vl(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[qs]=t,t.stateNode=n}return Nt(t),null;case 13:if(Be(Ge),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&ns!==null&&t.mode&1&&!(t.flags&128))Aw(),Ha(),t.flags|=98560,i=!1;else if(i=wl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[qs]=t}else Ha(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Nt(t),i=!1}else Ps!==null&&(vf(Ps),Ps=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ge.current&1?lt===0&&(lt=3):ap())),t.updateQueue!==null&&(t.flags|=4),Nt(t),null);case 4:return Wa(),uf(e,t),e===null&&vo(t.stateNode.containerInfo),Nt(t),null;case 10:return zm(t.type._context),Nt(t),null;case 17:return Jt(t.type)&&Sc(),Nt(t),null;case 19:if(Be(Ge),i=t.memoizedState,i===null)return Nt(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ni(i,!1);else{if(lt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ac(e),o!==null){for(t.flags|=128,Ni(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return $e(Ge,Ge.current&1|2),t.child}e=e.sibling}i.tail!==null&&st()>Ka&&(t.flags|=128,n=!0,Ni(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ac(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ni(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return Nt(t),null}else 2*st()-i.renderingStartTime>Ka&&s!==1073741824&&(t.flags|=128,n=!0,Ni(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(s=i.last,s!==null?s.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=st(),t.sibling=null,s=Ge.current,$e(Ge,n?s&1|2:s&1),t):(Nt(t),null);case 22:case 23:return np(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ss&1073741824&&(Nt(t),t.subtreeFlags&6&&(t.flags|=8192)):Nt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function lC(e,t){switch(Im(t),t.tag){case 1:return Jt(t.type)&&Sc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wa(),Be(Qt),Be(At),Gm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wm(t),null;case 13:if(Be(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));Ha()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Ge),null;case 4:return Wa(),null;case 10:return zm(t.type._context),null;case 22:case 23:return np(),null;case 24:return null;default:return null}}var Nl=!1,_t=!1,cC=typeof WeakSet=="function"?WeakSet:Set,se=null;function Ea(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){et(e,t,n)}else s.current=null}function hf(e,t,s){try{s()}catch(n){et(e,t,n)}}var j0=!1;function dC(e,t){if(Kh=wc,e=yw(),$m(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var g;h!==s||a!==0&&h.nodeType!==3||(l=o+a),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===s&&++d===a&&(l=o),m===i&&++u===n&&(c=o),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Yh={focusedElem:e,selectionRange:s},wc=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,w=x.memoizedState,p=t.stateNode,v=p.getSnapshotBeforeUpdate(t.elementType===t.type?y:Es(t.type,y),w);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(j){et(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return x=j0,j0=!1,x}function Yi(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&hf(t,s,i)}a=a.next}while(a!==n)}}function bd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function ff(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function mb(e){var t=e.alternate;t!==null&&(e.alternate=null,mb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qs],delete t[bo],delete t[Xh],delete t[W4],delete t[G4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pb(e){return e.tag===5||e.tag===3||e.tag===4}function N0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mf(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Nc));else if(n!==4&&(e=e.child,e!==null))for(mf(e,t,s),e=e.sibling;e!==null;)mf(e,t,s),e=e.sibling}function pf(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(pf(e,t,s),e=e.sibling;e!==null;)pf(e,t,s),e=e.sibling}var xt=null,ks=!1;function Or(e,t,s){for(s=s.child;s!==null;)xb(e,t,s),s=s.sibling}function xb(e,t,s){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(fd,s)}catch{}switch(s.tag){case 5:_t||Ea(s,t);case 6:var n=xt,a=ks;xt=null,Or(e,t,s),xt=n,ks=a,xt!==null&&(ks?(e=xt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):xt.removeChild(s.stateNode));break;case 18:xt!==null&&(ks?(e=xt,s=s.stateNode,e.nodeType===8?Cu(e.parentNode,s):e.nodeType===1&&Cu(e,s),xo(e)):Cu(xt,s.stateNode));break;case 4:n=xt,a=ks,xt=s.stateNode.containerInfo,ks=!0,Or(e,t,s),xt=n,ks=a;break;case 0:case 11:case 14:case 15:if(!_t&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hf(s,t,o),a=a.next}while(a!==n)}Or(e,t,s);break;case 1:if(!_t&&(Ea(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){et(s,t,l)}Or(e,t,s);break;case 21:Or(e,t,s);break;case 22:s.mode&1?(_t=(n=_t)||s.memoizedState!==null,Or(e,t,s),_t=n):Or(e,t,s);break;default:Or(e,t,s)}}function S0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new cC),t.forEach(function(n){var a=vC.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function _s(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:xt=l.stateNode,ks=!1;break e;case 3:xt=l.stateNode.containerInfo,ks=!0;break e;case 4:xt=l.stateNode.containerInfo,ks=!0;break e}l=l.return}if(xt===null)throw Error(Q(160));xb(i,o,a),xt=null,ks=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){et(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gb(t,e),t=t.sibling}function gb(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_s(t,e),zs(e),n&4){try{Yi(3,e,e.return),bd(3,e)}catch(y){et(e,e.return,y)}try{Yi(5,e,e.return)}catch(y){et(e,e.return,y)}}break;case 1:_s(t,e),zs(e),n&512&&s!==null&&Ea(s,s.return);break;case 5:if(_s(t,e),zs(e),n&512&&s!==null&&Ea(s,s.return),e.flags&32){var a=e.stateNode;try{ho(a,"")}catch(y){et(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=s!==null?s.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Fv(a,i),Ih(l,o);var d=Ih(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?Hv(a,h):u==="dangerouslySetInnerHTML"?zv(a,h):u==="children"?ho(a,h):Nm(a,u,h,d)}switch(l){case"input":Oh(a,i);break;case"textarea":Vv(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Oa(a,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Oa(a,!!i.multiple,i.defaultValue,!0):Oa(a,!!i.multiple,i.multiple?[]:"",!1))}a[bo]=i}catch(y){et(e,e.return,y)}}break;case 6:if(_s(t,e),zs(e),n&4){if(e.stateNode===null)throw Error(Q(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){et(e,e.return,y)}}break;case 3:if(_s(t,e),zs(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{xo(t.containerInfo)}catch(y){et(e,e.return,y)}break;case 4:_s(t,e),zs(e);break;case 13:_s(t,e),zs(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(sp=st())),n&4&&S0(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(_t=(d=_t)||u,_s(t,e),_t=d):_s(t,e),zs(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(se=e,u=e.child;u!==null;){for(h=se=u;se!==null;){switch(m=se,g=m.child,m.tag){case 0:case 11:case 14:case 15:Yi(4,m,m.return);break;case 1:Ea(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,s=m.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(y){et(n,s,y)}}break;case 5:Ea(m,m.return);break;case 22:if(m.memoizedState!==null){C0(h);continue}}g!==null?(g.return=m,se=g):C0(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Uv("display",o))}catch(y){et(e,e.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){et(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_s(t,e),zs(e),n&4&&S0(e);break;case 21:break;default:_s(t,e),zs(e)}}function zs(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(pb(s)){var n=s;break e}s=s.return}throw Error(Q(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ho(a,""),n.flags&=-33);var i=N0(e);pf(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=N0(e);mf(e,l,o);break;default:throw Error(Q(161))}}catch(c){et(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uC(e,t,s){se=e,yb(e)}function yb(e,t,s){for(var n=(e.mode&1)!==0;se!==null;){var a=se,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Nl;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||_t;l=Nl;var d=_t;if(Nl=o,(_t=c)&&!d)for(se=a;se!==null;)o=se,c=o.child,o.tag===22&&o.memoizedState!==null?E0(a):c!==null?(c.return=o,se=c):E0(a);for(;i!==null;)se=i,yb(i),i=i.sibling;se=a,Nl=l,_t=d}_0(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,se=i):_0(e)}}function _0(e){for(;se!==null;){var t=se;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_t||bd(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!_t)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:Es(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&c0(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}c0(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&xo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}_t||t.flags&512&&ff(t)}catch(m){et(t,t.return,m)}}if(t===e){se=null;break}if(s=t.sibling,s!==null){s.return=t.return,se=s;break}se=t.return}}function C0(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var s=t.sibling;if(s!==null){s.return=t.return,se=s;break}se=t.return}}function E0(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{bd(4,t)}catch(c){et(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){et(t,a,c)}}var i=t.return;try{ff(t)}catch(c){et(t,i,c)}break;case 5:var o=t.return;try{ff(t)}catch(c){et(t,o,c)}}}catch(c){et(t,t.return,c)}if(t===e){se=null;break}var l=t.sibling;if(l!==null){l.return=t.return,se=l;break}se=t.return}}var hC=Math.ceil,Dc=Pr.ReactCurrentDispatcher,ep=Pr.ReactCurrentOwner,ys=Pr.ReactCurrentBatchConfig,Ee=0,ht=null,it=null,yt=0,ss=0,ka=mn(0),lt=0,Eo=null,Un=0,jd=0,tp=0,Qi=null,Gt=null,sp=0,Ka=1/0,ar=null,Mc=!1,xf=null,Zr=null,Sl=!1,qr=null,$c=0,Ji=0,gf=null,rc=-1,nc=0;function It(){return Ee&6?st():rc!==-1?rc:rc=st()}function en(e){return e.mode&1?Ee&2&&yt!==0?yt&-yt:Y4.transition!==null?(nc===0&&(nc=sw()),nc):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:cw(e.type)),e):1}function Ds(e,t,s,n){if(50<Ji)throw Ji=0,gf=null,Error(Q(185));qo(e,s,n),(!(Ee&2)||e!==ht)&&(e===ht&&(!(Ee&2)&&(jd|=s),lt===4&&Ur(e,yt)),Xt(e,n),s===1&&Ee===0&&!(t.mode&1)&&(Ka=st()+500,yd&&pn()))}function Xt(e,t){var s=e.callbackNode;Y_(e,t);var n=vc(e,e===ht?yt:0);if(n===0)s!==null&&$x(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&$x(s),t===1)e.tag===0?K4(k0.bind(null,e)):kw(k0.bind(null,e)),H4(function(){!(Ee&6)&&pn()}),s=null;else{switch(rw(n)){case 1:s=km;break;case 4:s=ew;break;case 16:s=yc;break;case 536870912:s=tw;break;default:s=yc}s=Cb(s,vb.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function vb(e,t){if(rc=-1,nc=0,Ee&6)throw Error(Q(327));var s=e.callbackNode;if(Ia()&&e.callbackNode!==s)return null;var n=vc(e,e===ht?yt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Lc(e,n);else{t=n;var a=Ee;Ee|=2;var i=bb();(ht!==e||yt!==t)&&(ar=null,Ka=st()+500,$n(e,t));do try{pC();break}catch(l){wb(e,l)}while(1);Bm(),Dc.current=i,Ee=a,it!==null?t=0:(ht=null,yt=0,t=lt)}if(t!==0){if(t===2&&(a=Uh(e),a!==0&&(n=a,t=yf(e,a))),t===1)throw s=Eo,$n(e,0),Ur(e,n),Xt(e,st()),s;if(t===6)Ur(e,n);else{if(a=e.current.alternate,!(n&30)&&!fC(a)&&(t=Lc(e,n),t===2&&(i=Uh(e),i!==0&&(n=i,t=yf(e,i))),t===1))throw s=Eo,$n(e,0),Ur(e,n),Xt(e,st()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Q(345));case 2:Sn(e,Gt,ar);break;case 3:if(Ur(e,n),(n&130023424)===n&&(t=sp+500-st(),10<t)){if(vc(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){It(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Jh(Sn.bind(null,e,Gt,ar),t);break}Sn(e,Gt,ar);break;case 4:if(Ur(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Os(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=st()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*hC(n/1960))-n,10<n){e.timeoutHandle=Jh(Sn.bind(null,e,Gt,ar),n);break}Sn(e,Gt,ar);break;case 5:Sn(e,Gt,ar);break;default:throw Error(Q(329))}}}return Xt(e,st()),e.callbackNode===s?vb.bind(null,e):null}function yf(e,t){var s=Qi;return e.current.memoizedState.isDehydrated&&($n(e,t).flags|=256),e=Lc(e,t),e!==2&&(t=Gt,Gt=s,t!==null&&vf(t)),e}function vf(e){Gt===null?Gt=e:Gt.push.apply(Gt,e)}function fC(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!Ms(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ur(e,t){for(t&=~tp,t&=~jd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Os(t),n=1<<s;e[s]=-1,t&=~n}}function k0(e){if(Ee&6)throw Error(Q(327));Ia();var t=vc(e,0);if(!(t&1))return Xt(e,st()),null;var s=Lc(e,t);if(e.tag!==0&&s===2){var n=Uh(e);n!==0&&(t=n,s=yf(e,n))}if(s===1)throw s=Eo,$n(e,0),Ur(e,t),Xt(e,st()),s;if(s===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sn(e,Gt,ar),Xt(e,st()),null}function rp(e,t){var s=Ee;Ee|=1;try{return e(t)}finally{Ee=s,Ee===0&&(Ka=st()+500,yd&&pn())}}function Hn(e){qr!==null&&qr.tag===0&&!(Ee&6)&&Ia();var t=Ee;Ee|=1;var s=ys.transition,n=Ae;try{if(ys.transition=null,Ae=1,e)return e()}finally{Ae=n,ys.transition=s,Ee=t,!(Ee&6)&&pn()}}function np(){ss=ka.current,Be(ka)}function $n(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,U4(s)),it!==null)for(s=it.return;s!==null;){var n=s;switch(Im(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Sc();break;case 3:Wa(),Be(Qt),Be(At),Gm();break;case 5:Wm(n);break;case 4:Wa();break;case 13:Be(Ge);break;case 19:Be(Ge);break;case 10:zm(n.type._context);break;case 22:case 23:np()}s=s.return}if(ht=e,it=e=tn(e.current,null),yt=ss=t,lt=0,Eo=null,tp=jd=Un=0,Gt=Qi=null,Rn!==null){for(t=0;t<Rn.length;t++)if(s=Rn[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}s.pending=n}Rn=null}return e}function wb(e,t){do{var s=it;try{if(Bm(),ec.current=Oc,Rc){for(var n=Qe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Rc=!1}if(zn=0,ut=ot=Qe=null,Ki=!1,So=0,ep.current=null,s===null||s.return===null){lt=1,Eo=t,it=null;break}e:{var i=e,o=s.return,l=s,c=t;if(t=yt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=p0(o);if(g!==null){g.flags&=-257,x0(g,o,l,i,t),g.mode&1&&m0(i,d,t),t=g,c=d;var x=t.updateQueue;if(x===null){var y=new Set;y.add(c),t.updateQueue=y}else x.add(c);break e}else{if(!(t&1)){m0(i,d,t),ap();break e}c=Error(Q(426))}}else if(We&&l.mode&1){var w=p0(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),x0(w,o,l,i,t),Fm(Ga(c,l));break e}}i=c=Ga(c,l),lt!==4&&(lt=2),Qi===null?Qi=[i]:Qi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=rb(i,c,t);l0(i,p);break e;case 1:l=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zr===null||!Zr.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=nb(i,l,t);l0(i,j);break e}}i=i.return}while(i!==null)}Nb(s)}catch(S){t=S,it===s&&s!==null&&(it=s=s.return);continue}break}while(1)}function bb(){var e=Dc.current;return Dc.current=Oc,e===null?Oc:e}function ap(){(lt===0||lt===3||lt===2)&&(lt=4),ht===null||!(Un&268435455)&&!(jd&268435455)||Ur(ht,yt)}function Lc(e,t){var s=Ee;Ee|=2;var n=bb();(ht!==e||yt!==t)&&(ar=null,$n(e,t));do try{mC();break}catch(a){wb(e,a)}while(1);if(Bm(),Ee=s,Dc.current=n,it!==null)throw Error(Q(261));return ht=null,yt=0,lt}function mC(){for(;it!==null;)jb(it)}function pC(){for(;it!==null&&!V_();)jb(it)}function jb(e){var t=_b(e.alternate,e,ss);e.memoizedProps=e.pendingProps,t===null?Nb(e):it=t,ep.current=null}function Nb(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=lC(s,t),s!==null){s.flags&=32767,it=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lt=6,it=null;return}}else if(s=oC(s,t,ss),s!==null){it=s;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);lt===0&&(lt=5)}function Sn(e,t,s){var n=Ae,a=ys.transition;try{ys.transition=null,Ae=1,xC(e,t,s,n)}finally{ys.transition=a,Ae=n}return null}function xC(e,t,s,n){do Ia();while(qr!==null);if(Ee&6)throw Error(Q(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(Q_(e,i),e===ht&&(it=ht=null,yt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Sl||(Sl=!0,Cb(yc,function(){return Ia(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=ys.transition,ys.transition=null;var o=Ae;Ae=1;var l=Ee;Ee|=4,ep.current=null,dC(e,s),gb(s,e),$4(Yh),wc=!!Kh,Yh=Kh=null,e.current=s,uC(s),B_(),Ee=l,Ae=o,ys.transition=i}else e.current=s;if(Sl&&(Sl=!1,qr=e,$c=a),i=e.pendingLanes,i===0&&(Zr=null),H_(s.stateNode),Xt(e,st()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Mc)throw Mc=!1,e=xf,xf=null,e;return $c&1&&e.tag!==0&&Ia(),i=e.pendingLanes,i&1?e===gf?Ji++:(Ji=0,gf=e):Ji=0,pn(),null}function Ia(){if(qr!==null){var e=rw($c),t=ys.transition,s=Ae;try{if(ys.transition=null,Ae=16>e?16:e,qr===null)var n=!1;else{if(e=qr,qr=null,$c=0,Ee&6)throw Error(Q(331));var a=Ee;for(Ee|=4,se=e.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(se=d;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:Yi(8,u,i)}var h=u.child;if(h!==null)h.return=u,se=h;else for(;se!==null;){u=se;var m=u.sibling,g=u.return;if(mb(u),u===d){se=null;break}if(m!==null){m.return=g,se=m;break}se=g}}}var x=i.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yi(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,se=p;break e}se=i.return}}var v=e.current;for(se=v;se!==null;){o=se;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,se=b;else e:for(o=v;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:bd(9,l)}}catch(S){et(l,l.return,S)}if(l===o){se=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,se=j;break e}se=l.return}}if(Ee=a,pn(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(fd,e)}catch{}n=!0}return n}finally{Ae=s,ys.transition=t}}return!1}function T0(e,t,s){t=Ga(s,t),t=rb(e,t,1),e=Xr(e,t,1),t=It(),e!==null&&(qo(e,1,t),Xt(e,t))}function et(e,t,s){if(e.tag===3)T0(e,e,s);else for(;t!==null;){if(t.tag===3){T0(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zr===null||!Zr.has(n))){e=Ga(s,e),e=nb(t,e,1),t=Xr(t,e,1),e=It(),t!==null&&(qo(t,1,e),Xt(t,e));break}}t=t.return}}function gC(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=It(),e.pingedLanes|=e.suspendedLanes&s,ht===e&&(yt&s)===s&&(lt===4||lt===3&&(yt&130023424)===yt&&500>st()-sp?$n(e,0):tp|=s),Xt(e,t)}function Sb(e,t){t===0&&(e.mode&1?(t=ml,ml<<=1,!(ml&130023424)&&(ml=4194304)):t=1);var s=It();e=Nr(e,t),e!==null&&(qo(e,t,s),Xt(e,s))}function yC(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Sb(e,s)}function vC(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(t),Sb(e,s)}var _b;_b=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qt.current)Yt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Yt=!1,iC(e,t,s);Yt=!!(e.flags&131072)}else Yt=!1,We&&t.flags&1048576&&Tw(t,Ec,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;sc(e,t),e=t.pendingProps;var a=Ua(t,At.current);La(t,s),a=Ym(null,t,n,e,a,s);var i=Qm();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Jt(n)?(i=!0,_c(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Hm(t),a.updater=wd,t.stateNode=a,a._reactInternals=t,nf(t,n,e,s),t=lf(null,t,n,!0,i,s)):(t.tag=0,We&&i&&Lm(t),$t(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(sc(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=bC(n),e=Es(n,e),a){case 0:t=of(null,t,n,e,s);break e;case 1:t=v0(null,t,n,e,s);break e;case 11:t=g0(null,t,n,e,s);break e;case 14:t=y0(null,t,n,Es(n.type,e),s);break e}throw Error(Q(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Es(n,a),of(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Es(n,a),v0(e,t,n,a,s);case 3:e:{if(lb(t),e===null)throw Error(Q(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Mw(e,t),Pc(t,n,null,s);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ga(Error(Q(423)),t),t=w0(e,t,n,s,a);break e}else if(n!==a){a=Ga(Error(Q(424)),t),t=w0(e,t,n,s,a);break e}else for(ns=Jr(t.stateNode.containerInfo.firstChild),as=t,We=!0,Ps=null,s=Ow(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ha(),n===a){t=Sr(e,t,s);break e}$t(e,t,n,s)}t=t.child}return t;case 5:return $w(t),e===null&&tf(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Qh(n,a)?o=null:i!==null&&Qh(n,i)&&(t.flags|=32),ob(e,t),$t(e,t,o,s),t.child;case 6:return e===null&&tf(t),null;case 13:return cb(e,t,s);case 4:return qm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=qa(t,null,n,s):$t(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Es(n,a),g0(e,t,n,a,s);case 7:return $t(e,t,t.pendingProps,s),t.child;case 8:return $t(e,t,t.pendingProps.children,s),t.child;case 12:return $t(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,$e(kc,n._currentValue),n._currentValue=o,i!==null)if(Ms(i.value,o)){if(i.children===a.children&&!Qt.current){t=Sr(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=xr(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),sf(i.return,s,t),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),sf(o,s,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$t(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,La(t,s),a=bs(a),n=n(a),t.flags|=1,$t(e,t,n,s),t.child;case 14:return n=t.type,a=Es(n,t.pendingProps),a=Es(n.type,a),y0(e,t,n,a,s);case 15:return ab(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Es(n,a),sc(e,t),t.tag=1,Jt(n)?(e=!0,_c(t)):e=!1,La(t,s),sb(t,n,a),nf(t,n,a,s),lf(null,t,n,!0,e,s);case 19:return db(e,t,s);case 22:return ib(e,t,s)}throw Error(Q(156,t.tag))};function Cb(e,t){return Zv(e,t)}function wC(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(e,t,s,n){return new wC(e,t,s,n)}function ip(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bC(e){if(typeof e=="function")return ip(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_m)return 11;if(e===Cm)return 14}return 2}function tn(e,t){var s=e.alternate;return s===null?(s=gs(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function ac(e,t,s,n,a,i){var o=2;if(n=e,typeof e=="function")ip(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ya:return Ln(s.children,a,i,t);case Sm:o=8,a|=8;break;case kh:return e=gs(12,s,t,a|2),e.elementType=kh,e.lanes=i,e;case Th:return e=gs(13,s,t,a),e.elementType=Th,e.lanes=i,e;case Ph:return e=gs(19,s,t,a),e.elementType=Ph,e.lanes=i,e;case $v:return Nd(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Dv:o=10;break e;case Mv:o=9;break e;case _m:o=11;break e;case Cm:o=14;break e;case Fr:o=16,n=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=gs(o,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Ln(e,t,s,n){return e=gs(7,e,n,t),e.lanes=s,e}function Nd(e,t,s,n){return e=gs(22,e,n,t),e.elementType=$v,e.lanes=s,e.stateNode={isHidden:!1},e}function Du(e,t,s){return e=gs(6,e,null,t),e.lanes=s,e}function Mu(e,t,s){return t=gs(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jC(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pu(0),this.expirationTimes=pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pu(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function op(e,t,s,n,a,i,o,l,c){return e=new jC(e,t,s,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=gs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hm(i),e}function NC(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ga,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function Eb(e){if(!e)return on;e=e._reactInternals;e:{if(ea(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var s=e.type;if(Jt(s))return Ew(e,s,t)}return t}function kb(e,t,s,n,a,i,o,l,c){return e=op(s,n,!0,e,a,i,o,l,c),e.context=Eb(null),s=e.current,n=It(),a=en(s),i=xr(n,a),i.callback=t??null,Xr(s,i,a),e.current.lanes=a,qo(e,a,n),Xt(e,n),e}function Sd(e,t,s,n){var a=t.current,i=It(),o=en(a);return s=Eb(s),t.context===null?t.context=s:t.pendingContext=s,t=xr(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Xr(a,t,o),e!==null&&(Ds(e,a,o,i),Zl(e,a,o)),o}function Ic(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function P0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function lp(e,t){P0(e,t),(e=e.alternate)&&P0(e,t)}function SC(){return null}var Tb=typeof reportError=="function"?reportError:function(e){console.error(e)};function cp(e){this._internalRoot=e}_d.prototype.render=cp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));Sd(e,t,null,null)};_d.prototype.unmount=cp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hn(function(){Sd(null,e,null,null)}),t[jr]=null}};function _d(e){this._internalRoot=e}_d.prototype.unstable_scheduleHydration=function(e){if(e){var t=iw();e={blockedOn:null,target:e,priority:t};for(var s=0;s<zr.length&&t!==0&&t<zr[s].priority;s++);zr.splice(s,0,e),s===0&&lw(e)}};function dp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function A0(){}function _C(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Ic(o);i.call(d)}}var o=kb(t,n,e,0,null,!1,!1,"",A0);return e._reactRootContainer=o,e[jr]=o.current,vo(e.nodeType===8?e.parentNode:e),Hn(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Ic(c);l.call(d)}}var c=op(e,0,!1,null,null,!1,!1,"",A0);return e._reactRootContainer=c,e[jr]=c.current,vo(e.nodeType===8?e.parentNode:e),Hn(function(){Sd(t,c,s,n)}),c}function Ed(e,t,s,n,a){var i=s._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Ic(o);l.call(c)}}Sd(t,o,e,a)}else o=_C(s,t,e,a,n);return Ic(o)}nw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Fi(t.pendingLanes);s!==0&&(Tm(t,s|1),Xt(t,st()),!(Ee&6)&&(Ka=st()+500,pn()))}break;case 13:Hn(function(){var n=Nr(e,1);if(n!==null){var a=It();Ds(n,e,1,a)}}),lp(e,1)}};Pm=function(e){if(e.tag===13){var t=Nr(e,134217728);if(t!==null){var s=It();Ds(t,e,134217728,s)}lp(e,134217728)}};aw=function(e){if(e.tag===13){var t=en(e),s=Nr(e,t);if(s!==null){var n=It();Ds(s,e,t,n)}lp(e,t)}};iw=function(){return Ae};ow=function(e,t){var s=Ae;try{return Ae=e,t()}finally{Ae=s}};Vh=function(e,t,s){switch(t){case"input":if(Oh(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=gd(n);if(!a)throw Error(Q(90));Iv(n),Oh(n,a)}}}break;case"textarea":Vv(e,s);break;case"select":t=s.value,t!=null&&Oa(e,!!s.multiple,t,!1)}};Gv=rp;Kv=Hn;var CC={usingClientEntryPoint:!1,Events:[Go,ja,gd,qv,Wv,rp]},Si={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EC={bundleType:Si.bundleType,version:Si.version,rendererPackageName:Si.rendererPackageName,rendererConfig:Si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jv(e),e===null?null:e.stateNode},findFiberByHostInstance:Si.findFiberByHostInstance||SC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{fd=_l.inject(EC),Gs=_l}catch{}}cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CC;cs.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dp(t))throw Error(Q(200));return NC(e,t,null,s)};cs.createRoot=function(e,t){if(!dp(e))throw Error(Q(299));var s=!1,n="",a=Tb;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=op(e,1,!1,null,null,s,!1,n,a),e[jr]=t.current,vo(e.nodeType===8?e.parentNode:e),new cp(t)};cs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=Jv(t),e=e===null?null:e.stateNode,e};cs.flushSync=function(e){return Hn(e)};cs.hydrate=function(e,t,s){if(!Cd(t))throw Error(Q(200));return Ed(null,e,t,!0,s)};cs.hydrateRoot=function(e,t,s){if(!dp(e))throw Error(Q(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",o=Tb;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=kb(t,null,e,1,s??null,a,!1,i,o),e[jr]=t.current,vo(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new _d(t)};cs.render=function(e,t,s){if(!Cd(t))throw Error(Q(200));return Ed(null,e,t,!1,s)};cs.unmountComponentAtNode=function(e){if(!Cd(e))throw Error(Q(40));return e._reactRootContainer?(Hn(function(){Ed(null,null,e,!1,function(){e._reactRootContainer=null,e[jr]=null})}),!0):!1};cs.unstable_batchedUpdates=rp;cs.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!Cd(s))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Ed(e,t,s,!1,n)};cs.version="18.3.1-next-f1338f8080-20240426";function Pb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pb)}catch(e){console.error(e)}}Pb(),Pv.exports=cs;var xn=Pv.exports;const Ab=Xn(xn);var R0=xn;Ch.createRoot=R0.createRoot,Ch.hydrateRoot=R0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ko(){return ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ko.apply(this,arguments)}var Wr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Wr||(Wr={}));const O0="popstate";function kC(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return wf("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:Fc(a)}return PC(t,s,null,e)}function Je(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Rb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TC(){return Math.random().toString(36).substr(2,8)}function D0(e,t){return{usr:e.state,key:e.key,idx:t}}function wf(e,t,s,n){return s===void 0&&(s=null),ko({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ii(t):t,{state:s,key:t&&t.key||n||TC()})}function Fc(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ii(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function PC(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Wr.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(ko({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Wr.Pop;let w=u(),p=w==null?null:w-d;d=w,c&&c({action:l,location:y.location,delta:p})}function m(w,p){l=Wr.Push;let v=wf(y.location,w,p);s&&s(v,w),d=u()+1;let b=D0(v,d),j=y.createHref(v);try{o.pushState(b,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(j)}i&&c&&c({action:l,location:y.location,delta:1})}function g(w,p){l=Wr.Replace;let v=wf(y.location,w,p);s&&s(v,w),d=u();let b=D0(v,d),j=y.createHref(v);o.replaceState(b,"",j),i&&c&&c({action:l,location:y.location,delta:0})}function x(w){let p=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof w=="string"?w:Fc(w);return v=v.replace(/ $/,"%20"),Je(p,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,p)}let y={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(O0,h),c=w,()=>{a.removeEventListener(O0,h),c=null}},createHref(w){return t(a,w)},createURL:x,encodeLocation(w){let p=x(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:g,go(w){return o.go(w)}};return y}var M0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(M0||(M0={}));function AC(e,t,s){return s===void 0&&(s="/"),RC(e,t,s,!1)}function RC(e,t,s,n){let a=typeof t=="string"?ii(t):t,i=Ya(a.pathname||"/",s);if(i==null)return null;let o=Ob(e);OC(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=HC(i);l=zC(o[c],d,n)}return l}function Ob(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Je(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=sn([n,c.relativePath]),u=s.concat(c);i.children&&i.children.length>0&&(Je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Ob(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:VC(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of Db(i.path))a(i,o,c)}),t}function Db(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=Db(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function OC(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:BC(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const DC=/^:[\w-]+$/,MC=3,$C=2,LC=1,IC=10,FC=-2,$0=e=>e==="*";function VC(e,t){let s=e.split("/"),n=s.length;return s.some($0)&&(n+=FC),t&&(n+=$C),s.filter(a=>!$0(a)).reduce((a,i)=>a+(DC.test(i)?MC:i===""?LC:IC),n)}function BC(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function zC(e,t,s){s===void 0&&(s=!1);let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=Vc({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&s&&!n[n.length-1].route.index&&(h=Vc({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:sn([i,h.pathname]),pathnameBase:KC(sn([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=sn([i,h.pathnameBase]))}return o}function Vc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=UC(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let y=l[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[h];return g&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function UC(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Rb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function HC(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ya(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function qC(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?ii(e):e;return{pathname:s?s.startsWith("/")?s:WC(s,t):t,search:YC(n),hash:QC(a)}}function WC(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function $u(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GC(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function up(e,t){let s=GC(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function hp(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ii(e):(a=ko({},e),Je(!a.pathname||!a.pathname.includes("?"),$u("?","pathname","search",a)),Je(!a.pathname||!a.pathname.includes("#"),$u("#","pathname","hash",a)),Je(!a.search||!a.search.includes("#"),$u("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=s;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=qC(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const sn=e=>e.join("/").replace(/\/\/+/g,"/"),KC=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),YC=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,QC=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function JC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Mb=["post","put","patch","delete"];new Set(Mb);const XC=["get",...Mb];new Set(XC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function To(){return To=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},To.apply(this,arguments)}const kd=f.createContext(null),$b=f.createContext(null),Ar=f.createContext(null),Td=f.createContext(null),Rr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Lb=f.createContext(null);function ZC(e,t){let{relative:s}=t===void 0?{}:t;oi()||Je(!1);let{basename:n,navigator:a}=f.useContext(Ar),{hash:i,pathname:o,search:l}=Pd(e,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:sn([n,o])),a.createHref({pathname:c,search:l,hash:i})}function oi(){return f.useContext(Td)!=null}function gn(){return oi()||Je(!1),f.useContext(Td).location}function Ib(e){f.useContext(Ar).static||f.useLayoutEffect(e)}function er(){let{isDataRoute:e}=f.useContext(Rr);return e?mE():eE()}function eE(){oi()||Je(!1);let e=f.useContext(kd),{basename:t,future:s,navigator:n}=f.useContext(Ar),{matches:a}=f.useContext(Rr),{pathname:i}=gn(),o=JSON.stringify(up(a,s.v7_relativeSplatPath)),l=f.useRef(!1);return Ib(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=hp(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:sn([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,o,i,e])}const tE=f.createContext(null);function sE(e){let t=f.useContext(Rr).outlet;return t&&f.createElement(tE.Provider,{value:e},t)}function Pd(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=f.useContext(Ar),{matches:a}=f.useContext(Rr),{pathname:i}=gn(),o=JSON.stringify(up(a,n.v7_relativeSplatPath));return f.useMemo(()=>hp(e,JSON.parse(o),i,s==="path"),[e,o,i,s])}function rE(e,t){return nE(e,t)}function nE(e,t,s,n){oi()||Je(!1);let{navigator:a}=f.useContext(Ar),{matches:i}=f.useContext(Rr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=gn(),u;if(t){var h;let w=typeof t=="string"?ii(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||Je(!1),u=w}else u=d;let m=u.pathname||"/",g=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=AC(e,{pathname:g}),y=cE(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:sn([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:sn([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,s,n);return t&&y?f.createElement(Td.Provider,{value:{location:To({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Wr.Pop}},y):y}function aE(){let e=fE(),t=JC(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),s?f.createElement("pre",{style:a},s):null,i)}const iE=f.createElement(aE,null);class oE extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?f.createElement(Rr.Provider,{value:this.props.routeContext},f.createElement(Lb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lE(e){let{routeContext:t,match:s,children:n}=e,a=f.useContext(kd);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),f.createElement(Rr.Provider,{value:t},n)}function cE(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(a=s)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Je(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:g}=s,x=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,m)=>{let g,x=!1,y=null,w=null;s&&(g=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||iE,c&&(d<0&&m===0?(pE("route-fallback",!1),x=!0,w=null):d===m&&(x=!0,w=h.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,m+1)),v=()=>{let b;return g?b=y:x?b=w:h.route.Component?b=f.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,f.createElement(lE,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:s!=null},children:b})};return s&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(oE,{location:s.location,revalidation:s.revalidation,component:y,error:g,children:v(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):v()},null)}var Fb=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Fb||{}),Bc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bc||{});function dE(e){let t=f.useContext(kd);return t||Je(!1),t}function uE(e){let t=f.useContext($b);return t||Je(!1),t}function hE(e){let t=f.useContext(Rr);return t||Je(!1),t}function Vb(e){let t=hE(),s=t.matches[t.matches.length-1];return s.route.id||Je(!1),s.route.id}function fE(){var e;let t=f.useContext(Lb),s=uE(Bc.UseRouteError),n=Vb(Bc.UseRouteError);return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function mE(){let{router:e}=dE(Fb.UseNavigateStable),t=Vb(Bc.UseNavigateStable),s=f.useRef(!1);return Ib(()=>{s.current=!0}),f.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,To({fromRouteId:t},i)))},[e,t])}const L0={};function pE(e,t,s){!t&&!L0[e]&&(L0[e]=!0)}function xE(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function bf(e){let{to:t,replace:s,state:n,relative:a}=e;oi()||Je(!1);let{future:i,static:o}=f.useContext(Ar),{matches:l}=f.useContext(Rr),{pathname:c}=gn(),d=er(),u=hp(t,up(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(h),{replace:s,state:n,relative:a}),[d,h,a,s,n]),null}function Bb(e){return sE(e.context)}function _e(e){Je(!1)}function gE(e){let{basename:t="/",children:s=null,location:n,navigationType:a=Wr.Pop,navigator:i,static:o=!1,future:l}=e;oi()&&Je(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:i,static:o,future:To({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=ii(n));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:x="default"}=n,y=f.useMemo(()=>{let w=Ya(u,c);return w==null?null:{location:{pathname:w,search:h,hash:m,state:g,key:x},navigationType:a}},[c,u,h,m,g,x,a]);return y==null?null:f.createElement(Ar.Provider,{value:d},f.createElement(Td.Provider,{children:s,value:y}))}function yE(e){let{children:t,location:s}=e;return rE(jf(t),s)}new Promise(()=>{});function jf(e,t){t===void 0&&(t=[]);let s=[];return f.Children.forEach(e,(n,a)=>{if(!f.isValidElement(n))return;let i=[...t,a];if(n.type===f.Fragment){s.push.apply(s,jf(n.props.children,i));return}n.type!==_e&&Je(!1),!n.props.index||!n.props.children||Je(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=jf(n.props.children,i)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zc(){return zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},zc.apply(this,arguments)}function zb(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function vE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wE(e,t){return e.button===0&&(!t||t==="_self")&&!vE(e)}const bE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jE=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],NE="6";try{window.__reactRouterVersion=NE}catch{}const SE=f.createContext({isTransitioning:!1}),_E="startTransition",I0=hd[_E];function CE(e){let{basename:t,children:s,future:n,window:a}=e,i=f.useRef();i.current==null&&(i.current=kC({window:a,v5Compat:!0}));let o=i.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=f.useCallback(h=>{d&&I0?I0(()=>c(h)):c(h)},[c,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.useEffect(()=>xE(n),[n]),f.createElement(gE,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const EE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yo=f.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,m=zb(t,bE),{basename:g}=f.useContext(Ar),x,y=!1;if(typeof d=="string"&&kE.test(d)&&(x=d,EE))try{let b=new URL(window.location.href),j=d.startsWith("//")?new URL(b.protocol+d):new URL(d),S=Ya(j.pathname,g);j.origin===b.origin&&S!=null?d=S+j.search+j.hash:y=!0}catch{}let w=ZC(d,{relative:a}),p=AE(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h});function v(b){n&&n(b),b.defaultPrevented||p(b)}return f.createElement("a",zc({},m,{href:x||w,onClick:y||i?n:v,ref:s,target:c}))}),TE=f.forwardRef(function(t,s){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:u}=t,h=zb(t,jE),m=Pd(c,{relative:h.relative}),g=gn(),x=f.useContext($b),{navigator:y,basename:w}=f.useContext(Ar),p=x!=null&&RE(m)&&d===!0,v=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,b=g.pathname,j=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(b=b.toLowerCase(),j=j?j.toLowerCase():null,v=v.toLowerCase()),j&&w&&(j=Ya(j,w)||j);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let _=b===v||!o&&b.startsWith(v)&&b.charAt(S)==="/",E=j!=null&&(j===v||!o&&j.startsWith(v)&&j.charAt(v.length)==="/"),C={isActive:_,isPending:E,isTransitioning:p},O=_?n:void 0,A;typeof i=="function"?A=i(C):A=[i,_?"active":null,E?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let R=typeof l=="function"?l(C):l;return f.createElement(Yo,zc({},h,{"aria-current":O,className:A,ref:s,style:R,to:c,viewTransition:d}),typeof u=="function"?u(C):u)});var Nf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Nf||(Nf={}));var F0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(F0||(F0={}));function PE(e){let t=f.useContext(kd);return t||Je(!1),t}function AE(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=er(),d=gn(),u=Pd(e,{relative:o});return f.useCallback(h=>{if(wE(h,s)){h.preventDefault();let m=n!==void 0?n:Fc(d)===Fc(u);c(e,{replace:m,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,s,e,i,o,l])}function RE(e,t){t===void 0&&(t={});let s=f.useContext(SE);s==null&&Je(!1);let{basename:n}=PE(Nf.useViewTransitionState),a=Pd(e,{relative:t.relative});if(!s.isTransitioning)return!1;let i=Ya(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=Ya(s.nextLocation.pathname,n)||s.nextLocation.pathname;return Vc(a.pathname,o)!=null||Vc(a.pathname,i)!=null}var Ub={exports:{}},OE="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",DE=OE,ME=DE;function Hb(){}function qb(){}qb.resetWarningCache=Hb;var $E=function(){function e(n,a,i,o,l,c){if(c!==ME){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:qb,resetWarningCache:Hb};return s.PropTypes=s,s};Ub.exports=$E();var LE=Ub.exports;const Ue=Xn(LE);function IE(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var Wb=f,FE=IE(Wb);function V0(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function VE(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var BE=!!(typeof window<"u"&&window.document&&window.document.createElement);function zE(e,t,s){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof s<"u"&&typeof s!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(a){return a.displayName||a.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],l;function c(){l=e(o.map(function(u){return u.props})),d.canUseDOM?t(l):s&&(l=s(l))}var d=function(u){VE(h,u);function h(){return u.apply(this,arguments)||this}h.peek=function(){return l},h.rewind=function(){if(h.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var x=l;return l=void 0,o=[],x};var m=h.prototype;return m.UNSAFE_componentWillMount=function(){o.push(this),c()},m.componentDidUpdate=function(){c()},m.componentWillUnmount=function(){var x=o.indexOf(this);o.splice(x,1),c()},m.render=function(){return FE.createElement(i,this.props)},h}(Wb.PureComponent);return V0(d,"displayName","SideEffect("+n(i)+")"),V0(d,"canUseDOM",BE),d}}var UE=zE;const HE=Xn(UE);var qE=typeof Element<"u",WE=typeof Map=="function",GE=typeof Set=="function",KE=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function ic(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,n,a;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(n=s;n--!==0;)if(!ic(e[n],t[n]))return!1;return!0}var i;if(WE&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;for(i=e.entries();!(n=i.next()).done;)if(!ic(n.value[1],t.get(n.value[0])))return!1;return!0}if(GE&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(KE&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(s=e.length,s!=t.length)return!1;for(n=s;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if(qE&&e instanceof Element)return!1;for(n=s;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof)&&!ic(e[a[n]],t[a[n]]))return!1;return!0}return e!==e&&t!==t}var YE=function(t,s){try{return ic(t,s)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const QE=Xn(YE);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var B0=Object.getOwnPropertySymbols,JE=Object.prototype.hasOwnProperty,XE=Object.prototype.propertyIsEnumerable;function ZE(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ek(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},s=0;s<10;s++)t["_"+String.fromCharCode(s)]=s;var n=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(n.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(i){a[i]=i}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var tk=ek()?Object.assign:function(e,t){for(var s,n=ZE(e),a,i=1;i<arguments.length;i++){s=Object(arguments[i]);for(var o in s)JE.call(s,o)&&(n[o]=s[o]);if(B0){a=B0(s);for(var l=0;l<a.length;l++)XE.call(s,a[l])&&(n[a[l]]=s[a[l]])}}return n};const sk=Xn(tk);var In={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},fe={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(fe).map(function(e){return fe[e]});var He={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Uc={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Po={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},rk=Object.keys(Uc).reduce(function(e,t){return e[Uc[t]]=t,e},{}),nk=[fe.NOSCRIPT,fe.SCRIPT,fe.STYLE],Rs="data-react-helmet",ak=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ik=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ok=function(){function e(t,s){for(var n=0;n<s.length;n++){var a=s[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},lk=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},z0=function(e,t){var s={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s},ck=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Sf=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return s===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},dk=function(t){var s=Fa(t,fe.TITLE),n=Fa(t,Po.TITLE_TEMPLATE);if(n&&s)return n.replace(/%s/g,function(){return Array.isArray(s)?s.join(""):s});var a=Fa(t,Po.DEFAULT_TITLE);return s||a||void 0},uk=function(t){return Fa(t,Po.ON_CHANGE_CLIENT_STATE)||function(){}},Lu=function(t,s){return s.filter(function(n){return typeof n[t]<"u"}).map(function(n){return n[t]}).reduce(function(n,a){return Wt({},n,a)},{})},hk=function(t,s){return s.filter(function(n){return typeof n[fe.BASE]<"u"}).map(function(n){return n[fe.BASE]}).reverse().reduce(function(n,a){if(!n.length)for(var i=Object.keys(a),o=0;o<i.length;o++){var l=i[o],c=l.toLowerCase();if(t.indexOf(c)!==-1&&a[c])return n.concat(a)}return n},[])},_i=function(t,s,n){var a={};return n.filter(function(i){return Array.isArray(i[t])?!0:(typeof i[t]<"u"&&xk("Helmet: "+t+' should be of type "Array". Instead found type "'+ak(i[t])+'"'),!1)}).map(function(i){return i[t]}).reverse().reduce(function(i,o){var l={};o.filter(function(m){for(var g=void 0,x=Object.keys(m),y=0;y<x.length;y++){var w=x[y],p=w.toLowerCase();s.indexOf(p)!==-1&&!(g===He.REL&&m[g].toLowerCase()==="canonical")&&!(p===He.REL&&m[p].toLowerCase()==="stylesheet")&&(g=p),s.indexOf(w)!==-1&&(w===He.INNER_HTML||w===He.CSS_TEXT||w===He.ITEM_PROP)&&(g=w)}if(!g||!m[g])return!1;var v=m[g].toLowerCase();return a[g]||(a[g]={}),l[g]||(l[g]={}),a[g][v]?!1:(l[g][v]=!0,!0)}).reverse().forEach(function(m){return i.push(m)});for(var c=Object.keys(l),d=0;d<c.length;d++){var u=c[d],h=sk({},a[u],l[u]);a[u]=h}return i},[]).reverse()},Fa=function(t,s){for(var n=t.length-1;n>=0;n--){var a=t[n];if(a.hasOwnProperty(s))return a[s]}return null},fk=function(t){return{baseTag:hk([He.HREF,He.TARGET],t),bodyAttributes:Lu(In.BODY,t),defer:Fa(t,Po.DEFER),encode:Fa(t,Po.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Lu(In.HTML,t),linkTags:_i(fe.LINK,[He.REL,He.HREF],t),metaTags:_i(fe.META,[He.NAME,He.CHARSET,He.HTTPEQUIV,He.PROPERTY,He.ITEM_PROP],t),noscriptTags:_i(fe.NOSCRIPT,[He.INNER_HTML],t),onChangeClientState:uk(t),scriptTags:_i(fe.SCRIPT,[He.SRC,He.INNER_HTML],t),styleTags:_i(fe.STYLE,[He.CSS_TEXT],t),title:dk(t),titleAttributes:Lu(In.TITLE,t)}},_f=function(){var e=Date.now();return function(t){var s=Date.now();s-e>16?(e=s,t(s)):setTimeout(function(){_f(t)},0)}}(),U0=function(t){return clearTimeout(t)},mk=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||_f:global.requestAnimationFrame||_f,pk=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||U0:global.cancelAnimationFrame||U0,xk=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},Ci=null,gk=function(t){Ci&&pk(Ci),t.defer?Ci=mk(function(){H0(t,function(){Ci=null})}):(H0(t),Ci=null)},H0=function(t,s){var n=t.baseTag,a=t.bodyAttributes,i=t.htmlAttributes,o=t.linkTags,l=t.metaTags,c=t.noscriptTags,d=t.onChangeClientState,u=t.scriptTags,h=t.styleTags,m=t.title,g=t.titleAttributes;Cf(fe.BODY,a),Cf(fe.HTML,i),yk(m,g);var x={baseTag:la(fe.BASE,n),linkTags:la(fe.LINK,o),metaTags:la(fe.META,l),noscriptTags:la(fe.NOSCRIPT,c),scriptTags:la(fe.SCRIPT,u),styleTags:la(fe.STYLE,h)},y={},w={};Object.keys(x).forEach(function(p){var v=x[p],b=v.newTags,j=v.oldTags;b.length&&(y[p]=b),j.length&&(w[p]=x[p].oldTags)}),s&&s(),d(t,y,w)},Gb=function(t){return Array.isArray(t)?t.join(""):t},yk=function(t,s){typeof t<"u"&&document.title!==t&&(document.title=Gb(t)),Cf(fe.TITLE,s)},Cf=function(t,s){var n=document.getElementsByTagName(t)[0];if(n){for(var a=n.getAttribute(Rs),i=a?a.split(","):[],o=[].concat(i),l=Object.keys(s),c=0;c<l.length;c++){var d=l[c],u=s[d]||"";n.getAttribute(d)!==u&&n.setAttribute(d,u),i.indexOf(d)===-1&&i.push(d);var h=o.indexOf(d);h!==-1&&o.splice(h,1)}for(var m=o.length-1;m>=0;m--)n.removeAttribute(o[m]);i.length===o.length?n.removeAttribute(Rs):n.getAttribute(Rs)!==l.join(",")&&n.setAttribute(Rs,l.join(","))}},la=function(t,s){var n=document.head||document.querySelector(fe.HEAD),a=n.querySelectorAll(t+"["+Rs+"]"),i=Array.prototype.slice.call(a),o=[],l=void 0;return s&&s.length&&s.forEach(function(c){var d=document.createElement(t);for(var u in c)if(c.hasOwnProperty(u))if(u===He.INNER_HTML)d.innerHTML=c.innerHTML;else if(u===He.CSS_TEXT)d.styleSheet?d.styleSheet.cssText=c.cssText:d.appendChild(document.createTextNode(c.cssText));else{var h=typeof c[u]>"u"?"":c[u];d.setAttribute(u,h)}d.setAttribute(Rs,"true"),i.some(function(m,g){return l=g,d.isEqualNode(m)})?i.splice(l,1):o.push(d)}),i.forEach(function(c){return c.parentNode.removeChild(c)}),o.forEach(function(c){return n.appendChild(c)}),{oldTags:i,newTags:o}},Kb=function(t){return Object.keys(t).reduce(function(s,n){var a=typeof t[n]<"u"?n+'="'+t[n]+'"':""+n;return s?s+" "+a:a},"")},vk=function(t,s,n,a){var i=Kb(n),o=Gb(s);return i?"<"+t+" "+Rs+'="true" '+i+">"+Sf(o,a)+"</"+t+">":"<"+t+" "+Rs+'="true">'+Sf(o,a)+"</"+t+">"},wk=function(t,s,n){return s.reduce(function(a,i){var o=Object.keys(i).filter(function(d){return!(d===He.INNER_HTML||d===He.CSS_TEXT)}).reduce(function(d,u){var h=typeof i[u]>"u"?u:u+'="'+Sf(i[u],n)+'"';return d?d+" "+h:h},""),l=i.innerHTML||i.cssText||"",c=nk.indexOf(t)===-1;return a+"<"+t+" "+Rs+'="true" '+o+(c?"/>":">"+l+"</"+t+">")},"")},Yb=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,a){return n[Uc[a]||a]=t[a],n},s)},bk=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,a){return n[rk[a]||a]=t[a],n},s)},jk=function(t,s,n){var a,i=(a={key:s},a[Rs]=!0,a),o=Yb(n,i);return[te.createElement(fe.TITLE,o,s)]},Nk=function(t,s){return s.map(function(n,a){var i,o=(i={key:a},i[Rs]=!0,i);return Object.keys(n).forEach(function(l){var c=Uc[l]||l;if(c===He.INNER_HTML||c===He.CSS_TEXT){var d=n.innerHTML||n.cssText;o.dangerouslySetInnerHTML={__html:d}}else o[c]=n[l]}),te.createElement(t,o)})},sr=function(t,s,n){switch(t){case fe.TITLE:return{toComponent:function(){return jk(t,s.title,s.titleAttributes)},toString:function(){return vk(t,s.title,s.titleAttributes,n)}};case In.BODY:case In.HTML:return{toComponent:function(){return Yb(s)},toString:function(){return Kb(s)}};default:return{toComponent:function(){return Nk(t,s)},toString:function(){return wk(t,s,n)}}}},Qb=function(t){var s=t.baseTag,n=t.bodyAttributes,a=t.encode,i=t.htmlAttributes,o=t.linkTags,l=t.metaTags,c=t.noscriptTags,d=t.scriptTags,u=t.styleTags,h=t.title,m=h===void 0?"":h,g=t.titleAttributes;return{base:sr(fe.BASE,s,a),bodyAttributes:sr(In.BODY,n,a),htmlAttributes:sr(In.HTML,i,a),link:sr(fe.LINK,o,a),meta:sr(fe.META,l,a),noscript:sr(fe.NOSCRIPT,c,a),script:sr(fe.SCRIPT,d,a),style:sr(fe.STYLE,u,a),title:sr(fe.TITLE,{title:m,titleAttributes:g},a)}},Sk=function(t){var s,n;return n=s=function(a){lk(i,a);function i(){return ik(this,i),ck(this,a.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(l){return!QE(this.props,l)},i.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case fe.SCRIPT:case fe.NOSCRIPT:return{innerHTML:c};case fe.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(l){var c,d=l.child,u=l.arrayTypeChildren,h=l.newChildProps,m=l.nestedChildren;return Wt({},u,(c={},c[d.type]=[].concat(u[d.type]||[],[Wt({},h,this.mapNestedChildrenToProps(d,m))]),c))},i.prototype.mapObjectTypeChildren=function(l){var c,d,u=l.child,h=l.newProps,m=l.newChildProps,g=l.nestedChildren;switch(u.type){case fe.TITLE:return Wt({},h,(c={},c[u.type]=g,c.titleAttributes=Wt({},m),c));case fe.BODY:return Wt({},h,{bodyAttributes:Wt({},m)});case fe.HTML:return Wt({},h,{htmlAttributes:Wt({},m)})}return Wt({},h,(d={},d[u.type]=Wt({},m),d))},i.prototype.mapArrayTypeChildrenToProps=function(l,c){var d=Wt({},c);return Object.keys(l).forEach(function(u){var h;d=Wt({},d,(h={},h[u]=l[u],h))}),d},i.prototype.warnOnInvalidChildren=function(l,c){return!0},i.prototype.mapChildrenToProps=function(l,c){var d=this,u={};return te.Children.forEach(l,function(h){if(!(!h||!h.props)){var m=h.props,g=m.children,x=z0(m,["children"]),y=bk(x);switch(d.warnOnInvalidChildren(h,g),h.type){case fe.LINK:case fe.META:case fe.NOSCRIPT:case fe.SCRIPT:case fe.STYLE:u=d.flattenArrayTypeChildren({child:h,arrayTypeChildren:u,newChildProps:y,nestedChildren:g});break;default:c=d.mapObjectTypeChildren({child:h,newProps:c,newChildProps:y,nestedChildren:g});break}}}),c=this.mapArrayTypeChildrenToProps(u,c),c},i.prototype.render=function(){var l=this.props,c=l.children,d=z0(l,["children"]),u=Wt({},d);return c&&(u=this.mapChildrenToProps(c,u)),te.createElement(t,u)},ok(i,null,[{key:"canUseDOM",set:function(l){t.canUseDOM=l}}]),i}(te.Component),s.propTypes={base:Ue.object,bodyAttributes:Ue.object,children:Ue.oneOfType([Ue.arrayOf(Ue.node),Ue.node]),defaultTitle:Ue.string,defer:Ue.bool,encodeSpecialCharacters:Ue.bool,htmlAttributes:Ue.object,link:Ue.arrayOf(Ue.object),meta:Ue.arrayOf(Ue.object),noscript:Ue.arrayOf(Ue.object),onChangeClientState:Ue.func,script:Ue.arrayOf(Ue.object),style:Ue.arrayOf(Ue.object),title:Ue.string,titleAttributes:Ue.object,titleTemplate:Ue.string},s.defaultProps={defer:!0,encodeSpecialCharacters:!0},s.peek=t.peek,s.rewind=function(){var a=t.rewind();return a||(a=Qb({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),a},n},_k=function(){return null},Ck=HE(fk,gk,Qb)(_k),Ao=Sk(Ck);Ao.renderStatic=Ao.rewind;function Re(e,t,{checkForDefaultPrevented:s=!0}={}){return function(a){if(e==null||e(a),s===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function q0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Jb(...e){return t=>{let s=!1;const n=e.map(a=>{const i=q0(a,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():q0(e[a],null)}}}}function Zt(...e){return f.useCallback(Jb(...e),e)}function Ek(e,t){const s=f.createContext(t),n=i=>{const{children:o,...l}=i,c=f.useMemo(()=>l,Object.values(l));return r.jsx(s.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=f.useContext(s);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function ta(e,t=[]){let s=[];function n(i,o){const l=f.createContext(o),c=s.length;s=[...s,o];const d=h=>{var p;const{scope:m,children:g,...x}=h,y=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,w=f.useMemo(()=>x,Object.values(x));return r.jsx(y.Provider,{value:w,children:g})};d.displayName=i+"Provider";function u(h,m){var y;const g=((y=m==null?void 0:m[e])==null?void 0:y[c])||l,x=f.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=s.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,kk(a,...t)]}function kk(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}function Ro(e){const t=Pk(e),s=f.forwardRef((n,a)=>{const{children:i,...o}=n,l=f.Children.toArray(i),c=l.find(Rk);if(c){const d=c.props.children,u=l.map(h=>h===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:a,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}var Tk=Ro("Slot");function Pk(e){const t=f.forwardRef((s,n)=>{const{children:a,...i}=s;if(f.isValidElement(a)){const o=Dk(a),l=Ok(i,a.props);return a.type!==f.Fragment&&(l.ref=n?Jb(n,o):o),f.cloneElement(a,l)}return f.Children.count(a)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ak=Symbol("radix.slottable");function Rk(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ak}function Ok(e,t){const s={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function Dk(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function Xb(e){const t=e+"CollectionProvider",[s,n]=ta(t),[a,i]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:p}=y,v=te.useRef(null),b=te.useRef(new Map).current;return r.jsx(a,{scope:w,itemMap:b,collectionRef:v,children:p})};o.displayName=t;const l=e+"CollectionSlot",c=Ro(l),d=te.forwardRef((y,w)=>{const{scope:p,children:v}=y,b=i(l,p),j=Zt(w,b.collectionRef);return r.jsx(c,{ref:j,children:v})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",m=Ro(u),g=te.forwardRef((y,w)=>{const{scope:p,children:v,...b}=y,j=te.useRef(null),S=Zt(w,j),_=i(u,p);return te.useEffect(()=>(_.itemMap.set(j,{ref:j,...b}),()=>void _.itemMap.delete(j))),r.jsx(m,{[h]:"",ref:S,children:v})});g.displayName=u;function x(y){const w=i(e+"CollectionConsumer",y);return te.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((_,E)=>b.indexOf(_.ref.current)-b.indexOf(E.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:d,ItemSlot:g},x,n]}var Mk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Oe=Mk.reduce((e,t)=>{const s=Ro(`Primitive.${t}`),n=f.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Zb(e,t){e&&xn.flushSync(()=>e.dispatchEvent(t))}function $s(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...s)=>{var n;return(n=t.current)==null?void 0:n.call(t,...s)},[])}function $k(e,t=globalThis==null?void 0:globalThis.document){const s=$s(e);f.useEffect(()=>{const n=a=>{a.key==="Escape"&&s(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[s,t])}var Lk="DismissableLayer",Ef="dismissableLayer.update",Ik="dismissableLayer.pointerDownOutside",Fk="dismissableLayer.focusOutside",W0,ej=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fp=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=f.useContext(ej),[u,h]=f.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=f.useState({}),x=Zt(t,E=>h(E)),y=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),p=y.indexOf(w),v=u?y.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=v>=p,S=Bk(E=>{const C=E.target,O=[...d.branches].some(A=>A.contains(C));!j||O||(a==null||a(E),o==null||o(E),E.defaultPrevented||l==null||l())},m),_=zk(E=>{const C=E.target;[...d.branches].some(A=>A.contains(C))||(i==null||i(E),o==null||o(E),E.defaultPrevented||l==null||l())},m);return $k(E=>{v===d.layers.size-1&&(n==null||n(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},m),f.useEffect(()=>{if(u)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(W0=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),G0(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=W0)}},[u,m,s,d]),f.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),G0())},[u,d]),f.useEffect(()=>{const E=()=>g({});return document.addEventListener(Ef,E),()=>document.removeEventListener(Ef,E)},[]),r.jsx(Oe.div,{...c,ref:x,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:Re(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Re(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Re(e.onPointerDownCapture,S.onPointerDownCapture)})});fp.displayName=Lk;var Vk="DismissableLayerBranch",tj=f.forwardRef((e,t)=>{const s=f.useContext(ej),n=f.useRef(null),a=Zt(t,n);return f.useEffect(()=>{const i=n.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),r.jsx(Oe.div,{...e,ref:a})});tj.displayName=Vk;function Bk(e,t=globalThis==null?void 0:globalThis.document){const s=$s(e),n=f.useRef(!1),a=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){sj(Ik,s,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}function zk(e,t=globalThis==null?void 0:globalThis.document){const s=$s(e),n=f.useRef(!1);return f.useEffect(()=>{const a=i=>{i.target&&!n.current&&sj(Fk,s,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function G0(){const e=new CustomEvent(Ef);document.dispatchEvent(e)}function sj(e,t,s,{discrete:n}){const a=s.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&a.addEventListener(e,t,{once:!0}),n?Zb(a,i):a.dispatchEvent(i)}var Uk=fp,Hk=tj,Js=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},qk="Portal",mp=f.forwardRef((e,t)=>{var l;const{container:s,...n}=e,[a,i]=f.useState(!1);Js(()=>i(!0),[]);const o=s||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Ab.createPortal(r.jsx(Oe.div,{...n,ref:t}),o):null});mp.displayName=qk;function Wk(e,t){return f.useReducer((s,n)=>t[s][n]??s,e)}var li=e=>{const{present:t,children:s}=e,n=Gk(t),a=typeof s=="function"?s({present:n.isPresent}):f.Children.only(s),i=Zt(n.ref,Kk(a));return typeof s=="function"||n.isPresent?f.cloneElement(a,{ref:i}):null};li.displayName="Presence";function Gk(e){const[t,s]=f.useState(),n=f.useRef(null),a=f.useRef(e),i=f.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Wk(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=Cl(n.current);i.current=l==="mounted"?d:"none"},[l]),Js(()=>{const d=n.current,u=a.current;if(u!==e){const m=i.current,g=Cl(d);e?c("MOUNT"):g==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Js(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=g=>{const y=Cl(n.current).includes(g.animationName);if(g.target===t&&y&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=g=>{g.target===t&&(i.current=Cl(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(d=>{n.current=d?getComputedStyle(d):null,s(d)},[])}}function Cl(e){return(e==null?void 0:e.animationName)||"none"}function Kk(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Yk=hd[" useInsertionEffect ".trim().toString()]||Js;function Qo({prop:e,defaultProp:t,onChange:s=()=>{},caller:n}){const[a,i,o]=Qk({defaultProp:t,onChange:s}),l=e!==void 0,c=l?e:a;{const u=f.useRef(e!==void 0);f.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=f.useCallback(u=>{var h;if(l){const m=Jk(u)?u(e):u;m!==e&&((h=o.current)==null||h.call(o,m))}else i(u)},[l,e,i,o]);return[c,d]}function Qk({defaultProp:e,onChange:t}){const[s,n]=f.useState(e),a=f.useRef(s),i=f.useRef(t);return Yk(()=>{i.current=t},[t]),f.useEffect(()=>{var o;a.current!==s&&((o=i.current)==null||o.call(i,s),a.current=s)},[s,a]),[s,n,i]}function Jk(e){return typeof e=="function"}var Xk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Zk="VisuallyHidden",pp=f.forwardRef((e,t)=>r.jsx(Oe.span,{...e,ref:t,style:{...Xk,...e.style}}));pp.displayName=Zk;var xp="ToastProvider",[gp,eT,tT]=Xb("Toast"),[rj,cF]=ta("Toast",[tT]),[sT,Ad]=rj(xp),nj=e=>{const{__scopeToast:t,label:s="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=f.useState(null),[d,u]=f.useState(0),h=f.useRef(!1),m=f.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${xp}\`. Expected non-empty \`string\`.`),r.jsx(gp.Provider,{scope:t,children:r.jsx(sT,{scope:t,label:s,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>u(g=>g+1),[]),onToastRemove:f.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};nj.displayName=xp;var aj="ToastViewport",rT=["F8"],kf="toast.viewportPause",Tf="toast.viewportResume",ij=f.forwardRef((e,t)=>{const{__scopeToast:s,hotkey:n=rT,label:a="Notifications ({hotkey})",...i}=e,o=Ad(aj,s),l=eT(s),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),h=f.useRef(null),m=Zt(t,h,o.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;f.useEffect(()=>{const w=p=>{var b;n.length!==0&&n.every(j=>p[j]||p.code===j)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),f.useEffect(()=>{const w=c.current,p=h.current;if(x&&w&&p){const v=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(kf);p.dispatchEvent(_),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent(Tf);p.dispatchEvent(_),o.isClosePausedRef.current=!1}},j=_=>{!w.contains(_.relatedTarget)&&b()},S=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",v),w.addEventListener("focusout",j),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",j),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[x,o.isClosePausedRef]);const y=f.useCallback(({tabbingDirection:w})=>{const v=l().map(b=>{const j=b.ref.current,S=[j,...xT(j)];return w==="forwards"?S:S.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return f.useEffect(()=>{const w=h.current;if(w){const p=v=>{var S,_,E;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const C=document.activeElement,O=v.shiftKey;if(v.target===w&&O){(S=d.current)==null||S.focus();return}const T=y({tabbingDirection:O?"backwards":"forwards"}),D=T.findIndex(N=>N===C);Iu(T.slice(D+1))?v.preventDefault():O?(_=d.current)==null||_.focus():(E=u.current)==null||E.focus()}};return w.addEventListener("keydown",p),()=>w.removeEventListener("keydown",p)}},[l,y]),r.jsxs(Hk,{ref:c,role:"region","aria-label":a.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&r.jsx(Pf,{ref:d,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});Iu(w)}}),r.jsx(gp.Slot,{scope:s,children:r.jsx(Oe.ol,{tabIndex:-1,...i,ref:m})}),x&&r.jsx(Pf,{ref:u,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});Iu(w)}})]})});ij.displayName=aj;var oj="ToastFocusProxy",Pf=f.forwardRef((e,t)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...a}=e,i=Ad(oj,s);return r.jsx(pp,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});Pf.displayName=oj;var Jo="Toast",nT="toast.swipeStart",aT="toast.swipeMove",iT="toast.swipeCancel",oT="toast.swipeEnd",lj=f.forwardRef((e,t)=>{const{forceMount:s,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Qo({prop:n,defaultProp:a??!0,onChange:i,caller:Jo});return r.jsx(li,{present:s||l,children:r.jsx(dT,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:$s(e.onPause),onResume:$s(e.onResume),onSwipeStart:Re(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Re(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Re(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Re(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});lj.displayName=Jo;var[lT,cT]=rj(Jo,{onClose(){}}),dT=f.forwardRef((e,t)=>{const{__scopeToast:s,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:g,...x}=e,y=Ad(Jo,s),[w,p]=f.useState(null),v=Zt(t,N=>p(N)),b=f.useRef(null),j=f.useRef(null),S=a||y.duration,_=f.useRef(0),E=f.useRef(S),C=f.useRef(0),{onToastAdd:O,onToastRemove:A}=y,R=$s(()=>{var k;(w==null?void 0:w.contains(document.activeElement))&&((k=y.viewport)==null||k.focus()),o()}),T=f.useCallback(N=>{!N||N===1/0||(window.clearTimeout(C.current),_.current=new Date().getTime(),C.current=window.setTimeout(R,N))},[R]);f.useEffect(()=>{const N=y.viewport;if(N){const k=()=>{T(E.current),d==null||d()},P=()=>{const U=new Date().getTime()-_.current;E.current=E.current-U,window.clearTimeout(C.current),c==null||c()};return N.addEventListener(kf,P),N.addEventListener(Tf,k),()=>{N.removeEventListener(kf,P),N.removeEventListener(Tf,k)}}},[y.viewport,S,c,d,T]),f.useEffect(()=>{i&&!y.isClosePausedRef.current&&T(S)},[i,S,y.isClosePausedRef,T]),f.useEffect(()=>(O(),()=>A()),[O,A]);const D=f.useMemo(()=>w?pj(w):null,[w]);return y.viewport?r.jsxs(r.Fragment,{children:[D&&r.jsx(uT,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),r.jsx(lT,{scope:s,onClose:R,children:xn.createPortal(r.jsx(gp.ItemSlot,{scope:s,children:r.jsx(Uk,{asChild:!0,onEscapeKeyDown:Re(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||R(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Oe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...x,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Re(e.onKeyDown,N=>{N.key==="Escape"&&(l==null||l(N.nativeEvent),N.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Re(e.onPointerDown,N=>{N.button===0&&(b.current={x:N.clientX,y:N.clientY})}),onPointerMove:Re(e.onPointerMove,N=>{if(!b.current)return;const k=N.clientX-b.current.x,P=N.clientY-b.current.y,U=!!j.current,M=["left","right"].includes(y.swipeDirection),F=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,q=M?F(0,k):0,L=M?0:F(0,P),J=N.pointerType==="touch"?10:2,ne={x:q,y:L},re={originalEvent:N,delta:ne};U?(j.current=ne,El(aT,h,re,{discrete:!1})):K0(ne,y.swipeDirection,J)?(j.current=ne,El(nT,u,re,{discrete:!1}),N.target.setPointerCapture(N.pointerId)):(Math.abs(k)>J||Math.abs(P)>J)&&(b.current=null)}),onPointerUp:Re(e.onPointerUp,N=>{const k=j.current,P=N.target;if(P.hasPointerCapture(N.pointerId)&&P.releasePointerCapture(N.pointerId),j.current=null,b.current=null,k){const U=N.currentTarget,M={originalEvent:N,delta:k};K0(k,y.swipeDirection,y.swipeThreshold)?El(oT,g,M,{discrete:!0}):El(iT,m,M,{discrete:!0}),U.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),uT=e=>{const{__scopeToast:t,children:s,...n}=e,a=Ad(Jo,t),[i,o]=f.useState(!1),[l,c]=f.useState(!1);return mT(()=>o(!0)),f.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(mp,{asChild:!0,children:r.jsx(pp,{...n,children:i&&r.jsxs(r.Fragment,{children:[a.label," ",s]})})})},hT="ToastTitle",cj=f.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e;return r.jsx(Oe.div,{...n,ref:t})});cj.displayName=hT;var fT="ToastDescription",dj=f.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e;return r.jsx(Oe.div,{...n,ref:t})});dj.displayName=fT;var uj="ToastAction",hj=f.forwardRef((e,t)=>{const{altText:s,...n}=e;return s.trim()?r.jsx(mj,{altText:s,asChild:!0,children:r.jsx(yp,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${uj}\`. Expected non-empty \`string\`.`),null)});hj.displayName=uj;var fj="ToastClose",yp=f.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e,a=cT(fj,s);return r.jsx(mj,{asChild:!0,children:r.jsx(Oe.button,{type:"button",...n,ref:t,onClick:Re(e.onClick,a.onClose)})})});yp.displayName=fj;var mj=f.forwardRef((e,t)=>{const{__scopeToast:s,altText:n,...a}=e;return r.jsx(Oe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function pj(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),pT(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...pj(n))}}),t}function El(e,t,s,{discrete:n}){const a=s.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});t&&a.addEventListener(e,t,{once:!0}),n?Zb(a,i):a.dispatchEvent(i)}var K0=(e,t,s=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>s:!i&&a>s};function mT(e=()=>{}){const t=$s(e);Js(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[t])}function pT(e){return e.nodeType===e.ELEMENT_NODE}function xT(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Iu(e){const t=document.activeElement;return e.some(s=>s===t?!0:(s.focus(),document.activeElement!==t))}var gT=nj,xj=ij,gj=lj,yj=cj,vj=dj,wj=hj,bj=yp;function jj(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=jj(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function Nj(){for(var e,t,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=jj(e))&&(n&&(n+=" "),n+=t);return n}const Y0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Q0=Nj,Rd=(e,t)=>s=>{var n;if((t==null?void 0:t.variants)==null)return Q0(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=s==null?void 0:s[d],h=i==null?void 0:i[d];if(u===null)return null;const m=Y0(u)||Y0(h);return a[d][m]}),l=s&&Object.entries(s).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:m,...g}=u;return Object.entries(g).every(x=>{let[y,w]=x;return Array.isArray(w)?w.includes({...i,...l}[y]):{...i,...l}[y]===w})?[...d,h,m]:d},[]);return Q0(e,o,c,s==null?void 0:s.class,s==null?void 0:s.className)};var yT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),K=(e,t)=>{const s=f.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},d)=>f.createElement("svg",{ref:d,...yT,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:`lucide lucide-${vT(e)}`,...c},[...t.map(([u,h])=>f.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return s.displayName=`${e}`,s},Xs=K("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),gr=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),nt=K("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Hc=K("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),vp=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),J0=K("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),Sj=K("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),ur=K("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),wT=K("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Pt=K("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Af=K("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),X0=K("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),wp=K("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Od=K("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Rf=K("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),vs=K("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),As=K("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),_j=K("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),bT=K("CalendarCheck2",[["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]),yr=K("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),jT=K("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]),Ls=K("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Xi=K("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Cj=K("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ze=K("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),NT=K("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),ST=K("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),bp=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),_T=K("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Fu=K("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),CT=K("Clock4",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Is=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Xo=K("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Ej=K("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),qc=K("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Of=K("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Wc=K("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),kj=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Z0=K("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),qn=K("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ET=K("FileArchive",[["path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2",key:"1u864v"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]),Dd=K("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),eg=K("FileQuestion",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ke=K("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),kT=K("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),jp=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),oc=K("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),TT=K("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),PT=K("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),Wn=K("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),rt=K("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),AT=K("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),RT=K("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Tj=K("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]),OT=K("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),DT=K("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Pj=K("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),MT=K("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),Aj=K("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),$T=K("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),tg=K("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),Rj=K("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),LT=K("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),ft=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Oj=K("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]),IT=K("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),FT=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Qa=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),gt=K("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),VT=K("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),BT=K("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Oo=K("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Np=K("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),zT=K("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),sg=K("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Df=K("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),vt=K("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),lc=K("Nfc",[["path",{d:"M6 8.32a7.43 7.43 0 0 1 0 7.36",key:"9iaqei"}],["path",{d:"M9.46 6.21a11.76 11.76 0 0 1 0 11.58",key:"1yha7l"}],["path",{d:"M12.91 4.1a15.91 15.91 0 0 1 .01 15.8",key:"4iu2gk"}],["path",{d:"M16.37 2a20.16 20.16 0 0 1 0 20",key:"sap9u2"}]]),Dj=K("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),UT=K("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Ns=K("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),HT=K("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),Gn=K("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Mj=K("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),$j=K("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),qT=K("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),ct=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),rg=K("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),WT=K("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),GT=K("RadioTower",[["path",{d:"M4.9 16.1C1 12.2 1 5.8 4.9 1.9",key:"s0qx1y"}],["path",{d:"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5",key:"1idnkw"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}],["path",{d:"M16.2 4.8c2 2 2.26 5.11.8 7.47",key:"ojru2q"}],["path",{d:"M19.1 1.9a9.96 9.96 0 0 1 0 14.1",key:"rhi7fg"}],["path",{d:"M9.5 18h5",key:"mfy3pd"}],["path",{d:"m8 22 4-11 4 11",key:"25yftu"}]]),ng=K("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),KT=K("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),xa=K("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Ss=K("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Rt=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),YT=K("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),QT=K("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Kn=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),JT=K("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),XT=K("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),Lj=K("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),Yn=K("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ke=K("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),ZT=K("Siren",[["path",{d:"M7 12a5 5 0 0 1 5-5v0a5 5 0 0 1 5 5v6H7v-6Z",key:"rmc51c"}],["path",{d:"M5 20a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v2H5v-2Z",key:"yyvmjy"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]]),Ij=K("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),e5=K("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Ct=K("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Mf=K("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Gr=K("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),t5=K("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),kn=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ws=K("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ag=K("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),s5=K("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]),Vu=K("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ln=K("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Fj=K("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Fn=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),xe=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Bu=K("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),r5=K("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),n5=K("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Bt=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Do=K("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function a5(){for(var e=0,t,s,n="";e<arguments.length;)(t=arguments[e++])&&(s=Vj(t))&&(n&&(n+=" "),n+=s);return n}function Vj(e){if(typeof e=="string")return e;for(var t,s="",n=0;n<e.length;n++)e[n]&&(t=Vj(e[n]))&&(s&&(s+=" "),s+=t);return s}var Sp="-";function i5(e){var t=l5(e),s=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,a=n===void 0?{}:n;function i(l){var c=l.split(Sp);return c[0]===""&&c.length!==1&&c.shift(),Bj(c,t)||o5(l)}function o(l,c){var d=s[l]||[];return c&&a[l]?[].concat(d,a[l]):d}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function Bj(e,t){var o;if(e.length===0)return t.classGroupId;var s=e[0],n=t.nextPart.get(s),a=n?Bj(e.slice(1),n):void 0;if(a)return a;if(t.validators.length!==0){var i=e.join(Sp);return(o=t.validators.find(function(l){var c=l.validator;return c(i)}))==null?void 0:o.classGroupId}}var ig=/^\[(.+)\]$/;function o5(e){if(ig.test(e)){var t=ig.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}}function l5(e){var t=e.theme,s=e.prefix,n={nextPart:new Map,validators:[]},a=d5(Object.entries(e.classGroups),s);return a.forEach(function(i){var o=i[0],l=i[1];$f(l,n,o,t)}),n}function $f(e,t,s,n){e.forEach(function(a){if(typeof a=="string"){var i=a===""?t:og(t,a);i.classGroupId=s;return}if(typeof a=="function"){if(c5(a)){$f(a(n),t,s,n);return}t.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(function(o){var l=o[0],c=o[1];$f(c,og(t,l),s,n)})})}function og(e,t){var s=e;return t.split(Sp).forEach(function(n){s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s}function c5(e){return e.isThemeGetter}function d5(e,t){return t?e.map(function(s){var n=s[0],a=s[1],i=a.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],d=l[1];return[t+c,d]})):o});return[n,i]}):e}function u5(e){if(e<1)return{get:function(){},set:function(){}};var t=0,s=new Map,n=new Map;function a(i,o){s.set(i,o),t++,t>e&&(t=0,n=s,s=new Map)}return{get:function(o){var l=s.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return a(o,l),l},set:function(o,l){s.has(o)?s.set(o,l):a(o,l)}}}var zj="!";function h5(e){var t=e.separator||":",s=t.length===1,n=t[0],a=t.length;return function(o){for(var l=[],c=0,d=0,u,h=0;h<o.length;h++){var m=o[h];if(c===0){if(m===n&&(s||o.slice(h,h+a)===t)){l.push(o.slice(d,h)),d=h+a;continue}if(m==="/"){u=h;continue}}m==="["?c++:m==="]"&&c--}var g=l.length===0?o:o.substring(d),x=g.startsWith(zj),y=x?g.substring(1):g,w=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:y,maybePostfixModifierPosition:w}}}function f5(e){if(e.length<=1)return e;var t=[],s=[];return e.forEach(function(n){var a=n[0]==="[";a?(t.push.apply(t,s.sort().concat([n])),s=[]):s.push(n)}),t.push.apply(t,s.sort()),t}function m5(e){return{cache:u5(e.cacheSize),splitModifiers:h5(e),...i5(e)}}var p5=/\s+/;function x5(e,t){var s=t.splitModifiers,n=t.getClassGroupId,a=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(p5).map(function(o){var l=s(o),c=l.modifiers,d=l.hasImportantModifier,u=l.baseClassName,h=l.maybePostfixModifierPosition,m=n(h?u.substring(0,h):u),g=!!h;if(!m){if(!h)return{isTailwindClass:!1,originalClassName:o};if(m=n(u),!m)return{isTailwindClass:!1,originalClassName:o};g=!1}var x=f5(c).join(":"),y=d?x+zj:x;return{isTailwindClass:!0,modifierId:y,classGroupId:m,originalClassName:o,hasPostfixModifier:g}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,d=o.hasPostfixModifier,u=l+c;return i.has(u)?!1:(i.add(u),a(c,d).forEach(function(h){return i.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function g5(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var n,a,i,o=l;function l(d){var u=t[0],h=t.slice(1),m=h.reduce(function(g,x){return x(g)},u());return n=m5(m),a=n.cache.get,i=n.cache.set,o=c,c(d)}function c(d){var u=a(d);if(u)return u;var h=x5(d,n);return i(d,h),h}return function(){return o(a5.apply(null,arguments))}}function Ie(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var Uj=/^\[(?:([a-z-]+):)?(.+)\]$/i,y5=/^\d+\/\d+$/,v5=new Set(["px","full","screen"]),w5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,b5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,j5=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Cs(e){return Dn(e)||v5.has(e)||y5.test(e)||Lf(e)}function Lf(e){return sa(e,"length",k5)}function N5(e){return sa(e,"size",Hj)}function S5(e){return sa(e,"position",Hj)}function _5(e){return sa(e,"url",T5)}function kl(e){return sa(e,"number",Dn)}function Dn(e){return!Number.isNaN(Number(e))}function C5(e){return e.endsWith("%")&&Dn(e.slice(0,-1))}function Ei(e){return lg(e)||sa(e,"number",lg)}function we(e){return Uj.test(e)}function ki(){return!0}function Dr(e){return w5.test(e)}function E5(e){return sa(e,"",P5)}function sa(e,t,s){var n=Uj.exec(e);return n?n[1]?n[1]===t:s(n[2]):!1}function k5(e){return b5.test(e)}function Hj(){return!1}function T5(e){return e.startsWith("url(")}function lg(e){return Number.isInteger(Number(e))}function P5(e){return j5.test(e)}function A5(){var e=Ie("colors"),t=Ie("spacing"),s=Ie("blur"),n=Ie("brightness"),a=Ie("borderColor"),i=Ie("borderRadius"),o=Ie("borderSpacing"),l=Ie("borderWidth"),c=Ie("contrast"),d=Ie("grayscale"),u=Ie("hueRotate"),h=Ie("invert"),m=Ie("gap"),g=Ie("gradientColorStops"),x=Ie("gradientColorStopPositions"),y=Ie("inset"),w=Ie("margin"),p=Ie("opacity"),v=Ie("padding"),b=Ie("saturate"),j=Ie("scale"),S=Ie("sepia"),_=Ie("skew"),E=Ie("space"),C=Ie("translate"),O=function(){return["auto","contain","none"]},A=function(){return["auto","hidden","clip","visible","scroll"]},R=function(){return["auto",we,t]},T=function(){return[we,t]},D=function(){return["",Cs]},N=function(){return["auto",Dn,we]},k=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},P=function(){return["solid","dashed","dotted","double","none"]},U=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},M=function(){return["start","end","center","between","around","evenly","stretch"]},F=function(){return["","0",we]},q=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},L=function(){return[Dn,kl]},J=function(){return[Dn,we]};return{cacheSize:500,theme:{colors:[ki],spacing:[Cs],blur:["none","",Dr,we],brightness:L(),borderColor:[e],borderRadius:["none","","full",Dr,we],borderSpacing:T(),borderWidth:D(),contrast:L(),grayscale:F(),hueRotate:J(),invert:F(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[C5,Lf],inset:R(),margin:R(),opacity:L(),padding:T(),saturate:L(),scale:L(),sepia:F(),skew:J(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",we]}],container:["container"],columns:[{columns:[Dr]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(k(),[we])}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ei]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",we]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Ei]}],"grid-cols":[{"grid-cols":[ki]}],"col-start-end":[{col:["auto",{span:["full",Ei]},we]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[ki]}],"row-start-end":[{row:["auto",{span:[Ei]},we]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",we]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",we]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(M())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(M(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(M(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",we,t]}],"min-w":[{"min-w":["min","max","fit",we,Cs]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Dr]},Dr,we]}],h:[{h:[we,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",we,Cs]}],"max-h":[{"max-h":[we,t,"min","max","fit"]}],"font-size":[{text:["base",Dr,Lf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",kl]}],"font-family":[{font:[ki]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",we]}],"line-clamp":[{"line-clamp":["none",Dn,kl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",we,Cs]}],"list-image":[{"list-image":["none",we]}],"list-style-type":[{list:["none","disc","decimal",we]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(P(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Cs]}],"underline-offset":[{"underline-offset":["auto",we,Cs]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(k(),[S5])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",N5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_5]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[].concat(P(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:P()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(P())}],"outline-offset":[{"outline-offset":[we,Cs]}],"outline-w":[{outline:[Cs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[Cs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Dr,E5]}],"shadow-color":[{shadow:[ki]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":U()}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Dr,we]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",we]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",we]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",we]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Ei,we]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",we]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",we]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",we]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Cs,kl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var R5=g5(A5);function ue(...e){return R5(Nj(e))}const O5=gT,qj=te.forwardRef(({className:e,...t},s)=>r.jsx(xj,{ref:s,className:ue("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));qj.displayName=xj.displayName;const D5=Rd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Wj=te.forwardRef(({className:e,variant:t,...s},n)=>r.jsx(gj,{ref:n,className:ue(D5({variant:t}),e),...s}));Wj.displayName=gj.displayName;const M5=te.forwardRef(({className:e,...t},s)=>r.jsx(wj,{ref:s,className:ue("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));M5.displayName=wj.displayName;const Gj=te.forwardRef(({className:e,...t},s)=>r.jsx(bj,{ref:s,className:ue("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Bt,{className:"h-4 w-4"})}));Gj.displayName=bj.displayName;const Kj=te.forwardRef(({className:e,...t},s)=>r.jsx(yj,{ref:s,className:ue("text-sm font-semibold",e),...t}));Kj.displayName=yj.displayName;const Yj=te.forwardRef(({className:e,...t},s)=>r.jsx(vj,{ref:s,className:ue("text-sm opacity-90",e),...t}));Yj.displayName=vj.displayName;const $5=3,L5=1e6,mr={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let zu=0;function I5(){return zu=(zu+1)%Number.MAX_SAFE_INTEGER,zu.toString()}const Uu=new Map,cg=e=>{if(Uu.has(e))return;const t=setTimeout(()=>{Uu.delete(e),Zi({type:mr.REMOVE_TOAST,toastId:e})},L5);Uu.set(e,t)},F5=(e,t)=>{switch(t.type){case mr.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,$5)};case mr.UPDATE_TOAST:return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case mr.DISMISS_TOAST:{const{toastId:s}=t;return s?cg(s):e.toasts.forEach(n=>{cg(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===s||s===void 0?{...n,open:!1}:n)}}case mr.REMOVE_TOAST:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};default:return e}},cc=[];let dc={toasts:[]};function Zi(e){dc=F5(dc,e),cc.forEach(t=>{t(dc)})}function V5(e){const t=I5(),s=a=>Zi({type:mr.UPDATE_TOAST,toast:{...a,id:t}}),n=()=>Zi({type:mr.DISMISS_TOAST,toastId:t});return Zi({type:mr.ADD_TOAST,toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:s}}function ce(){const[e,t]=te.useState(dc);return te.useEffect(()=>(cc.push(t),()=>{const s=cc.indexOf(t);s>-1&&cc.splice(s,1)}),[e]),{...e,toast:V5,dismiss:s=>Zi({type:mr.DISMISS_TOAST,toastId:s})}}function B5(){const{toasts:e}=ce();return r.jsxs(O5,{children:[e.map(function({id:t,title:s,description:n,action:a,...i}){return r.jsxs(Wj,{...i,children:[r.jsxs("div",{className:"grid gap-1",children:[s&&r.jsx(Kj,{children:s}),n&&r.jsx(Yj,{children:n})]}),a,r.jsx(Gj,{})]},t)}),r.jsx(qj,{})]})}const Qj=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Md=f.createContext({}),$d=f.createContext(null),Ld=typeof document<"u",_p=Ld?f.useLayoutEffect:f.useEffect,Jj=f.createContext({strict:!1}),Cp=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),z5="framerAppearId",Xj="data-"+Cp(z5);function U5(e,t,s,n){const{visualElement:a}=f.useContext(Md),i=f.useContext(Jj),o=f.useContext($d),l=f.useContext(Qj).reducedMotion,c=f.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:a,props:s,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;f.useInsertionEffect(()=>{d&&d.update(s,o)});const u=f.useRef(!!(s[Xj]&&!window.HandoffComplete));return _p(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),f.useEffect(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}function Ta(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function H5(e,t,s){return f.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):Ta(s)&&(s.current=n))},[t])}function Mo(e){return typeof e=="string"||Array.isArray(e)}function Id(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Ep=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kp=["initial",...Ep];function Fd(e){return Id(e.animate)||kp.some(t=>Mo(e[t]))}function Zj(e){return!!(Fd(e)||e.variants)}function q5(e,t){if(Fd(e)){const{initial:s,animate:n}=e;return{initial:s===!1||Mo(s)?s:void 0,animate:Mo(n)?n:void 0}}return e.inherit!==!1?t:{}}function W5(e){const{initial:t,animate:s}=q5(e,f.useContext(Md));return f.useMemo(()=>({initial:t,animate:s}),[dg(t),dg(s)])}function dg(e){return Array.isArray(e)?e.join(" "):e}const ug={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$o={};for(const e in ug)$o[e]={isEnabled:t=>ug[e].some(s=>!!t[s])};function G5(e){for(const t in e)$o[t]={...$o[t],...e[t]}}const Tp=f.createContext({}),eN=f.createContext({}),K5=Symbol.for("motionComponentSymbol");function Y5({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:n,Component:a}){e&&G5(e);function i(l,c){let d;const u={...f.useContext(Qj),...l,layoutId:Q5(l)},{isStatic:h}=u,m=W5(l),g=n(l,h);if(!h&&Ld){m.visualElement=U5(a,g,u,t);const x=f.useContext(eN),y=f.useContext(Jj).strict;m.visualElement&&(d=m.visualElement.loadFeatures(u,y,e,x))}return f.createElement(Md.Provider,{value:m},d&&m.visualElement?f.createElement(d,{visualElement:m.visualElement,...u}):null,s(a,l,H5(g,m.visualElement,c),g,h,m.visualElement))}const o=f.forwardRef(i);return o[K5]=a,o}function Q5({layoutId:e}){const t=f.useContext(Tp).id;return t&&e!==void 0?t+"-"+e:e}function J5(e){function t(n,a={}){return Y5(e(n,a))}if(typeof Proxy>"u")return t;const s=new Map;return new Proxy(t,{get:(n,a)=>(s.has(a)||s.set(a,t(a)),s.get(a))})}const X5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Pp(e){return typeof e!="string"||e.includes("-")?!1:!!(X5.indexOf(e)>-1||/[A-Z]/.test(e))}const Gc={};function Z5(e){Object.assign(Gc,e)}const Zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ra=new Set(Zo);function tN(e,{layout:t,layoutId:s}){return ra.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Gc[e]||e==="opacity")}const es=e=>!!(e&&e.getVelocity),eP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tP=Zo.length;function sP(e,{enableHardwareAcceleration:t=!0,allowTransformNone:s=!0},n,a){let i="";for(let o=0;o<tP;o++){const l=Zo[o];if(e[l]!==void 0){const c=eP[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(e,n?"":i):s&&n&&(i="none"),i}const sN=e=>t=>typeof t=="string"&&t.startsWith(e),rN=sN("--"),If=sN("var(--"),rP=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,nP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,cn=(e,t,s)=>Math.min(Math.max(s,e),t),na={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},eo={...na,transform:e=>cn(0,1,e)},Tl={...na,default:1},to=e=>Math.round(e*1e5)/1e5,Vd=/(-)?([\d]*\.?[\d])+/g,nN=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,aP=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function el(e){return typeof e=="string"}const tl=e=>({test:t=>el(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),$r=tl("deg"),Ys=tl("%"),de=tl("px"),iP=tl("vh"),oP=tl("vw"),hg={...Ys,parse:e=>Ys.parse(e)/100,transform:e=>Ys.transform(e*100)},fg={...na,transform:Math.round},aN={borderWidth:de,borderTopWidth:de,borderRightWidth:de,borderBottomWidth:de,borderLeftWidth:de,borderRadius:de,radius:de,borderTopLeftRadius:de,borderTopRightRadius:de,borderBottomRightRadius:de,borderBottomLeftRadius:de,width:de,maxWidth:de,height:de,maxHeight:de,size:de,top:de,right:de,bottom:de,left:de,padding:de,paddingTop:de,paddingRight:de,paddingBottom:de,paddingLeft:de,margin:de,marginTop:de,marginRight:de,marginBottom:de,marginLeft:de,rotate:$r,rotateX:$r,rotateY:$r,rotateZ:$r,scale:Tl,scaleX:Tl,scaleY:Tl,scaleZ:Tl,skew:$r,skewX:$r,skewY:$r,distance:de,translateX:de,translateY:de,translateZ:de,x:de,y:de,z:de,perspective:de,transformPerspective:de,opacity:eo,originX:hg,originY:hg,originZ:de,zIndex:fg,fillOpacity:eo,strokeOpacity:eo,numOctaves:fg};function Ap(e,t,s,n){const{style:a,vars:i,transform:o,transformOrigin:l}=e;let c=!1,d=!1,u=!0;for(const h in t){const m=t[h];if(rN(h)){i[h]=m;continue}const g=aN[h],x=nP(m,g);if(ra.has(h)){if(c=!0,o[h]=x,!u)continue;m!==(g.default||0)&&(u=!1)}else h.startsWith("origin")?(d=!0,l[h]=x):a[h]=x}if(t.transform||(c||n?a.transform=sP(e.transform,s,u,n):a.transform&&(a.transform="none")),d){const{originX:h="50%",originY:m="50%",originZ:g=0}=l;a.transformOrigin=`${h} ${m} ${g}`}}const Rp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iN(e,t,s){for(const n in t)!es(t[n])&&!tN(n,s)&&(e[n]=t[n])}function lP({transformTemplate:e},t,s){return f.useMemo(()=>{const n=Rp();return Ap(n,t,{enableHardwareAcceleration:!s},e),Object.assign({},n.vars,n.style)},[t])}function cP(e,t,s){const n=e.style||{},a={};return iN(a,n,e),Object.assign(a,lP(e,t,s)),e.transformValues?e.transformValues(a):a}function dP(e,t,s){const n={},a=cP(e,t,s);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const uP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Kc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||uP.has(e)}let oN=e=>!Kc(e);function hP(e){e&&(oN=t=>t.startsWith("on")?!Kc(t):e(t))}try{hP(require("@emotion/is-prop-valid").default)}catch{}function fP(e,t,s){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(oN(a)||s===!0&&Kc(a)||!t&&!Kc(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function mg(e,t,s){return typeof e=="string"?e:de.transform(t+s*e)}function mP(e,t,s){const n=mg(t,e.x,e.width),a=mg(s,e.y,e.height);return`${n} ${a}`}const pP={offset:"stroke-dashoffset",array:"stroke-dasharray"},xP={offset:"strokeDashoffset",array:"strokeDasharray"};function gP(e,t,s=1,n=0,a=!0){e.pathLength=1;const i=a?pP:xP;e[i.offset]=de.transform(-n);const o=de.transform(t),l=de.transform(s);e[i.array]=`${o} ${l}`}function Op(e,{attrX:t,attrY:s,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,h,m){if(Ap(e,d,u,m),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:x,dimensions:y}=e;g.transform&&(y&&(x.transform=g.transform),delete g.transform),y&&(a!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=mP(y,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(g.x=t),s!==void 0&&(g.y=s),n!==void 0&&(g.scale=n),o!==void 0&&gP(g,o,l,c,!1)}const lN=()=>({...Rp(),attrs:{}}),Dp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function yP(e,t,s,n){const a=f.useMemo(()=>{const i=lN();return Op(i,t,{enableHardwareAcceleration:!1},Dp(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};iN(i,e.style,e),a.style={...i,...a.style}}return a}function vP(e=!1){return(s,n,a,{latestValues:i},o)=>{const c=(Pp(s)?yP:dP)(n,i,o,s),u={...fP(n,typeof s=="string",e),...c,ref:a},{children:h}=n,m=f.useMemo(()=>es(h)?h.get():h,[h]);return f.createElement(s,{...u,children:m})}}function cN(e,{style:t,vars:s},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const i in s)e.style.setProperty(i,s[i])}const dN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uN(e,t,s,n){cN(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(dN.has(a)?a:Cp(a),t.attrs[a])}function Mp(e,t){const{style:s}=e,n={};for(const a in s)(es(s[a])||t.style&&es(t.style[a])||tN(a,e))&&(n[a]=s[a]);return n}function hN(e,t){const s=Mp(e,t);for(const n in e)if(es(e[n])||es(t[n])){const a=Zo.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[a]=e[n]}return s}function $p(e,t,s,n={},a={}){return typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,a)),t}function fN(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const Yc=e=>Array.isArray(e),wP=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),bP=e=>Yc(e)?e[e.length-1]||0:e;function uc(e){const t=es(e)?e.get():e;return wP(t)?t.toValue():t}function jP({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:s},n,a,i){const o={latestValues:NP(n,a,i,e),renderState:t()};return s&&(o.mount=l=>s(n,l,o)),o}const mN=e=>(t,s)=>{const n=f.useContext(Md),a=f.useContext($d),i=()=>jP(e,t,n,a);return s?i():fN(i)};function NP(e,t,s,n){const a={},i=n(e,{});for(const m in i)a[m]=uc(i[m]);let{initial:o,animate:l}=e;const c=Fd(e),d=Zj(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!Id(h)&&(Array.isArray(h)?h:[h]).forEach(g=>{const x=$p(e,g);if(!x)return;const{transitionEnd:y,transition:w,...p}=x;for(const v in p){let b=p[v];if(Array.isArray(b)){const j=u?b.length-1:0;b=b[j]}b!==null&&(a[v]=b)}for(const v in y)a[v]=y[v]}),a}const tt=e=>e;class pg{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const s=this.order.indexOf(t);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function SP(e){let t=new pg,s=new pg,n=0,a=!1,i=!1;const o=new WeakSet,l={schedule:(c,d=!1,u=!1)=>{const h=u&&a,m=h?t:s;return d&&o.add(c),m.add(c)&&h&&a&&(n=t.order.length),c},cancel:c=>{s.remove(c),o.delete(c)},process:c=>{if(a){i=!0;return}if(a=!0,[t,s]=[s,t],s.clear(),n=t.order.length,n)for(let d=0;d<n;d++){const u=t.order[d];u(c),o.has(u)&&(l.schedule(u),e())}a=!1,i&&(i=!1,l.process(c))}};return l}const Pl=["prepare","read","update","preRender","render","postRender"],_P=40;function CP(e,t){let s=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=Pl.reduce((h,m)=>(h[m]=SP(()=>s=!0),h),{}),o=h=>i[h].process(a),l=()=>{const h=performance.now();s=!1,a.delta=n?1e3/60:Math.max(Math.min(h-a.timestamp,_P),1),a.timestamp=h,a.isProcessing=!0,Pl.forEach(o),a.isProcessing=!1,s&&t&&(n=!1,e(l))},c=()=>{s=!0,n=!0,a.isProcessing||e(l)};return{schedule:Pl.reduce((h,m)=>{const g=i[m];return h[m]=(x,y=!1,w=!1)=>(s||c(),g.schedule(x,y,w)),h},{}),cancel:h=>Pl.forEach(m=>i[m].cancel(h)),state:a,steps:i}}const{schedule:Le,cancel:_r,state:St,steps:Hu}=CP(typeof requestAnimationFrame<"u"?requestAnimationFrame:tt,!0),EP={useVisualState:mN({scrapeMotionValuesFromProps:hN,createRenderState:lN,onMount:(e,t,{renderState:s,latestValues:n})=>{Le.read(()=>{try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),Le.render(()=>{Op(s,n,{enableHardwareAcceleration:!1},Dp(t.tagName),e.transformTemplate),uN(t,s)})}})},kP={useVisualState:mN({scrapeMotionValuesFromProps:Mp,createRenderState:Rp})};function TP(e,{forwardMotionProps:t=!1},s,n){return{...Pp(e)?EP:kP,preloadedFeatures:s,useRender:vP(t),createVisualElement:n,Component:e}}function pr(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}const pN=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Bd(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const PP=e=>t=>pN(t)&&e(t,Bd(t));function vr(e,t,s,n){return pr(e,t,PP(s),n)}const AP=(e,t)=>s=>t(e(s)),rn=(...e)=>e.reduce(AP);function xN(e){let t=null;return()=>{const s=()=>{t=null};return t===null?(t=e,s):!1}}const xg=xN("dragHorizontal"),gg=xN("dragVertical");function gN(e){let t=!1;if(e==="y")t=gg();else if(e==="x")t=xg();else{const s=xg(),n=gg();s&&n?t=()=>{s(),n()}:(s&&s(),n&&n())}return t}function yN(){const e=gN(!0);return e?(e(),!1):!0}class yn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function yg(e,t){const s="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),a=(i,o)=>{if(i.pointerType==="touch"||yN())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Le.update(()=>l[n](i,o))};return vr(e.current,s,a,{passive:!e.getProps()[n]})}class RP extends yn{mount(){this.unmount=rn(yg(this.node,!0),yg(this.node,!1))}unmount(){}}class OP extends yn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rn(pr(this.node.current,"focus",()=>this.onFocus()),pr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const vN=(e,t)=>t?e===t?!0:vN(e,t.parentElement):!1;function qu(e,t){if(!t)return;const s=new PointerEvent("pointer"+e);t(s,Bd(s))}class DP extends yn{constructor(){super(...arguments),this.removeStartListeners=tt,this.removeEndListeners=tt,this.removeAccessibleListeners=tt,this.startPointerPress=(t,s)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=vr(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:h}=this.node.getProps();Le.update(()=>{!h&&!vN(this.node.current,l.target)?u&&u(l,c):d&&d(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),o=vr(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=rn(i,o),this.startPress(t,s)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||qu("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&Le.update(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=pr(this.node.current,"keyup",o),qu("down",(l,c)=>{this.startPress(l,c)})},s=pr(this.node.current,"keydown",t),n=()=>{this.isPressing&&qu("cancel",(i,o)=>this.cancelPress(i,o))},a=pr(this.node.current,"blur",n);this.removeAccessibleListeners=rn(s,a)}}startPress(t,s){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Le.update(()=>n(t,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!yN()}cancelPress(t,s){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Le.update(()=>n(t,s))}mount(){const t=this.node.getProps(),s=vr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=pr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=rn(s,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Ff=new WeakMap,Wu=new WeakMap,MP=e=>{const t=Ff.get(e.target);t&&t(e)},$P=e=>{e.forEach(MP)};function LP({root:e,...t}){const s=e||document;Wu.has(s)||Wu.set(s,{});const n=Wu.get(s),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver($P,{root:e,...t})),n[a]}function IP(e,t,s){const n=LP(t);return Ff.set(e,s),n.observe(e),()=>{Ff.delete(e),n.unobserve(e)}}const FP={some:0,all:1};class VP extends yn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:a="some",once:i}=t,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:FP[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(c)};return IP(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(BP(t,s))&&this.startObserver()}unmount(){}}function BP({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const zP={inView:{Feature:VP},tap:{Feature:DP},focus:{Feature:OP},hover:{Feature:RP}};function wN(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}function UP(e){const t={};return e.values.forEach((s,n)=>t[n]=s.get()),t}function HP(e){const t={};return e.values.forEach((s,n)=>t[n]=s.getVelocity()),t}function zd(e,t,s){const n=e.getProps();return $p(n,t,s!==void 0?s:n.custom,UP(e),HP(e))}let qP=tt,Lp=tt;const nn=e=>e*1e3,wr=e=>e/1e3,WP={current:!1},bN=e=>Array.isArray(e)&&typeof e[0]=="number";function jN(e){return!!(!e||typeof e=="string"&&NN[e]||bN(e)||Array.isArray(e)&&e.every(jN))}const Bi=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,NN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bi([0,.65,.55,1]),circOut:Bi([.55,0,1,.45]),backIn:Bi([.31,.01,.66,-.59]),backOut:Bi([.33,1.53,.69,.99])};function SN(e){if(e)return bN(e)?Bi(e):Array.isArray(e)?e.map(SN):NN[e]}function GP(e,t,s,{delay:n=0,duration:a,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const d={[t]:s};c&&(d.offset=c);const u=SN(l);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function KP(e,{repeat:t,repeatType:s="loop"}){const n=t&&s!=="loop"&&t%2===1?0:e.length-1;return e[n]}const _N=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,YP=1e-7,QP=12;function JP(e,t,s,n,a){let i,o,l=0;do o=t+(s-t)/2,i=_N(o,n,a)-e,i>0?s=o:t=o;while(Math.abs(i)>YP&&++l<QP);return o}function sl(e,t,s,n){if(e===t&&s===n)return tt;const a=i=>JP(i,0,1,e,s);return i=>i===0||i===1?i:_N(a(i),t,n)}const XP=sl(.42,0,1,1),ZP=sl(0,0,.58,1),CN=sl(.42,0,.58,1),eA=e=>Array.isArray(e)&&typeof e[0]!="number",EN=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,kN=e=>t=>1-e(1-t),Ip=e=>1-Math.sin(Math.acos(e)),TN=kN(Ip),tA=EN(Ip),PN=sl(.33,1.53,.69,.99),Fp=kN(PN),sA=EN(Fp),rA=e=>(e*=2)<1?.5*Fp(e):.5*(2-Math.pow(2,-10*(e-1))),nA={linear:tt,easeIn:XP,easeInOut:CN,easeOut:ZP,circIn:Ip,circInOut:tA,circOut:TN,backIn:Fp,backInOut:sA,backOut:PN,anticipate:rA},vg=e=>{if(Array.isArray(e)){Lp(e.length===4);const[t,s,n,a]=e;return sl(t,s,n,a)}else if(typeof e=="string")return nA[e];return e},Vp=(e,t)=>s=>!!(el(s)&&aP.test(s)&&s.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(s,t)),AN=(e,t,s)=>n=>{if(!el(n))return n;const[a,i,o,l]=n.match(Vd);return{[e]:parseFloat(a),[t]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},aA=e=>cn(0,255,e),Gu={...na,transform:e=>Math.round(aA(e))},Mn={test:Vp("rgb","red"),parse:AN("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+Gu.transform(e)+", "+Gu.transform(t)+", "+Gu.transform(s)+", "+to(eo.transform(n))+")"};function iA(e){let t="",s="",n="",a="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,s+=s,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const Vf={test:Vp("#"),parse:iA,transform:Mn.transform},Pa={test:Vp("hsl","hue"),parse:AN("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ys.transform(to(t))+", "+Ys.transform(to(s))+", "+to(eo.transform(n))+")"},Mt={test:e=>Mn.test(e)||Vf.test(e)||Pa.test(e),parse:e=>Mn.test(e)?Mn.parse(e):Pa.test(e)?Pa.parse(e):Vf.parse(e),transform:e=>el(e)?e:e.hasOwnProperty("red")?Mn.transform(e):Pa.transform(e)},Ye=(e,t,s)=>-s*e+s*t+e;function Ku(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function oA({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let a=0,i=0,o=0;if(!t)a=i=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;a=Ku(c,l,e+1/3),i=Ku(c,l,e),o=Ku(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const Yu=(e,t,s)=>{const n=e*e;return Math.sqrt(Math.max(0,s*(t*t-n)+n))},lA=[Vf,Mn,Pa],cA=e=>lA.find(t=>t.test(e));function wg(e){const t=cA(e);let s=t.parse(e);return t===Pa&&(s=oA(s)),s}const RN=(e,t)=>{const s=wg(e),n=wg(t),a={...s};return i=>(a.red=Yu(s.red,n.red,i),a.green=Yu(s.green,n.green,i),a.blue=Yu(s.blue,n.blue,i),a.alpha=Ye(s.alpha,n.alpha,i),Mn.transform(a))};function dA(e){var t,s;return isNaN(e)&&el(e)&&(((t=e.match(Vd))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(nN))===null||s===void 0?void 0:s.length)||0)>0}const ON={regex:rP,countKey:"Vars",token:"${v}",parse:tt},DN={regex:nN,countKey:"Colors",token:"${c}",parse:Mt.parse},MN={regex:Vd,countKey:"Numbers",token:"${n}",parse:na.parse};function Qu(e,{regex:t,countKey:s,token:n,parse:a}){const i=e.tokenised.match(t);i&&(e["num"+s]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(a)))}function Qc(e){const t=e.toString(),s={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&Qu(s,ON),Qu(s,DN),Qu(s,MN),s}function $N(e){return Qc(e).values}function LN(e){const{values:t,numColors:s,numVars:n,tokenised:a}=Qc(e),i=t.length;return o=>{let l=a;for(let c=0;c<i;c++)c<n?l=l.replace(ON.token,o[c]):c<n+s?l=l.replace(DN.token,Mt.transform(o[c])):l=l.replace(MN.token,to(o[c]));return l}}const uA=e=>typeof e=="number"?0:e;function hA(e){const t=$N(e);return LN(e)(t.map(uA))}const dn={test:dA,parse:$N,createTransformer:LN,getAnimatableNone:hA},IN=(e,t)=>s=>`${s>0?t:e}`;function FN(e,t){return typeof e=="number"?s=>Ye(e,t,s):Mt.test(e)?RN(e,t):e.startsWith("var(")?IN(e,t):BN(e,t)}const VN=(e,t)=>{const s=[...e],n=s.length,a=e.map((i,o)=>FN(i,t[o]));return i=>{for(let o=0;o<n;o++)s[o]=a[o](i);return s}},fA=(e,t)=>{const s={...e,...t},n={};for(const a in s)e[a]!==void 0&&t[a]!==void 0&&(n[a]=FN(e[a],t[a]));return a=>{for(const i in n)s[i]=n[i](a);return s}},BN=(e,t)=>{const s=dn.createTransformer(t),n=Qc(e),a=Qc(t);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?rn(VN(n.values,a.values),s):IN(e,t)},Lo=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n},bg=(e,t)=>s=>Ye(e,t,s);function mA(e){return typeof e=="number"?bg:typeof e=="string"?Mt.test(e)?RN:BN:Array.isArray(e)?VN:typeof e=="object"?fA:bg}function pA(e,t,s){const n=[],a=s||mA(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||tt:t;l=rn(c,l)}n.push(l)}return n}function zN(e,t,{clamp:s=!0,ease:n,mixer:a}={}){const i=e.length;if(Lp(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=pA(t,n,a),l=o.length,c=d=>{let u=0;if(l>1)for(;u<e.length-2&&!(d<e[u+1]);u++);const h=Lo(e[u],e[u+1],d);return o[u](h)};return s?d=>c(cn(e[0],e[i-1],d)):c}function xA(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const a=Lo(0,t,n);e.push(Ye(s,1,a))}}function gA(e){const t=[0];return xA(t,e.length-1),t}function yA(e,t){return e.map(s=>s*t)}function vA(e,t){return e.map(()=>t||CN).splice(0,e.length-1)}function Jc({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const a=eA(n)?n.map(vg):vg(n),i={done:!1,value:t[0]},o=yA(s&&s.length===t.length?s:gA(t),e),l=zN(o,t,{ease:Array.isArray(a)?a:vA(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function UN(e,t){return t?e*(1e3/t):0}const wA=5;function HN(e,t,s){const n=Math.max(t-wA,0);return UN(s-e(n),t-n)}const Ju=.001,bA=.01,jg=10,jA=.05,NA=1;function SA({duration:e=800,bounce:t=.25,velocity:s=0,mass:n=1}){let a,i;qP(e<=nn(jg));let o=1-t;o=cn(jA,NA,o),e=cn(bA,jg,wr(e)),o<1?(a=d=>{const u=d*o,h=u*e,m=u-s,g=Bf(d,o),x=Math.exp(-h);return Ju-m/g*x},i=d=>{const h=d*o*e,m=h*s+s,g=Math.pow(o,2)*Math.pow(d,2)*e,x=Math.exp(-h),y=Bf(Math.pow(d,2),o);return(-a(d)+Ju>0?-1:1)*((m-g)*x)/y}):(a=d=>{const u=Math.exp(-d*e),h=(d-s)*e+1;return-Ju+u*h},i=d=>{const u=Math.exp(-d*e),h=(s-d)*(e*e);return u*h});const l=5/e,c=CA(a,i,l);if(e=nn(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:e}}}const _A=12;function CA(e,t,s){let n=s;for(let a=1;a<_A;a++)n=n-e(n)/t(n);return n}function Bf(e,t){return e*Math.sqrt(1-t*t)}const EA=["duration","bounce"],kA=["stiffness","damping","mass"];function Ng(e,t){return t.some(s=>e[s]!==void 0)}function TA(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Ng(e,kA)&&Ng(e,EA)){const s=SA(e);t={...t,...s,mass:1},t.isResolvedFromDuration=!0}return t}function qN({keyframes:e,restDelta:t,restSpeed:s,...n}){const a=e[0],i=e[e.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=TA({...n,velocity:-wr(n.velocity||0)}),g=h||0,x=c/(2*Math.sqrt(l*d)),y=i-a,w=wr(Math.sqrt(l/d)),p=Math.abs(y)<5;s||(s=p?.01:2),t||(t=p?.005:.5);let v;if(x<1){const b=Bf(w,x);v=j=>{const S=Math.exp(-x*w*j);return i-S*((g+x*w*y)/b*Math.sin(b*j)+y*Math.cos(b*j))}}else if(x===1)v=b=>i-Math.exp(-w*b)*(y+(g+w*y)*b);else{const b=w*Math.sqrt(x*x-1);v=j=>{const S=Math.exp(-x*w*j),_=Math.min(b*j,300);return i-S*((g+x*w*y)*Math.sinh(_)+b*y*Math.cosh(_))/b}}return{calculatedDuration:m&&u||null,next:b=>{const j=v(b);if(m)o.done=b>=u;else{let S=g;b!==0&&(x<1?S=HN(v,b,j):S=0);const _=Math.abs(S)<=s,E=Math.abs(i-j)<=t;o.done=_&&E}return o.value=o.done?i:j,o}}}function Sg({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],m={done:!1,value:h},g=C=>l!==void 0&&C<l||c!==void 0&&C>c,x=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let y=s*t;const w=h+y,p=o===void 0?w:o(w);p!==w&&(y=p-h);const v=C=>-y*Math.exp(-C/n),b=C=>p+v(C),j=C=>{const O=v(C),A=b(C);m.done=Math.abs(O)<=d,m.value=m.done?p:A};let S,_;const E=C=>{g(m.value)&&(S=C,_=qN({keyframes:[m.value,x(m.value)],velocity:HN(b,C,m.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return E(0),{calculatedDuration:null,next:C=>{let O=!1;return!_&&S===void 0&&(O=!0,j(C),E(C)),S!==void 0&&C>S?_.next(C-S):(!O&&j(C),m)}}}const PA=e=>{const t=({timestamp:s})=>e(s);return{start:()=>Le.update(t,!0),stop:()=>_r(t),now:()=>St.isProcessing?St.timestamp:performance.now()}},_g=2e4;function Cg(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<_g;)t+=s,n=e.next(t);return t>=_g?1/0:t}const AA={decay:Sg,inertia:Sg,tween:Jc,keyframes:Jc,spring:qN};function Xc({autoplay:e=!0,delay:t=0,driver:s=PA,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:u,onUpdate:h,...m}){let g=1,x=!1,y,w;const p=()=>{w=new Promise(L=>{y=L})};p();let v;const b=AA[a]||Jc;let j;b!==Jc&&typeof n[0]!="number"&&(j=zN([0,100],n,{clamp:!1}),n=[0,100]);const S=b({...m,keyframes:n});let _;l==="mirror"&&(_=b({...m,keyframes:[...n].reverse(),velocity:-(m.velocity||0)}));let E="idle",C=null,O=null,A=null;S.calculatedDuration===null&&i&&(S.calculatedDuration=Cg(S));const{calculatedDuration:R}=S;let T=1/0,D=1/0;R!==null&&(T=R+o,D=T*(i+1)-o);let N=0;const k=L=>{if(O===null)return;g>0&&(O=Math.min(O,L)),g<0&&(O=Math.min(L-D/g,O)),C!==null?N=C:N=Math.round(L-O)*g;const J=N-t*(g>=0?1:-1),ne=g>=0?J<0:J>D;N=Math.max(J,0),E==="finished"&&C===null&&(N=D);let re=N,Ne=S;if(i){const H=Math.min(N,D)/T;let X=Math.floor(H),ie=H%1;!ie&&H>=1&&(ie=1),ie===1&&X--,X=Math.min(X,i+1),!!(X%2)&&(l==="reverse"?(ie=1-ie,o&&(ie-=o/T)):l==="mirror"&&(Ne=_)),re=cn(0,1,ie)*T}const pe=ne?{done:!1,value:n[0]}:Ne.next(re);j&&(pe.value=j(pe.value));let{done:le}=pe;!ne&&R!==null&&(le=g>=0?N>=D:N<=0);const Se=C===null&&(E==="finished"||E==="running"&&le);return h&&h(pe.value),Se&&M(),pe},P=()=>{v&&v.stop(),v=void 0},U=()=>{E="idle",P(),y(),p(),O=A=null},M=()=>{E="finished",u&&u(),P(),y()},F=()=>{if(x)return;v||(v=s(k));const L=v.now();c&&c(),C!==null?O=L-C:(!O||E==="finished")&&(O=L),E==="finished"&&p(),A=O,C=null,E="running",v.start()};e&&F();const q={then(L,J){return w.then(L,J)},get time(){return wr(N)},set time(L){L=nn(L),N=L,C!==null||!v||g===0?C=L:O=v.now()-L/g},get duration(){const L=S.calculatedDuration===null?Cg(S):S.calculatedDuration;return wr(L)},get speed(){return g},set speed(L){L===g||!v||(g=L,q.time=wr(N))},get state(){return E},play:F,pause:()=>{E="paused",C=N},stop:()=>{x=!0,E!=="idle"&&(E="idle",d&&d(),U())},cancel:()=>{A!==null&&k(A),U()},complete:()=>{E="finished"},sample:L=>(O=0,k(L))};return q}function RA(e){let t;return()=>(t===void 0&&(t=e()),t)}const OA=RA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),DA=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Al=10,MA=2e4,$A=(e,t)=>t.type==="spring"||e==="backgroundColor"||!jN(t.ease);function LA(e,t,{onUpdate:s,onComplete:n,...a}){if(!(OA()&&DA.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let o=!1,l,c,d=!1;const u=()=>{c=new Promise(b=>{l=b})};u();let{keyframes:h,duration:m=300,ease:g,times:x}=a;if($A(t,a)){const b=Xc({...a,repeat:0,delay:0});let j={done:!1,value:h[0]};const S=[];let _=0;for(;!j.done&&_<MA;)j=b.sample(_),S.push(j.value),_+=Al;x=void 0,h=S,m=_-Al,g="linear"}const y=GP(e.owner.current,t,h,{...a,duration:m,ease:g,times:x}),w=()=>{d=!1,y.cancel()},p=()=>{d=!0,Le.update(w),l(),u()};return y.onfinish=()=>{d||(e.set(KP(h,a)),n&&n(),p())},{then(b,j){return c.then(b,j)},attachTimeline(b){return y.timeline=b,y.onfinish=null,tt},get time(){return wr(y.currentTime||0)},set time(b){y.currentTime=nn(b)},get speed(){return y.playbackRate},set speed(b){y.playbackRate=b},get duration(){return wr(m)},play:()=>{o||(y.play(),_r(w))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:b}=y;if(b){const j=Xc({...a,autoplay:!1});e.setWithVelocity(j.sample(b-Al).value,j.sample(b).value,Al)}p()},complete:()=>{d||y.finish()},cancel:p}}function IA({keyframes:e,delay:t,onUpdate:s,onComplete:n}){const a=()=>(s&&s(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:tt,pause:tt,stop:tt,then:i=>(i(),Promise.resolve()),cancel:tt,complete:tt});return t?Xc({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const FA={type:"spring",stiffness:500,damping:25,restSpeed:10},VA=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),BA={type:"keyframes",duration:.8},zA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UA=(e,{keyframes:t})=>t.length>2?BA:ra.has(e)?e.startsWith("scale")?VA(t[1]):FA:zA,zf=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(dn.test(t)||t==="0")&&!t.startsWith("url(")),HA=new Set(["brightness","contrast","saturate","opacity"]);function qA(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(Vd)||[];if(!n)return e;const a=s.replace(n,"");let i=HA.has(t)?1:0;return n!==s&&(i*=100),t+"("+i+a+")"}const WA=/([a-z-]*)\(.*?\)/g,Uf={...dn,getAnimatableNone:e=>{const t=e.match(WA);return t?t.map(qA).join(" "):e}},GA={...aN,color:Mt,backgroundColor:Mt,outlineColor:Mt,fill:Mt,stroke:Mt,borderColor:Mt,borderTopColor:Mt,borderRightColor:Mt,borderBottomColor:Mt,borderLeftColor:Mt,filter:Uf,WebkitFilter:Uf},Bp=e=>GA[e];function WN(e,t){let s=Bp(e);return s!==Uf&&(s=dn),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const GN=e=>/^0[^.\s]+$/.test(e);function KA(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||GN(e)}function YA(e,t,s,n){const a=zf(t,s);let i;Array.isArray(s)?i=[...s]:i=[null,s];const o=n.from!==void 0?n.from:e.get();let l;const c=[];for(let d=0;d<i.length;d++)i[d]===null&&(i[d]=d===0?o:i[d-1]),KA(i[d])&&c.push(d),typeof i[d]=="string"&&i[d]!=="none"&&i[d]!=="0"&&(l=i[d]);if(a&&c.length&&l)for(let d=0;d<c.length;d++){const u=c[d];i[u]=WN(t,l)}return i}function QA({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}function zp(e,t){return e[t]||e.default||e}const JA={skipAnimations:!1},Up=(e,t,s,n={})=>a=>{const i=zp(n,e)||{},o=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-nn(o);const c=YA(t,e,s,i),d=c[0],u=c[c.length-1],h=zf(e,d),m=zf(e,u);let g={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:x=>{t.set(x),i.onUpdate&&i.onUpdate(x)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(QA(i)||(g={...g,...UA(e,g)}),g.duration&&(g.duration=nn(g.duration)),g.repeatDelay&&(g.repeatDelay=nn(g.repeatDelay)),!h||!m||WP.current||i.type===!1||JA.skipAnimations)return IA(g);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const x=LA(t,e,g);if(x)return x}return Xc(g)};function Zc(e){return!!(es(e)&&e.add)}const KN=e=>/^\-?\d*\.?\d+$/.test(e);function Hp(e,t){e.indexOf(t)===-1&&e.push(t)}function qp(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class Wp{constructor(){this.subscriptions=[]}add(t){return Hp(this.subscriptions,t),()=>qp(this.subscriptions,t)}notify(t,s,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,s,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const XA=e=>!isNaN(parseFloat(e));class ZA{constructor(t,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=St;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Le.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Le.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=XA(this.current),this.owner=s.owner}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Wp);const n=this.events[t].add(s);return t==="change"?()=>{n(),Le.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,n){this.set(s),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?UN(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ja(e,t){return new ZA(e,t)}const YN=e=>t=>t.test(e),e3={test:e=>e==="auto",parse:e=>e},QN=[na,de,Ys,$r,oP,iP,e3],Ti=e=>QN.find(YN(e)),t3=[...QN,Mt,dn],s3=e=>t3.find(YN(e));function r3(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,Ja(s))}function n3(e,t){const s=zd(e,t);let{transitionEnd:n={},transition:a={},...i}=s?e.makeTargetAnimatable(s,!1):{};i={...i,...n};for(const o in i){const l=bP(i[o]);r3(e,o,l)}}function a3(e,t,s){var n,a;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],d=t[c];let u=null;Array.isArray(d)&&(u=d[0]),u===null&&(u=(a=(n=s[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&a!==void 0?a:t[c]),u!=null&&(typeof u=="string"&&(KN(u)||GN(u))?u=parseFloat(u):!s3(u)&&dn.test(d)&&(u=WN(c,d)),e.addValue(c,Ja(u,{owner:e})),s[c]===void 0&&(s[c]=u),u!==null&&e.setBaseTarget(c,u))}}function i3(e,t){return t?(t[e]||t.default||t).from:void 0}function o3(e,t,s){const n={};for(const a in e){const i=i3(a,t);if(i!==void 0)n[a]=i;else{const o=s.getValue(a);o&&(n[a]=o.get())}}return n}function l3({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function c3(e,t){const s=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}else return s!==t}function JN(e,t,{delay:s=0,transitionOverride:n,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(i=n);const d=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const h in l){const m=e.getValue(h),g=l[h];if(!m||g===void 0||u&&l3(u,h))continue;const x={delay:s,elapsed:0,...zp(i||{},h)};if(window.HandoffAppearAnimations){const p=e.getProps()[Xj];if(p){const v=window.HandoffAppearAnimations(p,h,m,Le);v!==null&&(x.elapsed=v,x.isHandoff=!0)}}let y=!x.isHandoff&&!c3(m,g);if(x.type==="spring"&&(m.getVelocity()||x.velocity)&&(y=!1),m.animation&&(y=!1),y)continue;m.start(Up(h,m,g,e.shouldReduceMotion&&ra.has(h)?{type:!1}:x));const w=m.animation;Zc(c)&&(c.add(h),w.then(()=>c.remove(h))),d.push(w)}return o&&Promise.all(d).then(()=>{o&&n3(e,o)}),d}function Hf(e,t,s={}){const n=zd(e,t,s.custom);let{transition:a=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(a=s.transitionOverride);const i=n?()=>Promise.all(JN(e,n,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=a;return d3(e,t,d+c,u,h,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,d]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>d())}else return Promise.all([i(),o(s.delay)])}function d3(e,t,s=0,n=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*n,c=a===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(e.variantChildren).sort(u3).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(Hf(d,t,{...i,delay:s+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function u3(e,t){return e.sortNodePosition(t)}function h3(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>Hf(e,i,s));n=Promise.all(a)}else if(typeof t=="string")n=Hf(e,t,s);else{const a=typeof t=="function"?zd(e,t,s.custom):t;n=Promise.all(JN(e,a,s))}return n.then(()=>e.notify("AnimationComplete",t))}const f3=[...Ep].reverse(),m3=Ep.length;function p3(e){return t=>Promise.all(t.map(({animation:s,options:n})=>h3(e,s,n)))}function x3(e){let t=p3(e);const s=y3();let n=!0;const a=(c,d)=>{const u=zd(e,d);if(u){const{transition:h,transitionEnd:m,...g}=u;c={...c,...g,...m}}return c};function i(c){t=c(e)}function o(c,d){const u=e.getProps(),h=e.getVariantContext(!0)||{},m=[],g=new Set;let x={},y=1/0;for(let p=0;p<m3;p++){const v=f3[p],b=s[v],j=u[v]!==void 0?u[v]:h[v],S=Mo(j),_=v===d?b.isActive:null;_===!1&&(y=p);let E=j===h[v]&&j!==u[v]&&S;if(E&&n&&e.manuallyAnimateOnMount&&(E=!1),b.protectedKeys={...x},!b.isActive&&_===null||!j&&!b.prevProp||Id(j)||typeof j=="boolean")continue;let O=g3(b.prevProp,j)||v===d&&b.isActive&&!E&&S||p>y&&S,A=!1;const R=Array.isArray(j)?j:[j];let T=R.reduce(a,{});_===!1&&(T={});const{prevResolvedValues:D={}}=b,N={...D,...T},k=P=>{O=!0,g.has(P)&&(A=!0,g.delete(P)),b.needsAnimating[P]=!0};for(const P in N){const U=T[P],M=D[P];if(x.hasOwnProperty(P))continue;let F=!1;Yc(U)&&Yc(M)?F=!wN(U,M):F=U!==M,F?U!==void 0?k(P):g.add(P):U!==void 0&&g.has(P)?k(P):b.protectedKeys[P]=!0}b.prevProp=j,b.prevResolvedValues=T,b.isActive&&(x={...x,...T}),n&&e.blockInitialAnimation&&(O=!1),O&&(!E||A)&&m.push(...R.map(P=>({animation:P,options:{type:v,...c}})))}if(g.size){const p={};g.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(p[v]=b)}),m.push({animation:p})}let w=!!m.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(m):Promise.resolve()}function l(c,d,u){var h;if(s[c].isActive===d)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(g=>{var x;return(x=g.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),s[c].isActive=d;const m=o(u,c);for(const g in s)s[g].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s}}function g3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!wN(t,e):!1}function wn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function y3(){return{animate:wn(!0),whileInView:wn(),whileHover:wn(),whileTap:wn(),whileDrag:wn(),whileFocus:wn(),exit:wn()}}class v3 extends yn{constructor(t){super(t),t.animationState||(t.animationState=x3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Id(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let w3=0;class b3 extends yn{constructor(){super(...arguments),this.id=w3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});s&&!t&&i.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const j3={animation:{Feature:v3},exit:{Feature:b3}},Eg=(e,t)=>Math.abs(e-t);function N3(e,t){const s=Eg(e.x,t.x),n=Eg(e.y,t.y);return Math.sqrt(s**2+n**2)}class XN{constructor(t,s,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Zu(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=N3(h.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:x}=h,{timestamp:y}=St;this.history.push({...x,timestamp:y});const{onStart:w,onMove:p}=this.handlers;m||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Xu(m,this.transformPagePoint),Le.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Zu(h.type==="pointercancel"?this.lastMoveEventInfo:Xu(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,w),x&&x(h,w)},!pN(t))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=n,this.contextWindow=a||window;const o=Bd(t),l=Xu(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=St;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=s;u&&u(t,Zu(l,this.history)),this.removeListeners=rn(vr(this.contextWindow,"pointermove",this.handlePointerMove),vr(this.contextWindow,"pointerup",this.handlePointerUp),vr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),_r(this.updatePoint)}}function Xu(e,t){return t?{point:t(e.point)}:e}function kg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Zu({point:e},t){return{point:e,delta:kg(e,ZN(t)),offset:kg(e,S3(t)),velocity:_3(t,.1)}}function S3(e){return e[0]}function ZN(e){return e[e.length-1]}function _3(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const a=ZN(e);for(;s>=0&&(n=e[s],!(a.timestamp-n.timestamp>nn(t)));)s--;if(!n)return{x:0,y:0};const i=wr(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ls(e){return e.max-e.min}function qf(e,t=0,s=.01){return Math.abs(e-t)<=s}function Tg(e,t,s,n=.5){e.origin=n,e.originPoint=Ye(t.min,t.max,e.origin),e.scale=ls(s)/ls(t),(qf(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Ye(s.min,s.max,e.origin)-e.originPoint,(qf(e.translate)||isNaN(e.translate))&&(e.translate=0)}function so(e,t,s,n){Tg(e.x,t.x,s.x,n?n.originX:void 0),Tg(e.y,t.y,s.y,n?n.originY:void 0)}function Pg(e,t,s){e.min=s.min+t.min,e.max=e.min+ls(t)}function C3(e,t,s){Pg(e.x,t.x,s.x),Pg(e.y,t.y,s.y)}function Ag(e,t,s){e.min=t.min-s.min,e.max=e.min+ls(t)}function ro(e,t,s){Ag(e.x,t.x,s.x),Ag(e.y,t.y,s.y)}function E3(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?Ye(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?Ye(s,e,n.max):Math.min(e,s)),e}function Rg(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function k3(e,{top:t,left:s,bottom:n,right:a}){return{x:Rg(e.x,s,a),y:Rg(e.y,t,n)}}function Og(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function T3(e,t){return{x:Og(e.x,t.x),y:Og(e.y,t.y)}}function P3(e,t){let s=.5;const n=ls(e),a=ls(t);return a>n?s=Lo(t.min,t.max-n,e.min):n>a&&(s=Lo(e.min,e.max-a,t.min)),cn(0,1,s)}function A3(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Wf=.35;function R3(e=Wf){return e===!1?e=0:e===!0&&(e=Wf),{x:Dg(e,"left","right"),y:Dg(e,"top","bottom")}}function Dg(e,t,s){return{min:Mg(e,t),max:Mg(e,s)}}function Mg(e,t){return typeof e=="number"?e:e[t]||0}const $g=()=>({translate:0,scale:1,origin:0,originPoint:0}),Aa=()=>({x:$g(),y:$g()}),Lg=()=>({min:0,max:0}),at=()=>({x:Lg(),y:Lg()});function hs(e){return[e("x"),e("y")]}function e1({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function O3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function D3(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function eh(e){return e===void 0||e===1}function Gf({scale:e,scaleX:t,scaleY:s}){return!eh(e)||!eh(t)||!eh(s)}function _n(e){return Gf(e)||t1(e)||e.z||e.rotate||e.rotateX||e.rotateY}function t1(e){return Ig(e.x)||Ig(e.y)}function Ig(e){return e&&e!=="0%"}function ed(e,t,s){const n=e-s,a=t*n;return s+a}function Fg(e,t,s,n,a){return a!==void 0&&(e=ed(e,a,n)),ed(e,s,n)+t}function Kf(e,t=0,s=1,n,a){e.min=Fg(e.min,t,s,n,a),e.max=Fg(e.max,t,s,n,a)}function s1(e,{x:t,y:s}){Kf(e.x,t.translate,t.scale,t.originPoint),Kf(e.y,s.translate,s.scale,s.originPoint)}function M3(e,t,s,n=!1){const a=s.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=s[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ra(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,s1(e,o)),n&&_n(i.latestValues)&&Ra(e,i.latestValues))}t.x=Vg(t.x),t.y=Vg(t.y)}function Vg(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Br(e,t){e.min=e.min+t,e.max=e.max+t}function Bg(e,t,[s,n,a]){const i=t[a]!==void 0?t[a]:.5,o=Ye(e.min,e.max,i);Kf(e,t[s],t[n],o,t.scale)}const $3=["x","scaleX","originX"],L3=["y","scaleY","originY"];function Ra(e,t){Bg(e.x,t,$3),Bg(e.y,t,L3)}function r1(e,t){return e1(D3(e.getBoundingClientRect(),t))}function I3(e,t,s){const n=r1(e,s),{scroll:a}=t;return a&&(Br(n.x,a.offset.x),Br(n.y,a.offset.y)),n}const n1=({current:e})=>e?e.ownerDocument.defaultView:null,F3=new WeakMap;class V3{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=at(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Bd(u,"page").point)},i=(u,h)=>{const{drag:m,dragPropagation:g,onDragStart:x}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=gN(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hs(w=>{let p=this.getAxisMotionValue(w).get()||0;if(Ys.test(p)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[w];b&&(p=ls(b)*(parseFloat(p)/100))}}this.originPoint[w]=p}),x&&Le.update(()=>x(u,h),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:x,onDrag:y}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:w}=h;if(g&&this.currentDirection===null){this.currentDirection=B3(w),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),y&&y(u,h)},l=(u,h)=>this.stop(u,h),c=()=>hs(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new XN(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:n1(this.visualElement)})}stop(t,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Le.update(()=>i(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:a}=this.getProps();if(!n||!Rl(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=E3(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;s&&Ta(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&a?this.constraints=k3(a.layoutBox,s):this.constraints=!1,this.elastic=R3(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&hs(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=A3(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Ta(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=I3(n,a.root,this.visualElement.getTransformPagePoint());let o=T3(a.layout.layoutBox,i);if(s){const l=s(O3(o));this.hasMutatedConstraints=!!l,l&&(o=e1(l))}return o}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=hs(u=>{if(!Rl(u,s,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const m=a?200:1e6,g=a?40:1e7,x={type:"inertia",velocity:n?t[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,x)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return n.start(Up(t,n,0,s))}stopAnimation(){hs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){hs(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),a=n[s];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){hs(s=>{const{drag:n}=this.getProps();if(!Rl(s,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[s];i.set(t[s]-Ye(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Ta(s)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};hs(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();a[o]=P3({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),hs(o=>{if(!Rl(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Ye(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;F3.set(this.visualElement,this);const t=this.visualElement.current,s=vr(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Ta(c)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const o=pr(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(hs(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Wf,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Rl(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function B3(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class z3 extends yn{constructor(t){super(t),this.removeGroupControls=tt,this.removeListeners=tt,this.controls=new V3(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tt}unmount(){this.removeGroupControls(),this.removeListeners()}}const zg=e=>(t,s)=>{e&&Le.update(()=>e(t,s))};class U3 extends yn{constructor(){super(...arguments),this.removePointerDownListener=tt}onPointerDown(t){this.session=new XN(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:n1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:zg(t),onStart:zg(s),onMove:n,onEnd:(i,o)=>{delete this.session,a&&Le.update(()=>a(i,o))}}}mount(){this.removePointerDownListener=vr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function H3(){const e=f.useContext($d);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:n}=e,a=f.useId();return f.useEffect(()=>n(a),[]),!t&&s?[!1,()=>s&&s(a)]:[!0]}const hc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ug(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Pi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(de.test(e))e=parseFloat(e);else return e;const s=Ug(e,t.target.x),n=Ug(e,t.target.y);return`${s}% ${n}%`}},q3={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,a=dn.parse(e);if(a.length>5)return n;const i=dn.createTransformer(e),o=typeof a[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=Ye(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};class W3 extends te.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;Z5(G3),i&&(s.group&&s.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),hc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Le.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function a1(e){const[t,s]=H3(),n=f.useContext(Tp);return te.createElement(W3,{...e,layoutGroup:n,switchLayoutGroup:f.useContext(eN),isPresent:t,safeToRemove:s})}const G3={borderRadius:{...Pi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pi,borderTopRightRadius:Pi,borderBottomLeftRadius:Pi,borderBottomRightRadius:Pi,boxShadow:q3},i1=["TopLeft","TopRight","BottomLeft","BottomRight"],K3=i1.length,Hg=e=>typeof e=="string"?parseFloat(e):e,qg=e=>typeof e=="number"||de.test(e);function Y3(e,t,s,n,a,i){a?(e.opacity=Ye(0,s.opacity!==void 0?s.opacity:1,Q3(n)),e.opacityExit=Ye(t.opacity!==void 0?t.opacity:1,0,J3(n))):i&&(e.opacity=Ye(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let o=0;o<K3;o++){const l=`border${i1[o]}Radius`;let c=Wg(t,l),d=Wg(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||qg(c)===qg(d)?(e[l]=Math.max(Ye(Hg(c),Hg(d),n),0),(Ys.test(d)||Ys.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||s.rotate)&&(e.rotate=Ye(t.rotate||0,s.rotate||0,n))}function Wg(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Q3=o1(0,.5,TN),J3=o1(.5,.95,tt);function o1(e,t,s){return n=>n<e?0:n>t?1:s(Lo(e,t,n))}function Gg(e,t){e.min=t.min,e.max=t.max}function us(e,t){Gg(e.x,t.x),Gg(e.y,t.y)}function Kg(e,t,s,n,a){return e-=t,e=ed(e,1/s,n),a!==void 0&&(e=ed(e,1/a,n)),e}function X3(e,t=0,s=1,n=.5,a,i=e,o=e){if(Ys.test(t)&&(t=parseFloat(t),t=Ye(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Ye(i.min,i.max,n);e===i&&(l-=t),e.min=Kg(e.min,t,s,l,a),e.max=Kg(e.max,t,s,l,a)}function Yg(e,t,[s,n,a],i,o){X3(e,t[s],t[n],t[a],t.scale,i,o)}const Z3=["x","scaleX","originX"],eR=["y","scaleY","originY"];function Qg(e,t,s,n){Yg(e.x,t,Z3,s?s.x:void 0,n?n.x:void 0),Yg(e.y,t,eR,s?s.y:void 0,n?n.y:void 0)}function Jg(e){return e.translate===0&&e.scale===1}function l1(e){return Jg(e.x)&&Jg(e.y)}function tR(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function c1(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Xg(e){return ls(e.x)/ls(e.y)}class sR{constructor(){this.members=[]}add(t){Hp(this.members,t),t.scheduleRender()}remove(t){if(qp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(a=>t===a);if(s===0)return!1;let n;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zg(e,t,s){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{rotate:c,rotateX:d,rotateY:u}=s;c&&(n+=`rotate(${c}deg) `),d&&(n+=`rotateX(${d}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const rR=(e,t)=>e.depth-t.depth;class nR{constructor(){this.children=[],this.isDirty=!1}add(t){Hp(this.children,t),this.isDirty=!0}remove(t){qp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(rR),this.isDirty=!1,this.children.forEach(t)}}function aR(e,t){const s=performance.now(),n=({timestamp:a})=>{const i=a-s;i>=t&&(_r(n),e(i-t))};return Le.read(n,!0),()=>_r(n)}function iR(e){window.MotionDebug&&window.MotionDebug.record(e)}function oR(e){return e instanceof SVGElement&&e.tagName!=="svg"}function lR(e,t,s){const n=es(e)?e:Ja(e);return n.start(Up("",n,t,s)),n.animation}const ey=["","X","Y","Z"],cR={visibility:"hidden"},ty=1e3;let dR=0;const Cn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function d1({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=dR++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Cn.totalNodes=Cn.resolvedTargetDeltas=Cn.recalculatedProjection=0,this.nodes.forEach(fR),this.nodes.forEach(yR),this.nodes.forEach(vR),this.nodes.forEach(mR),iR(Cn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new nR)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Wp),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=oR(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let h;const m=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=aR(m,250),hc.hasAnimatedSinceResize&&(hc.hasAnimatedSinceResize=!1,this.nodes.forEach(ry))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||SR,{onLayoutAnimationStart:w,onLayoutAnimationComplete:p}=u.getProps(),v=!this.targetLayout||!c1(this.targetLayout,x)||g,b=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const j={...zp(y,"layout"),onPlay:w,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else m||ry(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_r(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wR),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(sy);return}this.isUpdating||this.nodes.forEach(xR),this.isUpdating=!1,this.nodes.forEach(gR),this.nodes.forEach(uR),this.nodes.forEach(hR),this.clearAllSnapshots();const l=performance.now();St.delta=cn(0,1e3/60,l-St.timestamp),St.timestamp=l,St.isProcessing=!0,Hu.update.process(St),Hu.preRender.process(St),Hu.render.process(St),St.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(pR),this.sharedNodes.forEach(bR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=at(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:s(this.instance)})}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!l1(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||_n(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),_R(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return at();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Br(l.x,c.offset.x),Br(l.y,c.offset.y)),l}removeElementScroll(o){const l=at();us(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;if(d!==this.root&&u&&h.layoutScroll){if(u.isRoot){us(l,o);const{scroll:m}=this.root;m&&(Br(l.x,-m.offset.x),Br(l.y,-m.offset.y))}Br(l.x,u.offset.x),Br(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const c=at();us(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ra(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),_n(u.latestValues)&&Ra(c,u.latestValues)}return _n(this.latestValues)&&Ra(c,this.latestValues),c}removeTransform(o){const l=at();us(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!_n(d.latestValues))continue;Gf(d.latestValues)&&d.updateSnapshot();const u=at(),h=d.measurePageBox();us(u,h),Qg(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return _n(this.latestValues)&&Qg(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==St.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=St.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),ro(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=at(),this.targetWithTransforms=at()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),C3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):us(this.target,this.layout.layoutBox),s1(this.target,this.targetDelta)):us(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),ro(this.relativeTargetOrigin,this.target,g.target),us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Cn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Gf(this.parent.latestValues)||t1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===St.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;us(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;M3(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:x}=l;if(!x){this.projectionTransform&&(this.projectionDelta=Aa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Aa(),this.projectionDeltaWithTransform=Aa());const y=this.projectionTransform;so(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=Zg(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Cn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=Aa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=at(),g=c?c.source:void 0,x=this.layout?this.layout.source:void 0,y=g!==x,w=this.getStack(),p=!w||w.members.length<=1,v=!!(y&&!p&&this.options.crossfade===!0&&!this.path.some(NR));this.animationProgress=0;let b;this.mixTargetDelta=j=>{const S=j/1e3;ny(h.x,o.x,S),ny(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ro(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jR(this.relativeTarget,this.relativeTargetOrigin,m,S),b&&tR(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=at()),us(b,this.relativeTarget)),y&&(this.animationValues=u,Y3(u,d,this.latestValues,S,v,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_r(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Le.update(()=>{hc.hasAnimatedSinceResize=!0,this.currentAnimation=lR(0,ty,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ty),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&u1(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||at();const h=ls(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=ls(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}us(l,c),Ra(l,u),so(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new sR),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let u=0;u<ey.length;u++){const h="rotate"+ey[u];c[h]&&(d[h]=c[h],o.setStaticValue(h,0))}o.render();for(const u in d)o.setStaticValue(u,d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return cR;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=uc(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=uc(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!_n(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=Zg(this.projectionDeltaWithTransform,this.treeScale,m),u&&(d.transform=u(m,d.transform));const{x:g,y:x}=this.projectionDelta;d.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const y in Gc){if(m[y]===void 0)continue;const{correct:w,applyTo:p}=Gc[y],v=d.transform==="none"?m[y]:w(m[y],h);if(p){const b=p.length;for(let j=0;j<b;j++)d[p[j]]=v}else d[y]=v}return this.options.layoutId&&(d.pointerEvents=h===this?uc(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(sy),this.root.sharedNodes.clear()}}}function uR(e){e.updateLayout()}function hR(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,o=s.source!==e.layout.source;i==="size"?hs(h=>{const m=o?s.measuredBox[h]:s.layoutBox[h],g=ls(m);m.min=n[h].min,m.max=m.min+g}):u1(i,s.layoutBox,n)&&hs(h=>{const m=o?s.measuredBox[h]:s.layoutBox[h],g=ls(n[h]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const l=Aa();so(l,n,s.layoutBox);const c=Aa();o?so(c,e.applyTransform(a,!0),s.measuredBox):so(c,n,s.layoutBox);const d=!l1(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const x=at();ro(x,s.layoutBox,m.layoutBox);const y=at();ro(y,n,g.layoutBox),c1(x,y)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=x,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function fR(e){Cn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function mR(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function pR(e){e.clearSnapshot()}function sy(e){e.clearMeasurements()}function xR(e){e.isLayoutDirty=!1}function gR(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ry(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function yR(e){e.resolveTargetDelta()}function vR(e){e.calcProjection()}function wR(e){e.resetRotation()}function bR(e){e.removeLeadSnapshot()}function ny(e,t,s){e.translate=Ye(t.translate,0,s),e.scale=Ye(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function ay(e,t,s,n){e.min=Ye(t.min,s.min,n),e.max=Ye(t.max,s.max,n)}function jR(e,t,s,n){ay(e.x,t.x,s.x,n),ay(e.y,t.y,s.y,n)}function NR(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const SR={duration:.45,ease:[.4,0,.1,1]},iy=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),oy=iy("applewebkit/")&&!iy("chrome/")?Math.round:tt;function ly(e){e.min=oy(e.min),e.max=oy(e.max)}function _R(e){ly(e.x),ly(e.y)}function u1(e,t,s){return e==="position"||e==="preserve-aspect"&&!qf(Xg(t),Xg(s),.2)}const CR=d1({attachResizeListener:(e,t)=>pr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),th={current:void 0},h1=d1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!th.current){const e=new CR({});e.mount(window),e.setOptions({layoutScroll:!0}),th.current=e}return th.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ER={pan:{Feature:U3},drag:{Feature:z3,ProjectionNode:h1,MeasureLayout:a1}},kR=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function TR(e){const t=kR.exec(e);if(!t)return[,];const[,s,n]=t;return[s,n]}function Yf(e,t,s=1){const[n,a]=TR(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return KN(o)?parseFloat(o):o}else return If(a)?Yf(a,t,s+1):a}function PR(e,{...t},s){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:s};s&&(s={...s}),e.values.forEach(a=>{const i=a.get();if(!If(i))return;const o=Yf(i,n);o&&a.set(o)});for(const a in t){const i=t[a];if(!If(i))continue;const o=Yf(i,n);o&&(t[a]=o,s||(s={}),s[a]===void 0&&(s[a]=i))}return{target:t,transitionEnd:s}}const AR=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),f1=e=>AR.has(e),RR=e=>Object.keys(e).some(f1),cy=e=>e===na||e===de,dy=(e,t)=>parseFloat(e.split(", ")[t]),uy=(e,t)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return dy(a[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?dy(i[1],e):0}},OR=new Set(["x","y","z"]),DR=Zo.filter(e=>!OR.has(e));function MR(e){const t=[];return DR.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Xa={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:uy(4,13),y:uy(5,14)};Xa.translateX=Xa.x;Xa.translateY=Xa.y;const $R=(e,t,s)=>{const n=t.measureViewportBox(),a=t.current,i=getComputedStyle(a),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),s.forEach(d=>{l[d]=Xa[d](n,i)}),t.render();const c=t.measureViewportBox();return s.forEach(d=>{const u=t.getValue(d);u&&u.jump(l[d]),e[d]=Xa[d](c,i)}),e},LR=(e,t,s={},n={})=>{t={...t},n={...n};const a=Object.keys(t).filter(f1);let i=[],o=!1;const l=[];if(a.forEach(c=>{const d=e.getValue(c);if(!e.hasValue(c))return;let u=s[c],h=Ti(u);const m=t[c];let g;if(Yc(m)){const x=m.length,y=m[0]===null?1:0;u=m[y],h=Ti(u);for(let w=y;w<x&&m[w]!==null;w++)g?Lp(Ti(m[w])===g):g=Ti(m[w])}else g=Ti(m);if(h!==g)if(cy(h)&&cy(g)){const x=d.get();typeof x=="string"&&d.set(parseFloat(x)),typeof m=="string"?t[c]=parseFloat(m):Array.isArray(m)&&g===de&&(t[c]=m.map(parseFloat))}else h!=null&&h.transform&&(g!=null&&g.transform)&&(u===0||m===0)?u===0?d.set(g.transform(u)):t[c]=h.transform(m):(o||(i=MR(e),o=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],d.jump(m))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=$R(t,e,l);return i.length&&i.forEach(([u,h])=>{e.getValue(u).set(h)}),e.render(),Ld&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:n}}else return{target:t,transitionEnd:n}};function IR(e,t,s,n){return RR(t)?LR(e,t,s,n):{target:t,transitionEnd:n}}const FR=(e,t,s,n)=>{const a=PR(e,t,n);return t=a.target,n=a.transitionEnd,IR(e,t,s,n)},Qf={current:null},m1={current:!1};function VR(){if(m1.current=!0,!!Ld)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Qf.current=e.matches;e.addListener(t),t()}else Qf.current=!1}function BR(e,t,s){const{willChange:n}=t;for(const a in t){const i=t[a],o=s[a];if(es(i))e.addValue(a,i),Zc(n)&&n.add(a);else if(es(o))e.addValue(a,Ja(i,{owner:e})),Zc(n)&&n.remove(a);else if(o!==i)if(e.hasValue(a)){const l=e.getValue(a);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(a);e.addValue(a,Ja(l!==void 0?l:i,{owner:e}))}}for(const a in s)t[a]===void 0&&e.removeValue(a);return t}const hy=new WeakMap,p1=Object.keys($o),zR=p1.length,fy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],UR=kp.length;class HR{constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Le.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.isControllingVariants=Fd(s),this.isVariantNode=Zj(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(s,{});for(const h in u){const m=u[h];l[h]!==void 0&&es(m)&&(m.set(l[h],!1),Zc(d)&&d.add(h))}}scrapeMotionValuesFromProps(t,s){return{}}mount(t){this.current=t,hy.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),m1.current||VR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Qf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hy.delete(this.current),this.projection&&this.projection.unmount(),_r(this.notifyUpdate),_r(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,s){const n=ra.has(t),a=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Le.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...s},n,a,i){let o,l;for(let c=0;c<zR;c++){const d=p1[c],{isEnabled:u,Feature:h,ProjectionNode:m,MeasureLayout:g}=$o[d];m&&(o=m),u(s)&&(!this.features[d]&&h&&(this.features[d]=new h(this)),g&&(l=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:g}=s;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!u||h&&Ta(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:g})}return l}updateFeatures(){for(const t in this.features){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):at()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}makeTargetAnimatable(t,s=!0){return this.makeTargetAnimatableFromInstance(t,this.props,s)}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<fy.length;n++){const a=fy[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=t["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=BR(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const s={};for(let n=0;n<UR;n++){const a=kp[n],i=this.props[a];(Mo(i)||i===!1)&&(s[a]=i)}return s}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){s!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,s)),this.values.set(t,s),this.latestValues[t]=s.get()}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=Ja(s,{owner:this}),this.addValue(t,n)),n}readValue(t){var s;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(s=$p(this.props,n))===null||s===void 0?void 0:s[t]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!es(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Wp),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class x1 extends HR{sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:s,...n},{transformValues:a},i){let o=o3(n,t||{},this);if(a&&(s&&(s=a(s)),n&&(n=a(n)),o&&(o=a(o))),i){a3(this,n,o);const l=FR(this,n,o,s);s=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:s,...n}}}function qR(e){return window.getComputedStyle(e)}class WR extends x1{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,s){if(ra.has(s)){const n=Bp(s);return n&&n.default||0}else{const n=qR(t),a=(rN(s)?n.getPropertyValue(s):n[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return r1(t,s)}build(t,s,n,a){Ap(t,s,n,a.transformTemplate)}scrapeMotionValuesFromProps(t,s){return Mp(t,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;es(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(t,s,n,a){cN(t,s,n,a)}}class GR extends x1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(ra.has(s)){const n=Bp(s);return n&&n.default||0}return s=dN.has(s)?s:Cp(s),t.getAttribute(s)}measureInstanceViewportBox(){return at()}scrapeMotionValuesFromProps(t,s){return hN(t,s)}build(t,s,n,a){Op(t,s,n,this.isSVGTag,a.transformTemplate)}renderInstance(t,s,n,a){uN(t,s,n,a)}mount(t){this.isSVGTag=Dp(t.tagName),super.mount(t)}}const KR=(e,t)=>Pp(e)?new GR(t,{enableHardwareAcceleration:!1}):new WR(t,{enableHardwareAcceleration:!0}),YR={layout:{ProjectionNode:h1,MeasureLayout:a1}},QR={...j3,...zP,...ER,...YR},z=J5((e,t)=>TP(e,t,QR,KR));function g1(){const e=f.useRef(!1);return _p(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function JR(){const e=g1(),[t,s]=f.useState(0),n=f.useCallback(()=>{e.current&&s(t+1)},[t]);return[f.useCallback(()=>Le.postRender(n),[n]),t]}class XR extends f.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ZR({children:e,isPresent:t}){const s=f.useId(),n=f.useRef(null),a=f.useRef({width:0,height:0,top:0,left:0});return f.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=a.current;if(t||!n.current||!i||!o)return;n.current.dataset.motionPopId=s;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),f.createElement(XR,{isPresent:t,childRef:n,sizeRef:a},f.cloneElement(e,{ref:n}))}const sh=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=fN(eO),c=f.useId(),d=f.useMemo(()=>({id:c,initial:t,isPresent:s,custom:a,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;n&&n()},register:u=>(l.set(u,!1),()=>l.delete(u))}),i?void 0:[s]);return f.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[s]),f.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),o==="popLayout"&&(e=f.createElement(ZR,{isPresent:s},e)),f.createElement($d.Provider,{value:d},e)};function eO(){return new Map}function tO(e){return f.useEffect(()=>()=>e(),[])}const En=e=>e.key||"";function sO(e,t){e.forEach(s=>{const n=En(s);t.set(n,s)})}function rO(e){const t=[];return f.Children.forEach(e,s=>{f.isValidElement(s)&&t.push(s)}),t}const Et=({children:e,custom:t,initial:s=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=f.useContext(Tp).forceRender||JR()[0],c=g1(),d=rO(e);let u=d;const h=f.useRef(new Map).current,m=f.useRef(u),g=f.useRef(new Map).current,x=f.useRef(!0);if(_p(()=>{x.current=!1,sO(d,g),m.current=u}),tO(()=>{x.current=!0,g.clear(),h.clear()}),x.current)return f.createElement(f.Fragment,null,u.map(v=>f.createElement(sh,{key:En(v),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:i,mode:o},v)));u=[...u];const y=m.current.map(En),w=d.map(En),p=y.length;for(let v=0;v<p;v++){const b=y[v];w.indexOf(b)===-1&&!h.has(b)&&h.set(b,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((v,b)=>{if(w.indexOf(b)!==-1)return;const j=g.get(b);if(!j)return;const S=y.indexOf(b);let _=v;if(!_){const E=()=>{h.delete(b);const C=Array.from(g.keys()).filter(O=>!w.includes(O));if(C.forEach(O=>g.delete(O)),m.current=d.filter(O=>{const A=En(O);return A===b||C.includes(A)}),!h.size){if(c.current===!1)return;l(),n&&n()}};_=f.createElement(sh,{key:En(j),isPresent:!1,onExitComplete:E,custom:t,presenceAffectsLayout:i,mode:o},j),h.set(b,_)}u.splice(S,0,_)}),u=u.map(v=>{const b=v.key;return h.has(b)?v:f.createElement(sh,{key:En(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),f.createElement(f.Fragment,null,h.size?u:u.map(v=>f.cloneElement(v)))},Ai=["admin","supervisor","operations_manager","consultant","hybrid_employee","client_poc","executive"],Ol=["admin","supervisor","operations_manager","consultant","hybrid_employee"],my=["client_poc","admin"],rh=["executive","admin"],Dl=["admin"],nh=["admin","operations_manager"],bn=["admin","supervisor","operations_manager"],nO=[{icon:Aj,label:"Dashboard",path:"/",roles:Ai},{icon:vt,label:"Hierarchy Builder",path:"/sites",roles:[...Ol,...rh]},{icon:ke,label:"Reports Hub",path:"/reports",roles:Ai},{icon:lc,label:"NFC/GPS Tags",path:"/nfc",roles:[...bn,"hybrid_employee"]},{icon:yr,label:"Scheduling",path:"/scheduling",roles:bn},{icon:Yn,label:"Assessments",path:"/assessments",roles:bn},{icon:vs,label:"Security Companies",path:"/security-companies",roles:nh},{icon:xe,label:"Security Staff",path:"/employees",roles:bn},{icon:As,label:"Entity Staff",path:"/entity-staff",roles:bn},{icon:ln,label:"Performance",path:"/performance",roles:bn},{icon:Hc,label:"Archive",path:"/archive",roles:bn},{icon:Lj,label:"Health & Safety",path:"/health-safety",roles:[...Ol,...rh]},{icon:rt,label:"Training",path:"/training",roles:[...Ol,...my]},{icon:Od,label:"Live Classes",path:"/live-classes",roles:[...Ol,...my]},{icon:nt,label:"Incidents",path:"/reports/incidents",roles:Ai},{icon:ET,label:"Observations",path:"/reports/observations",roles:Ai},{icon:wT,label:"Analytics",path:"/analytics",roles:[...nh,...rh]},{icon:GT,label:"Communications",path:"/messaging",roles:Ai},{icon:Tj,label:"ISO Compliance",path:"/iso",roles:[...nh,"consultant"]},{icon:PT,label:"App Integrations",path:"/external-app",roles:Dl},{icon:Oj,label:"Login Management",path:"/login-management",roles:Dl},{icon:Kn,label:"Admin Settings",path:"/admin-settings",roles:Dl},{icon:Xo,label:"Developer Portal",path:"/developer",roles:Dl}],aO=({isOpen:e,userRole:t,toggleSidebar:s})=>{const n=nO.filter(l=>t&&l.roles.includes(t)),a={open:{x:0,transition:{type:"spring",stiffness:120,damping:20}},closed:{x:"-100%",transition:{type:"spring",stiffness:120,damping:20}}},i=({isActive:l})=>ue("flex items-center space-x-3 px-3 py-2.5 rounded-lg transition-all duration-200 ease-in-out font-medium text-sm group",l?"bg-gradient-to-r from-sky-600 to-indigo-700 text-white shadow-md scale-105":"text-slate-300 hover:bg-slate-700/70 hover:text-sky-300 hover:scale-105 transform"),o=l=>ue("w-5 h-5 group-hover:text-sky-300 transition-colors",l&&"text-white");return r.jsxs(z.aside,{variants:a,initial:"closed",animate:e?"open":"closed",className:"w-64 h-screen p-4 space-y-4 nav-blur flex flex-col fixed top-0 left-0 z-40 lg:z-auto overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between mb-5 flex-shrink-0",children:[r.jsxs(Yo,{to:"/",className:"flex items-center space-x-2 p-2",children:[r.jsx("img",{alt:"GS-3 SecureOps Pro Logo Favicon",className:"h-8 w-8 filter brightness-0 invert",src:"https://images.unsplash.com/photo-1575821104894-b683ce7525ff"}),r.jsx("span",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-slate-300 via-slate-100 to-sky-300",children:"SecureOps"})]}),r.jsx("button",{onClick:s,className:"lg:hidden text-slate-400 hover:text-white p-2",children:r.jsx(Bt,{className:"w-5 h-5"})})]}),r.jsx("nav",{className:"flex-1 space-y-1.5 overflow-y-auto scrollbar-thin",children:n.map(l=>r.jsx(TE,{to:l.path,end:l.path==="/",className:i,children:({isActive:c})=>r.jsxs(r.Fragment,{children:[r.jsx(l.icon,{className:o(c)}),r.jsx("span",{children:l.label})]})},l.label))}),r.jsx("div",{className:"mt-auto pt-4 border-t border-slate-700/60 flex-shrink-0",children:r.jsxs("p",{className:"text-xs text-center text-slate-500 mt-4",children:[" ",new Date().getFullYear()," GS-3 SecureOps Pro.",r.jsx("br",{}),"All rights reserved. Domain: gs-3.pro"]})})]})},iO=Rd("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),I=te.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...a},i)=>{const o=n?Tk:"button";return r.jsx(o,{className:ue(iO({variant:t,size:s,className:e})),ref:i,...a})});I.displayName="Button";const ee=te.forwardRef(({className:e,type:t,...s},n)=>r.jsx("input",{type:t,className:ue("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));ee.displayName="Input";var y1={exports:{}},v1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=f;function oO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lO=typeof Object.is=="function"?Object.is:oO,cO=Za.useState,dO=Za.useEffect,uO=Za.useLayoutEffect,hO=Za.useDebugValue;function fO(e,t){var s=t(),n=cO({inst:{value:s,getSnapshot:t}}),a=n[0].inst,i=n[1];return uO(function(){a.value=s,a.getSnapshot=t,ah(a)&&i({inst:a})},[e,s,t]),dO(function(){return ah(a)&&i({inst:a}),e(function(){ah(a)&&i({inst:a})})},[e]),hO(s),s}function ah(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!lO(e,s)}catch{return!0}}function mO(e,t){return t()}var pO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mO:fO;v1.useSyncExternalStore=Za.useSyncExternalStore!==void 0?Za.useSyncExternalStore:pO;y1.exports=v1;var xO=y1.exports;function gO(){return xO.useSyncExternalStore(yO,()=>!0,()=>!1)}function yO(){return()=>{}}var Gp="Avatar",[vO,uF]=ta(Gp),[wO,w1]=vO(Gp),b1=f.forwardRef((e,t)=>{const{__scopeAvatar:s,...n}=e,[a,i]=f.useState("idle");return r.jsx(wO,{scope:s,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:r.jsx(Oe.span,{...n,ref:t})})});b1.displayName=Gp;var j1="AvatarImage",N1=f.forwardRef((e,t)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=w1(j1,s),l=bO(n,i),c=$s(d=>{a(d),o.onImageLoadingStatusChange(d)});return Js(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?r.jsx(Oe.img,{...i,ref:t,src:n}):null});N1.displayName=j1;var S1="AvatarFallback",_1=f.forwardRef((e,t)=>{const{__scopeAvatar:s,delayMs:n,...a}=e,i=w1(S1,s),[o,l]=f.useState(n===void 0);return f.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?r.jsx(Oe.span,{...a,ref:t}):null});_1.displayName=S1;function py(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function bO(e,{referrerPolicy:t,crossOrigin:s}){const n=gO(),a=f.useRef(null),i=(()=>n?(a.current||(a.current=new window.Image),a.current):null)(),[o,l]=f.useState(()=>py(i,e));return Js(()=>{l(py(i,e))},[i,e]),Js(()=>{const c=h=>()=>{l(h)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),t&&(i.referrerPolicy=t),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,s,t]),o}var C1=b1,E1=N1,k1=_1;const T1=te.forwardRef(({className:e,...t},s)=>r.jsx(C1,{ref:s,className:ue("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));T1.displayName=C1.displayName;const jO=te.forwardRef(({className:e,...t},s)=>r.jsx(E1,{ref:s,className:ue("aspect-square h-full w-full",e),...t}));jO.displayName=E1.displayName;const P1=te.forwardRef(({className:e,...t},s)=>r.jsx(k1,{ref:s,className:ue("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));P1.displayName=k1.displayName;const NO="modulepreload",SO=function(e){return"/"+e},xy={},rl=function(t,s,n){if(!s||s.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(s.map(i=>{if(i=SO(i),i in xy)return;xy[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=a.length-1;u>=0;u--){const h=a[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":NO,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},_O=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>rl(()=>Promise.resolve().then(()=>Wd),void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class Kp extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class CO extends Kp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class gy extends Kp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class yy extends Kp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Jf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Jf||(Jf={}));var EO=globalThis&&globalThis.__awaiter||function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class kO{constructor(t,{headers:s={},customFetch:n,region:a=Jf.Any}={}){this.url=t,this.headers=s,this.region=a,this.fetch=_O(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return EO(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(y=>{throw new CO(y)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new gy(h);if(!h.ok)throw new yy(h);let g=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield h.json():g==="application/octet-stream"?x=yield h.blob():g==="text/event-stream"?x=h:g==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof yy||a instanceof gy?a.context:void 0}}})}}var Kt={},Yp={},Ud={},nl={},Hd={},qd={},TO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ei=TO();const PO=ei.fetch,AO=ei.fetch.bind(ei),RO=ei.Headers,OO=ei.Request,DO=ei.Response,Wd=Object.freeze(Object.defineProperty({__proto__:null,Headers:RO,Request:OO,Response:DO,default:AO,fetch:PO},Symbol.toStringTag,{value:"Module"})),MO=s_(Wd);var Gd={};Object.defineProperty(Gd,"__esModule",{value:!0});let $O=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Gd.default=$O;var A1=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qd,"__esModule",{value:!0});const LO=A1(MO),IO=A1(Gd);let FO=class{constructor(t){var s,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(s=t.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=LO.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=new Headers(this.headers),this.headers.set(t,s),this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let u=null,h=null,m=null,g=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=v:h=JSON.parse(v))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),p=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&p&&p.length>1&&(m=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,g=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const w=await i.text();try{u=JSON.parse(w),Array.isArray(u)&&i.status===404&&(h=[],u=null,g=200,x="OK")}catch{i.status===404&&w===""?(g=204,x="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,g=200,x="OK"),u&&this.shouldThrowOnError)throw new IO.default(u)}return{error:u,data:h,count:m,status:g,statusText:x}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,s)}returns(){return this}overrideTypes(){return this}};qd.default=FO;var VO=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hd,"__esModule",{value:!0});const BO=VO(qd);let zO=class extends BO.default{select(t){let s=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:s=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,s,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:s=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,s?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Hd.default=zO;var UO=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nl,"__esModule",{value:!0});const HO=UO(Hd);let qO=class extends HO.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const n=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${s}`),this}match(t){return Object.entries(t).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(t,s,n){return this.url.searchParams.append(t,`not.${s}.${n}`),this}or(t,{foreignTable:s,referencedTable:n=s}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,s,n){return this.url.searchParams.append(t,`${s}.${n}`),this}};nl.default=qO;var WO=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ud,"__esModule",{value:!0});const Ri=WO(nl);let GO=class{constructor(t,{headers:s={},schema:n,fetch:a}){this.url=t,this.headers=new Headers(s),this.schema=n,this.fetch=a}select(t,{head:s=!1,count:n}={}){const a=s?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Ri.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:s,defaultToNull:n=!0}={}){var a;const i="POST";if(s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ri.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:s,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ri.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:s}={}){var n;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new Ri.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var s;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ri.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Ud.default=GO;var R1=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yp,"__esModule",{value:!0});const KO=R1(Ud),YO=R1(nl);let QO=class O1{constructor(t,{headers:s={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(s),this.schemaName=n,this.fetch=a}from(t){const s=new URL(`${this.url}/${t}`);return new KO.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new O1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;n||a?(l=n?"HEAD":"GET",Object.entries(s).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",d=s);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new YO.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Yp.default=QO;var ci=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.PostgrestError=Kt.PostgrestBuilder=Kt.PostgrestTransformBuilder=Kt.PostgrestFilterBuilder=Kt.PostgrestQueryBuilder=Kt.PostgrestClient=void 0;const D1=ci(Yp);Kt.PostgrestClient=D1.default;const M1=ci(Ud);Kt.PostgrestQueryBuilder=M1.default;const $1=ci(nl);Kt.PostgrestFilterBuilder=$1.default;const L1=ci(Hd);Kt.PostgrestTransformBuilder=L1.default;const I1=ci(qd);Kt.PostgrestBuilder=I1.default;const F1=ci(Gd);Kt.PostgrestError=F1.default;var JO=Kt.default={PostgrestClient:D1.default,PostgrestQueryBuilder:M1.default,PostgrestFilterBuilder:$1.default,PostgrestTransformBuilder:L1.default,PostgrestBuilder:I1.default,PostgrestError:F1.default};const{PostgrestClient:XO,PostgrestQueryBuilder:gF,PostgrestFilterBuilder:yF,PostgrestTransformBuilder:vF,PostgrestBuilder:wF,PostgrestError:bF}=JO;function ZO(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const eD=ZO(),tD="2.12.1",sD=`realtime-js/${tD}`,rD="1.0.0",V1=1e4,nD=1e3;var no;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(no||(no={}));var pt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pt||(pt={}));var Ts;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ts||(Ts={}));var Xf;(function(e){e.websocket="websocket"})(Xf||(Xf={}));var Tn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Tn||(Tn={}));class aD{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const a=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class B1{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Me||(Me={}));const vy=(e,t,s={})=>{var n;const a=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=iD(o,e,t,a),i),{})},iD=(e,t,s,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=s[e];return i&&!n.includes(i)?z1(i,o):Zf(o)},z1=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return dD(t,s)}switch(e){case Me.bool:return oD(t);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return lD(t);case Me.json:case Me.jsonb:return cD(t);case Me.timestamp:return uD(t);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return Zf(t);default:return Zf(t)}},Zf=e=>e,oD=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},lD=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},cD=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},dD=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>z1(t,l))}return e},uD=e=>typeof e=="string"?e.replace(" ","T"):e,U1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class ih{constructor(t,s,n={},a=V1){this.channel=t,this.event=s,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var wy;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(wy||(wy={}));class ao{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ao.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=ao.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ao.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,a){const i=this.cloneDeep(t),o=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const m=u.map(w=>w.presence_ref),g=h.map(w=>w.presence_ref),x=u.filter(w=>g.indexOf(w.presence_ref)<0),y=h.filter(w=>m.indexOf(w.presence_ref)<0);x.length>0&&(l[d]=x),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,s,n,a){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(g=>g.presence_ref),m=u.filter(g=>h.indexOf(g.presence_ref)<0);t[l].unshift(...m)}n(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const a=t[n];return"metas"in a?s[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=a,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var by;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(by||(by={}));var td;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(td||(td={}));var ir;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ir||(ir={}));class Qp{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new ih(this,Ts.join,this.params,this.timeout),this.rejoinTimer=new B1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ts.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new ao(this),this.broadcastEndpointURL=U1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[td.PRESENCE],u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ir.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ir.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t(ir.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,y=(g=x==null?void 0:x.length)!==null&&g!==void 0?g:0,w=[];for(let p=0;p<y;p++){const v=x[p],{filter:{event:b,schema:j,table:S,filter:_}}=v,E=m&&m[p];if(E&&E.event===b&&E.schema===j&&E.table===S&&E.filter===_)w.push(Object.assign(Object.assign({},v),{id:E.id}));else{this.unsubscribe(),this.state=pt.errored,t==null||t(ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(ir.SUBSCRIBED);return}}).receive("error",m=>{this.state=pt.errored,t==null||t(ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this.state===pt.joined&&t===td.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,s,n)}async send(t,s={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ts.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new ih(this,Ts.leave,{},t),n.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,s,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),o}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ih(this,t,s,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Ts;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,s,n);if(s&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var x,y,w;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(y=g.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var x,y,w,p,v,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const j=g.id,S=(x=g.filter)===null||x===void 0?void 0:x.event;return j&&((y=s.ids)===null||y===void 0?void 0:y.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const j=(v=(p=g==null?void 0:g.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((b=s==null?void 0:s.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:y,table:w,commit_timestamp:p,type:v,errors:b}=x;m=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:p,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(x))}g.callback(m,n)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const a=t.toLocaleLowerCase(),i={type:a,filter:s,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Qp.isEqual(a.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ts.close,{},t)}_onError(t){this._on(Ts.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=vy(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=vy(t.columns,t.old_record)),s}}const jy=()=>{},hD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fD{constructor(t,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=V1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jy,this.ref=0,this.logger=jy,this.conn=null,this.sendBuffer=[],this.serializer=new aD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>rl(()=>import("./index-8d07e1c8.js"),[]).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Xf.websocket}`,this.httpEndpoint=U1(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const a=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new B1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=eD),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection(),setTimeout(()=>{this.setAuth().catch(t=>{this.log("error","error setting auth",t)})},0)}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rD}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case no.connecting:return Tn.Connecting;case no.open:return Tn.Open;case no.closing:return Tn.Closing;default:return Tn.Closed}}isConnected(){return this.connectionState()===Tn.Open}channel(t,s={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Qp(`realtime:${t}`,s,this);return this.channels.push(i),i}}push(t){const{topic:s,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const a={access_token:s,version:sD};s&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Ts.access_token,{access_token:s})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(nD,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:n,event:a,payload:i,ref:o}=s;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ts.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${t}${n}${a}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([hD],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class Jp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function dt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class mD extends Jp{constructor(t,s,n){super(t),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class em extends Jp{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var pD=globalThis&&globalThis.__awaiter||function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const H1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>rl(()=>Promise.resolve().then(()=>Wd),void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},xD=()=>pD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rl(()=>Promise.resolve().then(()=>Wd),void 0)).Response:Response}),tm=e=>{if(Array.isArray(e))return e.map(s=>tm(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=tm(n)}),t},gD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var aa=globalThis&&globalThis.__awaiter||function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const oh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),yD=(e,t,s)=>aa(void 0,void 0,void 0,function*(){const n=yield xD();e instanceof n&&!(s!=null&&s.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new mD(oh(a),i,o))}).catch(a=>{t(new em(oh(a),a))}):t(new em(oh(e),e))}),vD=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(gD(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),s))};function al(e,t,s,n,a,i){return aa(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(s,vD(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>yD(c,l,n))})})}function sd(e,t,s,n){return aa(this,void 0,void 0,function*(){return al(e,"GET",t,s,n)})}function or(e,t,s,n,a){return aa(this,void 0,void 0,function*(){return al(e,"POST",t,n,a,s)})}function sm(e,t,s,n,a){return aa(this,void 0,void 0,function*(){return al(e,"PUT",t,n,a,s)})}function wD(e,t,s,n){return aa(this,void 0,void 0,function*(){return al(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function q1(e,t,s,n,a){return aa(this,void 0,void 0,function*(){return al(e,"DELETE",t,n,a,s)})}var Ut=globalThis&&globalThis.__awaiter||function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const bD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ny={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jD{constructor(t,s={},n,a){this.url=t,this.headers=s,this.bucketId=n,this.fetch=H1(a)}uploadOrUpdate(t,s,n,a){return Ut(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ny),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(t=="PUT"?sm:or)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(dt(i))return{data:null,error:i};throw i}})}upload(t,s,n){return Ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,a){return Ut(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:Ny.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield sm(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(dt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return Ut(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield or(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Jp("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}update(t,s,n){return Ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return Ut(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}})}copy(t,s,n){return Ut(this,void 0,void 0,function*(){try{return{data:{path:(yield or(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,s,n){return Ut(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield or(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,s,n){return Ut(this,void 0,void 0,function*(){try{const a=yield or(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}})}download(t,s){return Ut(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield sd(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}info(t){return Ut(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield sd(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:tm(n),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}exists(t){return Ut(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield wD(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(dt(n)&&n instanceof em){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield q1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}list(t,s,n){return Ut(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},bD),s),{prefix:t||""});return{data:yield or(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(dt(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const ND="2.10.1",SD={"X-Client-Info":`storage-js/${ND}`};var ca=globalThis&&globalThis.__awaiter||function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class _D{constructor(t,s={},n,a){const i=new URL(t);if(a!=null&&a.useNewHostname){const o=/supabase\.(co|in|red)$/.test(i.hostname),l="/storage";o&&!i.hostname.includes("storage.supabase.")&&i.pathname.startsWith(l)&&(i.pathname=i.pathname.substring(l.length),i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href,this.headers=Object.assign(Object.assign({},SD),s),this.fetch=H1(n)}listBuckets(){return ca(this,void 0,void 0,function*(){try{return{data:yield sd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(dt(t))return{data:null,error:t};throw t}})}getBucket(t){return ca(this,void 0,void 0,function*(){try{return{data:yield sd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return ca(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return ca(this,void 0,void 0,function*(){try{return{data:yield sm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ca(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}deleteBucket(t){return ca(this,void 0,void 0,function*(){try{return{data:yield q1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}}class CD extends _D{constructor(t,s={},n,a){super(t,s,n,a)}from(t){return new jD(this.url,this.headers,t,this.fetch)}}const ED="2.30.0",kD={"X-Client-Info":`supabase-js/${ED}`};var rm={exports:{}};(function(e,t){var s=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Tt<"u"&&Tt,n=function(){function i(){this.fetch=!1,this.DOMException=s.DOMException}return i.prototype=s,new i}();(function(i){(function(o){var l=typeof i<"u"&&i||typeof self<"u"&&self||typeof Tt<"u"&&Tt||{},c={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function d(k){return k&&DataView.prototype.isPrototypeOf(k)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(k){return k&&u.indexOf(Object.prototype.toString.call(k))>-1};function m(k){if(typeof k!="string"&&(k=String(k)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(k)||k==="")throw new TypeError('Invalid character in header field name: "'+k+'"');return k.toLowerCase()}function g(k){return typeof k!="string"&&(k=String(k)),k}function x(k){var P={next:function(){var U=k.shift();return{done:U===void 0,value:U}}};return c.iterable&&(P[Symbol.iterator]=function(){return P}),P}function y(k){this.map={},k instanceof y?k.forEach(function(P,U){this.append(U,P)},this):Array.isArray(k)?k.forEach(function(P){if(P.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+P.length);this.append(P[0],P[1])},this):k&&Object.getOwnPropertyNames(k).forEach(function(P){this.append(P,k[P])},this)}y.prototype.append=function(k,P){k=m(k),P=g(P);var U=this.map[k];this.map[k]=U?U+", "+P:P},y.prototype.delete=function(k){delete this.map[m(k)]},y.prototype.get=function(k){return k=m(k),this.has(k)?this.map[k]:null},y.prototype.has=function(k){return this.map.hasOwnProperty(m(k))},y.prototype.set=function(k,P){this.map[m(k)]=g(P)},y.prototype.forEach=function(k,P){for(var U in this.map)this.map.hasOwnProperty(U)&&k.call(P,this.map[U],U,this)},y.prototype.keys=function(){var k=[];return this.forEach(function(P,U){k.push(U)}),x(k)},y.prototype.values=function(){var k=[];return this.forEach(function(P){k.push(P)}),x(k)},y.prototype.entries=function(){var k=[];return this.forEach(function(P,U){k.push([U,P])}),x(k)},c.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function w(k){if(!k._noBody){if(k.bodyUsed)return Promise.reject(new TypeError("Already read"));k.bodyUsed=!0}}function p(k){return new Promise(function(P,U){k.onload=function(){P(k.result)},k.onerror=function(){U(k.error)}})}function v(k){var P=new FileReader,U=p(P);return P.readAsArrayBuffer(k),U}function b(k){var P=new FileReader,U=p(P),M=/charset=([A-Za-z0-9_-]+)/.exec(k.type),F=M?M[1]:"utf-8";return P.readAsText(k,F),U}function j(k){for(var P=new Uint8Array(k),U=new Array(P.length),M=0;M<P.length;M++)U[M]=String.fromCharCode(P[M]);return U.join("")}function S(k){if(k.slice)return k.slice(0);var P=new Uint8Array(k.byteLength);return P.set(new Uint8Array(k)),P.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(k){this.bodyUsed=this.bodyUsed,this._bodyInit=k,k?typeof k=="string"?this._bodyText=k:c.blob&&Blob.prototype.isPrototypeOf(k)?this._bodyBlob=k:c.formData&&FormData.prototype.isPrototypeOf(k)?this._bodyFormData=k:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)?this._bodyText=k.toString():c.arrayBuffer&&c.blob&&d(k)?(this._bodyArrayBuffer=S(k.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(k)||h(k))?this._bodyArrayBuffer=S(k):this._bodyText=k=Object.prototype.toString.call(k):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof k=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var k=w(this);if(k)return k;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var k=w(this);return k||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var k=w(this);if(k)return k;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function C(k){var P=k.toUpperCase();return E.indexOf(P)>-1?P:k}function O(k,P){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P=P||{};var U=P.body;if(k instanceof O){if(k.bodyUsed)throw new TypeError("Already read");this.url=k.url,this.credentials=k.credentials,P.headers||(this.headers=new y(k.headers)),this.method=k.method,this.mode=k.mode,this.signal=k.signal,!U&&k._bodyInit!=null&&(U=k._bodyInit,k.bodyUsed=!0)}else this.url=String(k);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new y(P.headers)),this.method=C(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal||function(){if("AbortController"in l){var q=new AbortController;return q.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&U)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(U),(this.method==="GET"||this.method==="HEAD")&&(P.cache==="no-store"||P.cache==="no-cache")){var M=/([?&])_=[^&]*/;if(M.test(this.url))this.url=this.url.replace(M,"$1_="+new Date().getTime());else{var F=/\?/;this.url+=(F.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function A(k){var P=new FormData;return k.trim().split("&").forEach(function(U){if(U){var M=U.split("="),F=M.shift().replace(/\+/g," "),q=M.join("=").replace(/\+/g," ");P.append(decodeURIComponent(F),decodeURIComponent(q))}}),P}function R(k){var P=new y,U=k.replace(/\r?\n[\t ]+/g," ");return U.split("\r").map(function(M){return M.indexOf(`
`)===0?M.substr(1,M.length):M}).forEach(function(M){var F=M.split(":"),q=F.shift().trim();if(q){var L=F.join(":").trim();try{P.append(q,L)}catch(J){console.warn("Response "+J.message)}}}),P}_.call(O.prototype);function T(k,P){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=P.statusText===void 0?"":""+P.statusText,this.headers=new y(P.headers),this.url=P.url||"",this._initBody(k)}_.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},T.error=function(){var k=new T(null,{status:200,statusText:""});return k.ok=!1,k.status=0,k.type="error",k};var D=[301,302,303,307,308];T.redirect=function(k,P){if(D.indexOf(P)===-1)throw new RangeError("Invalid status code");return new T(null,{status:P,headers:{location:k}})},o.DOMException=l.DOMException;try{new o.DOMException}catch{o.DOMException=function(P,U){this.message=P,this.name=U;var M=Error(P);this.stack=M.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function N(k,P){return new Promise(function(U,M){var F=new O(k,P);if(F.signal&&F.signal.aborted)return M(new o.DOMException("Aborted","AbortError"));var q=new XMLHttpRequest;function L(){q.abort()}q.onload=function(){var re={statusText:q.statusText,headers:R(q.getAllResponseHeaders()||"")};F.url.indexOf("file://")===0&&(q.status<200||q.status>599)?re.status=200:re.status=q.status,re.url="responseURL"in q?q.responseURL:re.headers.get("X-Request-URL");var Ne="response"in q?q.response:q.responseText;setTimeout(function(){U(new T(Ne,re))},0)},q.onerror=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},q.ontimeout=function(){setTimeout(function(){M(new TypeError("Network request timed out"))},0)},q.onabort=function(){setTimeout(function(){M(new o.DOMException("Aborted","AbortError"))},0)};function J(re){try{return re===""&&l.location.href?l.location.href:re}catch{return re}}if(q.open(F.method,J(F.url),!0),F.credentials==="include"?q.withCredentials=!0:F.credentials==="omit"&&(q.withCredentials=!1),"responseType"in q&&(c.blob?q.responseType="blob":c.arrayBuffer&&(q.responseType="arraybuffer")),P&&typeof P.headers=="object"&&!(P.headers instanceof y||l.Headers&&P.headers instanceof l.Headers)){var ne=[];Object.getOwnPropertyNames(P.headers).forEach(function(re){ne.push(m(re)),q.setRequestHeader(re,g(P.headers[re]))}),F.headers.forEach(function(re,Ne){ne.indexOf(Ne)===-1&&q.setRequestHeader(Ne,re)})}else F.headers.forEach(function(re,Ne){q.setRequestHeader(Ne,re)});F.signal&&(F.signal.addEventListener("abort",L),q.onreadystatechange=function(){q.readyState===4&&F.signal.removeEventListener("abort",L)}),q.send(typeof F._bodyInit>"u"?null:F._bodyInit)})}return N.polyfill=!0,l.fetch||(l.fetch=N,l.Headers=y,l.Request=O,l.Response=T),o.Headers=y,o.Request=O,o.Response=T,o.fetch=N,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var a=s.fetch?s:n;t=a.fetch,t.default=a.fetch,t.fetch=a.fetch,t.Headers=a.Headers,t.Request=a.Request,t.Response=a.Response,e.exports=t})(rm,rm.exports);var Xp=rm.exports;const W1=Xn(Xp),TD=yv({__proto__:null,default:W1},[Xp]);var PD=globalThis&&globalThis.__awaiter||function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const AD=e=>{let t;return e?t=e:typeof fetch>"u"?t=W1:t=fetch,(...s)=>t(...s)},RD=()=>typeof Headers>"u"?Xp.Headers:Headers,OD=(e,t,s)=>{const n=AD(s),a=RD();return(i,o)=>PD(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};function DD(e){return e.replace(/\/$/,"")}function MD(e,t){const{db:s,auth:n,realtime:a,global:i}=e,{db:o,auth:l,realtime:c,global:d}=t;return{db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),a),global:Object.assign(Object.assign({},d),i)}}function $D(e){return Math.round(Date.now()/1e3)+e}function LD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const nr=()=>typeof document<"u",jn={tested:!1,writable:!1},fc=()=>{if(!nr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jn.tested)return jn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),jn.tested=!0,jn.writable=!0}catch{jn.tested=!0,jn.writable=!1}return jn.writable};function Ht(e,t){var s;t||(t=((s=window==null?void 0:window.location)===null||s===void 0?void 0:s.href)||""),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}const G1=e=>{let t;return e?t=e:typeof fetch>"u"?t=async(...s)=>await(await rl(()=>Promise.resolve().then(()=>TD),void 0)).fetch(...s):t=fetch,(...s)=>t(...s)},ID=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Oi=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Ml=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},lh=async(e,t)=>{await e.removeItem(t)};function FD(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",n,a,i,o,l,c,d,u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)o=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),d=t.indexOf(e.charAt(u++)),n=o<<2|l>>4,a=(l&15)<<4|c>>2,i=(c&3)<<6|d,s=s+String.fromCharCode(n),c!=64&&a!=0&&(s=s+String.fromCharCode(a)),d!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class Kd{constructor(){this.promise=new Kd.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Kd.promiseConstructor=Promise;function Sy(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=e.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=s[1];return JSON.parse(FD(n))}function VD(e){return new Promise(t=>{setTimeout(()=>t(null),e)})}function BD(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function zD(e){return("0"+e.toString(16)).substr(-2)}function $l(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,zD).join("")}async function UD(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}function HD(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ll(e){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await UD(e);return HD(t)}const qD="__stack_guard__",WD="__",GD=/__stack_guard__([a-zA-Z0-9_-]+)__/;let _y=!1,Zp;function nm(e){var t,s;Zp();let n;try{throw new Error}catch(i){n=i}const a=(s=(t=n.stack)===null||t===void 0?void 0:t.split(`
`))!==null&&s!==void 0?s:[];for(let i=0;i<a.length;i+=1){const l=a[i].match(GD);if(l&&l[1]===e)return!0}return!1}async function am(e,t){await Zp();const s=`${qD}${e}${WD}`;return await{[s]:async()=>await t()}[s]()}Zp=async()=>{_y||(_y=!0,await am("ENV_CHECK",async()=>{const e=nm("ENV_CHECK");return e||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),e}))};class ex extends Error{constructor(t,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s}}function Ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class KD extends ex{constructor(t,s){super(t,s),this.name="AuthApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function YD(e){return Ce(e)&&e.name==="AuthApiError"}class K1 extends ex{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class di extends ex{constructor(t,s,n){super(t),this.name=s,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class da extends di{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class ch extends di{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Il extends di{constructor(t){super(t,"AuthInvalidCredentialsError",400)}}class rr extends di{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dh extends di{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class im extends di{constructor(t,s){super(t,"AuthRetryableFetchError",s)}}function Cy(e){return Ce(e)&&e.name==="AuthRetryableFetchError"}var QD=globalThis&&globalThis.__rest||function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};const zi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),JD=[502,503,504];async function Ey(e){if(!ID(e))throw new im(zi(e),0);if(JD.includes(e.status))throw new im(zi(e),e.status);let t;try{t=await e.json()}catch(s){throw new K1(zi(s),s)}throw new KD(zi(t),e.status||500)}const XD=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),s))};async function Pe(e,t,s,n){var a;const i=Object.assign({},n==null?void 0:n.headers);n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await ZD(e,t,s+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function ZD(e,t,s,n,a,i){const o=XD(t,n,a,i);let l;try{l=await e(s,o)}catch(c){throw console.error(c),new im(zi(c),0)}if(l.ok||await Ey(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Ey(c)}}function Mr(e){var t;let s=null;r6(e)&&(s=Object.assign({},e),s.expires_at=$D(e.expires_in));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function Pn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function e6(e){return{data:e,error:null}}function t6(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i}=e,o=QD(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function s6(e){return e}function r6(e){return e.access_token&&e.refresh_token&&e.expires_in}var n6=globalThis&&globalThis.__rest||function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};class a6{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=G1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await Pe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await Pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Pn})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=n6(t,["options"]),a=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:t6,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(Ce(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await Pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Pn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:s6});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);d[`${w}Page`]=y}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(Ce(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await Pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Pn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await Pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Pn})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){try{return await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Pn})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:s,error:n}=await Pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:n}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}}const i6="2.43.1",o6="http://localhost:9999",l6="supabase.auth.token",c6={"X-Client-Info":`gotrue-js/${i6}`},ky=10,Ty={getItem:e=>fc()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{fc()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{fc()&&globalThis.localStorage.removeItem(e)}};function d6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}d6();const u6={url:o6,storageKey:l6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:c6,flowType:"implicit",debug:!1},Fl=30*1e3,Py=3;class Io{constructor(t){var s;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=Io.nextInstanceID,Io.nextInstanceID+=1,this.instanceID>0&&nr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},u6),t);if(this.logDebugMessages=n.debug,this.inMemorySession=null,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.persistSession=n.persistSession,this.storage=n.storage||Ty,this.admin=new a6({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=G1(n.fetch),this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===Ty&&!fc()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),nr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...t),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=am("_initialize",async()=>{try{const t=nr()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:n}=await this._getSessionFromUrl(t);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};const{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ce(t)?{error:t}:{error:new K1("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(t){var s,n,a;try{await this._removeSession();let i;if("email"in t){const{email:u,password:h,options:m}=t;let g=null,x=null;if(this.flowType==="pkce"){const y=$l();await Oi(this.storage,`${this.storageKey}-code-verifier`,y),g=await Ll(y),x=y===g?"plain":"s256"}i=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:x},xform:Mr})}else if("phone"in t){const{phone:u,password:h,options:m}=t;i=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Mr})}else throw new Il("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{await this._removeSession();let s;if("email"in t){const{email:i,password:o,options:l}=t;s=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Mr})}else if("phone"in t){const{phone:i,password:o,options:l}=t;s=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Mr})}else throw new Il("You must provide either an email or phone number and a password");const{data:n,error:a}=s;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ch}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:a})}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,a,i;return await this._removeSession(),await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){const s=await Ml(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:a}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Mr});return await lh(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ch}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:a})}async signInWithIdToken(t){await this._removeSession();try{const{options:s,provider:n,token:a,access_token:i,nonce:o}=t,l=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Mr}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ch}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,a,i,o;try{if(await this._removeSession(),"email"in t){const{email:l,options:c}=t;let d=null,u=null;if(this.flowType==="pkce"){const m=$l();await Oi(this.storage,`${this.storageKey}-code-verifier`,m),d=await Ll(m),u=m===d?"plain":"s256"}const{error:h}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Il("You must provide either an email or phone number.")}catch(l){if(Ce(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var s,n;try{t.type!=="email_change"&&t.type!=="phone_change"&&await this._removeSession();const{data:a,error:i}=await Pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:(s=t.options)===null||s===void 0?void 0:s.captchaToken}}),redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,xform:Mr});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Ce(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var s,n,a;try{return await this._removeSession(),await Pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:e6})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new da;const{error:a}=await Pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{t.type!="email_change"&&t.type!="phone_change"&&await this._removeSession();const s=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Pe(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await Pe(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Il("You must provide either an email or phone number and a type")}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return this._useSession(async t=>t)}async _useSession(t){return await am("_useSession",async()=>{const s=await this.__loadSession();return await t(s)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!nm("_useSession"))throw new Error("Please use #_useSession()");nm("_initialize")||await this.initializePromise;try{let t=null;if(this.persistSession){const i=await Ml(this.storage,this.storageKey);this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?t=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else t=this.inMemorySession,this._debug("#getSession()","session from memory",t);if(!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s)return{data:{session:t},error:null};const{session:n,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){try{return await this._useSession(async s=>{var n,a;if(!t){const{data:i,error:o}=s;if(o)throw o;t=(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0}return await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Pn})})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new da;const o=a.session,{data:l,error:c}=await Pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:t,jwt:o.access_token,xform:Pn});if(c)throw c;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return Sy(t)}async setSession(t){try{if(!t.access_token||!t.refresh_token)throw new da;const s=Date.now()/1e3;let n=s,a=!0,i=null;const o=Sy(t.access_token);if(o.exp&&(n=o.exp,a=n<=s),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this.getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(Ce(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:o,error:l}=s;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new da;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromUrl(t){try{if(!nr())throw new rr("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new rr("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new dh("Not a valid PKCE flow url.");if(t){const w=Ht("code");if(!w)throw new dh("No code detected.");const{data:p,error:v}=await this.exchangeCodeForSession(w);if(v)throw v;if(!p.session)throw new dh("No session detected.");let b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:p.session,redirectType:null},error:null}}const s=Ht("error_description");if(s){const w=Ht("error_code");if(!w)throw new rr("No error_code detected.");const p=Ht("error");throw p?new rr(s,{error:p,code:w}):new rr("No error detected.")}const n=Ht("provider_token"),a=Ht("provider_refresh_token"),i=Ht("access_token");if(!i)throw new rr("No access_token detected.");const o=Ht("expires_in");if(!o)throw new rr("No expires_in detected.");const l=Ht("refresh_token");if(!l)throw new rr("No refresh_token detected.");const c=Ht("token_type");if(!c)throw new rr("No token_type detected.");const u=Math.round(Date.now()/1e3)+parseInt(o),{data:h,error:m}=await this.getUser(i);if(m)throw m;const g=h.user,x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:parseInt(o),expires_at:u,refresh_token:l,token_type:c,user:g},y=Ht("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:x,redirectType:y},error:null}}catch(s){if(Ce(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){return nr()&&(!!Ht("access_token")||!!Ht("error_description"))}async _isPKCEFlow(){const t=await Ml(this.storage,`${this.storageKey}-code-verifier`);return!!Ht("code")&&!!t}async signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(YD(l)&&(l.status===404||l.status===401)))return{error:l}}return t!=="others"&&(await this._removeSession(),await lh(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(t){const s=LD(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),this._emitInitialSession(s),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,a;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let n=null,a=null;if(this.flowType==="pkce"){const i=$l();await Oi(this.storage,`${this.storageKey}-code-verifier`,i),n=await Ll(i),a=i===n?"plain":"s256"}try{return await Pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await BD(async a=>(await VD(a*200),this._debug(s,"refreshing attempt",a),await Pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Mr})),(a,i,o)=>o&&o.error&&Cy(o.error)&&Date.now()+(a+1)*200-n<Fl)}catch(n){if(this._debug(s,"error",n),Ce(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),nr()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Ml(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const a=Math.round(Date.now()/1e3),i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)<a+ky;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${ky}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Cy(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new da;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Kd;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new da;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Ce(i)){const o={session:null,error:i};return(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,s,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.persistSession||(this.inMemorySession=t),this.persistSession&&t.expires_at&&await this._persistSession(t)}_persistSession(t){return this._debug("#_persistSession()",t),Oi(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await lh(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&nr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Fl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Fl}ms, refresh threshold is ${Py} ticks`),a<=Py&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){this._debug(`#_onVisibilityChanged(${t})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(t||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const a=$l();await Oi(this.storage,`${this.storageKey}-code-verifier`,a);const i=await Ll(a),o=a===i?"plain":"s256";this._debug("PKCE","code verifier",`${a.substring(0,5)}...`,"code challenge",i,"method",o);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await Pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,a;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:l,error:c}=await Pe(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(!((a=l==null?void 0:l.totp)===null||a===void 0)&&a.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _verify(t){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await Pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _challenge(t){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await Pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(t==null?void 0:t.factors)||[],a=n.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:n,totp:a},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async t=>{var s,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=a.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}})}}Io.nextInstanceID=0;class h6 extends Io{constructor(t){super(t)}}var f6=globalThis&&globalThis.__awaiter||function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const m6={headers:kD},p6={schema:"public"},x6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},g6={};class y6{constructor(t,s,n){var a,i,o,l,c,d,u,h;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const m=DD(t);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,x={db:p6,realtime:g6,auth:Object.assign(Object.assign({},x6),{storageKey:g}),global:m6},y=MD(n??{},x);this.storageKey=(i=(a=y.auth)===null||a===void 0?void 0:a.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=y.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((c=y.auth)!==null&&c!==void 0?c:{},this.headers,(d=y.global)===null||d===void 0?void 0:d.fetch),this.fetch=OD(s,this._getAccessToken.bind(this),(u=y.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},y.realtime)),this.rest=new XO(`${m}/rest/v1`,{headers:this.headers,schema:(h=y.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new kO(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new CD(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}rpc(t,s={},n){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return f6(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,debug:l},c,d){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new h6({url:this.authUrl,headers:Object.assign(Object.assign({},u),c),storageKey:i,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:a,flowType:o,debug:l,fetch:d})}_initRealtimeClient(t){return new fD(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const v6=(e,t,s)=>new y6(e,t,s),w6="https://mvwvshrmufwssjbatcxq.supabase.co",b6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im12d3ZzaHJtdWZ3c3NqYmF0Y3hxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MDQ4MDgsImV4cCI6MjA2NTI4MDgwOH0.3iA_rlSR9fhNeyjRXKYxBm4E4qPchCsoRmWy28ou-eo",$=v6(w6,b6),j6=({onMenuClick:e,userRole:t,onRoleChange:s})=>{const{toast:n}=ce(),a=er(),i=async()=>{const{error:d}=await $.auth.signOut();d?n({variant:"destructive",title:"Logout Failed",description:d.message}):(n({title:"Logged Out",description:"You have been successfully logged out."}),a(0))},o=d=>{d.preventDefault(),n({title:" Search Not Implemented",description:"This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},l=()=>{n({title:" Notifications Not Implemented",description:"This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},c=()=>{n({title:" Profile Not Implemented",description:"This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})};return r.jsx(z.header,{initial:{y:-60,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:120,damping:20},className:"glass-effect border-b border-slate-700/50 px-4 sm:px-6 py-3 sticky top-0 z-30",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[r.jsx(I,{variant:"ghost",size:"icon",onClick:e,className:"text-slate-300 hover:text-white hover:bg-slate-700/50 lg:hidden",children:r.jsx(BT,{className:"w-5 h-5"})}),r.jsxs("form",{onSubmit:o,className:"relative hidden sm:block",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),r.jsx(ee,{placeholder:"Global Search...",className:"pl-10 w-64 md:w-80 bg-slate-700/30 border-slate-600 text-white placeholder:text-slate-400 focus:ring-blue-500 focus:border-blue-500 rounded-lg"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[r.jsxs(I,{variant:"ghost",size:"icon",onClick:l,className:"text-slate-300 hover:text-white hover:bg-slate-700/50 relative rounded-full",children:[r.jsx(wp,{className:"w-5 h-5"}),r.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-slate-800 animate-pulse"})]}),t==="admin"&&r.jsx(Yo,{to:"/admin-settings",children:r.jsx(I,{variant:"ghost",size:"icon",className:"text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-full",title:"Admin Settings",children:r.jsx(Kn,{className:"w-5 h-5"})})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(T1,{onClick:c,className:"w-8 h-8 cursor-pointer hover:opacity-80 transition-opacity",children:r.jsx(P1,{className:"bg-gradient-to-br from-blue-600 to-purple-700 text-white text-xs",children:r.jsx(Fn,{className:"w-4 h-4"})})}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:t||"",onChange:d=>s&&s(d.target.value),className:"bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-1 text-xs text-white focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none pr-8",style:{minWidth:"120px"},children:[r.jsx("option",{value:"",children:"Select Role"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"vice_president",children:"Vice President"}),r.jsx("option",{value:"executive",children:"Executive"}),r.jsx("option",{value:"operations_manager",children:"Operations Manager"}),r.jsx("option",{value:"consultant",children:"Consultant"}),r.jsx("option",{value:"supervisor",children:"Supervisor"}),r.jsx("option",{value:"hybrid_employee",children:"Hybrid Employee"}),r.jsx("option",{value:"client_poc",children:"Client POC"})]}),r.jsx(bp,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-3 h-3 text-slate-400 pointer-events-none"})]})]}),r.jsx(I,{variant:"ghost",size:"icon",onClick:i,className:"text-slate-300 hover:text-red-400 hover:bg-red-500/20 rounded-full",title:"Logout",children:r.jsx(FT,{className:"w-5 h-5"})})]})]})})},N6=250,S6=100,_6=800,C6=600,E6=()=>{const[e,t]=f.useState(!0),[s,n]=f.useState(!1),[a,i]=f.useState({x:window.innerWidth-370,y:50}),[o,l]=f.useState({width:350,height:180}),[c,d]=f.useState([]),{toast:u}=ce(),h=f.useRef(null),[m,g]=f.useState(!1);f.useEffect(()=>{const p=async()=>{try{const{data:b,error:j}=await $.from("notifications").select("id, message, type, ticker_status, created_at").in("ticker_status",["red","yellow","orange","green"]).order("created_at",{ascending:!1}).limit(10);if(j){console.error("Error fetching ticker alerts:",j),u({variant:"destructive",title:"Ticker Error",description:"Could not load alerts."});return}const S=b.map(_=>{let E=gr,C="bg-slate-700/80 hover:bg-slate-600/80";switch(_.ticker_status){case"red":E=gr,C="bg-red-500/80 hover:bg-red-400/80";break;case"yellow":case"orange":E=nt,C="bg-yellow-500/80 hover:bg-yellow-400/80";break;case"green":E=ze,C="bg-green-500/80 hover:bg-green-400/80";break;default:E=gr}return{..._,icon:E,color:C}});d(S)}catch(b){console.error("Ticker fetch exception:",b),u({variant:"destructive",title:"Ticker Exception",description:"An error occurred while fetching alerts."})}};p();const v=$.channel("realtime-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},b=>{p()}).subscribe();return()=>{$.removeChannel(v)}},[u]);const x=p=>{u({title:`Alert: ${p.type||"Notification"}`,description:p.message,variant:p.ticker_status==="red"?"destructive":"default"})},y=(p,v)=>{m&&l(b=>({width:Math.min(_6,Math.max(N6,b.width+v.delta.x)),height:Math.min(C6,Math.max(S6,b.height+v.delta.y))}))},w=(p,v)=>{i(b=>({x:Math.max(0,Math.min(window.innerWidth-o.width,b.x+v.delta.x)),y:Math.max(0,Math.min(window.innerHeight-o.height,b.y+v.delta.y))}))};return e?r.jsxs(z.div,{ref:h,style:{position:"fixed",left:a.x,top:a.y,width:o.width,height:o.height,zIndex:1e3},className:"glass-effect rounded-xl shadow-2xl flex flex-col overflow-hidden border border-slate-700/50",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:260,damping:20},children:[r.jsxs(z.div,{drag:!0,dragConstraints:{left:0,top:0,right:window.innerWidth-o.width,bottom:window.innerHeight-o.height},dragMomentum:!1,onDrag:w,className:"flex items-center justify-between p-2.5 border-b border-slate-700/30 bg-slate-800/50 cursor-move",children:[r.jsx("span",{className:"text-xs font-semibold text-sky-300 uppercase tracking-wider",children:"Live Alerts"}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(I,{variant:"ghost",size:"icon",className:"w-5 h-5 text-slate-400 hover:text-sky-300 focus:outline-none focus:ring-1 focus:ring-sky-500",onClick:p=>{p.stopPropagation(),n(!s)},children:s?r.jsx(zT,{className:"w-3 h-3"}):r.jsx(VT,{className:"w-3 h-3"})}),r.jsx(I,{variant:"ghost",size:"icon",className:"w-5 h-5 text-slate-400 hover:text-red-400 focus:outline-none focus:ring-1 focus:ring-red-500",onClick:p=>{p.stopPropagation(),t(!1)},children:r.jsx(Bt,{className:"w-3 h-3"})})]})]}),r.jsx("div",{className:"flex-1 p-2.5 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-800/50",children:r.jsxs(Et,{children:[c.length===0&&r.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full text-slate-500 text-xs",children:[r.jsx(ze,{className:"w-6 h-6 mb-1"}),"No active alerts."]}),c.slice(0,s?10:Math.floor((o.height-60)/40)||1).map((p,v)=>r.jsxs(z.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-50},transition:{type:"spring",stiffness:300,damping:30,delay:v*.05},className:ue("flex items-center space-x-2 p-1.5 rounded-md mb-1.5 cursor-pointer transition-all duration-150 ease-in-out",p.color,"text-white shadow-sm hover:shadow-md"),onClick:()=>x(p),children:[r.jsx(p.icon,{className:"w-3.5 h-3.5 flex-shrink-0"}),r.jsx("span",{className:"text-xs truncate",title:p.message,children:p.message})]},p.id||v))]})}),r.jsx(z.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:0,onDragStart:()=>g(!0),onDragEnd:()=>g(!1),onDrag:y,className:"absolute bottom-0 right-0 w-5 h-5 cursor-se-resize flex items-center justify-center text-slate-500 hover:text-sky-300",title:"Resize Ticker",children:r.jsx(AT,{className:"w-3 h-3 transform rotate-45"})})]}):null},k6=({userRole:e,onRoleChange:t})=>{const[s,n]=f.useState(window.innerWidth>1024),a=gn();return f.useEffect(()=>{const i=()=>{window.innerWidth<=1024?n(!1):n(!0)};return window.addEventListener("resize",i),i(),()=>window.removeEventListener("resize",i)},[]),f.useEffect(()=>{window.innerWidth<=1024&&n(!1)},[a]),r.jsxs("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-slate-900 to-black",children:[r.jsx(aO,{isOpen:s,userRole:e,toggleSidebar:()=>n(!s)}),r.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ease-in-out ${s&&window.innerWidth>1024?"lg:ml-64":"ml-0"}`,children:[r.jsx(j6,{onMenuClick:()=>n(!s),userRole:e,onRoleChange:t}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 sm:p-6 lg:p-8",children:r.jsx(Bb,{})})]}),e&&e!=="client_poc"&&r.jsx(E6,{})]})},B=te.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:ue("ios-card text-card-foreground",e),...t}));B.displayName="Card";const W=te.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:ue("flex flex-col space-y-1.5 p-6",e),...t}));W.displayName="CardHeader";const G=te.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:ue("text-2xl font-semibold leading-none tracking-tight",e),...t}));G.displayName="CardTitle";const he=te.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:ue("text-sm text-muted-foreground",e),...t}));he.displayName="CardDescription";const V=te.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:ue("p-6 pt-0",e),...t}));V.displayName="CardContent";const T6=te.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:ue("flex items-center p-6 pt-0",e),...t}));T6.displayName="CardFooter";const qe={ADMIN:"admin",VICE_PRESIDENT:"vice_president",EXECUTIVE:"executive",OPERATIONS_MANAGER:"operations_manager",CONSULTANT:"consultant",SUPERVISOR:"supervisor",HYBRID_EMPLOYEE:"hybrid_employee",CLIENT_POC:"client_poc"},Ay={[qe.ADMIN]:{title:"Administrative Dashboard",description:"Complete system oversight and management",stats:[{id:"sites",title:"Active Facilities",icon:"MapPin",color:"text-blue-400"},{id:"regions",title:"Managed Regions",icon:"Network",color:"text-purple-400"},{id:"officers",title:"Total Officers",icon:"Users",color:"text-green-400"},{id:"alerts",title:"Active Alerts",icon:"AlertTriangle",color:"text-yellow-400"},{id:"compliance",title:"System Compliance",icon:"CheckCircle",color:"text-emerald-400"},{id:"security",title:"Security Status",icon:"Shield",color:"text-red-400"}],quickActions:[{label:"System Settings",icon:"Settings",path:"/admin-settings"},{label:"User Management",icon:"Users",path:"/login-management"},{label:"Developer Portal",icon:"Code",path:"/developer"},{label:"Analytics",icon:"BarChart3",path:"/analytics"}],widgets:["recentActivities","systemStatus","securityAlerts","performanceMetrics"]},[qe.VICE_PRESIDENT]:{title:"Vice President Dashboard",description:"Executive leadership and strategic oversight",stats:[{id:"regions",title:"Managed Regions",icon:"Network",color:"text-purple-400"},{id:"officers",title:"Total Officers",icon:"Users",color:"text-green-400"},{id:"compliance",title:"Compliance Rate",icon:"CheckCircle",color:"text-emerald-400"},{id:"revenue",title:"Revenue Metrics",icon:"DollarSign",color:"text-green-400"},{id:"growth",title:"Growth Rate",icon:"TrendingUp",color:"text-blue-400"},{id:"strategic",title:"Strategic Goals",icon:"Target",color:"text-orange-400"}],quickActions:[{label:"Strategic Planning",icon:"Target",path:"/reports"},{label:"Executive Analytics",icon:"BarChart3",path:"/analytics"},{label:"Organizational View",icon:"Network",path:"/sites"},{label:"Performance Review",icon:"Activity",path:"/performance"},{label:"Market Analysis",icon:"BarChart",path:"/analytics"},{label:"Leadership Reports",icon:"FileText",path:"/reports"}],widgets:["recentActivities","vpMetrics","strategicOverview","leadershipSummary"]},[qe.EXECUTIVE]:{title:"Executive Dashboard",description:"Strategic overview and high-level metrics",stats:[{id:"regions",title:"Managed Regions",icon:"Network",color:"text-purple-400"},{id:"officers",title:"Total Officers",icon:"Users",color:"text-green-400"},{id:"compliance",title:"Compliance Rate",icon:"CheckCircle",color:"text-emerald-400"},{id:"revenue",title:"Revenue Metrics",icon:"DollarSign",color:"text-green-400"},{id:"growth",title:"Growth Rate",icon:"TrendingUp",color:"text-blue-400"}],quickActions:[{label:"Strategic Reports",icon:"FileText",path:"/reports"},{label:"Analytics",icon:"BarChart3",path:"/analytics"},{label:"Hierarchy View",icon:"Network",path:"/sites"},{label:"Performance",icon:"Activity",path:"/performance"}],widgets:["recentActivities","executiveMetrics","strategicOverview","complianceSummary"]},[qe.OPERATIONS_MANAGER]:{title:"Operations Dashboard",description:"Operational oversight and management",stats:[{id:"sites",title:"Active Facilities",icon:"MapPin",color:"text-blue-400"},{id:"officers",title:"Total Officers",icon:"Users",color:"text-green-400"},{id:"alerts",title:"Active Alerts",icon:"AlertTriangle",color:"text-yellow-400"},{id:"compliance",title:"Compliance Rate",icon:"CheckCircle",color:"text-emerald-400"},{id:"scheduling",title:"Scheduled Shifts",icon:"CalendarDays",color:"text-purple-400"}],quickActions:[{label:"Manage Hierarchy",icon:"Network",path:"/sites"},{label:"Security Companies",icon:"Briefcase",path:"/security-companies"},{label:"Scheduling",icon:"CalendarDays",path:"/scheduling"},{label:"Analytics",icon:"BarChart3",path:"/analytics"}],widgets:["recentActivities","operationalMetrics","schedulingOverview","complianceStatus"]},[qe.SUPERVISOR]:{title:"Supervisor Dashboard",description:"Team management and oversight",stats:[{id:"officers",title:"Team Members",icon:"Users",color:"text-green-400"},{id:"alerts",title:"Active Alerts",icon:"AlertTriangle",color:"text-yellow-400"},{id:"compliance",title:"Team Compliance",icon:"CheckCircle",color:"text-emerald-400"},{id:"scheduling",title:"Today's Shifts",icon:"CalendarDays",color:"text-purple-400"},{id:"reports",title:"Pending Reports",icon:"FileText",color:"text-blue-400"}],quickActions:[{label:"New Report",icon:"FileText",path:"/reports/list"},{label:"View Schedule",icon:"CalendarDays",path:"/scheduling"},{label:"Team Management",icon:"Users",path:"/employees"},{label:"Assessments",icon:"ShieldCheck",path:"/assessments"}],widgets:["recentActivities","teamMetrics","schedulingStatus","complianceOverview"]},[qe.CONSULTANT]:{title:"Consultant Dashboard",description:"Consulting and advisory overview",stats:[{id:"clients",title:"Active Clients",icon:"Briefcase",color:"text-blue-400"},{id:"projects",title:"Active Projects",icon:"FolderOpen",color:"text-green-400"},{id:"compliance",title:"Compliance Rate",icon:"CheckCircle",color:"text-emerald-400"},{id:"reports",title:"Consulting Reports",icon:"FileText",color:"text-purple-400"},{id:"training",title:"Training Sessions",icon:"GraduationCap",color:"text-yellow-400"}],quickActions:[{label:"ISO Compliance",icon:"HardHat",path:"/iso"},{label:"Training",icon:"GraduationCap",path:"/training"},{label:"Reports",icon:"FileText",path:"/reports"},{label:"Analytics",icon:"BarChart3",path:"/analytics"}],widgets:["recentActivities","consultingMetrics","complianceStatus","projectOverview"]},[qe.HYBRID_EMPLOYEE]:{title:"Employee Dashboard",description:"Personal and operational overview",stats:[{id:"shifts",title:"My Shifts",icon:"CalendarDays",color:"text-blue-400"},{id:"reports",title:"My Reports",icon:"FileText",color:"text-green-400"},{id:"training",title:"Training Status",icon:"GraduationCap",color:"text-yellow-400"},{id:"compliance",title:"My Compliance",icon:"CheckCircle",color:"text-emerald-400"},{id:"alerts",title:"Active Alerts",icon:"AlertTriangle",color:"text-red-400"}],quickActions:[{label:"New Report",icon:"FileText",path:"/reports/list"},{label:"View Schedule",icon:"CalendarDays",path:"/scheduling"},{label:"Training",icon:"GraduationCap",path:"/training"},{label:"NFC Tags",icon:"Nfc",path:"/nfc"}],widgets:["recentActivities","personalMetrics","scheduleStatus","trainingProgress"]},[qe.CLIENT_POC]:{title:"Client Portal Dashboard",description:"Client-specific overview and access",stats:[{id:"sites",title:"My Facilities",icon:"MapPin",color:"text-blue-400"},{id:"officers",title:"Assigned Officers",icon:"Users",color:"text-green-400"},{id:"compliance",title:"Service Compliance",icon:"CheckCircle",color:"text-emerald-400"},{id:"reports",title:"Service Reports",icon:"FileText",color:"text-purple-400"},{id:"training",title:"Training Status",icon:"GraduationCap",color:"text-yellow-400"}],quickActions:[{label:"Service Reports",icon:"FileText",path:"/reports"},{label:"Training Portal",icon:"GraduationCap",path:"/training"},{label:"Live Classes",icon:"BookOpen",path:"/live-classes"},{label:"Contact Support",icon:"MessageSquare",path:"/messaging"}],widgets:["recentActivities","serviceMetrics","complianceStatus","trainingOverview"]}},P6=e=>Ay[e]||Ay[qe.HYBRID_EMPLOYEE],ui=async e=>{var t,s,n,a,i,o,l,c,d,u,h,m,g,x,y,w;try{const p=[];switch(e){case qe.ADMIN:const[v,b,j,S,_]=await Promise.all([$.from("sites").select("*",{count:"exact",head:!0}).eq("type","site"),$.from("sites").select("*",{count:"exact",head:!0}).eq("type","region"),$.from("entity_staff").select("*",{count:"exact",head:!0}),$.from("notifications").select("*",{count:"exact",head:!0}).eq("read",!1),Promise.resolve({count:98})]);p.push({id:"sites",value:((t=v.count)==null?void 0:t.toString())||"0"},{id:"regions",value:((s=b.count)==null?void 0:s.toString())||"0"},{id:"officers",value:((n=j.count)==null?void 0:n.toString())||"0"},{id:"alerts",value:((a=S.count)==null?void 0:a.toString())||"0"},{id:"compliance",value:"98%"},{id:"security",value:"Secure"});break;case qe.VICE_PRESIDENT:const[E,C,O]=await Promise.all([$.from("sites").select("*",{count:"exact",head:!0}).eq("type","region"),$.from("entity_staff").select("*",{count:"exact",head:!0}),Promise.resolve({count:97})]);p.push({id:"regions",value:((i=E.count)==null?void 0:i.toString())||"0"},{id:"officers",value:((o=C.count)==null?void 0:o.toString())||"0"},{id:"compliance",value:"97%"},{id:"revenue",value:"$3.2M"},{id:"growth",value:"+18%"},{id:"strategic",value:"92%"});break;case qe.EXECUTIVE:const[A,R,T]=await Promise.all([$.from("sites").select("*",{count:"exact",head:!0}).eq("type","region"),$.from("entity_staff").select("*",{count:"exact",head:!0}),Promise.resolve({count:95})]);p.push({id:"regions",value:((l=A.count)==null?void 0:l.toString())||"0"},{id:"officers",value:((c=R.count)==null?void 0:c.toString())||"0"},{id:"compliance",value:"95%"},{id:"revenue",value:"$2.4M"},{id:"growth",value:"+12%"});break;case qe.OPERATIONS_MANAGER:const[D,N,k,P]=await Promise.all([$.from("sites").select("*",{count:"exact",head:!0}).eq("type","site"),$.from("entity_staff").select("*",{count:"exact",head:!0}),$.from("notifications").select("*",{count:"exact",head:!0}).eq("read",!1),Promise.resolve({count:45})]);p.push({id:"sites",value:((d=D.count)==null?void 0:d.toString())||"0"},{id:"officers",value:((u=N.count)==null?void 0:u.toString())||"0"},{id:"alerts",value:((h=k.count)==null?void 0:h.toString())||"0"},{id:"compliance",value:"96%"},{id:"scheduling",value:((m=P.count)==null?void 0:m.toString())||"0"});break;case qe.SUPERVISOR:const[U,M,F,q]=await Promise.all([$.from("entity_staff").select("*",{count:"exact",head:!0}),$.from("notifications").select("*",{count:"exact",head:!0}).eq("read",!1),Promise.resolve({count:12}),Promise.resolve({count:8})]);p.push({id:"officers",value:((g=U.count)==null?void 0:g.toString())||"0"},{id:"alerts",value:((x=M.count)==null?void 0:x.toString())||"0"},{id:"compliance",value:"94%"},{id:"scheduling",value:((y=F.count)==null?void 0:y.toString())||"0"},{id:"reports",value:((w=q.count)==null?void 0:w.toString())||"0"});break;case qe.CONSULTANT:p.push({id:"clients",value:"12"},{id:"projects",value:"8"},{id:"compliance",value:"97%"},{id:"reports",value:"15"},{id:"training",value:"6"});break;case qe.HYBRID_EMPLOYEE:p.push({id:"shifts",value:"4"},{id:"reports",value:"3"},{id:"training",value:"85%"},{id:"compliance",value:"92%"},{id:"alerts",value:"2"});break;case qe.CLIENT_POC:p.push({id:"sites",value:"3"},{id:"officers",value:"8"},{id:"compliance",value:"98%"},{id:"reports",value:"12"},{id:"training",value:"100%"});break;default:p.push({id:"shifts",value:"4"},{id:"reports",value:"3"},{id:"training",value:"85%"},{id:"compliance",value:"92%"},{id:"alerts",value:"2"})}return{data:p,error:null}}catch(p){return console.error("Error fetching role stats:",p),{data:null,error:p}}},hi=async e=>{try{let t=$.from("notifications").select("id, message, created_at, type, ticker_status").order("created_at",{ascending:!1}).limit(5);e===qe.CLIENT_POC?t=t.eq("type","client_notification"):e===qe.HYBRID_EMPLOYEE&&(t=t.in("type",["personal_alert","training_reminder","schedule_update"]));const{data:s,error:n}=await t;if(n)throw n;return{data:s.map(i=>({id:i.id,message:i.message,time:new Date(i.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:i.ticker_status==="red"?"critical":i.ticker_status==="yellow"||i.ticker_status==="orange"?"warning":i.type==="training_alert"?"info":"success",type:i.type})),error:null}}catch(t){return console.error("Error fetching role activities:",t),{data:null,error:t}}},A6=({userRole:e,userName:t})=>{const{toast:s}=ce(),n=er(),[a,i]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState(!0),[u,h]=f.useState({core:"operational",database:"secure",nfc:"online",training:"maintenance",analytics:"active",security:"enabled"});f.useEffect(()=>{e&&(async()=>{d(!0);try{const[y,w]=await Promise.all([ui(e),hi(e)]);y.data&&i(y.data),w.data&&l(w.data),h({core:"operational",database:"secure",nfc:"online",training:"maintenance",analytics:"active",security:"enabled"})}catch{s({variant:"destructive",title:"Dashboard Error",description:"Failed to load admin dashboard data."})}finally{d(!1)}})()},[e,s]);const m=()=>{const x=new Date().getHours();return x<12?"Good Morning":x<18?"Good Afternoon":"Good Evening"},g=[{label:"System Settings",icon:Kn,path:"/admin-settings",color:"bg-blue-600"},{label:"User Management",icon:xe,path:"/login-management",color:"bg-green-600"},{label:"Developer Portal",icon:Xo,path:"/developer",color:"bg-purple-600"},{label:"Analytics",icon:Pt,path:"/analytics",color:"bg-orange-600"},{label:"Security Audit",icon:Ke,path:"/admin-settings",color:"bg-red-600"},{label:"Database Admin",icon:Of,path:"/developer",color:"bg-indigo-600"}];return c?r.jsxs("div",{className:"min-h-[calc(100vh-150px)] flex flex-col items-center justify-center text-white p-4",children:[r.jsx("div",{className:"w-24 h-24 mb-4 animate-pulse bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:r.jsx(Ke,{className:"w-12 h-12 text-white"})}),r.jsx("p",{className:"text-slate-300",children:"Loading Administrative Dashboard..."}),r.jsx("div",{className:"mt-6 w-12 h-12 border-4 border-dashed rounded-full animate-spin border-blue-400"})]}):r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[r.jsxs("h1",{className:"text-3xl font-bold text-white",children:[m(),", ",t,"!"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Administrative Dashboard - Complete system oversight and management"})]}),a.length>0&&r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:a.map((x,y)=>r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.05},children:r.jsx(B,{className:"ios-card hover-lift",children:r.jsx(V,{className:"p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:x.title||x.id}),r.jsx("p",{className:"text-2xl font-bold text-white",children:x.value}),x.change&&r.jsxs("p",{className:"text-xs text-green-400 flex items-center mt-1",children:[r.jsx(ws,{className:"w-3 h-3 mr-1"}),x.change]})]}),r.jsxs("div",{className:"p-2.5 rounded-lg bg-gradient-to-br from-slate-700/50 to-slate-800/50",children:[x.id==="sites"&&r.jsx(gt,{className:"w-5 h-5 text-blue-400"}),x.id==="regions"&&r.jsx(vt,{className:"w-5 h-5 text-purple-400"}),x.id==="officers"&&r.jsx(xe,{className:"w-5 h-5 text-green-400"}),x.id==="alerts"&&r.jsx(nt,{className:"w-5 h-5 text-yellow-400"}),x.id==="compliance"&&r.jsx(ze,{className:"w-5 h-5 text-emerald-400"}),x.id==="security"&&r.jsx(Ke,{className:"w-5 h-5 text-red-400"})]})]})})})},x.id))}),r.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:"Administrative Actions"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:g.map(x=>r.jsxs(I,{variant:"outline",className:`glass-button justify-start text-left h-auto py-2.5 px-3 hover-lift ${x.color} hover:${x.color}`,onClick:()=>n(x.path),children:[r.jsx(x.icon,{className:"w-4 h-4 mr-2 text-white flex-shrink-0"}),r.jsx("span",{className:"text-xs text-white",children:x.label})]},x.label))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Xs,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"System Activities"})]})}),r.jsx(V,{children:o.length>0?r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-hide",children:o.map(x=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full mt-1.5 flex-shrink-0 ${x.status==="critical"?"bg-red-500 animate-ping":x.status==="success"?"bg-green-500":x.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white text-sm",children:x.message}),r.jsxs("p",{className:"text-gray-400 text-xs mt-0.5 flex items-center",children:[r.jsx(Is,{className:"w-3 h-3 mr-1"}),x.time," - ",r.jsx("span",{className:"ml-1 capitalize",children:x.type.replace(/_/g," ")})]})]})]},x.id))}):r.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent activities to display."})})]})}),r.jsx(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(QT,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"System Status"})]})}),r.jsx(V,{children:r.jsx("div",{className:"space-y-3",children:Object.entries(u).map(([x,y])=>r.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[x==="core"&&r.jsx(Ej,{className:"w-4 h-4 text-blue-400"}),x==="database"&&r.jsx(Of,{className:"w-4 h-4 text-green-400"}),x==="nfc"&&r.jsx(r5,{className:"w-4 h-4 text-purple-400"}),x==="training"&&r.jsx(Wn,{className:"w-4 h-4 text-yellow-400"}),x==="analytics"&&r.jsx(Pt,{className:"w-4 h-4 text-orange-400"}),x==="security"&&r.jsx(Ke,{className:"w-4 h-4 text-red-400"}),r.jsx("span",{className:"text-white text-sm capitalize",children:x})]}),r.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${y==="operational"||y==="secure"||y==="online"||y==="active"||y==="enabled"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:y})]},x))})})]})})]}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(nt,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Security Alerts & Monitoring"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Do,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{className:"text-white font-medium",children:"Active Threats"})]}),r.jsx("p",{className:"text-2xl font-bold text-red-400 mt-2",children:"0"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"No active threats detected"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ke,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{className:"text-white font-medium",children:"Security Score"})]}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-2",children:"98%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Excellent security posture"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Oj,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-white font-medium",children:"Access Logs"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-400 mt-2",children:"1,247"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Today's access attempts"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(RT,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{className:"text-white font-medium",children:"System Health"})]}),r.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-2",children:"100%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"All systems operational"})]})]})})]})})]})},R6=({userRole:e,userName:t})=>{const{toast:s}=ce(),n=er(),[a,i]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState(!0),[u,h]=f.useState({revenue:"$3.2M",growth:"+18%",marketShare:"28%",clientSatisfaction:4.9,operationalEfficiency:97,strategicGoals:92,leadershipScore:95,teamPerformance:94}),[m,g]=f.useState("national"),[x,y]=f.useState("all"),[w,p]=f.useState("all"),[v,b]=f.useState({insights:["Revenue growth trend shows 18% increase across all regions","Site performance varies by 12% between top and bottom performers","Compliance rates are highest in Northeast region (99.2%)","AI predicts 22% growth potential in Southwest market","Resource allocation optimization could improve efficiency by 8%"],recommendations:["Focus on Southwest expansion for maximum ROI","Implement standardized training across all sites","Consider technology upgrades for bottom-performing sites","Develop regional leadership programs","Optimize scheduling based on AI predictions"]});f.useEffect(()=>{e&&(async()=>{d(!0);try{const[E,C]=await Promise.all([ui(e),hi(e)]);E.data&&i(E.data),C.data&&l(C.data)}catch{s({variant:"destructive",title:"Dashboard Error",description:"Failed to load VP dashboard data."})}finally{d(!1)}})()},[e,s]);const j=()=>{const _=new Date().getHours();return _<12?"Good Morning":_<18?"Good Afternoon":"Good Evening"},S=[{label:"Strategic Planning",icon:Gr,path:"/reports",color:"bg-blue-600"},{label:"Executive Analytics",icon:Pt,path:"/analytics",color:"bg-green-600"},{label:"Organizational View",icon:vt,path:"/sites",color:"bg-purple-600"},{label:"Performance Review",icon:Xs,path:"/performance",color:"bg-orange-600"},{label:"Market Analysis",icon:Af,path:"/analytics",color:"bg-indigo-600"},{label:"Leadership Reports",icon:ke,path:"/reports",color:"bg-pink-600"}];return c?r.jsxs("div",{className:"min-h-[calc(100vh-150px)] flex flex-col items-center justify-center text-white p-4",children:[r.jsx("div",{className:"w-24 h-24 mb-4 animate-pulse bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:r.jsx(As,{className:"w-12 h-12 text-white"})}),r.jsx("p",{className:"text-slate-300",children:"Loading Vice President Dashboard..."}),r.jsx("div",{className:"mt-6 w-12 h-12 border-4 border-dashed rounded-full animate-spin border-indigo-400"})]}):r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[r.jsxs("h1",{className:"text-3xl font-bold text-white",children:[j(),", ",t,"!"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Vice President Dashboard - Executive leadership and strategic oversight"})]}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(jp,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"View Controls"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-300",children:"View Type"}),r.jsx("div",{className:"flex space-x-2",children:[{value:"national",label:"National",icon:Wn},{value:"regional",label:"Regional",icon:gt},{value:"site",label:"Site",icon:As}].map(_=>r.jsxs(I,{variant:m===_.value?"default":"outline",size:"sm",className:`flex items-center space-x-2 ${m===_.value?"bg-blue-600":"glass-button"}`,onClick:()=>g(_.value),children:[r.jsx(_.icon,{className:"w-4 h-4"}),r.jsx("span",{children:_.label})]},_.value))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Region"}),r.jsxs("select",{value:w,onChange:_=>p(_.target.value),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Regions"}),r.jsx("option",{value:"northeast",children:"Northeast"}),r.jsx("option",{value:"southeast",children:"Southeast"}),r.jsx("option",{value:"midwest",children:"Midwest"}),r.jsx("option",{value:"southwest",children:"Southwest"}),r.jsx("option",{value:"west",children:"West Coast"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Site"}),r.jsxs("select",{value:x,onChange:_=>y(_.target.value),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Sites"}),r.jsx("option",{value:"hq",children:"Corporate HQ"}),r.jsx("option",{value:"site1",children:"Site Alpha"}),r.jsx("option",{value:"site2",children:"Site Beta"}),r.jsx("option",{value:"site3",children:"Site Gamma"}),r.jsx("option",{value:"site4",children:"Site Delta"})]})]})]})})]})}),a.length>0&&r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:a.map((_,E)=>r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:E*.05},children:r.jsx(B,{className:"ios-card hover-lift",children:r.jsx(V,{className:"p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:_.title||_.id}),r.jsx("p",{className:"text-2xl font-bold text-white",children:_.value}),_.change&&r.jsxs("p",{className:"text-xs text-green-400 flex items-center mt-1",children:[r.jsx(ws,{className:"w-3 h-3 mr-1"}),_.change]})]}),r.jsxs("div",{className:"p-2.5 rounded-lg bg-gradient-to-br from-slate-700/50 to-slate-800/50",children:[_.id==="regions"&&r.jsx(vt,{className:"w-5 h-5 text-purple-400"}),_.id==="officers"&&r.jsx(xe,{className:"w-5 h-5 text-green-400"}),_.id==="compliance"&&r.jsx(ze,{className:"w-5 h-5 text-emerald-400"}),_.id==="revenue"&&r.jsx(Wc,{className:"w-5 h-5 text-green-400"}),_.id==="growth"&&r.jsx(ws,{className:"w-5 h-5 text-blue-400"}),_.id==="strategic"&&r.jsx(Gr,{className:"w-5 h-5 text-orange-400"})]})]})})})},_.id))}),r.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:"Leadership Actions"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:S.map(_=>r.jsxs(I,{variant:"outline",className:`glass-button justify-start text-left h-auto py-2.5 px-3 hover-lift ${_.color} hover:${_.color}`,onClick:()=>n(_.path),children:[r.jsx(_.icon,{className:"w-4 h-4 mr-2 text-white flex-shrink-0"}),r.jsx("span",{className:"text-xs text-white",children:_.label})]},_.label))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Xs,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Leadership Updates"})]})}),r.jsx(V,{children:o.length>0?r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-hide",children:o.map(_=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full mt-1.5 flex-shrink-0 ${_.status==="critical"?"bg-red-500 animate-ping":_.status==="success"?"bg-green-500":_.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white text-sm",children:_.message}),r.jsxs("p",{className:"text-gray-400 text-xs mt-0.5 flex items-center",children:[r.jsx(Is,{className:"w-3 h-3 mr-1"}),_.time," - ",r.jsx("span",{className:"ml-1 capitalize",children:_.type.replace(/_/g," ")})]})]})]},_.id))}):r.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent leadership updates to display."})})]})}),r.jsx(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ag,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Leadership Metrics"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Revenue"}),r.jsx("span",{className:"text-green-400 font-medium",children:u.revenue})]}),r.jsxs("div",{className:"flex items-center text-xs text-green-400",children:[r.jsx(Sj,{className:"w-3 h-3 mr-1"}),"+18% from last quarter"]})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Growth Rate"}),r.jsx("span",{className:"text-blue-400 font-medium",children:u.growth})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:"18%"}})})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Leadership Score"}),r.jsxs("span",{className:"text-purple-400 font-medium",children:[u.leadershipScore,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-purple-400 h-2 rounded-full",style:{width:"95%"}})})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Team Performance"}),r.jsxs("span",{className:"text-orange-400 font-medium",children:[u.teamPerformance,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-orange-400 h-2 rounded-full",style:{width:"94%"}})})]})]})})]})})]}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ct,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Leadership Performance Overview"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Wc,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-white font-medium",children:"Revenue Growth"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-400 mt-2",children:"+18%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Year over year"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Wn,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{className:"text-white font-medium",children:"Market Share"})]}),r.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-2",children:u.marketShare}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Industry position"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Mj,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{className:"text-white font-medium",children:"Efficiency"})]}),r.jsxs("p",{className:"text-2xl font-bold text-yellow-400 mt-2",children:[u.operationalEfficiency,"%"]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Operational excellence"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Gr,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-white font-medium",children:"Strategic Goals"})]}),r.jsxs("p",{className:"text-2xl font-bold text-purple-400 mt-2",children:[u.strategicGoals,"%"]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"On track"})]})]})})]})}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(qc,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Executive Leadership Tools"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/reports"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ke,{className:"w-6 h-6 text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Strategic Reports"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Comprehensive leadership reports"})]})]})}),r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/analytics"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Pt,{className:"w-6 h-6 text-green-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Executive Analytics"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Deep strategic insights"})]})]})}),r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/sites"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(vt,{className:"w-6 h-6 text-purple-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Organizational View"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Leadership hierarchy"})]})]})})]})})]})}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Rf,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"AI Analytics & Insights"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center space-x-2",children:[r.jsx(qn,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"AI Insights"})]}),r.jsx("div",{className:"space-y-3",children:v.insights.map((_,E)=>r.jsx("div",{className:"p-3 rounded-lg bg-slate-800/40 border-l-4 border-blue-400",children:r.jsx("p",{className:"text-white text-sm",children:_})},E))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center space-x-2",children:[r.jsx(Gr,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"AI Recommendations"})]}),r.jsx("div",{className:"space-y-3",children:v.recommendations.map((_,E)=>r.jsx("div",{className:"p-3 rounded-lg bg-slate-800/40 border-l-4 border-green-400",children:r.jsx("p",{className:"text-white text-sm",children:_})},E))})]})]})})]})}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(yr,{className:"w-5 h-5 text-orange-400"}),r.jsx("span",{children:"Monthly Schedule Report"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(xe,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{className:"text-white font-medium",children:"Total Shifts"})]}),r.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-2",children:"1,247"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"This month"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ze,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-white font-medium",children:"Coverage Rate"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-400 mt-2",children:"98.5%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Scheduled vs actual"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ws,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-white font-medium",children:"Efficiency"})]}),r.jsx("p",{className:"text-2xl font-bold text-purple-400 mt-2",children:"94.2%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Resource utilization"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-white mb-3",children:"Regional Breakdown"}),r.jsx("div",{className:"space-y-2",children:[{region:"Northeast",shifts:312,coverage:"99.2%"},{region:"Southeast",shifts:298,coverage:"97.8%"},{region:"Midwest",shifts:285,coverage:"98.5%"},{region:"Southwest",shifts:203,coverage:"96.9%"},{region:"West Coast",shifts:149,coverage:"98.1%"}].map((_,E)=>r.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-800/40",children:[r.jsx("span",{className:"text-white text-sm",children:_.region}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("span",{className:"text-gray-400 text-sm",children:[_.shifts," shifts"]}),r.jsx("span",{className:"text-green-400 text-sm font-medium",children:_.coverage})]})]},E))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-white mb-3",children:"Top Performing Sites"}),r.jsx("div",{className:"space-y-2",children:[{site:"Corporate HQ",efficiency:"99.5%",growth:"+12%"},{site:"Site Alpha",efficiency:"98.8%",growth:"+8%"},{site:"Site Beta",efficiency:"97.2%",growth:"+15%"},{site:"Site Gamma",efficiency:"96.5%",growth:"+6%"},{site:"Site Delta",efficiency:"95.8%",growth:"+9%"}].map((_,E)=>r.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-800/40",children:[r.jsx("span",{className:"text-white text-sm",children:_.site}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"text-blue-400 text-sm font-medium",children:_.efficiency}),r.jsx("span",{className:"text-green-400 text-sm",children:_.growth})]})]},E))})]})]})]})})]})}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(oc,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Key Performance Indicators"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ke,{className:"w-5 h-5 text-emerald-400"}),r.jsx("span",{className:"text-white font-medium",children:"Compliance"})]}),r.jsx("p",{className:"text-2xl font-bold text-emerald-400 mt-2",children:"97%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Regulatory adherence"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(vs,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{className:"text-white font-medium",children:"Client Retention"})]}),r.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-2",children:"96%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Client satisfaction"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Do,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{className:"text-white font-medium",children:"Innovation"})]}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-2",children:"89%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"New initiatives"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ag,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-white font-medium",children:"Excellence"})]}),r.jsx("p",{className:"text-2xl font-bold text-purple-400 mt-2",children:"94%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Quality metrics"})]})]})})]})})]})},O6=({userRole:e,userName:t})=>{const{toast:s}=ce(),n=er(),[a,i]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState(!0),[u,h]=f.useState({revenue:"$2.4M",growth:"+12%",marketShare:"23%",clientSatisfaction:4.8,operationalEfficiency:94,strategicGoals:87});f.useEffect(()=>{e&&(async()=>{d(!0);try{const[y,w]=await Promise.all([ui(e),hi(e)]);y.data&&i(y.data),w.data&&l(w.data)}catch{s({variant:"destructive",title:"Dashboard Error",description:"Failed to load executive dashboard data."})}finally{d(!1)}})()},[e,s]);const m=()=>{const x=new Date().getHours();return x<12?"Good Morning":x<18?"Good Afternoon":"Good Evening"},g=[{label:"Strategic Reports",icon:ke,path:"/reports",color:"bg-blue-600"},{label:"Analytics",icon:Pt,path:"/analytics",color:"bg-green-600"},{label:"Hierarchy View",icon:vt,path:"/sites",color:"bg-purple-600"},{label:"Performance",icon:Xs,path:"/performance",color:"bg-orange-600"},{label:"Market Analysis",icon:Af,path:"/analytics",color:"bg-indigo-600"},{label:"Strategic Planning",icon:Gr,path:"/reports",color:"bg-pink-600"}];return c?r.jsxs("div",{className:"min-h-[calc(100vh-150px)] flex flex-col items-center justify-center text-white p-4",children:[r.jsx("div",{className:"w-24 h-24 mb-4 animate-pulse bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center",children:r.jsx(qc,{className:"w-12 h-12 text-white"})}),r.jsx("p",{className:"text-slate-300",children:"Loading Executive Dashboard..."}),r.jsx("div",{className:"mt-6 w-12 h-12 border-4 border-dashed rounded-full animate-spin border-purple-400"})]}):r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[r.jsxs("h1",{className:"text-3xl font-bold text-white",children:[m(),", ",t,"!"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Executive Dashboard - Strategic overview and high-level metrics"})]}),a.length>0&&r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:a.map((x,y)=>r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.05},children:r.jsx(B,{className:"ios-card hover-lift",children:r.jsx(V,{className:"p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:x.title||x.id}),r.jsx("p",{className:"text-2xl font-bold text-white",children:x.value}),x.change&&r.jsxs("p",{className:"text-xs text-green-400 flex items-center mt-1",children:[r.jsx(ws,{className:"w-3 h-3 mr-1"}),x.change]})]}),r.jsxs("div",{className:"p-2.5 rounded-lg bg-gradient-to-br from-slate-700/50 to-slate-800/50",children:[x.id==="regions"&&r.jsx(vt,{className:"w-5 h-5 text-purple-400"}),x.id==="officers"&&r.jsx(xe,{className:"w-5 h-5 text-green-400"}),x.id==="compliance"&&r.jsx(ze,{className:"w-5 h-5 text-emerald-400"}),x.id==="revenue"&&r.jsx(Wc,{className:"w-5 h-5 text-green-400"}),x.id==="growth"&&r.jsx(ws,{className:"w-5 h-5 text-blue-400"})]})]})})})},x.id))}),r.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:"Strategic Actions"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:g.map(x=>r.jsxs(I,{variant:"outline",className:`glass-button justify-start text-left h-auto py-2.5 px-3 hover-lift ${x.color} hover:${x.color}`,onClick:()=>n(x.path),children:[r.jsx(x.icon,{className:"w-4 h-4 mr-2 text-white flex-shrink-0"}),r.jsx("span",{className:"text-xs text-white",children:x.label})]},x.label))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Xs,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Strategic Updates"})]})}),r.jsx(V,{children:o.length>0?r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-hide",children:o.map(x=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full mt-1.5 flex-shrink-0 ${x.status==="critical"?"bg-red-500 animate-ping":x.status==="success"?"bg-green-500":x.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white text-sm",children:x.message}),r.jsxs("p",{className:"text-gray-400 text-xs mt-0.5 flex items-center",children:[r.jsx(Is,{className:"w-3 h-3 mr-1"}),x.time," - ",r.jsx("span",{className:"ml-1 capitalize",children:x.type.replace(/_/g," ")})]})]})]},x.id))}):r.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent strategic updates to display."})})]})}),r.jsx(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Af,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Strategic Metrics"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Revenue"}),r.jsx("span",{className:"text-green-400 font-medium",children:u.revenue})]}),r.jsxs("div",{className:"flex items-center text-xs text-green-400",children:[r.jsx(Sj,{className:"w-3 h-3 mr-1"}),"+12% from last quarter"]})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Growth Rate"}),r.jsx("span",{className:"text-blue-400 font-medium",children:u.growth})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:"12%"}})})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Market Share"}),r.jsx("span",{className:"text-purple-400 font-medium",children:u.marketShare})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-purple-400 h-2 rounded-full",style:{width:"23%"}})})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Client Satisfaction"}),r.jsxs("span",{className:"text-yellow-400 font-medium",children:[u.clientSatisfaction,"/5"]})]}),r.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(x=>r.jsx(ur,{className:`w-3 h-3 ${x<=u.clientSatisfaction?"text-yellow-400 fill-current":"text-gray-400"}`},x))})]})]})})]})})]}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Gr,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Strategic Performance Overview"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Wc,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-white font-medium",children:"Revenue Growth"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-400 mt-2",children:"+12%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Year over year"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Wn,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{className:"text-white font-medium",children:"Market Expansion"})]}),r.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-2",children:"+3"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"New regions"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Mj,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{className:"text-white font-medium",children:"Efficiency"})]}),r.jsxs("p",{className:"text-2xl font-bold text-yellow-400 mt-2",children:[u.operationalEfficiency,"%"]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Operational excellence"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Gr,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-white font-medium",children:"Strategic Goals"})]}),r.jsxs("p",{className:"text-2xl font-bold text-purple-400 mt-2",children:[u.strategicGoals,"%"]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"On track"})]})]})})]})}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(qc,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Executive Summary"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/reports"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ke,{className:"w-6 h-6 text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Strategic Reports"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"View comprehensive reports"})]})]})}),r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/analytics"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Pt,{className:"w-6 h-6 text-green-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Analytics Dashboard"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Deep dive into metrics"})]})]})}),r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/sites"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(vt,{className:"w-6 h-6 text-purple-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Organizational View"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Hierarchy and structure"})]})]})})]})})]})})]})},D6=({userRole:e,userName:t})=>{const{toast:s}=ce(),n=er(),[a,i]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState(!0),[u,h]=f.useState({totalMembers:12,activeMembers:10,onLeave:2,averagePerformance:87,complianceRate:94,trainingCompletion:89});f.useEffect(()=>{e&&(async()=>{d(!0);try{const[y,w]=await Promise.all([ui(e),hi(e)]);y.data&&i(y.data),w.data&&l(w.data)}catch{s({variant:"destructive",title:"Dashboard Error",description:"Failed to load supervisor dashboard data."})}finally{d(!1)}})()},[e,s]);const m=()=>{const x=new Date().getHours();return x<12?"Good Morning":x<18?"Good Afternoon":"Good Evening"},g=[{label:"New Report",icon:ke,path:"/reports/list",color:"bg-blue-600"},{label:"View Schedule",icon:yr,path:"/scheduling",color:"bg-green-600"},{label:"Team Management",icon:xe,path:"/employees",color:"bg-purple-600"},{label:"Assessments",icon:Yn,path:"/assessments",color:"bg-orange-600"},{label:"Performance",icon:ln,path:"/performance",color:"bg-indigo-600"},{label:"Communications",icon:Oo,path:"/messaging",color:"bg-pink-600"}];return c?r.jsxs("div",{className:"min-h-[calc(100vh-150px)] flex flex-col items-center justify-center text-white p-4",children:[r.jsx("div",{className:"w-24 h-24 mb-4 animate-pulse bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center",children:r.jsx(xe,{className:"w-12 h-12 text-white"})}),r.jsx("p",{className:"text-slate-300",children:"Loading Supervisor Dashboard..."}),r.jsx("div",{className:"mt-6 w-12 h-12 border-4 border-dashed rounded-full animate-spin border-green-400"})]}):r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[r.jsxs("h1",{className:"text-3xl font-bold text-white",children:[m(),", ",t,"!"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Supervisor Dashboard - Team management and oversight"})]}),a.length>0&&r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:a.map((x,y)=>r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.05},children:r.jsx(B,{className:"ios-card hover-lift",children:r.jsx(V,{className:"p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:x.title||x.id}),r.jsx("p",{className:"text-2xl font-bold text-white",children:x.value}),x.change&&r.jsxs("p",{className:"text-xs text-green-400 flex items-center mt-1",children:[r.jsx(ws,{className:"w-3 h-3 mr-1"}),x.change]})]}),r.jsxs("div",{className:"p-2.5 rounded-lg bg-gradient-to-br from-slate-700/50 to-slate-800/50",children:[x.id==="officers"&&r.jsx(xe,{className:"w-5 h-5 text-green-400"}),x.id==="alerts"&&r.jsx(nt,{className:"w-5 h-5 text-yellow-400"}),x.id==="compliance"&&r.jsx(ze,{className:"w-5 h-5 text-emerald-400"}),x.id==="scheduling"&&r.jsx(yr,{className:"w-5 h-5 text-purple-400"}),x.id==="reports"&&r.jsx(ke,{className:"w-5 h-5 text-blue-400"})]})]})})})},x.id))}),r.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:"Team Management Actions"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:g.map(x=>r.jsxs(I,{variant:"outline",className:`glass-button justify-start text-left h-auto py-2.5 px-3 hover-lift ${x.color} hover:${x.color}`,onClick:()=>n(x.path),children:[r.jsx(x.icon,{className:"w-4 h-4 mr-2 text-white flex-shrink-0"}),r.jsx("span",{className:"text-xs text-white",children:x.label})]},x.label))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Xs,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Team Activities"})]})}),r.jsx(V,{children:o.length>0?r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-hide",children:o.map(x=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full mt-1.5 flex-shrink-0 ${x.status==="critical"?"bg-red-500 animate-ping":x.status==="success"?"bg-green-500":x.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white text-sm",children:x.message}),r.jsxs("p",{className:"text-gray-400 text-xs mt-0.5 flex items-center",children:[r.jsx(Is,{className:"w-3 h-3 mr-1"}),x.time," - ",r.jsx("span",{className:"ml-1 capitalize",children:x.type.replace(/_/g," ")})]})]})]},x.id))}):r.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent team activities to display."})})]})}),r.jsx(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Pt,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Team Metrics"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Team Members"}),r.jsx("span",{className:"text-green-400 font-medium",children:u.totalMembers})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:[r.jsxs("span",{children:[u.activeMembers," Active"]}),r.jsx("span",{children:""}),r.jsxs("span",{children:[u.onLeave," On Leave"]})]})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Performance"}),r.jsxs("span",{className:"text-blue-400 font-medium",children:[u.averagePerformance,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:`${u.averagePerformance}%`}})})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Compliance"}),r.jsxs("span",{className:"text-emerald-400 font-medium",children:[u.complianceRate,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-emerald-400 h-2 rounded-full",style:{width:`${u.complianceRate}%`}})})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Training"}),r.jsxs("span",{className:"text-yellow-400 font-medium",children:[u.trainingCompletion,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${u.trainingCompletion}%`}})})]})]})})]})})]}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Gr,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Team Performance Overview"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ct,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-white font-medium",children:"Top Performers"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-400 mt-2",children:"4"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Exceeding expectations"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(CT,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{className:"text-white font-medium",children:"On Time"})]}),r.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-2",children:"92%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Attendance rate"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Cj,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{className:"text-white font-medium",children:"Tasks Complete"})]}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-2",children:"87%"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"This week's completion"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ur,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-white font-medium",children:"Team Rating"})]}),r.jsx("p",{className:"text-2xl font-bold text-purple-400 mt-2",children:"4.2/5"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Client satisfaction"})]})]})})]})}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(wp,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Quick Team Actions"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/employees"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(xe,{className:"w-6 h-6 text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Manage Team"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"View and edit team members"})]})]})}),r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/scheduling"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(yr,{className:"w-6 h-6 text-green-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Schedule Shifts"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Manage team schedules"})]})]})}),r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/assessments"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Yn,{className:"w-6 h-6 text-orange-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Team Assessments"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Evaluate performance"})]})]})})]})})]})})]})},M6=({userRole:e,userName:t})=>{const{toast:s}=ce(),n=er(),[a,i]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState(!0),[u,h]=f.useState({serviceQuality:98,responseTime:92,satisfaction:4.8,uptime:99.9,incidents:0,trainingCompletion:100});f.useEffect(()=>{e&&(async()=>{d(!0);try{const[y,w]=await Promise.all([ui(e),hi(e)]);y.data&&i(y.data),w.data&&l(w.data)}catch{s({variant:"destructive",title:"Dashboard Error",description:"Failed to load client dashboard data."})}finally{d(!1)}})()},[e,s]);const m=()=>{const x=new Date().getHours();return x<12?"Good Morning":x<18?"Good Afternoon":"Good Evening"},g=[{label:"Service Reports",icon:ke,path:"/reports",color:"bg-blue-600"},{label:"Training Portal",icon:rt,path:"/training",color:"bg-green-600"},{label:"Live Classes",icon:Od,path:"/live-classes",color:"bg-purple-600"},{label:"Contact Support",icon:Oo,path:"/messaging",color:"bg-orange-600"},{label:"Service Requests",icon:vs,path:"/reports",color:"bg-indigo-600"},{label:"Feedback",icon:Ct,path:"/messaging",color:"bg-pink-600"}];return c?r.jsxs("div",{className:"min-h-[calc(100vh-150px)] flex flex-col items-center justify-center text-white p-4",children:[r.jsx("div",{className:"w-24 h-24 mb-4 animate-pulse bg-gradient-to-br from-blue-500 to-green-600 rounded-full flex items-center justify-center",children:r.jsx(vs,{className:"w-12 h-12 text-white"})}),r.jsx("p",{className:"text-slate-300",children:"Loading Client Portal..."}),r.jsx("div",{className:"mt-6 w-12 h-12 border-4 border-dashed rounded-full animate-spin border-blue-400"})]}):r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[r.jsxs("h1",{className:"text-3xl font-bold text-white",children:[m(),", ",t,"!"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Client Portal Dashboard - Service delivery and support overview"})]}),a.length>0&&r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:a.map((x,y)=>r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.05},children:r.jsx(B,{className:"ios-card hover-lift",children:r.jsx(V,{className:"p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:x.title||x.id}),r.jsx("p",{className:"text-2xl font-bold text-white",children:x.value}),x.change&&r.jsxs("p",{className:"text-xs text-green-400 flex items-center mt-1",children:[r.jsx(ws,{className:"w-3 h-3 mr-1"}),x.change]})]}),r.jsxs("div",{className:"p-2.5 rounded-lg bg-gradient-to-br from-slate-700/50 to-slate-800/50",children:[x.id==="sites"&&r.jsx(gt,{className:"w-5 h-5 text-blue-400"}),x.id==="officers"&&r.jsx(xe,{className:"w-5 h-5 text-green-400"}),x.id==="compliance"&&r.jsx(ze,{className:"w-5 h-5 text-emerald-400"}),x.id==="reports"&&r.jsx(ke,{className:"w-5 h-5 text-purple-400"}),x.id==="training"&&r.jsx(rt,{className:"w-5 h-5 text-yellow-400"})]})]})})})},x.id))}),r.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:"Client Services"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:g.map(x=>r.jsxs(I,{variant:"outline",className:`glass-button justify-start text-left h-auto py-2.5 px-3 hover-lift ${x.color} hover:${x.color}`,onClick:()=>n(x.path),children:[r.jsx(x.icon,{className:"w-4 h-4 mr-2 text-white flex-shrink-0"}),r.jsx("span",{className:"text-xs text-white",children:x.label})]},x.label))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Xs,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Service Updates"})]})}),r.jsx(V,{children:o.length>0?r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-hide",children:o.map(x=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full mt-1.5 flex-shrink-0 ${x.status==="critical"?"bg-red-500 animate-ping":x.status==="success"?"bg-green-500":x.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white text-sm",children:x.message}),r.jsxs("p",{className:"text-gray-400 text-xs mt-0.5 flex items-center",children:[r.jsx(Is,{className:"w-3 h-3 mr-1"}),x.time," - ",r.jsx("span",{className:"ml-1 capitalize",children:x.type.replace(/_/g," ")})]})]})]},x.id))}):r.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent service updates to display."})})]})}),r.jsx(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Pt,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Service Quality"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Service Quality"}),r.jsxs("span",{className:"text-green-400 font-medium",children:[u.serviceQuality,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-green-400 h-2 rounded-full",style:{width:`${u.serviceQuality}%`}})})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Response Time"}),r.jsxs("span",{className:"text-blue-400 font-medium",children:[u.responseTime,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-400 h-2 rounded-full",style:{width:`${u.responseTime}%`}})})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"Satisfaction"}),r.jsxs("span",{className:"text-yellow-400 font-medium",children:[u.satisfaction,"/5"]})]}),r.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(x=>r.jsx(Ct,{className:`w-4 h-4 ${x<=u.satisfaction?"text-yellow-400 fill-current":"text-gray-400"}`},x))})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-white text-sm",children:"System Uptime"}),r.jsxs("span",{className:"text-emerald-400 font-medium",children:[u.uptime,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:"bg-emerald-400 h-2 rounded-full",style:{width:`${u.uptime}%`}})})]})]})})]})})]}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ur,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Service Performance Overview"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ke,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-white font-medium",children:"Security Incidents"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-400 mt-2",children:u.incidents}),r.jsx("p",{className:"text-gray-400 text-sm",children:"This month"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(rt,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{className:"text-white font-medium",children:"Training Complete"})]}),r.jsxs("p",{className:"text-2xl font-bold text-blue-400 mt-2",children:[u.trainingCompletion,"%"]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Required courses"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(yr,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{className:"text-white font-medium",children:"Service Hours"})]}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-2",children:"24/7"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Continuous coverage"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ct,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-white font-medium",children:"Client Rating"})]}),r.jsx("p",{className:"text-2xl font-bold text-purple-400 mt-2",children:"4.9/5"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Overall satisfaction"})]})]})})]})}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(wp,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Service Requests & Support"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/reports"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ke,{className:"w-6 h-6 text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Service Reports"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"View detailed service reports"})]})]})}),r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/training"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(rt,{className:"w-6 h-6 text-green-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Training Portal"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Access training materials"})]})]})}),r.jsx(I,{variant:"outline",className:"glass-button h-auto py-4 px-4 text-left hover-lift",onClick:()=>n("/messaging"),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Oo,{className:"w-6 h-6 text-orange-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Contact Support"}),r.jsx("p",{className:"text-gray-400 text-xs",children:"Get help and support"})]})]})})]})})]})}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(gr,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Service Status"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),r.jsx("span",{className:"text-white",children:"Security Services"})]}),r.jsx("span",{className:"text-green-400 text-sm font-medium",children:"Operational"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),r.jsx("span",{className:"text-white",children:"Training Platform"})]}),r.jsx("span",{className:"text-green-400 text-sm font-medium",children:"Available"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),r.jsx("span",{className:"text-white",children:"Support System"})]}),r.jsx("span",{className:"text-green-400 text-sm font-medium",children:"Online"})]})]})})]})})]})},$6=({userRole:e})=>{const{toast:t}=ce(),s=er(),[n,a]=f.useState([]),[i,o]=f.useState([]),[l,c]=f.useState(!0),[d,u]=f.useState("User");f.useEffect(()=>{e?(async()=>{c(!0);try{const{data:{user:y}}=await $.auth.getUser();if(y){const{data:v}=await $.from("users").select("full_name").eq("auth_user_id",y.id).single();v&&u(v.full_name||"User")}const[w,p]=await Promise.all([ui(e),hi(e)]);w.data&&a(w.data),p.data&&o(p.data)}catch{t({variant:"destructive",title:"Dashboard Error",description:"Failed to load some dashboard data."})}finally{c(!1)}})():c(!1)},[e,t]);const h=()=>{const x=new Date().getHours();return x<12?"Good Morning":x<18?"Good Afternoon":"Good Evening"},g=P6(e).quickActions||[];return l?r.jsxs("div",{className:"min-h-[calc(100vh-150px)] flex flex-col items-center justify-center text-white p-4",children:[r.jsx("img",{alt:"GS-3 SecureOps Pro Logo loading",className:"w-24 h-24 mb-4 animate-pulse",src:"https://images.unsplash.com/photo-1575821104894-b683ce7525ff"}),r.jsx("p",{className:"text-slate-300",children:"Loading Dashboard Data..."}),r.jsx("div",{className:"mt-6 w-12 h-12 border-4 border-dashed rounded-full animate-spin border-blue-400"})]}):e===qe.ADMIN?r.jsx(A6,{userRole:e,userName:d}):e===qe.VICE_PRESIDENT?r.jsx(R6,{userRole:e,userName:d}):e===qe.EXECUTIVE?r.jsx(O6,{userRole:e,userName:d}):e===qe.SUPERVISOR?r.jsx(D6,{userRole:e,userName:d}):e===qe.CLIENT_POC?r.jsx(M6,{userRole:e,userName:d}):e?r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[r.jsxs("h1",{className:"text-3xl font-bold text-white",children:[h(),", ",d,"!"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Welcome to your personalized dashboard."})]}),n.length>0&&r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:n.map((x,y)=>r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.05},children:r.jsx(B,{className:"ios-card hover-lift",children:r.jsx(V,{className:"p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:x.title||x.id}),r.jsx("p",{className:"text-2xl font-bold text-white",children:x.value}),x.change&&r.jsxs("p",{className:"text-xs text-green-400 flex items-center mt-1",children:[r.jsx(ws,{className:"w-3 h-3 mr-1"}),x.change]})]}),r.jsxs("div",{className:"p-2.5 rounded-lg bg-gradient-to-br from-slate-700/50 to-slate-800/50",children:[x.id==="sites"&&r.jsx(gt,{className:"w-5 h-5 text-blue-400"}),x.id==="regions"&&r.jsx(vt,{className:"w-5 h-5 text-purple-400"}),x.id==="officers"&&r.jsx(xe,{className:"w-5 h-5 text-green-400"}),x.id==="alerts"&&r.jsx(nt,{className:"w-5 h-5 text-yellow-400"}),x.id==="compliance"&&r.jsx(ze,{className:"w-5 h-5 text-emerald-400"}),x.id==="shifts"&&r.jsx(yr,{className:"w-5 h-5 text-blue-400"}),x.id==="reports"&&r.jsx(ke,{className:"w-5 h-5 text-purple-400"}),x.id==="training"&&r.jsx(vs,{className:"w-5 h-5 text-yellow-400"})]})]})})})},x.id))}),g.length>0&&r.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:"Quick Actions"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:g.map(x=>r.jsx(I,{variant:"outline",className:"glass-button justify-start text-left h-auto py-2.5 px-3 hover-lift",onClick:()=>x.path?s(x.path):t({title:" Feature Not Implemented"}),children:r.jsx("span",{className:"text-xs text-gray-200",children:x.label})},x.label))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Xs,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Recent Activities"})]})}),r.jsx(V,{children:i.length>0?r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-hide",children:i.map(x=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full mt-1.5 flex-shrink-0 ${x.status==="critical"?"bg-red-500 animate-ping":x.status==="success"?"bg-green-500":x.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white text-sm",children:x.message}),r.jsxs("p",{className:"text-gray-400 text-xs mt-0.5 flex items-center",children:[r.jsx(Is,{className:"w-3 h-3 mr-1"}),x.time," - ",r.jsx("span",{className:"ml-1 capitalize",children:x.type.replace(/_/g," ")})]})]})]},x.id))}):r.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent activities to display."})})]})}),r.jsx(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ke,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"System Status"})]})}),r.jsx(V,{children:r.jsx("div",{className:"space-y-3",children:[{name:"Core Systems",status:"Operational",color:"green"},{name:"NFC Network",status:"Online",color:"green"},{name:"Training Platform",status:"Operational",color:"green"},{name:"Analytics Engine",status:"Active",color:"green"},{name:"Database Connection",status:"Secure",color:"green"}].map(x=>r.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-slate-800/40",children:[r.jsx("span",{className:"text-white text-sm",children:x.name}),r.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full bg-${x.color}-500/20 text-${x.color}-400`,children:x.status})]},x.name))})})]})})]})]}):e?r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[r.jsxs("h1",{className:"text-3xl font-bold text-white",children:[h(),", ",d,"!"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Here's your operational overview for today."})]}),n.length>0&&r.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-${Math.min(n.length,5)} gap-6`,children:n.map((x,y)=>r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.05},children:r.jsx(B,{className:"ios-card hover-lift",children:r.jsx(V,{className:"p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:x.title}),r.jsx("p",{className:"text-2xl font-bold text-white",children:x.value}),x.change&&r.jsxs("p",{className:`text-xs ${x.color} flex items-center mt-1`,children:[r.jsx(ws,{className:"w-3 h-3 mr-1"}),x.change]})]}),r.jsx("div",{className:"p-2.5 rounded-lg bg-gradient-to-br from-slate-700/50 to-slate-800/50",children:r.jsx(x.icon,{className:`w-5 h-5 ${x.color}`})})]})})})},x.id))}),g.length>0&&r.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:"Quick Actions"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:g.map(x=>r.jsxs(I,{variant:"outline",className:"glass-button justify-start text-left h-auto py-2.5 px-3 hover-lift",onClick:()=>x.path?s(x.path):t({title:" Feature Not Implemented"}),children:[r.jsx(x.icon,{className:"w-4 h-4 mr-2 text-blue-400 flex-shrink-0"}),r.jsx("span",{className:"text-xs text-gray-200",children:x.label})]},x.label))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Xs,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Recent Activities"})]})}),r.jsx(V,{children:i.length>0?r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-hide",children:i.map(x=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full mt-1.5 flex-shrink-0 ${x.status==="critical"?"bg-red-500 animate-ping":x.status==="success"?"bg-green-500":x.status==="warning"?"bg-yellow-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white text-sm",children:x.message}),r.jsxs("p",{className:"text-gray-400 text-xs mt-0.5 flex items-center",children:[r.jsx(Is,{className:"w-3 h-3 mr-1"}),x.time," - ",r.jsx("span",{className:"ml-1 capitalize",children:x.type.replace(/_/g," ")})]})]})]},x.id))}):r.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent activities to display."})})]})}),r.jsx(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ke,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"System Status"})]})}),r.jsx(V,{children:r.jsx("div",{className:"space-y-3",children:[{name:"Core Systems",status:"Operational",color:"green"},{name:"NFC Network",status:"Online",color:"green"},{name:"Training Platform",status:e==="admin"?"Maintenance":"Operational",color:e==="admin"?"yellow":"green"},{name:"Analytics Engine",status:"Active",color:"green"},{name:"Database Connection",status:"Secure",color:"green"}].map(x=>r.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-slate-800/40",children:[r.jsx("span",{className:"text-white text-sm",children:x.name}),r.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full bg-${x.color}-500/20 text-${x.color}-400`,children:x.status})]},x.name))})})]})})]})]}):r.jsxs("div",{className:"min-h-[calc(100vh-150px)] flex flex-col items-center justify-center text-white p-4 text-center",children:[r.jsx("img",{alt:"GS-3 SecureOps Pro Logo",className:"w-28 h-28 mb-5",src:"https://images.unsplash.com/photo-1590456744140-d196318f23cf"}),r.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Welcome to SecureOps Pro"}),r.jsx("p",{className:"text-slate-400 mb-6 max-w-md",children:"Your advanced security management platform. Please log in to access your personalized dashboard and operational tools."})]})};var L6=hd[" useId ".trim().toString()]||(()=>{}),I6=0;function io(e){const[t,s]=f.useState(L6());return Js(()=>{e||s(n=>n??String(I6++))},[e]),e||(t?`radix-${t}`:"")}var F6=f.createContext(void 0);function Y1(e){const t=f.useContext(F6);return e||t||"ltr"}var uh="rovingFocusGroup.onEntryFocus",V6={bubbles:!1,cancelable:!0},il="RovingFocusGroup",[om,Q1,B6]=Xb(il),[z6,J1]=ta(il,[B6]),[U6,H6]=z6(il),X1=f.forwardRef((e,t)=>r.jsx(om.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(om.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(q6,{...e,ref:t})})}));X1.displayName=il;var q6=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,m=f.useRef(null),g=Zt(t,m),x=Y1(i),[y,w]=Qo({prop:o,defaultProp:l??null,onChange:c,caller:il}),[p,v]=f.useState(!1),b=$s(d),j=Q1(s),S=f.useRef(!1),[_,E]=f.useState(0);return f.useEffect(()=>{const C=m.current;if(C)return C.addEventListener(uh,b),()=>C.removeEventListener(uh,b)},[b]),r.jsx(U6,{scope:s,orientation:n,dir:x,loop:a,currentTabStopId:y,onItemFocus:f.useCallback(C=>w(C),[w]),onItemShiftTab:f.useCallback(()=>v(!0),[]),onFocusableItemAdd:f.useCallback(()=>E(C=>C+1),[]),onFocusableItemRemove:f.useCallback(()=>E(C=>C-1),[]),children:r.jsx(Oe.div,{tabIndex:p||_===0?-1:0,"data-orientation":n,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:Re(e.onMouseDown,()=>{S.current=!0}),onFocus:Re(e.onFocus,C=>{const O=!S.current;if(C.target===C.currentTarget&&O&&!p){const A=new CustomEvent(uh,V6);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const R=j().filter(P=>P.focusable),T=R.find(P=>P.active),D=R.find(P=>P.id===y),k=[T,D,...R].filter(Boolean).map(P=>P.ref.current);t2(k,u)}}S.current=!1}),onBlur:Re(e.onBlur,()=>v(!1))})})}),Z1="RovingFocusGroupItem",e2=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=io(),d=i||c,u=H6(Z1,s),h=u.currentTabStopId===d,m=Q1(s),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:y}=u;return f.useEffect(()=>{if(n)return g(),()=>x()},[n,g,x]),r.jsx(om.ItemSlot,{scope:s,id:d,focusable:n,active:a,children:r.jsx(Oe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:Re(e.onMouseDown,w=>{n?u.onItemFocus(d):w.preventDefault()}),onFocus:Re(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:Re(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const p=K6(w,u.orientation,u.dir);if(p!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=m().filter(j=>j.focusable).map(j=>j.ref.current);if(p==="last")b.reverse();else if(p==="prev"||p==="next"){p==="prev"&&b.reverse();const j=b.indexOf(w.currentTarget);b=u.loop?Y6(b,j+1):b.slice(j+1)}setTimeout(()=>t2(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});e2.displayName=Z1;var W6={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function G6(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function K6(e,t,s){const n=G6(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return W6[n]}function t2(e,t=!1){const s=document.activeElement;for(const n of e)if(n===s||(n.focus({preventScroll:t}),document.activeElement!==s))return}function Y6(e,t){return e.map((s,n)=>e[(t+n)%e.length])}var Q6=X1,J6=e2,Yd="Tabs",[X6,jF]=ta(Yd,[J1]),s2=J1(),[Z6,tx]=X6(Yd),r2=f.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Y1(l),[h,m]=Qo({prop:n,onChange:a,defaultProp:i??"",caller:Yd});return r.jsx(Z6,{scope:s,baseId:io(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:c,children:r.jsx(Oe.div,{dir:u,"data-orientation":o,...d,ref:t})})});r2.displayName=Yd;var n2="TabsList",a2=f.forwardRef((e,t)=>{const{__scopeTabs:s,loop:n=!0,...a}=e,i=tx(n2,s),o=s2(s);return r.jsx(Q6,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:r.jsx(Oe.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});a2.displayName=n2;var i2="TabsTrigger",o2=f.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,disabled:a=!1,...i}=e,o=tx(i2,s),l=s2(s),c=d2(o.baseId,n),d=u2(o.baseId,n),u=n===o.value;return r.jsx(J6,{asChild:!0,...l,focusable:!a,active:u,children:r.jsx(Oe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Re(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:Re(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:Re(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(n)})})})});o2.displayName=i2;var l2="TabsContent",c2=f.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,forceMount:a,children:i,...o}=e,l=tx(l2,s),c=d2(l.baseId,n),d=u2(l.baseId,n),u=n===l.value,h=f.useRef(u);return f.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),r.jsx(li,{present:a||u,children:({present:m})=>r.jsx(Oe.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});c2.displayName=l2;function d2(e,t){return`${e}-trigger-${t}`}function u2(e,t){return`${e}-content-${t}`}var eM=r2,h2=a2,f2=o2,m2=c2;const Ot=eM,bt=te.forwardRef(({className:e,...t},s)=>r.jsx(h2,{ref:s,className:ue("inline-flex h-auto items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));bt.displayName=h2.displayName;const ae=te.forwardRef(({className:e,...t},s)=>r.jsx(f2,{ref:s,className:ue("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ae.displayName=f2.displayName;const oe=te.forwardRef(({className:e,...t},s)=>r.jsx(m2,{ref:s,className:ue("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));oe.displayName=m2.displayName;const rd={async getAssessments(e={}){try{let t=$.from("assessments").select("*").order("scheduled_date",{ascending:!1});e.status&&(t=t.eq("status",e.status)),e.priority&&(t=t.eq("priority",e.priority)),e.assessment_type&&(t=t.eq("assessment_type",e.assessment_type)),e.search&&(t=t.or(`client_name.ilike.%${e.search}%,location.ilike.%${e.search}%`));const{data:s,error:n}=await t;if(n)throw console.error("Error fetching assessments:",n),n;return s||[]}catch(t){throw console.error("Error in getAssessments:",t),t}},async getAssessment(e){try{const{data:t,error:s}=await $.from("assessments").select("*").eq("id",e).single();if(s)throw console.error("Error fetching assessment:",s),s;return t}catch(t){throw console.error("Error in getAssessment:",t),t}},async createAssessment(e){try{const{data:t,error:s}=await $.from("assessments").insert([e]).select().single();if(s)throw console.error("Error creating assessment:",s),s;return t}catch(t){throw console.error("Error in createAssessment:",t),t}},async updateAssessment(e,t){try{const{data:s,error:n}=await $.from("assessments").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating assessment:",n),n;return s}catch(s){throw console.error("Error in updateAssessment:",s),s}},async deleteAssessment(e){try{const{error:t}=await $.from("assessments").delete().eq("id",e);if(t)throw console.error("Error deleting assessment:",t),t;return{success:!0}}catch(t){throw console.error("Error in deleteAssessment:",t),t}},async getAssessmentTemplates(){try{const{data:e,error:t}=await $.from("assessment_templates").select("*").eq("is_active",!0).order("title");if(t)throw console.error("Error fetching assessment templates:",t),t;return e||[]}catch(e){throw console.error("Error in getAssessmentTemplates:",e),e}},async getAssessmentServices(e){try{const{data:t,error:s}=await $.from("assessment_services").select("*").eq("assessment_id",e).order("service_name");if(s)throw console.error("Error fetching assessment services:",s),s;return t||[]}catch(t){throw console.error("Error in getAssessmentServices:",t),t}},async updateAssessmentServices(e,t){try{const{error:s}=await $.from("assessment_services").delete().eq("assessment_id",e);if(s)throw console.error("Error deleting existing assessment services:",s),s;if(t&&t.length>0){const n=t.map(o=>({assessment_id:e,service_name:o.name,is_included:o.is_included,notes:o.notes})),{data:a,error:i}=await $.from("assessment_services").insert(n).select();if(i)throw console.error("Error inserting assessment services:",i),i;return a}return[]}catch(s){throw console.error("Error in updateAssessmentServices:",s),s}},async getAssessmentStats(){try{const{data:e,error:t}=await $.from("assessments").select("status, priority, assessment_type");if(t)throw console.error("Error fetching assessment stats:",t),t;const s={total:e.length,byStatus:{},byPriority:{},byType:{}};return e.forEach(n=>{s.byStatus[n.status]=(s.byStatus[n.status]||0)+1,s.byPriority[n.priority]=(s.byPriority[n.priority]||0)+1,s.byType[n.assessment_type]=(s.byType[n.assessment_type]||0)+1}),s}catch(e){throw console.error("Error in getAssessmentStats:",e),e}}};var tM="Label",p2=f.forwardRef((e,t)=>r.jsx(Oe.label,{...e,ref:t,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));p2.displayName=tM;var x2=p2;const sM=Rd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Y=te.forwardRef(({className:e,...t},s)=>r.jsx(x2,{ref:s,className:ue(sM(),e),...t}));Y.displayName=x2.displayName;function De(){return De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},De.apply(null,arguments)}function Ry(e,[t,s]){return Math.min(s,Math.max(t,e))}function Lt(e,t,{checkForDefaultPrevented:s=!0}={}){return function(a){if(e==null||e(a),s===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function sx(e,t=[]){let s=[];function n(i,o){const l=f.createContext(o),c=s.length;s=[...s,o];function d(h){const{scope:m,children:g,...x}=h,y=(m==null?void 0:m[e][c])||l,w=f.useMemo(()=>x,Object.values(x));return f.createElement(y.Provider,{value:w},g)}function u(h,m){const g=(m==null?void 0:m[e][c])||l,x=f.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=s.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,rM(a,...t)]}function rM(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}function nM(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function g2(...e){return t=>e.forEach(s=>nM(s,t))}function ts(...e){return f.useCallback(g2(...e),e)}const Fo=f.forwardRef((e,t)=>{const{children:s,...n}=e,a=f.Children.toArray(s),i=a.find(iM);if(i){const o=i.props.children,l=a.map(c=>c===i?f.Children.count(o)>1?f.Children.only(null):f.isValidElement(o)?o.props.children:null:c);return f.createElement(lm,De({},n,{ref:t}),f.isValidElement(o)?f.cloneElement(o,void 0,l):null)}return f.createElement(lm,De({},n,{ref:t}),s)});Fo.displayName="Slot";const lm=f.forwardRef((e,t)=>{const{children:s,...n}=e;return f.isValidElement(s)?f.cloneElement(s,{...oM(n,s.props),ref:t?g2(t,s.ref):s.ref}):f.Children.count(s)>1?f.Children.only(null):null});lm.displayName="SlotClone";const aM=({children:e})=>f.createElement(f.Fragment,null,e);function iM(e){return f.isValidElement(e)&&e.type===aM}function oM(e,t){const s={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{i(...l),a(...l)}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function lM(e){const t=e+"CollectionProvider",[s,n]=sx(t),[a,i]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:x,children:y}=g,w=te.useRef(null),p=te.useRef(new Map).current;return te.createElement(a,{scope:x,itemMap:p,collectionRef:w},y)},l=e+"CollectionSlot",c=te.forwardRef((g,x)=>{const{scope:y,children:w}=g,p=i(l,y),v=ts(x,p.collectionRef);return te.createElement(Fo,{ref:v},w)}),d=e+"CollectionItemSlot",u="data-radix-collection-item",h=te.forwardRef((g,x)=>{const{scope:y,children:w,...p}=g,v=te.useRef(null),b=ts(x,v),j=i(d,y);return te.useEffect(()=>(j.itemMap.set(v,{ref:v,...p}),()=>void j.itemMap.delete(v))),te.createElement(Fo,{[u]:"",ref:b},w)});function m(g){const x=i(e+"CollectionConsumer",g);return te.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const p=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(x.itemMap.values()).sort((j,S)=>p.indexOf(j.ref.current)-p.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},m,n]}const cM=f.createContext(void 0);function dM(e){const t=f.useContext(cM);return e||t||"ltr"}const uM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Dt=uM.reduce((e,t)=>{const s=f.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?Fo:t;return f.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),f.createElement(l,De({},o,{ref:a}))});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function hM(e,t){e&&xn.flushSync(()=>e.dispatchEvent(t))}function Cr(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...s)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...s)},[])}function fM(e,t=globalThis==null?void 0:globalThis.document){const s=Cr(e);f.useEffect(()=>{const n=a=>{a.key==="Escape"&&s(a)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[s,t])}const cm="dismissableLayer.update",mM="dismissableLayer.pointerDownOutside",pM="dismissableLayer.focusOutside";let Oy;const xM=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gM=f.forwardRef((e,t)=>{var s;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,u=f.useContext(xM),[h,m]=f.useState(null),g=(s=h==null?void 0:h.ownerDocument)!==null&&s!==void 0?s:globalThis==null?void 0:globalThis.document,[,x]=f.useState({}),y=ts(t,C=>m(C)),w=Array.from(u.layers),[p]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=w.indexOf(p),b=h?w.indexOf(h):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,S=b>=v,_=yM(C=>{const O=C.target,A=[...u.branches].some(R=>R.contains(O));!S||A||(i==null||i(C),l==null||l(C),C.defaultPrevented||c==null||c())},g),E=vM(C=>{const O=C.target;[...u.branches].some(R=>R.contains(O))||(o==null||o(C),l==null||l(C),C.defaultPrevented||c==null||c())},g);return fM(C=>{b===u.layers.size-1&&(a==null||a(C),!C.defaultPrevented&&c&&(C.preventDefault(),c()))},g),f.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Oy=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),Dy(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Oy)}},[h,g,n,u]),f.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),Dy())},[h,u]),f.useEffect(()=>{const C=()=>x({});return document.addEventListener(cm,C),()=>document.removeEventListener(cm,C)},[]),f.createElement(Dt.div,De({},d,{ref:y,style:{pointerEvents:j?S?"auto":"none":void 0,...e.style},onFocusCapture:Lt(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Lt(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Lt(e.onPointerDownCapture,_.onPointerDownCapture)}))});function yM(e,t=globalThis==null?void 0:globalThis.document){const s=Cr(e),n=f.useRef(!1),a=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let d=function(){y2(mM,s,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}function vM(e,t=globalThis==null?void 0:globalThis.document){const s=Cr(e),n=f.useRef(!1);return f.useEffect(()=>{const a=i=>{i.target&&!n.current&&y2(pM,s,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Dy(){const e=new CustomEvent(cm);document.dispatchEvent(e)}function y2(e,t,s,{discrete:n}){const a=s.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&a.addEventListener(e,t,{once:!0}),n?hM(a,i):a.dispatchEvent(i)}let hh=0;function wM(){f.useEffect(()=>{var e,t;const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=s[0])!==null&&e!==void 0?e:My()),document.body.insertAdjacentElement("beforeend",(t=s[1])!==null&&t!==void 0?t:My()),hh++,()=>{hh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),hh--}},[])}function My(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const fh="focusScope.autoFocusOnMount",mh="focusScope.autoFocusOnUnmount",$y={bubbles:!1,cancelable:!0},bM=f.forwardRef((e,t)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=f.useState(null),d=Cr(a),u=Cr(i),h=f.useRef(null),m=ts(t,y=>c(y)),g=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let y=function(b){if(g.paused||!l)return;const j=b.target;l.contains(j)?h.current=j:Lr(h.current,{select:!0})},w=function(b){if(g.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||Lr(h.current,{select:!0}))},p=function(b){const j=document.activeElement;for(const S of b)S.removedNodes.length>0&&(l!=null&&l.contains(j)||Lr(l))};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const v=new MutationObserver(p);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),v.disconnect()}}},[n,l,g.paused]),f.useEffect(()=>{if(l){Iy.add(g);const y=document.activeElement;if(!l.contains(y)){const p=new CustomEvent(fh,$y);l.addEventListener(fh,d),l.dispatchEvent(p),p.defaultPrevented||(jM(EM(v2(l)),{select:!0}),document.activeElement===y&&Lr(l))}return()=>{l.removeEventListener(fh,d),setTimeout(()=>{const p=new CustomEvent(mh,$y);l.addEventListener(mh,u),l.dispatchEvent(p),p.defaultPrevented||Lr(y??document.body,{select:!0}),l.removeEventListener(mh,u),Iy.remove(g)},0)}}},[l,d,u,g]);const x=f.useCallback(y=>{if(!s&&!n||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,p=document.activeElement;if(w&&p){const v=y.currentTarget,[b,j]=NM(v);b&&j?!y.shiftKey&&p===j?(y.preventDefault(),s&&Lr(b,{select:!0})):y.shiftKey&&p===b&&(y.preventDefault(),s&&Lr(j,{select:!0})):p===v&&y.preventDefault()}},[s,n,g.paused]);return f.createElement(Dt.div,De({tabIndex:-1},o,{ref:m,onKeyDown:x}))});function jM(e,{select:t=!1}={}){const s=document.activeElement;for(const n of e)if(Lr(n,{select:t}),document.activeElement!==s)return}function NM(e){const t=v2(e),s=Ly(t,e),n=Ly(t.reverse(),e);return[s,n]}function v2(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Ly(e,t){for(const s of e)if(!SM(s,{upTo:t}))return s}function SM(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function _M(e){return e instanceof HTMLInputElement&&"select"in e}function Lr(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&_M(e)&&t&&e.select()}}const Iy=CM();function CM(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=Fy(e,t),e.unshift(t)},remove(t){var s;e=Fy(e,t),(s=e[0])===null||s===void 0||s.resume()}}}function Fy(e,t){const s=[...e],n=s.indexOf(t);return n!==-1&&s.splice(n,1),s}function EM(e){return e.filter(t=>t.tagName!=="A")}const Er=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},kM=hd["useId".toString()]||(()=>{});let TM=0;function w2(e){const[t,s]=f.useState(kM());return Er(()=>{e||s(n=>n??String(TM++))},[e]),e||(t?`radix-${t}`:"")}const PM=["top","right","bottom","left"],un=Math.min,rs=Math.max,nd=Math.round,Vl=Math.floor,Qs=e=>({x:e,y:e}),AM={left:"right",right:"left",bottom:"top",top:"bottom"},RM={start:"end",end:"start"};function dm(e,t,s){return rs(e,un(t,s))}function kr(e,t){return typeof e=="function"?e(t):e}function Tr(e){return e.split("-")[0]}function fi(e){return e.split("-")[1]}function rx(e){return e==="x"?"y":"x"}function nx(e){return e==="y"?"height":"width"}const OM=new Set(["top","bottom"]);function Ws(e){return OM.has(Tr(e))?"y":"x"}function ax(e){return rx(Ws(e))}function DM(e,t,s){s===void 0&&(s=!1);const n=fi(e),a=ax(e),i=nx(a);let o=a==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=ad(o)),[o,ad(o)]}function MM(e){const t=ad(e);return[um(e),t,um(t)]}function um(e){return e.replace(/start|end/g,t=>RM[t])}const Vy=["left","right"],By=["right","left"],$M=["top","bottom"],LM=["bottom","top"];function IM(e,t,s){switch(e){case"top":case"bottom":return s?t?By:Vy:t?Vy:By;case"left":case"right":return t?$M:LM;default:return[]}}function FM(e,t,s,n){const a=fi(e);let i=IM(Tr(e),s==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(um)))),i}function ad(e){return e.replace(/left|right|bottom|top/g,t=>AM[t])}function VM(e){return{top:0,right:0,bottom:0,left:0,...e}}function b2(e){return typeof e!="number"?VM(e):{top:e,right:e,bottom:e,left:e}}function id(e){const{x:t,y:s,width:n,height:a}=e;return{width:n,height:a,top:s,left:t,right:t+n,bottom:s+a,x:t,y:s}}function zy(e,t,s){let{reference:n,floating:a}=e;const i=Ws(t),o=ax(t),l=nx(o),c=Tr(t),d=i==="y",u=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,m=n[l]/2-a[l]/2;let g;switch(c){case"top":g={x:u,y:n.y-a.height};break;case"bottom":g={x:u,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:h};break;case"left":g={x:n.x-a.width,y:h};break;default:g={x:n.x,y:n.y}}switch(fi(t)){case"start":g[o]-=m*(s&&d?-1:1);break;case"end":g[o]+=m*(s&&d?-1:1);break}return g}const BM=async(e,t,s)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=s,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:h}=zy(d,n,c),m=n,g={},x=0;for(let y=0;y<l.length;y++){const{name:w,fn:p}=l[y],{x:v,y:b,data:j,reset:S}=await p({x:u,y:h,initialPlacement:n,placement:m,strategy:a,middlewareData:g,rects:d,platform:o,elements:{reference:e,floating:t}});u=v??u,h=b??h,g={...g,[w]:{...g[w],...j}},S&&x<=50&&(x++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:u,y:h}=zy(d,m,c)),y=-1)}return{x:u,y:h,placement:m,strategy:a,middlewareData:g}};async function Vo(e,t){var s;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=kr(t,e),x=b2(g),w=l[m?h==="floating"?"reference":"floating":h],p=id(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(w)))==null||s?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),v=h==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},S=id(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(p.top-S.top+x.top)/j.y,bottom:(S.bottom-p.bottom+x.bottom)/j.y,left:(p.left-S.left+x.left)/j.x,right:(S.right-p.right+x.right)/j.x}}const zM=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=kr(e,t)||{};if(d==null)return{};const h=b2(u),m={x:s,y:n},g=ax(a),x=nx(g),y=await o.getDimensions(d),w=g==="y",p=w?"top":"left",v=w?"bottom":"right",b=w?"clientHeight":"clientWidth",j=i.reference[x]+i.reference[g]-m[g]-i.floating[x],S=m[g]-i.reference[g],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let E=_?_[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(_)))&&(E=l.floating[b]||i.floating[x]);const C=j/2-S/2,O=E/2-y[x]/2-1,A=un(h[p],O),R=un(h[v],O),T=A,D=E-y[x]-R,N=E/2-y[x]/2+C,k=dm(T,N,D),P=!c.arrow&&fi(a)!=null&&N!==k&&i.reference[x]/2-(N<T?A:R)-y[x]/2<0,U=P?N<T?N-T:N-D:0;return{[g]:m[g]+U,data:{[g]:k,centerOffset:N-k-U,...P&&{alignmentOffset:U}},reset:P}}}),UM=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...w}=kr(e,t);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const p=Tr(a),v=Ws(l),b=Tr(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(b||!y?[ad(l)]:MM(l)),_=x!=="none";!m&&_&&S.push(...FM(l,y,x,j));const E=[l,...S],C=await Vo(t,w),O=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&O.push(C[p]),h){const N=DM(a,o,j);O.push(C[N[0]],C[N[1]])}if(A=[...A,{placement:a,overflows:O}],!O.every(N=>N<=0)){var R,T;const N=(((R=i.flip)==null?void 0:R.index)||0)+1,k=E[N];if(k&&(!(h==="alignment"?v!==Ws(k):!1)||A.every(M=>M.overflows[0]>0&&Ws(M.placement)===v)))return{data:{index:N,overflows:A},reset:{placement:k}};let P=(T=A.filter(U=>U.overflows[0]<=0).sort((U,M)=>U.overflows[1]-M.overflows[1])[0])==null?void 0:T.placement;if(!P)switch(g){case"bestFit":{var D;const U=(D=A.filter(M=>{if(_){const F=Ws(M.placement);return F===v||F==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(F=>F>0).reduce((F,q)=>F+q,0)]).sort((M,F)=>M[1]-F[1])[0])==null?void 0:D[0];U&&(P=U);break}case"initialPlacement":P=l;break}if(a!==P)return{reset:{placement:P}}}return{}}}};function Uy(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Hy(e){return PM.some(t=>e[t]>=0)}const HM=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:n="referenceHidden",...a}=kr(e,t);switch(n){case"referenceHidden":{const i=await Vo(t,{...a,elementContext:"reference"}),o=Uy(i,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Hy(o)}}}case"escaped":{const i=await Vo(t,{...a,altBoundary:!0}),o=Uy(i,s.floating);return{data:{escapedOffsets:o,escaped:Hy(o)}}}default:return{}}}}},j2=new Set(["left","top"]);async function qM(e,t){const{placement:s,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Tr(s),l=fi(s),c=Ws(s)==="y",d=j2.has(o)?-1:1,u=i&&c?-1:1,h=kr(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*u,y:m*d}:{x:m*d,y:g*u}}const WM=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await qM(t,e);return o===((s=l.offset)==null?void 0:s.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},GM=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:p,y:v}=w;return{x:p,y:v}}},...c}=kr(e,t),d={x:s,y:n},u=await Vo(t,c),h=Ws(Tr(a)),m=rx(h);let g=d[m],x=d[h];if(i){const w=m==="y"?"top":"left",p=m==="y"?"bottom":"right",v=g+u[w],b=g-u[p];g=dm(v,g,b)}if(o){const w=h==="y"?"top":"left",p=h==="y"?"bottom":"right",v=x+u[w],b=x-u[p];x=dm(v,x,b)}const y=l.fn({...t,[m]:g,[h]:x});return{...y,data:{x:y.x-s,y:y.y-n,enabled:{[m]:i,[h]:o}}}}}},KM=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=kr(e,t),u={x:s,y:n},h=Ws(a),m=rx(h);let g=u[m],x=u[h];const y=kr(l,t),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const b=m==="y"?"height":"width",j=i.reference[m]-i.floating[b]+w.mainAxis,S=i.reference[m]+i.reference[b]-w.mainAxis;g<j?g=j:g>S&&(g=S)}if(d){var p,v;const b=m==="y"?"width":"height",j=j2.has(Tr(a)),S=i.reference[h]-i.floating[b]+(j&&((p=o.offset)==null?void 0:p[h])||0)+(j?0:w.crossAxis),_=i.reference[h]+i.reference[b]+(j?0:((v=o.offset)==null?void 0:v[h])||0)-(j?w.crossAxis:0);x<S?x=S:x>_&&(x=_)}return{[m]:g,[h]:x}}}},YM=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=kr(e,t),u=await Vo(t,d),h=Tr(a),m=fi(a),g=Ws(a)==="y",{width:x,height:y}=i.floating;let w,p;h==="top"||h==="bottom"?(w=h,p=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(p=h,w=m==="end"?"top":"bottom");const v=y-u.top-u.bottom,b=x-u.left-u.right,j=un(y-u[w],v),S=un(x-u[p],b),_=!t.middlewareData.shift;let E=j,C=S;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(C=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(E=v),_&&!m){const A=rs(u.left,0),R=rs(u.right,0),T=rs(u.top,0),D=rs(u.bottom,0);g?C=x-2*(A!==0||R!==0?A+R:rs(u.left,u.right)):E=y-2*(T!==0||D!==0?T+D:rs(u.top,u.bottom))}await c({...t,availableWidth:C,availableHeight:E});const O=await o.getDimensions(l.floating);return x!==O.width||y!==O.height?{reset:{rects:!0}}:{}}}};function Qd(){return typeof window<"u"}function mi(e){return N2(e)?(e.nodeName||"").toLowerCase():"#document"}function is(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function tr(e){var t;return(t=(N2(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function N2(e){return Qd()?e instanceof Node||e instanceof is(e).Node:!1}function Fs(e){return Qd()?e instanceof Element||e instanceof is(e).Element:!1}function Zs(e){return Qd()?e instanceof HTMLElement||e instanceof is(e).HTMLElement:!1}function qy(e){return!Qd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof is(e).ShadowRoot}const QM=new Set(["inline","contents"]);function ol(e){const{overflow:t,overflowX:s,overflowY:n,display:a}=Vs(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!QM.has(a)}const JM=new Set(["table","td","th"]);function XM(e){return JM.has(mi(e))}const ZM=[":popover-open",":modal"];function Jd(e){return ZM.some(t=>{try{return e.matches(t)}catch{return!1}})}const e$=["transform","translate","scale","rotate","perspective"],t$=["transform","translate","scale","rotate","perspective","filter"],s$=["paint","layout","strict","content"];function ix(e){const t=ox(),s=Fs(e)?Vs(e):e;return e$.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||t$.some(n=>(s.willChange||"").includes(n))||s$.some(n=>(s.contain||"").includes(n))}function r$(e){let t=hn(e);for(;Zs(t)&&!ti(t);){if(ix(t))return t;if(Jd(t))return null;t=hn(t)}return null}function ox(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const n$=new Set(["html","body","#document"]);function ti(e){return n$.has(mi(e))}function Vs(e){return is(e).getComputedStyle(e)}function Xd(e){return Fs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function hn(e){if(mi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||qy(e)&&e.host||tr(e);return qy(t)?t.host:t}function S2(e){const t=hn(e);return ti(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zs(t)&&ol(t)?t:S2(t)}function Bo(e,t,s){var n;t===void 0&&(t=[]),s===void 0&&(s=!0);const a=S2(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=is(a);if(i){const l=hm(o);return t.concat(o,o.visualViewport||[],ol(a)?a:[],l&&s?Bo(l):[])}return t.concat(a,Bo(a,[],s))}function hm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _2(e){const t=Vs(e);let s=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Zs(e),i=a?e.offsetWidth:s,o=a?e.offsetHeight:n,l=nd(s)!==i||nd(n)!==o;return l&&(s=i,n=o),{width:s,height:n,$:l}}function lx(e){return Fs(e)?e:e.contextElement}function Va(e){const t=lx(e);if(!Zs(t))return Qs(1);const s=t.getBoundingClientRect(),{width:n,height:a,$:i}=_2(t);let o=(i?nd(s.width):s.width)/n,l=(i?nd(s.height):s.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const a$=Qs(0);function C2(e){const t=is(e);return!ox()||!t.visualViewport?a$:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function i$(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==is(e)?!1:t}function Qn(e,t,s,n){t===void 0&&(t=!1),s===void 0&&(s=!1);const a=e.getBoundingClientRect(),i=lx(e);let o=Qs(1);t&&(n?Fs(n)&&(o=Va(n)):o=Va(e));const l=i$(i,s,n)?C2(i):Qs(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(i){const m=is(i),g=n&&Fs(n)?is(n):n;let x=m,y=hm(x);for(;y&&n&&g!==x;){const w=Va(y),p=y.getBoundingClientRect(),v=Vs(y),b=p.left+(y.clientLeft+parseFloat(v.paddingLeft))*w.x,j=p.top+(y.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,h*=w.y,c+=b,d+=j,x=is(y),y=hm(x)}}return id({width:u,height:h,x:c,y:d})}function cx(e,t){const s=Xd(e).scrollLeft;return t?t.left+s:Qn(tr(e)).left+s}function E2(e,t,s){s===void 0&&(s=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(s?0:cx(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function o$(e){let{elements:t,rect:s,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=tr(n),l=t?Jd(t.floating):!1;if(n===o||l&&i)return s;let c={scrollLeft:0,scrollTop:0},d=Qs(1);const u=Qs(0),h=Zs(n);if((h||!h&&!i)&&((mi(n)!=="body"||ol(o))&&(c=Xd(n)),Zs(n))){const g=Qn(n);d=Va(n),u.x=g.x+n.clientLeft,u.y=g.y+n.clientTop}const m=o&&!h&&!i?E2(o,c,!0):Qs(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:s.y*d.y-c.scrollTop*d.y+u.y+m.y}}function l$(e){return Array.from(e.getClientRects())}function c$(e){const t=tr(e),s=Xd(e),n=e.ownerDocument.body,a=rs(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=rs(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-s.scrollLeft+cx(e);const l=-s.scrollTop;return Vs(n).direction==="rtl"&&(o+=rs(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function d$(e,t){const s=is(e),n=tr(e),a=s.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=ox();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const u$=new Set(["absolute","fixed"]);function h$(e,t){const s=Qn(e,!0,t==="fixed"),n=s.top+e.clientTop,a=s.left+e.clientLeft,i=Zs(e)?Va(e):Qs(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function Wy(e,t,s){let n;if(t==="viewport")n=d$(e,s);else if(t==="document")n=c$(tr(e));else if(Fs(t))n=h$(t,s);else{const a=C2(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return id(n)}function k2(e,t){const s=hn(e);return s===t||!Fs(s)||ti(s)?!1:Vs(s).position==="fixed"||k2(s,t)}function f$(e,t){const s=t.get(e);if(s)return s;let n=Bo(e,[],!1).filter(l=>Fs(l)&&mi(l)!=="body"),a=null;const i=Vs(e).position==="fixed";let o=i?hn(e):e;for(;Fs(o)&&!ti(o);){const l=Vs(o),c=ix(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&u$.has(a.position)||ol(o)&&!c&&k2(e,o))?n=n.filter(u=>u!==o):a=l,o=hn(o)}return t.set(e,n),n}function m$(e){let{element:t,boundary:s,rootBoundary:n,strategy:a}=e;const o=[...s==="clippingAncestors"?Jd(t)?[]:f$(t,this._c):[].concat(s),n],l=o[0],c=o.reduce((d,u)=>{const h=Wy(t,u,a);return d.top=rs(h.top,d.top),d.right=un(h.right,d.right),d.bottom=un(h.bottom,d.bottom),d.left=rs(h.left,d.left),d},Wy(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function p$(e){const{width:t,height:s}=_2(e);return{width:t,height:s}}function x$(e,t,s){const n=Zs(t),a=tr(t),i=s==="fixed",o=Qn(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Qs(0);function d(){c.x=cx(a)}if(n||!n&&!i)if((mi(t)!=="body"||ol(a))&&(l=Xd(t)),n){const g=Qn(t,!0,i,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?E2(a,l):Qs(0),h=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:o.width,height:o.height}}function ph(e){return Vs(e).position==="static"}function Gy(e,t){if(!Zs(e)||Vs(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return tr(e)===s&&(s=s.ownerDocument.body),s}function T2(e,t){const s=is(e);if(Jd(e))return s;if(!Zs(e)){let a=hn(e);for(;a&&!ti(a);){if(Fs(a)&&!ph(a))return a;a=hn(a)}return s}let n=Gy(e,t);for(;n&&XM(n)&&ph(n);)n=Gy(n,t);return n&&ti(n)&&ph(n)&&!ix(n)?s:n||r$(e)||s}const g$=async function(e){const t=this.getOffsetParent||T2,s=this.getDimensions,n=await s(e.floating);return{reference:x$(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function y$(e){return Vs(e).direction==="rtl"}const v$={convertOffsetParentRelativeRectToViewportRelativeRect:o$,getDocumentElement:tr,getClippingRect:m$,getOffsetParent:T2,getElementRects:g$,getClientRects:l$,getDimensions:p$,getScale:Va,isElement:Fs,isRTL:y$};function P2(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function w$(e,t){let s=null,n;const a=tr(e);function i(){var l;clearTimeout(n),(l=s)==null||l.disconnect(),s=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:m,height:g}=d;if(l||t(),!m||!g)return;const x=Vl(h),y=Vl(a.clientWidth-(u+m)),w=Vl(a.clientHeight-(h+g)),p=Vl(u),b={rootMargin:-x+"px "+-y+"px "+-w+"px "+-p+"px",threshold:rs(0,un(1,c))||1};let j=!0;function S(_){const E=_[0].intersectionRatio;if(E!==c){if(!j)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!P2(d,e.getBoundingClientRect())&&o(),j=!1}try{s=new IntersectionObserver(S,{...b,root:a.ownerDocument})}catch{s=new IntersectionObserver(S,b)}s.observe(e)}return o(!0),i}function b$(e,t,s,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=lx(e),u=a||i?[...d?Bo(d):[],...Bo(t)]:[];u.forEach(p=>{a&&p.addEventListener("scroll",s,{passive:!0}),i&&p.addEventListener("resize",s)});const h=d&&l?w$(d,s):null;let m=-1,g=null;o&&(g=new ResizeObserver(p=>{let[v]=p;v&&v.target===d&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=g)==null||b.observe(t)})),s()}),d&&!c&&g.observe(d),g.observe(t));let x,y=c?Qn(e):null;c&&w();function w(){const p=Qn(e);y&&!P2(y,p)&&s(),y=p,x=requestAnimationFrame(w)}return s(),()=>{var p;u.forEach(v=>{a&&v.removeEventListener("scroll",s),i&&v.removeEventListener("resize",s)}),h==null||h(),(p=g)==null||p.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const j$=WM,N$=GM,S$=UM,_$=YM,C$=HM,Ky=zM,E$=KM,k$=(e,t,s)=>{const n=new Map,a={platform:v$,...s},i={...a.platform,_c:n};return BM(e,t,{...a,platform:i})};var T$=typeof document<"u",P$=function(){},mc=T$?f.useLayoutEffect:P$;function od(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(n=s;n--!==0;)if(!od(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=s;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!od(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function A2(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Yy(e,t){const s=A2(e);return Math.round(t*s)/s}function xh(e){const t=f.useRef(e);return mc(()=>{t.current=e}),t}function A$(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=f.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=f.useState(n);od(m,n)||g(n);const[x,y]=f.useState(null),[w,p]=f.useState(null),v=f.useCallback(M=>{M!==_.current&&(_.current=M,y(M))},[]),b=f.useCallback(M=>{M!==E.current&&(E.current=M,p(M))},[]),j=i||x,S=o||w,_=f.useRef(null),E=f.useRef(null),C=f.useRef(u),O=c!=null,A=xh(c),R=xh(a),T=xh(d),D=f.useCallback(()=>{if(!_.current||!E.current)return;const M={placement:t,strategy:s,middleware:m};R.current&&(M.platform=R.current),k$(_.current,E.current,M).then(F=>{const q={...F,isPositioned:T.current!==!1};N.current&&!od(C.current,q)&&(C.current=q,xn.flushSync(()=>{h(q)}))})},[m,t,s,R,T]);mc(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h(M=>({...M,isPositioned:!1})))},[d]);const N=f.useRef(!1);mc(()=>(N.current=!0,()=>{N.current=!1}),[]),mc(()=>{if(j&&(_.current=j),S&&(E.current=S),j&&S){if(A.current)return A.current(j,S,D);D()}},[j,S,D,A,O]);const k=f.useMemo(()=>({reference:_,floating:E,setReference:v,setFloating:b}),[v,b]),P=f.useMemo(()=>({reference:j,floating:S}),[j,S]),U=f.useMemo(()=>{const M={position:s,left:0,top:0};if(!P.floating)return M;const F=Yy(P.floating,u.x),q=Yy(P.floating,u.y);return l?{...M,transform:"translate("+F+"px, "+q+"px)",...A2(P.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:F,top:q}},[s,l,P.floating,u.x,u.y]);return f.useMemo(()=>({...u,update:D,refs:k,elements:P,floatingStyles:U}),[u,D,k,P,U])}const R$=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:n,padding:a}=typeof e=="function"?e(s):e;return n&&t(n)?n.current!=null?Ky({element:n.current,padding:a}).fn(s):{}:n?Ky({element:n,padding:a}).fn(s):{}}}},O$=(e,t)=>({...j$(e),options:[e,t]}),D$=(e,t)=>({...N$(e),options:[e,t]}),M$=(e,t)=>({...E$(e),options:[e,t]}),$$=(e,t)=>({...S$(e),options:[e,t]}),L$=(e,t)=>({..._$(e),options:[e,t]}),I$=(e,t)=>({...C$(e),options:[e,t]}),F$=(e,t)=>({...R$(e),options:[e,t]});function V$(e){const[t,s]=f.useState(void 0);return Er(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;s({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else s(void 0)},[e]),t}const R2="Popper",[O2,D2]=sx(R2),[B$,M2]=O2(R2),z$=e=>{const{__scopePopper:t,children:s}=e,[n,a]=f.useState(null);return f.createElement(B$,{scope:t,anchor:n,onAnchorChange:a},s)},U$="PopperAnchor",H$=f.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:n,...a}=e,i=M2(U$,s),o=f.useRef(null),l=ts(t,o);return f.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:f.createElement(Dt.div,De({},a,{ref:l}))}),$2="PopperContent",[q$,NF]=O2($2),W$=f.forwardRef((e,t)=>{var s,n,a,i,o,l,c,d;const{__scopePopper:u,side:h="bottom",sideOffset:m=0,align:g="center",alignOffset:x=0,arrowPadding:y=0,collisionBoundary:w=[],collisionPadding:p=0,sticky:v="partial",hideWhenDetached:b=!1,avoidCollisions:j=!0,onPlaced:S,..._}=e,E=M2($2,u),[C,O]=f.useState(null),A=ts(t,Te=>O(Te)),[R,T]=f.useState(null),D=V$(R),N=(s=D==null?void 0:D.width)!==null&&s!==void 0?s:0,k=(n=D==null?void 0:D.height)!==null&&n!==void 0?n:0,P=h+(g!=="center"?"-"+g:""),U=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},M=Array.isArray(w)?w:[w],F=M.length>0,q={padding:U,boundary:M.filter(G$),altBoundary:F},{refs:L,floatingStyles:J,placement:ne,isPositioned:re,middlewareData:Ne}=A$({strategy:"fixed",placement:P,whileElementsMounted:b$,elements:{reference:E.anchor},middleware:[O$({mainAxis:m+k,alignmentAxis:x}),j&&D$({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?M$():void 0,...q}),j&&$$({...q}),L$({...q,apply:({elements:Te,rects:zt,availableWidth:vn,availableHeight:xi})=>{const{width:e_,height:t_}=zt.reference,ll=Te.floating.style;ll.setProperty("--radix-popper-available-width",`${vn}px`),ll.setProperty("--radix-popper-available-height",`${xi}px`),ll.setProperty("--radix-popper-anchor-width",`${e_}px`),ll.setProperty("--radix-popper-anchor-height",`${t_}px`)}}),R&&F$({element:R,padding:y}),K$({arrowWidth:N,arrowHeight:k}),b&&I$({strategy:"referenceHidden"})]}),[pe,le]=L2(ne),Se=Cr(S);Er(()=>{re&&(Se==null||Se())},[re,Se]);const H=(a=Ne.arrow)===null||a===void 0?void 0:a.x,X=(i=Ne.arrow)===null||i===void 0?void 0:i.y,ie=((o=Ne.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[me,Ze]=f.useState();return Er(()=>{C&&Ze(window.getComputedStyle(C).zIndex)},[C]),f.createElement("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:re?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(l=Ne.transformOrigin)===null||l===void 0?void 0:l.x,(c=Ne.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},f.createElement(q$,{scope:u,placedSide:pe,onArrowChange:T,arrowX:H,arrowY:X,shouldHideArrow:ie},f.createElement(Dt.div,De({"data-side":pe,"data-align":le},_,{ref:A,style:{..._.style,animation:re?void 0:"none",opacity:(d=Ne.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function G$(e){return e!==null}const K$=e=>({name:"transformOrigin",options:e,fn(t){var s,n,a,i,o;const{placement:l,rects:c,middlewareData:d}=t,h=((s=d.arrow)===null||s===void 0?void 0:s.centerOffset)!==0,m=h?0:e.arrowWidth,g=h?0:e.arrowHeight,[x,y]=L2(l),w={start:"0%",center:"50%",end:"100%"}[y],p=((n=(a=d.arrow)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0)+m/2,v=((i=(o=d.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+g/2;let b="",j="";return x==="bottom"?(b=h?w:`${p}px`,j=`${-g}px`):x==="top"?(b=h?w:`${p}px`,j=`${c.floating.height+g}px`):x==="right"?(b=`${-g}px`,j=h?w:`${v}px`):x==="left"&&(b=`${c.floating.width+g}px`,j=h?w:`${v}px`),{data:{x:b,y:j}}}});function L2(e){const[t,s="center"]=e.split("-");return[t,s]}const Y$=z$,Q$=H$,J$=W$,X$=f.forwardRef((e,t)=>{var s;const{container:n=globalThis==null||(s=globalThis.document)===null||s===void 0?void 0:s.body,...a}=e;return n?Ab.createPortal(f.createElement(Dt.div,De({},a,{ref:t})),n):null});function Qy({prop:e,defaultProp:t,onChange:s=()=>{}}){const[n,a]=Z$({defaultProp:t,onChange:s}),i=e!==void 0,o=i?e:n,l=Cr(s),c=f.useCallback(d=>{if(i){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else a(d)},[i,e,a,l]);return[o,c]}function Z$({defaultProp:e,onChange:t}){const s=f.useState(e),[n]=s,a=f.useRef(n),i=Cr(t);return f.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),s}function eL(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const tL=f.forwardRef((e,t)=>f.createElement(Dt.span,De({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var sL=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ua=new WeakMap,Bl=new WeakMap,zl={},gh=0,I2=function(e){return e&&(e.host||I2(e.parentNode))},rL=function(e,t){return t.map(function(s){if(e.contains(s))return s;var n=I2(s);return n&&e.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},nL=function(e,t,s,n){var a=rL(t,Array.isArray(e)?e:[e]);zl[s]||(zl[s]=new WeakMap);var i=zl[s],o=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))u(m);else try{var g=m.getAttribute(n),x=g!==null&&g!=="false",y=(ua.get(m)||0)+1,w=(i.get(m)||0)+1;ua.set(m,y),i.set(m,w),o.push(m),y===1&&x&&Bl.set(m,!0),w===1&&m.setAttribute(s,"true"),x||m.setAttribute(n,"true")}catch(p){console.error("aria-hidden: cannot operate on ",m,p)}})};return u(t),l.clear(),gh++,function(){o.forEach(function(h){var m=ua.get(h)-1,g=i.get(h)-1;ua.set(h,m),i.set(h,g),m||(Bl.has(h)||h.removeAttribute(n),Bl.delete(h)),g||h.removeAttribute(s)}),gh--,gh||(ua=new WeakMap,ua=new WeakMap,Bl=new WeakMap,zl={})}},F2=function(e,t,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=t||sL(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),nL(n,a,s,"aria-hidden")):function(){return null}},kt=function(){return kt=Object.assign||function(t){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},kt.apply(this,arguments)};function dx(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s}function V2(e,t,s){if(s||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var oo="right-scroll-bar-position",lo="width-before-scroll-bar",aL="with-scroll-bars-hidden",iL="--removed-body-scroll-bar-size";function yh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function oL(e,t){var s=f.useState(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(n){var a=s.value;a!==n&&(s.value=n,s.callback(n,a))}}}})[0];return s.callback=t,s.facade}var lL=typeof window<"u"?f.useLayoutEffect:f.useEffect,Jy=new WeakMap;function B2(e,t){var s=oL(t||null,function(n){return e.forEach(function(a){return yh(a,n)})});return lL(function(){var n=Jy.get(s);if(n){var a=new Set(n),i=new Set(e),o=s.current;a.forEach(function(l){i.has(l)||yh(l,null)}),i.forEach(function(l){a.has(l)||yh(l,o)})}Jy.set(s,e)},[e]),s}function cL(e){return e}function dL(e,t){t===void 0&&(t=cL);var s=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(i){var o=t(i,n);return s.push(o),function(){s=s.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;s.length;){var o=s;s=[],o.forEach(i)}s={push:function(l){return i(l)},filter:function(){return s}}},assignMedium:function(i){n=!0;var o=[];if(s.length){var l=s;s=[],l.forEach(i),o=s}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),s={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),s}}}};return a}function z2(e){e===void 0&&(e={});var t=dL(null);return t.options=kt({async:!0,ssr:!1},e),t}var U2=function(e){var t=e.sideCar,s=dx(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,kt({},s))};U2.isSideCarExport=!0;function H2(e,t){return e.useMedium(t),U2}var q2=z2(),vh=function(){},Zd=f.forwardRef(function(e,t){var s=f.useRef(null),n=f.useState({onScrollCapture:vh,onWheelCapture:vh,onTouchMoveCapture:vh}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,x=e.inert,y=e.allowPinchZoom,w=e.as,p=w===void 0?"div":w,v=dx(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=m,j=B2([s,t]),S=kt(kt({},v),a);return f.createElement(f.Fragment,null,u&&f.createElement(b,{sideCar:q2,removeScrollBar:d,shards:h,noIsolation:g,inert:x,setCallbacks:i,allowPinchZoom:!!y,lockRef:s}),o?f.cloneElement(f.Children.only(l),kt(kt({},S),{ref:j})):f.createElement(p,kt({},S,{className:c,ref:j}),l))});Zd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zd.classNames={fullWidth:lo,zeroRight:oo};var Xy,uL=function(){if(Xy)return Xy;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hL(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=uL();return t&&e.setAttribute("nonce",t),e}function fL(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function mL(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var pL=function(){var e=0,t=null;return{add:function(s){e==0&&(t=hL())&&(fL(t,s),mL(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xL=function(){var e=pL();return function(t,s){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},ux=function(){var e=xL(),t=function(s){var n=s.styles,a=s.dynamic;return e(n,a),null};return t},gL={left:0,top:0,right:0,gap:0},wh=function(e){return parseInt(e||"",10)||0},yL=function(e){var t=window.getComputedStyle(document.body),s=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[wh(s),wh(n),wh(a)]},vL=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return gL;var t=yL(e),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-s+t[2]-t[0])}},wL=ux(),Ba="data-scroll-locked",bL=function(e,t,s,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(aL,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ba,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(oo,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(lo,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(oo," .").concat(oo,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(lo," .").concat(lo,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ba,`] {
    `).concat(iL,": ").concat(l,`px;
  }
`)},Zy=function(){var e=parseInt(document.body.getAttribute(Ba)||"0",10);return isFinite(e)?e:0},jL=function(){f.useEffect(function(){return document.body.setAttribute(Ba,(Zy()+1).toString()),function(){var e=Zy()-1;e<=0?document.body.removeAttribute(Ba):document.body.setAttribute(Ba,e.toString())}},[])},W2=function(e){var t=e.noRelative,s=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;jL();var i=f.useMemo(function(){return vL(a)},[a]);return f.createElement(wL,{styles:bL(i,!t,a,s?"":"!important")})},fm=!1;if(typeof window<"u")try{var Ul=Object.defineProperty({},"passive",{get:function(){return fm=!0,!0}});window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{fm=!1}var ha=fm?{passive:!1}:!1,NL=function(e){return e.tagName==="TEXTAREA"},G2=function(e,t){var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!NL(e)&&s[t]==="visible")},SL=function(e){return G2(e,"overflowY")},_L=function(e){return G2(e,"overflowX")},ev=function(e,t){var s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var n=K2(e,s);if(n){var a=Y2(e,s),i=a[1],o=a[2];if(i>o)return!0}s=s.parentNode}while(s&&s!==document.body);return!1},CL=function(e){var t=e.scrollTop,s=e.scrollHeight,n=e.clientHeight;return[t,s,n]},EL=function(e){var t=e.scrollLeft,s=e.scrollWidth,n=e.clientWidth;return[t,s,n]},K2=function(e,t){return e==="v"?SL(t):_L(t)},Y2=function(e,t){return e==="v"?CL(t):EL(t)},kL=function(e,t){return e==="h"&&t==="rtl"?-1:1},TL=function(e,t,s,n,a){var i=kL(e,window.getComputedStyle(t).direction),o=i*n,l=s.target,c=t.contains(l),d=!1,u=o>0,h=0,m=0;do{var g=Y2(e,l),x=g[0],y=g[1],w=g[2],p=y-w-i*x;(x||p)&&K2(e,l)&&(h+=p,m+=x),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(a&&h===0||!a&&o>h)||!u&&(a&&m===0||!a&&-o>m))&&(d=!0),d},Hl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tv=function(e){return[e.deltaX,e.deltaY]},sv=function(e){return e&&"current"in e?e.current:e},PL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},AL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},RL=0,fa=[];function OL(e){var t=f.useRef([]),s=f.useRef([0,0]),n=f.useRef(),a=f.useState(RL++)[0],i=f.useState(function(){return ux()})[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var y=V2([e.lockRef.current],(e.shards||[]).map(sv),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(y,w){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var p=Hl(y),v=s.current,b="deltaX"in y?y.deltaX:v[0]-p[0],j="deltaY"in y?y.deltaY:v[1]-p[1],S,_=y.target,E=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in y&&E==="h"&&_.type==="range")return!1;var C=ev(E,_);if(!C)return!0;if(C?S=E:(S=E==="v"?"h":"v",C=ev(E,_)),!C)return!1;if(!n.current&&"changedTouches"in y&&(b||j)&&(n.current=S),!S)return!0;var O=n.current||S;return TL(O,w,y,O==="h"?b:j,!0)},[]),c=f.useCallback(function(y){var w=y;if(!(!fa.length||fa[fa.length-1]!==i)){var p="deltaY"in w?tv(w):Hl(w),v=t.current.filter(function(S){return S.name===w.type&&S.target===w.target&&PL(S.delta,p)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(sv).filter(Boolean).filter(function(S){return S.contains(w.target)}),j=b.length>0?l(w,b[0]):!o.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),d=f.useCallback(function(y,w,p,v){var b={name:y,delta:w,target:p,should:v};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),u=f.useCallback(function(y){s.current=Hl(y),n.current=void 0},[]),h=f.useCallback(function(y){d(y.type,tv(y),y.target,l(y,e.lockRef.current))},[]),m=f.useCallback(function(y){d(y.type,Hl(y),y.target,l(y,e.lockRef.current))},[]);f.useEffect(function(){return fa.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ha),document.addEventListener("touchmove",c,ha),document.addEventListener("touchstart",u,ha),function(){fa=fa.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,ha),document.removeEventListener("touchmove",c,ha),document.removeEventListener("touchstart",u,ha)}},[]);var g=e.removeScrollBar,x=e.inert;return f.createElement(f.Fragment,null,x?f.createElement(i,{styles:AL(a)}):null,g?f.createElement(W2,{gapMode:"margin"}):null)}const DL=H2(q2,OL);var Q2=f.forwardRef(function(e,t){return f.createElement(Zd,kt({},e,{ref:t,sideCar:DL}))});Q2.classNames=Zd.classNames;const ML=Q2,$L=[" ","Enter","ArrowUp","ArrowDown"],LL=[" ","Enter"],eu="Select",[tu,hx,IL]=lM(eu),[pi,SF]=sx(eu,[IL,D2]),fx=D2(),[FL,ia]=pi(eu),[VL,BL]=pi(eu),zL=e=>{const{__scopeSelect:t,children:s,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:m,required:g}=e,x=fx(t),[y,w]=f.useState(null),[p,v]=f.useState(null),[b,j]=f.useState(!1),S=dM(d),[_=!1,E]=Qy({prop:n,defaultProp:a,onChange:i}),[C,O]=Qy({prop:o,defaultProp:l,onChange:c}),A=f.useRef(null),R=y?!!y.closest("form"):!0,[T,D]=f.useState(new Set),N=Array.from(T).map(k=>k.props.value).join(";");return f.createElement(Y$,x,f.createElement(FL,{required:g,scope:t,trigger:y,onTriggerChange:w,valueNode:p,onValueNodeChange:v,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:w2(),value:C,onValueChange:O,open:_,onOpenChange:E,dir:S,triggerPointerDownPosRef:A,disabled:m},f.createElement(tu.Provider,{scope:t},f.createElement(VL,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(k=>{D(P=>new Set(P).add(k))},[]),onNativeOptionRemove:f.useCallback(k=>{D(P=>{const U=new Set(P);return U.delete(k),U})},[])},s)),R?f.createElement(Z2,{key:N,"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:h,value:C,onChange:k=>O(k.target.value),disabled:m},C===void 0?f.createElement("option",{value:""}):null,Array.from(T)):null))},UL="SelectTrigger",HL=f.forwardRef((e,t)=>{const{__scopeSelect:s,disabled:n=!1,...a}=e,i=fx(s),o=ia(UL,s),l=o.disabled||n,c=ts(t,o.onTriggerChange),d=hx(s),[u,h,m]=eS(x=>{const y=d().filter(v=>!v.disabled),w=y.find(v=>v.value===o.value),p=tS(y,x,w);p!==void 0&&o.onValueChange(p.value)}),g=()=>{l||(o.onOpenChange(!0),m())};return f.createElement(Q$,De({asChild:!0},i),f.createElement(Dt.button,De({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":o.value===void 0?"":void 0},a,{ref:c,onClick:Lt(a.onClick,x=>{x.currentTarget.focus()}),onPointerDown:Lt(a.onPointerDown,x=>{const y=x.target;y.hasPointerCapture(x.pointerId)&&y.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&(g(),o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)},x.preventDefault())}),onKeyDown:Lt(a.onKeyDown,x=>{const y=u.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&h(x.key),!(y&&x.key===" ")&&$L.includes(x.key)&&(g(),x.preventDefault())})})))}),qL="SelectValue",WL=f.forwardRef((e,t)=>{const{__scopeSelect:s,className:n,style:a,children:i,placeholder:o,...l}=e,c=ia(qL,s),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=ts(t,c.onValueNodeChange);return Er(()=>{d(u)},[d,u]),f.createElement(Dt.span,De({},l,{ref:h,style:{pointerEvents:"none"}}),c.value===void 0&&o!==void 0?o:i)}),GL=f.forwardRef((e,t)=>{const{__scopeSelect:s,children:n,...a}=e;return f.createElement(Dt.span,De({"aria-hidden":!0},a,{ref:t}),n||"")}),KL=e=>f.createElement(X$,De({asChild:!0},e)),si="SelectContent",YL=f.forwardRef((e,t)=>{const s=ia(si,e.__scopeSelect),[n,a]=f.useState();if(Er(()=>{a(new DocumentFragment)},[]),!s.open){const i=n;return i?xn.createPortal(f.createElement(J2,{scope:e.__scopeSelect},f.createElement(tu.Slot,{scope:e.__scopeSelect},f.createElement("div",null,e.children))),i):null}return f.createElement(QL,De({},e,{ref:t}))}),lr=10,[J2,su]=pi(si),QL=f.forwardRef((e,t)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:y,avoidCollisions:w,...p}=e,v=ia(si,s),[b,j]=f.useState(null),[S,_]=f.useState(null),E=ts(t,le=>j(le)),[C,O]=f.useState(null),[A,R]=f.useState(null),T=hx(s),[D,N]=f.useState(!1),k=f.useRef(!1);f.useEffect(()=>{if(b)return F2(b)},[b]),wM();const P=f.useCallback(le=>{const[Se,...H]=T().map(me=>me.ref.current),[X]=H.slice(-1),ie=document.activeElement;for(const me of le)if(me===ie||(me==null||me.scrollIntoView({block:"nearest"}),me===Se&&S&&(S.scrollTop=0),me===X&&S&&(S.scrollTop=S.scrollHeight),me==null||me.focus(),document.activeElement!==ie))return},[T,S]),U=f.useCallback(()=>P([C,b]),[P,C,b]);f.useEffect(()=>{D&&U()},[D,U]);const{onOpenChange:M,triggerPointerDownPosRef:F}=v;f.useEffect(()=>{if(b){let le={x:0,y:0};const Se=X=>{var ie,me,Ze,Te;le={x:Math.abs(Math.round(X.pageX)-((ie=(me=F.current)===null||me===void 0?void 0:me.x)!==null&&ie!==void 0?ie:0)),y:Math.abs(Math.round(X.pageY)-((Ze=(Te=F.current)===null||Te===void 0?void 0:Te.y)!==null&&Ze!==void 0?Ze:0))}},H=X=>{le.x<=10&&le.y<=10?X.preventDefault():b.contains(X.target)||M(!1),document.removeEventListener("pointermove",Se),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",H,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",H,{capture:!0})}}},[b,M,F]),f.useEffect(()=>{const le=()=>M(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[M]);const[q,L]=eS(le=>{const Se=T().filter(ie=>!ie.disabled),H=Se.find(ie=>ie.ref.current===document.activeElement),X=tS(Se,le,H);X&&setTimeout(()=>X.ref.current.focus())}),J=f.useCallback((le,Se,H)=>{const X=!k.current&&!H;(v.value!==void 0&&v.value===Se||X)&&(O(le),X&&(k.current=!0))},[v.value]),ne=f.useCallback(()=>b==null?void 0:b.focus(),[b]),re=f.useCallback((le,Se,H)=>{const X=!k.current&&!H;(v.value!==void 0&&v.value===Se||X)&&R(le)},[v.value]),Ne=n==="popper"?rv:JL,pe=Ne===rv?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:y,avoidCollisions:w}:{};return f.createElement(J2,{scope:s,content:b,viewport:S,onViewportChange:_,itemRefCallback:J,selectedItem:C,onItemLeave:ne,itemTextRefCallback:re,focusSelectedItem:U,selectedItemText:A,position:n,isPositioned:D,searchRef:q},f.createElement(ML,{as:Fo,allowPinchZoom:!0},f.createElement(bM,{asChild:!0,trapped:v.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:Lt(a,le=>{var Se;(Se=v.trigger)===null||Se===void 0||Se.focus({preventScroll:!0}),le.preventDefault()})},f.createElement(gM,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>v.onOpenChange(!1)},f.createElement(Ne,De({role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:le=>le.preventDefault()},p,pe,{onPlaced:()=>N(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...p.style},onKeyDown:Lt(p.onKeyDown,le=>{const Se=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!Se&&le.key.length===1&&L(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let X=T().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(le.key)&&(X=X.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const ie=le.target,me=X.indexOf(ie);X=X.slice(me+1)}setTimeout(()=>P(X)),le.preventDefault()}})}))))))}),JL=f.forwardRef((e,t)=>{const{__scopeSelect:s,onPlaced:n,...a}=e,i=ia(si,s),o=su(si,s),[l,c]=f.useState(null),[d,u]=f.useState(null),h=ts(t,E=>u(E)),m=hx(s),g=f.useRef(!1),x=f.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:p,focusSelectedItem:v}=o,b=f.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&y&&w&&p){const E=i.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),O=i.valueNode.getBoundingClientRect(),A=p.getBoundingClientRect();if(i.dir!=="rtl"){const ie=A.left-C.left,me=O.left-ie,Ze=E.left-me,Te=E.width+Ze,zt=Math.max(Te,C.width),vn=window.innerWidth-lr,xi=Ry(me,[lr,vn-zt]);l.style.minWidth=Te+"px",l.style.left=xi+"px"}else{const ie=C.right-A.right,me=window.innerWidth-O.right-ie,Ze=window.innerWidth-E.right-me,Te=E.width+Ze,zt=Math.max(Te,C.width),vn=window.innerWidth-lr,xi=Ry(me,[lr,vn-zt]);l.style.minWidth=Te+"px",l.style.right=xi+"px"}const R=m(),T=window.innerHeight-lr*2,D=y.scrollHeight,N=window.getComputedStyle(d),k=parseInt(N.borderTopWidth,10),P=parseInt(N.paddingTop,10),U=parseInt(N.borderBottomWidth,10),M=parseInt(N.paddingBottom,10),F=k+P+D+M+U,q=Math.min(w.offsetHeight*5,F),L=window.getComputedStyle(y),J=parseInt(L.paddingTop,10),ne=parseInt(L.paddingBottom,10),re=E.top+E.height/2-lr,Ne=T-re,pe=w.offsetHeight/2,le=w.offsetTop+pe,Se=k+P+le,H=F-Se;if(Se<=re){const ie=w===R[R.length-1].ref.current;l.style.bottom="0px";const me=d.clientHeight-y.offsetTop-y.offsetHeight,Ze=Math.max(Ne,pe+(ie?ne:0)+me+U),Te=Se+Ze;l.style.height=Te+"px"}else{const ie=w===R[0].ref.current;l.style.top="0px";const Ze=Math.max(re,k+y.offsetTop+(ie?J:0)+pe)+H;l.style.height=Ze+"px",y.scrollTop=Se-re+y.offsetTop}l.style.margin=`${lr}px 0`,l.style.minHeight=q+"px",l.style.maxHeight=T+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,l,d,y,w,p,i.dir,n]);Er(()=>b(),[b]);const[j,S]=f.useState();Er(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const _=f.useCallback(E=>{E&&x.current===!0&&(b(),v==null||v(),x.current=!1)},[b,v]);return f.createElement(XL,{scope:s,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:_},f.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},f.createElement(Dt.div,De({},a,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}}))))}),rv=f.forwardRef((e,t)=>{const{__scopeSelect:s,align:n="start",collisionPadding:a=lr,...i}=e,o=fx(s);return f.createElement(J$,De({},o,i,{ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[XL,ZL]=pi(si,{}),nv="SelectViewport",eI=f.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,a=su(nv,s),i=ZL(nv,s),o=ts(t,a.onViewportChange),l=f.useRef(0);return f.createElement(f.Fragment,null,f.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),f.createElement(tu.Slot,{scope:s},f.createElement(Dt.div,De({"data-radix-select-viewport":"",role:"presentation"},n,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:Lt(n.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&u){const m=Math.abs(l.current-d.scrollTop);if(m>0){const g=window.innerHeight-lr*2,x=parseFloat(u.style.minHeight),y=parseFloat(u.style.height),w=Math.max(x,y);if(w<g){const p=w+m,v=Math.min(g,p),b=p-v;u.style.height=v+"px",u.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})}))))}),tI="SelectGroup",[_F,sI]=pi(tI),rI="SelectLabel",nI=f.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,a=sI(rI,s);return f.createElement(Dt.div,De({id:a.id},n,{ref:t}))}),mm="SelectItem",[aI,X2]=pi(mm),iI=f.forwardRef((e,t)=>{const{__scopeSelect:s,value:n,disabled:a=!1,textValue:i,...o}=e,l=ia(mm,s),c=su(mm,s),d=l.value===n,[u,h]=f.useState(i??""),[m,g]=f.useState(!1),x=ts(t,p=>{var v;return(v=c.itemRefCallback)===null||v===void 0?void 0:v.call(c,p,n,a)}),y=w2(),w=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};return f.createElement(aI,{scope:s,value:n,disabled:a,textId:y,isSelected:d,onItemTextChange:f.useCallback(p=>{h(v=>{var b;return v||((b=p==null?void 0:p.textContent)!==null&&b!==void 0?b:"").trim()})},[])},f.createElement(tu.ItemSlot,{scope:s,value:n,disabled:a,textValue:u},f.createElement(Dt.div,De({role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1},o,{ref:x,onFocus:Lt(o.onFocus,()=>g(!0)),onBlur:Lt(o.onBlur,()=>g(!1)),onPointerUp:Lt(o.onPointerUp,w),onPointerMove:Lt(o.onPointerMove,p=>{if(a){var v;(v=c.onItemLeave)===null||v===void 0||v.call(c)}else p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Lt(o.onPointerLeave,p=>{if(p.currentTarget===document.activeElement){var v;(v=c.onItemLeave)===null||v===void 0||v.call(c)}}),onKeyDown:Lt(o.onKeyDown,p=>{var v;((v=c.searchRef)===null||v===void 0?void 0:v.current)!==""&&p.key===" "||(LL.includes(p.key)&&w(),p.key===" "&&p.preventDefault())})}))))}),ql="SelectItemText",oI=f.forwardRef((e,t)=>{const{__scopeSelect:s,className:n,style:a,...i}=e,o=ia(ql,s),l=su(ql,s),c=X2(ql,s),d=BL(ql,s),[u,h]=f.useState(null),m=ts(t,p=>h(p),c.onItemTextChange,p=>{var v;return(v=l.itemTextRefCallback)===null||v===void 0?void 0:v.call(l,p,c.value,c.disabled)}),g=u==null?void 0:u.textContent,x=f.useMemo(()=>f.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},g),[c.disabled,c.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=d;return Er(()=>(y(x),()=>w(x)),[y,w,x]),f.createElement(f.Fragment,null,f.createElement(Dt.span,De({id:c.textId},i,{ref:m})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?xn.createPortal(i.children,o.valueNode):null)}),lI="SelectItemIndicator",cI=f.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e;return X2(lI,s).isSelected?f.createElement(Dt.span,De({"aria-hidden":!0},n,{ref:t})):null}),dI=f.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e;return f.createElement(Dt.div,De({"aria-hidden":!0},n,{ref:t}))}),Z2=f.forwardRef((e,t)=>{const{value:s,...n}=e,a=f.useRef(null),i=ts(t,a),o=eL(s);return f.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==s&&u){const h=new Event("change",{bubbles:!0});u.call(l,s),l.dispatchEvent(h)}},[o,s]),f.createElement(tL,{asChild:!0},f.createElement("select",De({},n,{ref:i,defaultValue:s})))});Z2.displayName="BubbleSelect";function eS(e){const t=Cr(e),s=f.useRef(""),n=f.useRef(0),a=f.useCallback(o=>{const l=s.current+o;t(l),function c(d){s.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=f.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,a,i]}function tS(e,t,s){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=s?e.indexOf(s):-1;let o=uI(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}function uI(e,t){return e.map((s,n)=>e[(t+n)%e.length])}const hI=zL,sS=HL,fI=WL,mI=GL,pI=KL,rS=YL,xI=eI,nS=nI,aS=iI,gI=oI,yI=cI,iS=dI,be=hI,je=te.forwardRef(({className:e,...t},s)=>r.jsx(fI,{ref:s,className:ue("",e),...t})),ge=te.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(sS,{ref:n,className:ue("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-slate-700/50 dark:border-slate-600",e),...s,children:[t,r.jsx(mI,{asChild:!0,children:r.jsx(bp,{className:"h-4 w-4 opacity-50 text-gray-400"})})]}));ge.displayName=sS.displayName;const ye=te.forwardRef(({className:e,children:t,position:s="popper",...n},a)=>r.jsx(pI,{children:r.jsx(rS,{ref:a,className:ue("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","dark:bg-slate-800 dark:border-slate-700 dark:text-gray-200",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:r.jsx(xI,{className:ue("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));ye.displayName=rS.displayName;const vI=te.forwardRef(({className:e,...t},s)=>r.jsx(nS,{ref:s,className:ue("py-1.5 pl-8 pr-2 text-sm font-semibold text-gray-400",e),...t}));vI.displayName=nS.displayName;const Z=te.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(aS,{ref:n,className:ue("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50","dark:focus:bg-slate-700 dark:focus:text-sky-300",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(yI,{children:r.jsx(ST,{className:"h-4 w-4 text-sky-400"})})}),r.jsx(gI,{children:t})]}));Z.displayName=aS.displayName;const wI=te.forwardRef(({className:e,...t},s)=>r.jsx(iS,{ref:s,className:ue("-mx-1 my-1 h-px bg-muted",e),...t}));wI.displayName=iS.displayName;const mt=te.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:ue("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-slate-700/50 dark:border-slate-600 dark:text-gray-200 dark:placeholder:text-slate-400",e),ref:s,...t}));mt.displayName="Textarea";const bI=({assessment:e=null,onClose:t,onSave:s})=>{const[n,a]=f.useState({title:"",client_name:"",location:"",assessment_type:"New Site",status:"Scheduled",priority:"Medium",scheduled_date:"",assigned_to:"",description:"",risk_level:"Medium",estimated_duration_hours:4}),[i,o]=f.useState(!1),{toast:l}=ce();f.useEffect(()=>{e&&a({title:e.title||"",client_name:e.client_name||"",location:e.location||"",assessment_type:e.assessment_type||"New Site",status:e.status||"Scheduled",priority:e.priority||"Medium",scheduled_date:e.scheduled_date||"",assigned_to:e.assigned_to||"",description:e.description||"",risk_level:e.risk_level||"Medium",estimated_duration_hours:e.estimated_duration_hours||4})},[e]);const c=(u,h)=>{a(m=>({...m,[u]:h}))},d=async u=>{if(u.preventDefault(),!n.title||!n.client_name||!n.location||!n.scheduled_date){l({title:"Missing required fields",description:"Please fill in all required fields",variant:"destructive"});return}try{if(o(!0),e){const h=await rd.updateAssessment(e.id,n);l({title:"Assessment updated",description:"Assessment has been successfully updated"}),s(h)}else{const h=await rd.createAssessment(n);l({title:"Assessment created",description:"New assessment has been successfully created"}),s(h)}t()}catch(h){console.error("Error saving assessment:",h),l({title:"Error saving assessment",description:"Failed to save assessment. Please try again.",variant:"destructive"})}finally{o(!1)}};return r.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:t,children:r.jsx(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:u=>u.stopPropagation(),children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{className:"flex flex-row items-center justify-between",children:[r.jsx(G,{className:"text-white",children:e?"Edit Assessment":"Create New Assessment"}),r.jsx(I,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Bt,{className:"w-4 h-4"})})]}),r.jsx(V,{children:r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"title",className:"text-white",children:"Assessment Title *"}),r.jsx(ee,{id:"title",value:n.title,onChange:u=>c("title",u.target.value),placeholder:"Enter assessment title",className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"client_name",className:"text-white",children:"Client Name *"}),r.jsx(ee,{id:"client_name",value:n.client_name,onChange:u=>c("client_name",u.target.value),placeholder:"Enter client name",className:"bg-slate-700/50 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"location",className:"text-white",children:"Location *"}),r.jsx(ee,{id:"location",value:n.location,onChange:u=>c("location",u.target.value),placeholder:"Enter location",className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"assessment_type",className:"text-white",children:"Assessment Type"}),r.jsxs(be,{value:n.assessment_type,onValueChange:u=>c("assessment_type",u),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsxs(ye,{children:[r.jsx(Z,{value:"New Site",children:"New Site"}),r.jsx(Z,{value:"Existing Site",children:"Existing Site"}),r.jsx(Z,{value:"Security Review",children:"Security Review"}),r.jsx(Z,{value:"Risk Assessment",children:"Risk Assessment"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"priority",className:"text-white",children:"Priority"}),r.jsxs(be,{value:n.priority,onValueChange:u=>c("priority",u),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsxs(ye,{children:[r.jsx(Z,{value:"Low",children:"Low"}),r.jsx(Z,{value:"Medium",children:"Medium"}),r.jsx(Z,{value:"High",children:"High"}),r.jsx(Z,{value:"Critical",children:"Critical"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(be,{value:n.status,onValueChange:u=>c("status",u),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsxs(ye,{children:[r.jsx(Z,{value:"Scheduled",children:"Scheduled"}),r.jsx(Z,{value:"In Progress",children:"In Progress"}),r.jsx(Z,{value:"Completed",children:"Completed"}),r.jsx(Z,{value:"Cancelled",children:"Cancelled"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"scheduled_date",className:"text-white",children:"Scheduled Date *"}),r.jsx(ee,{id:"scheduled_date",type:"date",value:n.scheduled_date,onChange:u=>c("scheduled_date",u.target.value),className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"assigned_to",className:"text-white",children:"Assigned To"}),r.jsx(ee,{id:"assigned_to",value:n.assigned_to,onChange:u=>c("assigned_to",u.target.value),placeholder:"Enter assignee name",className:"bg-slate-700/50 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"description",className:"text-white",children:"Description"}),r.jsx(mt,{id:"description",value:n.description,onChange:u=>c("description",u.target.value),placeholder:"Enter assessment description",className:"bg-slate-700/50 border-slate-600 text-white",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"risk_level",className:"text-white",children:"Risk Level"}),r.jsxs(be,{value:n.risk_level,onValueChange:u=>c("risk_level",u),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsxs(ye,{children:[r.jsx(Z,{value:"Low",children:"Low"}),r.jsx(Z,{value:"Medium",children:"Medium"}),r.jsx(Z,{value:"High",children:"High"}),r.jsx(Z,{value:"Critical",children:"Critical"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"estimated_duration_hours",className:"text-white",children:"Estimated Duration (hours)"}),r.jsx(ee,{id:"estimated_duration_hours",type:"number",min:"1",value:n.estimated_duration_hours,onChange:u=>c("estimated_duration_hours",parseInt(u.target.value)||0),className:"bg-slate-700/50 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(I,{type:"button",variant:"outline",onClick:t,className:"ios-button border-slate-600 hover:bg-slate-700",children:"Cancel"}),r.jsx(I,{type:"submit",disabled:i,className:"ios-button bg-blue-600 hover:bg-blue-700",children:i?r.jsxs(r.Fragment,{children:[r.jsx(ft,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ss,{className:"w-4 h-4 mr-2"}),e?"Update Assessment":"Create Assessment"]})})]})]})})]})})})},jI=()=>{const[e,t]=f.useState(""),[s,n]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState(!0),[u,h]=f.useState(!1),[m,g]=f.useState(null),{toast:x}=ce(),y=["Physical Security Guards","Access Control Systems","CCTV Surveillance","Alarm Systems & Monitoring","Perimeter Security Solutions","Mobile Patrol Services","Emergency Response Planning","Risk Assessment & Consulting","Executive Protection","Event Security Management","Cybersecurity Assessment (Basic)","Loss Prevention Services"],w=()=>{g(null),h(!0)},p=_=>{g(_),h(!0)},v=_=>{n(m?E=>E.map(C=>C.id===_.id?_:C):E=>[_,...E])};f.useEffect(()=>{(async()=>{try{l(!0);const E=await rd.getAssessments({search:e});n(E)}catch(E){console.error("Error loading assessments:",E),x({title:"Error loading assessments",description:"Failed to load assessments from database",variant:"destructive"})}finally{l(!1)}})()},[e,x]),f.useEffect(()=>{(async()=>{try{d(!0);const E=await rd.getAssessmentTemplates();i(E)}catch(E){console.error("Error loading templates:",E),x({title:"Error loading templates",description:"Failed to load assessment templates from database",variant:"destructive"})}finally{d(!1)}})()},[x]);const b="bg-transparent p-0 space-x-1",j="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",S="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Fu,{className:"w-8 h-8 mr-3 text-blue-400"}),"Security Assessments"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Evaluate, plan, and manage security solutions for clients."})]}),r.jsxs(I,{onClick:w,className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"New Assessment"]})]}),r.jsxs(Ot,{defaultValue:"assessments",className:"space-y-6",children:[r.jsxs(bt,{className:`${b} border-b border-slate-700`,children:[r.jsx(ae,{value:"assessments",className:`${j} ${S}`,children:"Active Assessments"}),r.jsx(ae,{value:"templates",className:`${j} ${S}`,children:"Assessment Templates"}),r.jsx(ae,{value:"services",className:`${j} ${S}`,children:"Service Checklist"})]}),r.jsx(oe,{value:"assessments",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Fu,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Assessment Overview"})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search assessments...",value:e,onChange:_=>t(_.target.value),className:"pl-10 w-full sm:w-80 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]})}),r.jsx(V,{children:o?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ft,{className:"w-6 h-6 animate-spin text-blue-400"}),r.jsx("span",{className:"ml-2 text-gray-400",children:"Loading assessments..."})]}):s.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Fu,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"No assessments found"}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create your first assessment to get started"})]}):r.jsx("div",{className:"space-y-4",children:s.map(_=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_.assessment_type==="New Site"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:_.assessment_type}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_.priority==="High"?"bg-red-500/20 text-red-400":_.priority==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:[_.priority," Priority"]})]}),r.jsx("h3",{className:"text-white font-semibold text-lg",children:_.client_name}),r.jsxs("div",{className:"flex items-center space-x-3 mt-1 text-sm text-gray-400",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(gt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:_.location})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ls,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:_.scheduled_date})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center space-x-1.5",children:[_.status==="Completed"?r.jsx(ze,{className:"w-4 h-4 text-green-400"}):_.status==="In Progress"?r.jsx(nt,{className:"w-4 h-4 text-yellow-400 animate-pulse"}):r.jsx(Ls,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm text-gray-300",children:_.status})]}),r.jsx(I,{variant:"outline",size:"sm",onClick:()=>p(_),className:"ios-button border-slate-600 hover:bg-slate-700",children:"Edit"})]})]})},_.id))})})]})}),r.jsx(oe,{value:"templates",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ke,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Assessment Templates"})]}),r.jsx(he,{className:"text-gray-400",children:"Standardized templates for various assessment types."})]}),r.jsx(V,{children:c?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ft,{className:"w-6 h-6 animate-spin text-purple-400"}),r.jsx("span",{className:"ml-2 text-gray-400",children:"Loading templates..."})]}):a.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ke,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"No templates found"}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Assessment templates will appear here"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map((_,E)=>r.jsxs(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:E*.05},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer flex items-start space-x-4",onClick:()=>x({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),children:[r.jsx(ke,{className:"w-8 h-8 text-purple-400 mt-1 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-medium mb-1",children:_.title}),r.jsx("p",{className:"text-gray-400 text-sm",children:_.description}),r.jsx("span",{className:"text-xs text-purple-400 mt-1",children:_.template_type})]})]},_.id))})})]})}),r.jsx(oe,{value:"services",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Rj,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Available Security Services Checklist"})]}),r.jsx(he,{className:"text-gray-400",children:"Standard list of services offered for assessments."})]}),r.jsx(V,{children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:y.map((_,E)=>r.jsxs(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:E*.03},className:"flex items-center space-x-2 p-3 rounded-md bg-slate-800/40 border border-slate-700",children:[r.jsx(ze,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-white text-sm",children:_})]},_))})})]})})]}),u&&r.jsx(bI,{assessment:m,onClose:()=>{h(!1),g(null)},onSave:v})]})},mx=async()=>{try{const{data:e,error:t}=await $.from("clients").select("*").eq("status","Active").order("name");if(t)throw t;return{data:e,error:null}}catch(e){return console.error("Error fetching clients:",e),{data:null,error:e}}},oS=async e=>{try{const{data:t,error:s}=await $.from("clients").insert([e]).select().single();if(s)throw s;return{data:t,error:null}}catch(t){return console.error("Error creating client:",t),{data:null,error:t}}},NI=({isEditing:e,currentSite:t,clients:s,allSitesForParent:n,onSuccess:a,onCancel:i})=>{const{toast:o}=ce(),[l,c]=f.useState(!1),[d,u]=f.useState([]),[h,m]=f.useState(!0),[g,x]=f.useState(!1),[y,w]=f.useState(""),[p,v]=f.useState({name:"",type:"",parent_id:null,client_id:null,address:"{}",gps_coordinates:"{}"});f.useEffect(()=>{(async()=>{try{const{data:R,error:T}=await mx();if(T)throw T;u(R||[])}catch(R){console.error("Error loading clients:",R),o({title:"Error",description:"Failed to load clients.",variant:"destructive"})}finally{m(!1)}})()},[o]),f.useEffect(()=>{v(e&&t?{name:t.name||"",type:t.type||"",parent_id:t.parent_id?t.parent_id.toString():null,client_id:t.client_id||null,address:t.address?JSON.stringify(t.address,null,2):"{}",gps_coordinates:t.gps_coordinates?JSON.stringify(t.gps_coordinates,null,2):"{}"}:{name:"",type:"",parent_id:null,client_id:null,address:"{}",gps_coordinates:"{}"})},[e,t]);const b=A=>{const{name:R,value:T}=A.target;v(D=>({...D,[R]:T}))},j=(A,R)=>{v(T=>({...T,[A]:R==="none"?null:A==="parent_id"?parseInt(R):R}))},S=A=>{A==="add_new"?(x(!0),w("")):(x(!1),v(R=>({...R,client_id:A==="none"?null:parseInt(A)})))},_=async()=>{if(y.trim())try{const{data:A,error:R}=await oS({name:y.trim(),contact_person:"",email:"",phone:"",industry:"General",status:"Active",address:{street:"",city:"",state:"",zip:""}});if(R)throw R;u(T=>[...T,A]),v(T=>({...T,client_id:A.id})),x(!1),w(""),o({title:"Client Created",description:`${y.trim()} has been added successfully.`,variant:"default"})}catch(A){console.error("Error creating client:",A),o({title:"Error",description:"Failed to create client. Please try again.",variant:"destructive"})}},E=(A,R)=>{try{return JSON.parse(A),!0}catch{return o({variant:"destructive",title:`Invalid JSON in ${R}`,description:"Please provide valid JSON data."}),!1}},C=async A=>{if(A.preventDefault(),!E(p.address,"Address")||!E(p.gps_coordinates,"GPS Coordinates"))return;const R={...p,address:JSON.parse(p.address),gps_coordinates:JSON.parse(p.gps_coordinates),parent_id:p.parent_id===""||p.parent_id==="none"?null:p.parent_id,client_id:p.client_id===""||p.client_id==="none"?null:p.client_id};c(!0);try{let T;if(e&&t){const{error:D}=await $.from("sites").update(R).eq("id",t.id);T=D}else{const{error:D}=await $.from("sites").insert([R]);T=D}if(T)throw T;o({title:`Entity ${e?"updated":"created"} successfully`}),a()}catch(T){o({variant:"destructive",title:`Error ${e?"updating":"creating"} entity`,description:T.message})}finally{c(!1)}},O=f.useMemo(()=>p.type?n.filter(A=>!t||A.id!==t.id):n,[n,p.type,t]);return console.log("EntityForm Debug:",{isEditing:e,currentSite:t,formData:p,parentCandidates:O.length,allSitesForParent:n.length,parentIdType:typeof p.parent_id,parentIdValue:p.parent_id}),r.jsx(z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(G,{className:"text-xl text-white",children:e?"Edit Entity":"Create New Entity"}),r.jsx(I,{variant:"ghost",size:"icon",onClick:i,className:"text-slate-400 hover:text-white",children:r.jsx(vp,{className:"w-5 h-5"})})]}),r.jsx(he,{className:"text-gray-400",children:e?`Updating details for ${(t==null?void 0:t.name)||"entity"}.`:"Fill in the details below."})]}),r.jsx(V,{children:r.jsxs("form",{onSubmit:C,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"name",className:"text-gray-300",children:"Name"}),r.jsx(ee,{id:"name",name:"name",value:p.name,onChange:b,required:!0,className:Hs})]}),r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"type",className:"text-gray-300",children:"Type"}),r.jsxs(be,{name:"type",value:p.type,onValueChange:A=>j("type",A),required:!0,children:[r.jsx(ge,{className:Hs,children:r.jsx(je,{placeholder:"Select type..."})}),r.jsx(ye,{children:mS.map(A=>r.jsx(Z,{value:A,children:A.charAt(0).toUpperCase()+A.slice(1).replace("_"," ")},A))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"parent_id",className:"text-gray-300",children:"Parent Entity (Optional)"}),r.jsxs(be,{name:"parent_id",value:p.parent_id?p.parent_id.toString():"none",onValueChange:A=>j("parent_id",A),children:[r.jsx(ge,{className:Hs,children:r.jsx(je,{placeholder:"Select parent..."})}),r.jsxs(ye,{children:[r.jsx(Z,{value:"none",children:"None"}),O.map(A=>r.jsxs(Z,{value:A.id.toString(),children:[A.name," (",A.type,")"]},A.id))]})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Any entity can be a parent of any other entity type."})]}),r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"client_id",className:"text-gray-300",children:"Client (Optional)"}),g?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:y,onChange:A=>w(A.target.value),placeholder:"Enter new client name",className:Hs,onKeyPress:A=>{A.key==="Enter"&&(A.preventDefault(),_())}}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(I,{type:"button",size:"sm",onClick:_,className:"bg-green-600 hover:bg-green-700 text-xs",children:"Add Client"}),r.jsx(I,{type:"button",size:"sm",variant:"outline",onClick:()=>{x(!1),w("")},className:"border-slate-600 text-slate-300 hover:bg-slate-700 text-xs",children:"Cancel"})]})]}):r.jsxs(be,{name:"client_id",value:p.client_id?p.client_id.toString():"none",onValueChange:S,disabled:h,children:[r.jsx(ge,{className:Hs,children:r.jsx(je,{placeholder:h?"Loading clients...":"Select a client or add new..."})}),r.jsxs(ye,{children:[r.jsx(Z,{value:"none",children:"None"}),h?r.jsx(Z,{value:"",disabled:!0,children:"Loading clients..."}):r.jsxs(r.Fragment,{children:[d.map(A=>r.jsxs(Z,{value:A.id.toString(),children:[A.name," - ",A.industry]},A.id)),r.jsx(Z,{value:"add_new",className:"text-blue-400 font-medium",children:"+ Add New Client"})]})]})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Assign this entity to a specific client or create a new one."})]})]}),r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"address",className:"text-gray-300",children:"Address (JSON format)"}),r.jsx(mt,{id:"address",name:"address",value:p.address,onChange:b,rows:4,className:`${Hs} font-mono`,placeholder:'{ "street": "123 Main St", "city": "Anytown", "zip": "12345" }'})]}),r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"gps_coordinates",className:"text-gray-300",children:"GPS Coordinates (JSON format)"}),r.jsx(mt,{id:"gps_coordinates",name:"gps_coordinates",value:p.gps_coordinates,onChange:b,rows:3,className:`${Hs} font-mono`,placeholder:'{ "latitude": 34.0522, "longitude": -118.2437 }'})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(I,{type:"button",variant:"outline",onClick:i,className:"text-gray-300 border-gray-600 hover:bg-slate-700",children:"Cancel"}),r.jsxs(I,{type:"submit",className:`${Uo}`,disabled:l,children:[r.jsx(Ss,{className:"w-4 h-4 mr-2"}),l?e?"Saving...":"Creating...":e?"Save Changes":"Create Entity"]})]})]})})]})})},px=te.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:ue("w-full caption-bottom text-sm",e),...t})}));px.displayName="Table";const xx=te.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:ue("[&_tr]:border-b-0",e),...t}));xx.displayName="TableHeader";const gx=te.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:ue("[&_tr:last-child]:border-0",e),...t}));gx.displayName="TableBody";const SI=te.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:ue("bg-primary font-medium text-primary-foreground",e),...t}));SI.displayName="TableFooter";const zo=te.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:ue("border-b border-slate-700/50 transition-colors hover:bg-slate-800/50 data-[state=selected]:bg-muted",e),...t}));zo.displayName="TableRow";const ps=te.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:ue("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0","text-slate-400 uppercase tracking-wider text-xs",e),...t}));ps.displayName="TableHead";const xs=te.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:ue("p-4 align-middle text-slate-300 [&:has([role=checkbox])]:pr-0",e),...t}));xs.displayName="TableCell";const _I=te.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:ue("mt-4 text-sm text-muted-foreground",e),...t}));_I.displayName="TableCaption";const CI=({sites:e,loading:t,onEdit:s,onDelete:n})=>(console.log("EntityTable received sites:",e),t?r.jsx(V,{children:r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Loading entities..."})}):!e||e.length===0?r.jsx(V,{children:r.jsx("p",{className:"text-center text-gray-400 py-4",children:'No entities found. Click "Add New Entity" to get started.'})}):r.jsx(V,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(px,{children:[r.jsx(xx,{className:"ios-table-header",children:r.jsxs(zo,{children:[r.jsx(ps,{children:"Name"}),r.jsx(ps,{children:"Type"}),r.jsx(ps,{children:"Parent"}),r.jsx(ps,{children:"Client"}),r.jsx(ps,{className:"text-right",children:"Actions"})]})}),r.jsx(gx,{className:"dark-table-row-hover",children:e.map(a=>(e.indexOf(a)<3&&console.log("Site in table:",a),r.jsxs(zo,{children:[r.jsx(xs,{className:"font-medium text-white",children:a.name||"N/A"}),r.jsx(xs,{children:a.type?a.type.charAt(0).toUpperCase()+a.type.slice(1).replace("_"," "):"N/A"}),r.jsx(xs,{children:a.parent_name||"N/A"}),r.jsx(xs,{children:a.client_name||"N/A"}),r.jsxs(xs,{className:"text-right space-x-1 md:space-x-2",children:[r.jsx(I,{variant:"ghost",size:"icon",onClick:()=>s(a),className:`hover:bg-blue-500/20 text-blue-400 ${Uo} p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8`,children:r.jsx(Ns,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),r.jsx(I,{variant:"ghost",size:"icon",onClick:()=>n(a.id),className:`hover:bg-red-500/20 text-red-400 ${Uo} p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8`,children:r.jsx(kn,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]})]},a.id)))})]})})})),EI=Rd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ve({className:e,variant:t,...s}){return r.jsx("div",{className:ue(EI({variant:t}),e),...s})}const lS={Employee:{description:"General employee with basic responsibilities",requirements:["Basic Training","Background Check","Company Policies"],icon:"Shield"},"Site EHS Representative":{description:"Environmental, Health & Safety representative for specific sites",requirements:["EHS Certification","Safety Training","Incident Response","Regulatory Knowledge"],icon:"AlertTriangle"},"Site Manager":{description:"Manager responsible for day-to-day operations at specific sites",requirements:["Management Experience","Leadership Training","Site-Specific Knowledge","Team Management"],icon:"Building2"},"Regional Manager":{description:"Manager overseeing multiple sites within a region",requirements:["Regional Management Experience","Strategic Planning","Multi-Site Coordination","Advanced Leadership"],icon:"MapPin"},Executive:{description:"Senior executive with strategic and organizational responsibilities",requirements:["Executive Experience","Strategic Vision","Organizational Leadership","Industry Expertise"],icon:"Crown"},"Standard Officer":{description:"Basic security personnel for routine operations",requirements:["Basic Security Training","Background Check","Physical Fitness"],icon:"Shield"},"Dual-Role Hybrid":{description:"Officers with multiple specializations and responsibilities",requirements:["Multiple Certifications","Cross-Training","Advanced Background Check"],icon:"Users"},Supervisor:{description:"Team leaders and site supervisors",requirements:["Leadership Training","Management Certification","Experience"],icon:"Star"},"Operations Management":{description:"Regional and operational managers",requirements:["Management Degree","Extensive Experience","Strategic Planning"],icon:"Briefcase"},Consultant:{description:"Specialized security consultants and advisors",requirements:["Expert Certification","Industry Experience","Consulting Skills"],icon:"GraduationCap"}},kI=async e=>{var t,s;try{const n={name:((t=e.name)==null?void 0:t.trim())||"",role:((s=e.role)==null?void 0:s.trim())||"",type:e.type||"Standard Officer",site:e.site||"Unassigned",status:e.status||"Active",compliance:e.compliance||100,certifications:Array.isArray(e.certifications)?e.certifications:e.certifications?e.certifications.split(",").map(o=>o.trim()):[],email:e.email||null,phone:e.phone||null,hire_date:e.hire_date||new Date().toISOString().split("T")[0],department_id:e.department_id||null,supervisor_id:e.supervisor_id||null,notes:e.notes||null};if(!n.name)throw new Error("Name is required");if(!n.role)throw new Error("Role is required");const{data:a,error:i}=await $.from("entity_staff").insert([n]).select(`
        *,
        departments (id, name, description),
        supervisor:entity_staff!supervisor_id (id, name, role, type)
      `).single();if(i)throw i;return{data:a,error:null}}catch(n){return console.error("Error creating entity staff:",n),{data:null,error:n}}},yx=async(e={})=>{try{let t=$.from("entity_staff").select(`
        *,
        departments (id, name, description),
        supervisor:entity_staff!supervisor_id (id, name, role, type)
      `);e.status&&(t=t.eq("status",e.status)),e.type&&(t=t.eq("type",e.type)),e.department_id&&(t=t.eq("department_id",e.department_id));const s=e.orderBy||"created_at",n=e.orderDirection||"desc";t=t.order(s,{ascending:n==="asc"}),e.limit&&(t=t.limit(e.limit)),e.offset&&(t=t.range(e.offset,e.offset+(e.limit||50)-1));const{data:a,error:i}=await t;if(i)throw i;return{data:a,error:null}}catch(t){return console.error("Error fetching entity staff:",t),{data:null,error:t}}},ld=async(e,t)=>{var s,n;try{const a={name:((s=t.name)==null?void 0:s.trim())||void 0,role:((n=t.role)==null?void 0:n.trim())||void 0,type:t.type||void 0,site:t.site||void 0,status:t.status||void 0,compliance:t.compliance!==void 0?t.compliance:void 0,certifications:Array.isArray(t.certifications)?t.certifications:t.certifications?t.certifications.split(",").map(l=>l.trim()):void 0,email:t.email||void 0,phone:t.phone||void 0,hire_date:t.hire_date||void 0,department_id:t.department_id||void 0,supervisor_id:t.supervisor_id||void 0,notes:t.notes||void 0};Object.keys(a).forEach(l=>{a[l]===void 0&&delete a[l]});const{data:i,error:o}=await $.from("entity_staff").update(a).eq("id",e).select(`
        *,
        departments (id, name, description),
        supervisor:entity_staff!supervisor_id (id, name, role, type)
      `).single();if(o)throw o;return{data:i,error:null}}catch(a){return console.error("Error updating entity staff:",a),{data:null,error:a}}},TI=async e=>{try{const{error:t}=await $.from("entity_staff").delete().eq("id",e);if(t)throw t;return{error:null}}catch(t){return console.error("Error deleting entity staff:",t),{error:t}}},PI=async(e=null)=>{try{let t=$.from("entity_staff").select("id, name, role, type, status").eq("status","Active").order("name",{ascending:!0});e&&(t=t.neq("id",e));const{data:s,error:n}=await t;if(n)throw n;return{data:s,error:null}}catch(t){return console.error("Error fetching potential supervisors:",t),{data:null,error:t}}},AI=async e=>{try{const{data:t,error:s}=await $.from("entity_staff").select(`
        id, name, role, type, status, compliance, hire_date,
        departments (id, name, description)
      `).eq("supervisor_id",e).eq("status","Active").order("name",{ascending:!0});if(s)throw s;return{data:t,error:null}}catch(t){return console.error("Error fetching direct reports:",t),{data:null,error:t}}},RI=async e=>{try{const{data:t,error:s}=await $.rpc("get_supervisor_chain",{entity_staff_id:e});if(s)throw s;return{data:t,error:null}}catch(t){return console.error("Error fetching supervisor chain:",t),{data:null,error:t}}},OI=async()=>{try{const{data:e,error:t}=await $.rpc("get_organizational_chart");if(t)throw t;return{data:e,error:null}}catch(e){return console.error("Error fetching organizational chart:",e),{data:null,error:e}}},DI=async()=>{try{const{data:e,error:t}=await $.from("entity_staff_with_supervisors").select("*").order("name",{ascending:!0});if(t)throw t;return{data:e,error:null}}catch(e){return console.error("Error fetching entity staff with supervisors:",e),{data:null,error:e}}},cS=async()=>{try{const{data:e,error:t}=await $.from("departments").select("id, name, description, is_active").eq("is_active",!0).order("name",{ascending:!0});if(t)throw t;return{data:e,error:null}}catch(e){return console.error("Error fetching departments:",e),{data:null,error:e}}},dS=async e=>{try{const{data:t,error:s}=await $.from("departments").insert([e]).select().single();if(s)throw s;return{data:t,error:null}}catch(t){return console.error("Error creating department:",t),{data:null,error:t}}},MI=async()=>{const e=[{name:"John Smith",role:"Security Officer",type:"Standard Officer",site:"Corporate HQ Alpha",status:"Active",compliance:95,certifications:["Basic Security","First Aid","Firearms"],email:"john.smith@gs3.com",phone:"+1-555-0123",hire_date:"2023-01-15",notes:"Reliable officer with excellent customer service skills. Handles high-traffic areas well."},{name:"Sarah Johnson",role:"Site Supervisor",type:"Supervisor",site:"Metro Hospital East",status:"Active",compliance:98,certifications:["Advanced Security","Leadership","Emergency Response"],email:"sarah.johnson@gs3.com",phone:"+1-555-0124",hire_date:"2022-08-20",notes:"Strong leadership qualities. Excellent at managing team dynamics and emergency situations."},{name:"Mike Rodriguez",role:"Operations Manager",type:"Operations Management",site:"Regional Office",status:"Active",compliance:100,certifications:["Management","Risk Assessment","ISO 18788"],email:"mike.rodriguez@gs3.com",phone:"+1-555-0125",hire_date:"2021-03-10",notes:"Strategic thinker with proven track record in operational efficiency. Key player in regional expansion."},{name:"Lisa Chen",role:"Security Consultant",type:"Consultant",site:"Multiple",status:"Active",compliance:92,certifications:["Consulting","Risk Analysis","Training"],email:"lisa.chen@gs3.com",phone:"+1-555-0126",hire_date:"2022-11-05",notes:"Expert in risk assessment and training. Valuable asset for client consultations and specialized projects."}];try{const{data:t,error:s}=await $.from("entity_staff").select("count").limit(1);if(s)return console.error("Error checking entity staff table:",s),{data:null,error:s};if(!t||t.length===0){const{data:n,error:a}=await $.from("entity_staff").insert(e).select();if(a)throw a;return console.log("Sample entity staff data initialized"),{data:n,error:null}}return{data:t,error:null}}catch(t){return console.error("Error initializing entity staff data:",t),{data:null,error:t}}},$I=async()=>{try{const{data:e,error:t}=await $.from("entity_staff").select("status, compliance, created_at");if(t)throw t;const s=e.length,n=e.filter(u=>u.status==="Active").length,a=e.filter(u=>u.compliance>=95).length,i=e.filter(u=>u.compliance>=85&&u.compliance<95).length,o=e.filter(u=>u.compliance<85).length,l=a+Math.floor(i*.8),c=Math.floor(i*.2)+Math.floor(o*.3),d=Math.floor(o*.7);return{data:{completedChecks:l,inProgress:c,pendingReview:d,totalEntityStaff:s,activeEntityStaff:n},error:null}}catch(e){return console.error("Error fetching background check stats:",e),{data:null,error:e}}},LI=async()=>{try{const{data:e,error:t}=await $.from("entity_staff").select("hire_date, status, created_at");if(t)throw t;const s=new Date,n=new Date(s.getTime()-30*24*60*60*1e3),a=e.filter(l=>new Date(l.hire_date)>=n).length,i=e.filter(l=>l.status==="On Leave").length,o=e.filter(l=>l.status==="Active").length;return{data:{newHires:a,inTraining:i,qualified:o,totalEntityStaff:e.length},error:null}}catch(e){return console.error("Error fetching onboarding stats:",e),{data:null,error:e}}},II=e=>{const t=[];return(!e.name||e.name.trim().length===0)&&t.push("Name is required"),(!e.role||e.role.trim().length===0)&&t.push("Role is required"),e.compliance!==void 0&&(e.compliance<0||e.compliance>100)&&t.push("Compliance must be between 0 and 100"),e.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&t.push("Invalid email format"),{isValid:t.length===0,errors:t}},vx={"Standard Officer":{description:"Basic security personnel for routine operations",requirements:["Basic Security Training","Background Check","Physical Fitness"],icon:"Shield"},Supervisor:{description:"Team leaders and site supervisors",requirements:["Leadership Training","Management Certification","Experience"],icon:"Star"},"Operations Management":{description:"Regional and operational managers",requirements:["Management Degree","Extensive Experience","Strategic Planning"],icon:"Briefcase"},Consultant:{description:"Specialized security consultants and advisors",requirements:["Expert Certification","Industry Experience","Consulting Skills"],icon:"GraduationCap"},"Dual-Role Hybrid":{description:"Officers with multiple specializations and responsibilities",requirements:["Multiple Certifications","Cross-Training","Advanced Background Check"],icon:"Users"},Specialist:{description:"Specialized security roles (K9, VIP, etc.)",requirements:["Specialized Training","Advanced Certifications","Experience"],icon:"Shield"}},uS=async e=>{try{const{entities:t,supervisor_ids:s,...n}=e;s&&s.length>0&&(n.supervisor_id=s[0]);const{data:a,error:i}=await $.from("security_staff").insert([n]).select(`
        *,
        subcontractor_profiles (id, company_name, service_specialization)
      `).single();if(i)throw i;if(t&&t.length>0){const l=t.map((d,u)=>({security_staff_id:a.id,site_id:d,is_primary:u===0})),{error:c}=await $.from("security_staff_entities").insert(l);c&&console.error("Error creating security staff-entity relationships:",c)}return{data:{...a,supervisor_ids:s||[]},error:null}}catch(t){return console.error("Error creating security staff:",t),{data:null,error:t}}},hS=async()=>{try{const{data:e,error:t}=await $.from("security_staff").select(`
        *,
        subcontractor_profiles (id, company_name, service_specialization)
      `).order("created_at",{ascending:!1});if(t){if(t.code==="42501")return console.error("RLS Policy Error: User not authenticated or missing permissions"),{data:null,error:{message:"Authentication required. Please log in or contact administrator to disable RLS for development."}};throw t}return{data:await Promise.all(e.map(async n=>{var i,o;const{data:a}=await $.from("security_staff_entities").select(`
            site_id,
            is_primary,
            sites (id, name, type, parent_id)
          `).eq("security_staff_id",n.id);return{...n,name:`${n.first_name} ${n.last_name}`,role:n.position,type:n.position,entities:a||[],primaryEntity:((o=(i=a==null?void 0:a.find(l=>l.is_primary))==null?void 0:i.sites)==null?void 0:o.name)||"No entity assigned"}})),error:null}}catch(e){return console.error("Error fetching security staff:",e),{data:null,error:e}}},cd=async(e,t)=>{try{const{entities:s,supervisor_ids:n,...a}=t;n&&n.length>0?a.supervisor_id=n[0]:a.supervisor_id=null;const{data:i,error:o}=await $.from("security_staff").update(a).eq("id",e).select(`
        *,
        subcontractor_profiles (id, company_name, service_specialization)
      `).single();if(o)throw o;if(s!==void 0&&(await $.from("security_staff_entities").delete().eq("security_staff_id",e),s&&s.length>0)){const c=s.map((u,h)=>({security_staff_id:e,site_id:u,is_primary:h===0})),{error:d}=await $.from("security_staff_entities").insert(c);d&&console.error("Error updating security staff-entity relationships:",d)}return{data:{...i,supervisor_ids:n||[]},error:null}}catch(s){return console.error("Error updating security staff:",s),{data:null,error:s}}},FI=async()=>{try{const e=[{name:"John Smith",role:"Security Supervisor",type:"Supervisor",status:"Active",security_company_id:1,position:"Supervisor",hire_date:"2023-01-15",email:"john.smith@security.com",phone:"+1-555-0101",compliance:95,certifications:["Security Supervisor License","First Aid","CPR"],background_check_status:"Approved",drug_test_status:"Passed",notes:"Experienced supervisor with excellent leadership skills."},{name:"Sarah Johnson",role:"Security Officer",type:"Standard Officer",status:"Active",security_company_id:1,position:"Security Officer",hire_date:"2023-03-20",email:"sarah.johnson@security.com",phone:"+1-555-0102",compliance:88,certifications:["Security License","First Aid"],background_check_status:"Approved",drug_test_status:"Passed",notes:"Reliable officer with good attention to detail."},{name:"Mike Davis",role:"Operations Manager",type:"Operations Management",status:"Active",security_company_id:1,position:"Operations Manager",hire_date:"2022-11-10",email:"mike.davis@security.com",phone:"+1-555-0103",compliance:98,certifications:["Management Certification","Security License","Advanced Training"],background_check_status:"Approved",drug_test_status:"Passed",notes:"Senior operations manager with extensive experience."}],{data:t,error:s}=await $.from("security_staff").insert(e).select();if(s)throw s;return{data:t,error:null}}catch(e){return console.error("Error initializing security staff data:",e),{data:null,error:e}}},VI=async()=>{try{const{data:e,error:t}=await $.from("security_staff").select("background_check_status, drug_test_status");if(t)throw t;return{data:{totalSecurityStaff:e.length,completedChecks:e.filter(n=>n.background_check_status==="Approved").length,inProgress:e.filter(n=>n.background_check_status==="In Progress").length,pendingReview:e.filter(n=>n.background_check_status==="Pending").length,drugTestPassed:e.filter(n=>n.drug_test_status==="Passed").length,drugTestFailed:e.filter(n=>n.drug_test_status==="Failed").length},error:null}}catch(e){return console.error("Error fetching background check stats:",e),{data:null,error:e}}},BI=async()=>{try{const{data:e,error:t}=await $.from("security_staff").select("hire_date, status, training_completion");if(t)throw t;const s=new Date().getMonth(),n=new Date().getFullYear();return{data:{newHires:e.filter(i=>{const o=new Date(i.hire_date);return o.getMonth()===s&&o.getFullYear()===n}).length,inTraining:e.filter(i=>i.status==="In Training").length,qualified:e.filter(i=>{var o;return i.status==="Active"&&((o=i.training_completion)==null?void 0:o.basic_training)===!0}).length},error:null}}catch(e){return console.error("Error fetching onboarding stats:",e),{data:null,error:e}}},zI=async()=>{try{const{data:e,error:t}=await $.from("subcontractor_profiles").select("id, company_name, service_specialization").eq("status","Active").order("company_name");if(t)throw t;return{data:e,error:null}}catch(e){return console.error("Error fetching security companies:",e),{data:null,error:e}}},UI=async(e=null)=>{try{let t=$.from("security_staff").select("id, first_name, last_name, position, status").eq("status","Active");e&&(t=t.neq("id",e));const{data:s,error:n}=await t.order("first_name");if(n)throw n;return{data:s.map(i=>({...i,name:`${i.first_name} ${i.last_name}`,role:i.position,type:i.position})),error:null}}catch(t){return console.error("Error fetching potential supervisors:",t),{data:null,error:t}}},qt=e=>{if(!e)return null;const t=e.match(/\(([^,]+),([^)]+)\)/);return t?{lat:parseFloat(t[1]),lng:parseFloat(t[2])}:null},Di=e=>!e||!e.lat||!e.lng?null:`(${e.lat},${e.lng})`,av={async getNfcTags(){try{const{data:e,error:t}=await $.from("nfc_tags").select("id").limit(1);if(t)return console.log("NFC tags table does not exist yet. Please run the database setup script."),[];const{data:s,error:n}=await $.from("nfc_tags").select(`
          *,
          sites (name),
          entity_staff (name)
        `).order("created_at",{ascending:!1});if(n){console.log("Join with sites table failed, trying without relationships...");const{data:a,error:i}=await $.from("nfc_tags").select("*").order("created_at",{ascending:!1});return i?(console.error("Error fetching NFC tags:",i),[]):a.map(o=>({...o,coordinates:qt(o.coordinates),last_scan_at:o.last_scan_at?new Date(o.last_scan_at).toLocaleString():null,sites:{name:"Unknown Site"},entity_staff:{name:"Unknown Staff"}}))}return s.map(a=>({...a,coordinates:qt(a.coordinates),last_scan_at:a.last_scan_at?new Date(a.last_scan_at).toLocaleString():null}))}catch(e){return console.error("Error fetching NFC tags:",e),[]}},async getNfcTagsBySite(e){try{const{data:t,error:s}=await $.from("nfc_tags").select(`
          *,
          sites (name),
          entity_staff (name)
        `).eq("site_id",e).order("created_at",{ascending:!1});if(s){console.log("Join with sites table failed, trying without relationships...");const{data:n,error:a}=await $.from("nfc_tags").select("*").eq("site_id",e).order("created_at",{ascending:!1});return a?(console.error("Error fetching NFC tags by site:",a),[]):n.map(i=>({...i,coordinates:qt(i.coordinates),last_scan_at:i.last_scan_at?new Date(i.last_scan_at).toLocaleString():null,sites:{name:"Unknown Site"},entity_staff:{name:"Unknown Staff"}}))}return t.map(n=>({...n,coordinates:qt(n.coordinates),last_scan_at:n.last_scan_at?new Date(n.last_scan_at).toLocaleString():null}))}catch(t){return console.error("Error fetching NFC tags by site:",t),[]}},async createNfcTag(e){try{const{data:t,error:s}=await $.from("nfc_tags").insert({...e,coordinates:Di(e.coordinates)}).select().single();if(s)throw s;return{...t,coordinates:qt(t.coordinates)}}catch(t){throw console.error("Error creating NFC tag:",t),t}},async updateNfcTag(e,t){try{const s={...t};t.coordinates&&(s.coordinates=Di(t.coordinates));const{data:n,error:a}=await $.from("nfc_tags").update(s).eq("id",e).select().single();if(a)throw a;return{...n,coordinates:qt(n.coordinates)}}catch(s){throw console.error("Error updating NFC tag:",s),s}},async deleteNfcTag(e){try{const{error:t}=await $.from("nfc_tags").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting NFC tag:",t),t}},async getGpsLocations(){try{const{data:e,error:t}=await $.from("gps_locations").select("id").limit(1);if(t)return console.log("GPS locations table does not exist yet. Please run the database setup script."),[];const{data:s,error:n}=await $.from("gps_locations").select(`
          *,
          sites (name),
          entity_staff (name)
        `).order("created_at",{ascending:!1});if(n){console.log("Join with sites table failed, trying without relationships...");const{data:a,error:i}=await $.from("gps_locations").select("*").order("created_at",{ascending:!1});return i?(console.error("Error fetching GPS locations:",i),[]):a.map(o=>({...o,coordinates:qt(o.coordinates),last_check_in_at:o.last_check_in_at?new Date(o.last_check_in_at).toLocaleString():null,sites:{name:"Unknown Site"},entity_staff:{name:"Unknown Staff"}}))}return s.map(a=>({...a,coordinates:qt(a.coordinates),last_check_in_at:a.last_check_in_at?new Date(a.last_check_in_at).toLocaleString():null}))}catch(e){return console.error("Error fetching GPS locations:",e),[]}},async getGpsLocationsBySite(e){try{const{data:t,error:s}=await $.from("gps_locations").select(`
          *,
          sites (name),
          entity_staff (name)
        `).eq("site_id",e).order("created_at",{ascending:!1});if(s){console.log("Join with sites table failed, trying without relationships...");const{data:n,error:a}=await $.from("gps_locations").select("*").eq("site_id",e).order("created_at",{ascending:!1});return a?(console.error("Error fetching GPS locations by site:",a),[]):n.map(i=>({...i,coordinates:qt(i.coordinates),last_check_in_at:i.last_check_in_at?new Date(i.last_check_in_at).toLocaleString():null,sites:{name:"Unknown Site"},entity_staff:{name:"Unknown Staff"}}))}return t.map(n=>({...n,coordinates:qt(n.coordinates),last_check_in_at:n.last_check_in_at?new Date(n.last_check_in_at).toLocaleString():null}))}catch(t){return console.error("Error fetching GPS locations by site:",t),[]}},async createGpsLocation(e){try{const{data:t,error:s}=await $.from("gps_locations").insert({...e,coordinates:Di(e.coordinates)}).select().single();if(s)throw s;return{...t,coordinates:qt(t.coordinates)}}catch(t){throw console.error("Error creating GPS location:",t),t}},async updateGpsLocation(e,t){try{const s={...t};t.coordinates&&(s.coordinates=Di(t.coordinates));const{data:n,error:a}=await $.from("gps_locations").update(s).eq("id",e).select().single();if(a)throw a;return{...n,coordinates:qt(n.coordinates)}}catch(s){throw console.error("Error updating GPS location:",s),s}},async deleteGpsLocation(e){try{const{error:t}=await $.from("gps_locations").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting GPS location:",t),t}},async logScan(e){try{const{data:t,error:s}=await $.from("scan_logs").insert({...e,coordinates:Di(e.coordinates)}).select().single();if(s)throw s;return e.tag_id&&await $.from("nfc_tags").update({last_scan_at:new Date().toISOString(),last_scan_by:e.scanned_by}).eq("id",e.tag_id),e.gps_location_id&&await $.from("gps_locations").update({last_check_in_at:new Date().toISOString(),last_check_in_by:e.scanned_by}).eq("id",e.gps_location_id),{...t,coordinates:qt(t.coordinates)}}catch(t){throw console.error("Error logging scan:",t),t}},async getScanLogs(e={}){try{let t=$.from("scan_logs").select(`
          *,
          nfc_tags (tag_id, name),
          gps_locations (name),
          entity_staff (name)
        `).order("scan_timestamp",{ascending:!1});e.tag_id&&(t=t.eq("tag_id",e.tag_id)),e.gps_location_id&&(t=t.eq("gps_location_id",e.gps_location_id)),e.scanned_by&&(t=t.eq("scanned_by",e.scanned_by)),e.scan_type&&(t=t.eq("scan_type",e.scan_type));const{data:s,error:n}=await t;if(n)throw n;return s.map(a=>({...a,coordinates:qt(a.coordinates),scan_timestamp:new Date(a.scan_timestamp).toLocaleString()}))}catch(t){throw console.error("Error fetching scan logs:",t),t}},async getScanStatistics(){try{const{data:e,error:t}=await $.from("scan_logs").select("id").limit(1);if(t)return console.log("Scan logs table does not exist yet. Please run the database setup script."),{totalScans:0,nfcScans:0,gpsScans:0,manualScans:0,last24Hours:0};const{data:s,error:n}=await $.from("scan_logs").select("scan_type, scan_timestamp").gte("scan_timestamp",new Date(Date.now()-24*60*60*1e3).toISOString());return n?(console.error("Error fetching scan statistics:",n),{totalScans:0,nfcScans:0,gpsScans:0,manualScans:0,last24Hours:0}):{totalScans:s.length,nfcScans:s.filter(i=>i.scan_type==="NFC").length,gpsScans:s.filter(i=>i.scan_type==="GPS").length,manualScans:s.filter(i=>i.scan_type==="Manual").length,last24Hours:s.length}}catch(e){return console.error("Error fetching scan statistics:",e),{totalScans:0,nfcScans:0,gpsScans:0,manualScans:0,last24Hours:0}}}},fS=({isOpen:e,onClose:t,entity:s})=>{var b,j,S,_,E,C;const[n,a]=f.useState(!1),[i,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState([]),[h,m]=f.useState([]),[g,x]=f.useState("overview"),{toast:y}=ce();f.useEffect(()=>{e&&s?(console.log(" Dialog opened with entity:",s),console.log(" Entity ID:",s.id),console.log(" Entity Name:",s.name),console.log(" Entity Type:",s.type),console.log(" Entity object keys:",Object.keys(s)),w()):console.log("Dialog not opened or entity is null:",{isOpen:e,entity:s})},[e,s]);const w=async()=>{if(!s){console.log("No entity provided to fetchLinkedData");return}a(!0);try{console.log(" Fetching linked data for entity:",s),console.log(" Entity ID type:",typeof s.id),console.log(" Entity ID value:",s.id);try{const{data:F,error:q}=await $.from("sites").select("id, name").limit(1);console.log(" Database connection test:",{testData:F,testError:q})}catch(F){console.error(" Database connection failed:",F)}let O=[],A=null;try{const{data:F,error:q}=await $.from("entity_staff_entities").select(`
            entity_staff_id,
            is_primary,
            status,
            entity_staff (
              id,
              name,
              email,
              phone,
              role,
              department_id,
              departments (name)
            )
          `).eq("site_id",s.id);O=F||[],A=q}catch(F){console.log("Entity staff entities table not available, trying direct entity_staff table"),A=F}console.log(" Entity staff data (via relationships):",O),console.log(" Entity staff error (via relationships):",A);let R=[],T=null;try{const{data:F,error:q}=await $.from("entity_staff").select(`
            id,
            name,
            email,
            phone,
            role,
            department_id,
            departments (name)
          `).eq("site",s.name);R=F||[],T=q}catch(F){console.log("Entity staff site column not available, using junction table only"),T=F}console.log(" Entity staff data (via site column):",R),console.log(" Entity staff error (via site column):",T);const D=[...(O||[]).map(F=>({...F,source:"relationship",entity_staff:F.entity_staff||{}})),...(R||[]).map(F=>({entity_staff_id:F.id,is_primary:!0,entity_staff:F,source:"legacy"}))];console.log(" Combined entity staff:",D),o(D);let N=[],k=null;try{const{data:F,error:q}=await $.from("security_staff_entities").select(`
            security_staff_id,
            is_primary,
            status,
            security_staff (
              id,
              first_name,
              last_name,
              email,
              phone,
              position,
              security_company_id,
              subcontractor_profiles (company_name)
            )
          `).eq("site_id",s.id);N=F||[],k=q}catch(F){console.log("Security staff entities table not available, trying direct security_staff table"),k=F}console.log(" Security staff data:",N),console.log(" Security staff error:",k);let P=[],U=null;console.log(" Security staff data (via site column): No direct site column available"),console.log(" Security staff error (via site column): Using junction table only");const M=[...(N||[]).map(F=>({...F,source:"relationship",security_staff:F.security_staff||{}}))];console.log(" Combined security staff:",M),c(M);try{const[F,q]=await Promise.all([av.getNfcTagsBySite(s.id),av.getGpsLocationsBySite(s.id)]);u(F),m(q),console.log(" NFC tags for site:",F),console.log(" GPS locations for site:",q)}catch(F){console.error("Error fetching NFC/GPS data:",F)}console.log(" Final state - Entity staff count:",D.length),console.log(" Final state - Security staff count:",M.length),console.log(" Final state - Entity staff data:",D),console.log(" Final state - Security staff data:",M),D.length===0&&M.length===0?console.log("No staff data found for this entity - this is normal for new entities"):console.log("Staff data loaded successfully")}catch(O){console.error("Error fetching linked data:",O),y({variant:"destructive",title:"Error",description:"Failed to load entity details"})}finally{a(!1)}},p=O=>{switch(O){case"site":return r.jsx(As,{className:"w-4 h-4"});case"region":return r.jsx(gt,{className:"w-4 h-4"});case"national":return r.jsx(As,{className:"w-4 h-4"});case"global":return r.jsx(As,{className:"w-4 h-4"});default:return r.jsx(As,{className:"w-4 h-4"})}},v=O=>O?typeof O=="string"?O:typeof O=="object"&&`${O.street||""} ${O.city||""} ${O.state||""} ${O.zip||""}`.trim()||"Address available":"No address provided";if(!s||!e)return null;try{return r.jsx(Et,{children:e&&r.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:O=>O.stopPropagation(),children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(G,{className:"text-xl text-white flex items-center",children:[p(s.type),r.jsx("span",{className:"ml-2",children:s.name}),r.jsx(Ve,{variant:"outline",className:"ml-3",children:((b=s.type)==null?void 0:b.charAt(0).toUpperCase())+((j=s.type)==null?void 0:j.slice(1).replace("_"," "))||"Unknown"})]}),r.jsx(I,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Bt,{className:"w-4 h-4"})})]}),r.jsx(V,{children:n?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(ft,{className:"w-8 h-8 animate-spin text-blue-400"}),r.jsx("span",{className:"ml-2 text-gray-400",children:"Loading entity details..."})]}):r.jsxs(Ot,{value:g,onValueChange:x,className:"w-full",children:[r.jsxs(bt,{className:"grid w-full grid-cols-5 bg-slate-800/80 border border-slate-700",children:[r.jsx(ae,{value:"overview",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:"Overview"}),r.jsxs(ae,{value:"entity_staff",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:["Entity Staff (",i.length,")"]}),r.jsxs(ae,{value:"security_staff",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:["Security Staff (",l.length,")"]}),r.jsx(ae,{value:"relationships",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:"Relationships"}),r.jsx(ae,{value:"hierarchy",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:"Hierarchy"}),r.jsx(ae,{value:"nfc_gps",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:"NFC/GPS"})]}),r.jsx(oe,{value:"overview",className:"mt-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs(B,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(W,{children:r.jsx(G,{className:"text-lg text-white",children:"Entity Information"})}),r.jsxs(V,{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Name"}),r.jsx("p",{className:"text-white font-medium",children:s.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Type"}),r.jsx("p",{className:"text-white",children:((S=s.type)==null?void 0:S.charAt(0).toUpperCase())+((_=s.type)==null?void 0:_.slice(1).replace("_"," "))||"Unknown"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Address"}),r.jsx("p",{className:"text-white",children:v(s.address)})]}),s.client_name&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Client"}),r.jsx("p",{className:"text-white",children:s.client_name})]})]})]}),r.jsxs(B,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(W,{children:r.jsx(G,{className:"text-lg text-white",children:"Staff Summary"})}),r.jsxs(V,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Entity Staff"}),r.jsx(Ve,{variant:"secondary",children:i.length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Security Staff"}),r.jsx(Ve,{variant:"secondary",children:l.length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Total Staff"}),r.jsx(Ve,{variant:"outline",children:i.length+l.length})]})]})]})]})}),r.jsx(oe,{value:"entity_staff",className:"mt-4",children:r.jsxs(B,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(W,{children:r.jsxs(G,{className:"text-lg text-white flex items-center",children:[r.jsx(xe,{className:"w-5 h-5 mr-2 text-blue-400"}),"Entity Staff (",i.length,")"]})}),r.jsxs(V,{children:[console.log(" Rendering entity staff section with data:",i),i.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(xe,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No entity staff assigned to this location"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Entity staff can be assigned through the Entity Staff management page."}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"The system checks both the new relationship table and legacy site column."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(O=>{const A=O.entity_staff||{};return console.log(" Rendering entity staff item:",O),!A||!A.name?(console.warn("Invalid entity staff data:",O),null):r.jsxs(B,{className:"bg-slate-700/50 border-slate-600",children:[r.jsx(W,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(G,{className:"text-md text-white",children:A.name||"Unknown Staff"}),r.jsxs("div",{className:"flex items-center gap-2",children:[O.is_primary&&r.jsx(Ve,{variant:"outline",className:"text-xs",children:"Primary"}),O.source==="legacy"&&r.jsx(Ve,{variant:"secondary",className:"text-xs",children:"Legacy"})]})]})}),r.jsxs(V,{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Qa,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:A.email})]}),A.phone&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Gn,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:A.phone})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Ke,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:A.role||A.position||"No role"})]}),A.departments&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(As,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:A.departments.name})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Ls,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:"Assignment dates not available"})]}),O.status&&r.jsx("div",{className:"flex items-center text-sm",children:r.jsx(Ve,{variant:O.status==="Active"?"default":"secondary",className:"text-xs",children:O.status})})]})]},O.entity_staff_id)})})]})]})}),r.jsx(oe,{value:"security_staff",className:"mt-4",children:r.jsxs(B,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(W,{children:r.jsxs(G,{className:"text-lg text-white flex items-center",children:[r.jsx(Ke,{className:"w-5 h-5 mr-2 text-green-400"}),"Security Staff (",l.length,")"]})}),r.jsx(V,{children:l.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(Ke,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No security staff assigned to this location"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Security staff can be assigned through the Security Staff management page."}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"The system checks both the new relationship table and legacy site column."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(O=>{const A=O.security_staff||{};return!A||!A.name?(console.warn("Invalid security staff data:",O),null):r.jsxs(B,{className:"bg-slate-700/50 border-slate-600",children:[r.jsx(W,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(G,{className:"text-md text-white",children:A.first_name&&A.last_name?`${A.first_name} ${A.last_name}`:A.first_name||A.last_name||"Unknown Staff"}),r.jsxs("div",{className:"flex items-center gap-2",children:[O.is_primary&&r.jsx(Ve,{variant:"outline",className:"text-xs",children:"Primary"}),O.source==="legacy"&&r.jsx(Ve,{variant:"secondary",className:"text-xs",children:"Legacy"})]})]})}),r.jsxs(V,{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Qa,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:A.email})]}),A.phone&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Gn,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:A.phone})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Ke,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:A.position||"No position"})]}),A.subcontractor_profiles&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(As,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:A.subcontractor_profiles.company_name})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Ls,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{className:"text-gray-300",children:"Assignment dates not available"})]}),O.status&&r.jsx("div",{className:"flex items-center text-sm",children:r.jsx(Ve,{variant:O.status==="Active"?"default":"secondary",className:"text-xs",children:O.status})})]})]},O.security_staff_id)})})})]})}),r.jsx(oe,{value:"relationships",className:"mt-4",children:r.jsxs(B,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(W,{children:r.jsxs(G,{className:"text-lg text-white flex items-center",children:[r.jsx(vt,{className:"w-5 h-5 mr-2 text-blue-400"}),"Site Relationships"]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Entity Staff Relationships"}),r.jsxs("p",{className:"text-white",children:["This entity has ",i.length," entity staff members assigned through the entity_staff_entities table."]}),i.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("p",{className:"text-sm text-gray-400",children:["Primary assignments: ",i.filter(O=>O.is_primary).length]}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Active assignments: ",i.filter(O=>O.status==="Active").length]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Security Staff Relationships"}),r.jsxs("p",{className:"text-white",children:["This entity has ",l.length," security staff members assigned through the security_staff_entities table."]}),l.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("p",{className:"text-sm text-gray-400",children:["Primary assignments: ",l.filter(O=>O.is_primary).length]}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Active assignments: ",l.filter(O=>O.status==="Active").length]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Database Tables Used"}),r.jsxs("div",{className:"space-y-1 mt-2",children:[r.jsx("p",{className:"text-sm text-gray-300",children:" entity_staff_entities (junction table)"}),r.jsx("p",{className:"text-sm text-gray-300",children:" security_staff_entities (junction table)"}),r.jsx("p",{className:"text-sm text-gray-300",children:" entity_staff (staff details)"}),r.jsx("p",{className:"text-sm text-gray-300",children:" security_staff (security staff details)"})]})]})]})})]})}),r.jsx(oe,{value:"hierarchy",className:"mt-4",children:r.jsxs(B,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(W,{children:r.jsxs(G,{className:"text-lg text-white flex items-center",children:[r.jsx(gt,{className:"w-5 h-5 mr-2 text-purple-400"}),"Hierarchy Information"]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Entity Type"}),r.jsx("p",{className:"text-white font-medium",children:((E=s.type)==null?void 0:E.charAt(0).toUpperCase())+((C=s.type)==null?void 0:C.slice(1).replace("_"," "))||"Unknown"})]}),s.parent_id&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Parent Entity"}),r.jsxs("p",{className:"text-white",children:["ID: ",s.parent_id]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Entity ID"}),r.jsx("p",{className:"text-white font-mono text-sm",children:s.id})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"Address"}),r.jsx("p",{className:"text-white",children:v(s.address)})]}),s.gps_coordinates&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400",children:"GPS Coordinates"}),r.jsx("p",{className:"text-white font-mono text-sm",children:JSON.stringify(s.gps_coordinates)})]})]})})]})}),r.jsx(oe,{value:"nfc_gps",className:"mt-4",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(B,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(W,{children:r.jsxs(G,{className:"text-lg text-white flex items-center",children:[r.jsx(Mf,{className:"w-5 h-5 mr-2 text-blue-400"}),"NFC Tags (",d.length,")"]})}),r.jsx(V,{children:d.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(Mf,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No NFC tags deployed at this location"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"NFC tags can be added through the NFC Management page."})]}):r.jsx("div",{className:"space-y-3",children:d.map(O=>r.jsxs("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"text-white font-medium",children:O.tag_id}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${O.status==="Active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:O.status})]}),r.jsx("p",{className:"text-sm text-gray-300 mb-1",children:O.location_description||O.name}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[r.jsxs("span",{children:["Battery: ",O.battery_level,"%"]}),r.jsxs("span",{children:["Last scan: ",O.last_scan_at||"Never"]})]})]},O.id))})})]}),r.jsxs(B,{className:"bg-slate-800/50 border-slate-700",children:[r.jsx(W,{children:r.jsxs(G,{className:"text-lg text-white flex items-center",children:[r.jsx(Df,{className:"w-5 h-5 mr-2 text-green-400"}),"GPS Locations (",h.length,")"]})}),r.jsx(V,{children:h.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(Df,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No GPS locations configured for this site"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"GPS locations can be added through the NFC Management page."})]}):r.jsx("div",{className:"space-y-3",children:h.map(O=>r.jsxs("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"text-white font-medium",children:O.name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${O.status==="Active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:O.status})]}),r.jsx("p",{className:"text-sm text-gray-300 mb-1",children:O.description}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[r.jsxs("span",{children:["Radius: ",O.radius_meters,"m"]}),r.jsxs("span",{children:["Type: ",O.location_type]})]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last check-in: ",O.last_check_in_at||"Never"]})]},O.id))})})]})]})})]})})]})})})})}catch(O){return console.error("Error rendering EntityDetailsDialog:",O),r.jsx(Et,{children:e&&r.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsx(G,{className:"text-xl text-white",children:"Error Loading Entity Details"})}),r.jsxs(V,{children:[r.jsx("p",{className:"text-gray-400",children:"There was an error loading the entity details. Please try again."}),r.jsx(I,{onClick:t,className:"mt-4",children:"Close"})]})]})})})})}},HI={site:Dj,region:MT,national:Wn,global:Wn},bh=({title:e,parentTypeForSelection:t,childTypeToDisplay:s,allSites:n,loading:a,selectedParent:i,setSelectedParent:o,getDashboardData:l})=>{var y,w;ce();const[c,d]=f.useState(null),[u,h]=f.useState(!1),m=n.filter(p=>p.type===t),g=l(t,s),x=HI[t]||Pt;return r.jsxs(r.Fragment,{children:[r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[r.jsxs(G,{className:"text-xl text-white flex items-center mb-2 sm:mb-0",children:[r.jsx(x,{className:"w-5 h-5 mr-2 text-blue-400"}),e]}),m.length>0&&r.jsxs(be,{onValueChange:p=>o(p==="none"?null:parseInt(p)),value:i||"none",children:[r.jsx(ge,{className:`${Hs} w-full sm:w-auto sm:max-w-xs`,children:r.jsx(je,{placeholder:`Select ${t}...`})}),r.jsxs(ye,{children:[r.jsxs(Z,{value:"none",children:["Overview (All ",t,"s)"]}),m.map(p=>r.jsx(Z,{value:p.id.toString(),children:p.name},p.id))]})]})]}),r.jsx(he,{className:"text-gray-400 mt-2",children:i?`Data for children of ${((y=n.find(p=>p.id===i))==null?void 0:y.name)||t}.`:`Overview of all ${s}s under ${t}s.`})]}),r.jsxs(V,{children:[a?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Loading data..."}):g.length===0?r.jsxs("div",{className:"text-center py-12 min-h-[200px] flex flex-col items-center justify-center",children:[r.jsx(Pt,{className:"w-12 h-12 mx-auto text-slate-500 mb-3 opacity-70"}),r.jsxs("p",{className:"text-gray-400",children:["No ",s," data to display for ",i?(w=n.find(p=>p.id===i))==null?void 0:w.name:`the selected ${t}`,"."]}),!i&&m.length>0&&r.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Select a ",t," from the dropdown to see its children."]}),m.length===0&&r.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["No ",t," entities exist to display data for."]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(p=>r.jsxs(B,{className:"bg-slate-800/50 border-slate-700 hover-lift",children:[r.jsxs(W,{children:[r.jsx(G,{className:"text-lg text-sky-300",children:p.name}),r.jsx(he,{className:"text-slate-400",children:p.type?p.type.charAt(0).toUpperCase()+p.type.slice(1).replace("_"," "):"N/A"})]}),r.jsxs(V,{children:[r.jsxs("p",{className:"text-xs text-slate-500",children:["Address: ",p.address?JSON.stringify(p.address):"N/A"]}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Client: ",p.client_name||"N/A"]}),r.jsx(I,{size:"sm",variant:"link",className:"text-blue-400 hover:text-blue-300 p-0 mt-2 text-xs",onClick:()=>{d(p),h(!0)},children:"View Details"})]})]},p.id))}),r.jsxs("div",{className:"text-center py-8 mt-4 border-t border-slate-700",children:[r.jsx(Pt,{className:"w-10 h-10 mx-auto text-slate-600 mb-2 opacity-50"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"AI-powered charts and aggregated analytics will appear here."})]})]})]}),r.jsx(fS,{isOpen:u,onClose:()=>{h(!1),d(null)},entity:c})]})},mS=["site","region","special_activity","national","global"],Uo="bg-[#607D8B] hover:bg-[#546E7A] text-white",Hs="bg-white text-gray-800 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-blue-500",qI="bg-transparent p-0 space-x-1",Mi="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",$i="data-[state=active]:bg-transparent data-[state=active]:shadow-none",WI=()=>{var k;const{toast:e}=ce(),[t,s]=f.useState([]),[n,a]=f.useState([]),[i,o]=f.useState([]),[l,c]=f.useState(!0),[d,u]=f.useState(!1),[h,m]=f.useState(!1),[g,x]=f.useState(null),[y,w]=f.useState("");console.log(" Search term state:",y);const[p,v]=f.useState("sites_list"),[b,j]=f.useState(null),[S,_]=f.useState(null),[E,C]=f.useState(!1),O=f.useCallback(async()=>{c(!0);try{console.log(" Fetching sites from database...");const{data:P,error:U}=await $.from("sites").select(`
          id, 
          name, 
          type, 
          parent_id, 
          client_id, 
          address, 
          gps_coordinates
        `);if(console.log(" Database response:",{sitesData:P,sitesError:U}),U)throw U;console.log("Raw sites data:",P);const M=[...new Set(P.map(L=>L.parent_id).filter(L=>L!==null))];let F=[];if(M.length>0){const{data:L,error:J}=await $.from("sites").select("id, name").in("id",M);J||(F=L||[])}const q=P.map(L=>{var J;return{...L,parent_name:L.parent_id&&((J=F.find(ne=>ne.id===L.parent_id))==null?void 0:J.name)||null,client_name:null}});console.log("Formatted sites data:",q),s(q),o(P.map(L=>({id:L.id,name:L.name,type:L.type}))),a([])}catch(P){e({variant:"destructive",title:"Error fetching data",description:P.message})}finally{c(!1)}},[e]);f.useEffect(()=>{O()},[O]);const A=()=>{u(!1),m(!1),x(null),O()},R=P=>{m(!0),x(P),u(!0)},T=async P=>{if(window.confirm("Are you sure you want to delete this entity? This action cannot be undone.")){c(!0);try{const{error:U}=await $.from("sites").delete().eq("id",P);if(U)throw U;e({title:"Entity deleted successfully"}),O()}catch(U){e({variant:"destructive",title:"Error deleting entity",description:U.message})}finally{c(!1)}}},D=t.filter(P=>y?P.name.toLowerCase().includes(y.toLowerCase())||P.type&&P.type.toLowerCase().includes(y.toLowerCase())||P.client_name&&P.client_name.toLowerCase().includes(y.toLowerCase()):!0);console.log("Sites filtering debug:",{searchTerm:y,totalSites:t.length,filteredSitesCount:D.length,sitesWithNames:t.filter(P=>P.name).length,sitesWithoutNames:t.filter(P=>!P.name).length,sampleSite:t[0]});const N=(P,U)=>{if(b)return t.filter(F=>F.parent_id===b&&F.type===U);const M=t.filter(F=>F.type===P);return!b&&M.length>0?t.filter(F=>F.type===U&&M.some(q=>q.id===F.parent_id)):[]};return l&&!d&&!t.length?r.jsx("div",{className:"text-center py-10 text-white",children:"Loading Hierarchy Builder..."}):r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[!d&&r.jsx(Yo,{to:"/",className:`p-2 rounded-full hover:bg-slate-700/50 transition-colors ${Uo}`,children:r.jsx(vp,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(vt,{className:"w-8 h-8 mr-3 text-blue-400"}),"Hierarchy Builder"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage sites, regions, national, and global entities with flexible parent-child relationships."})]})]}),!d&&r.jsxs(I,{onClick:()=>{u(!0),m(!1),x(null)},className:`${Uo} mt-4 sm:mt-0`,children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add New Entity"]})]}),d?r.jsx(NI,{isEditing:h,currentSite:g,clients:n,allSitesForParent:i,onSuccess:A,onCancel:()=>{u(!1),m(!1),x(null)}}):r.jsxs(Ot,{defaultValue:p,onValueChange:v,className:"space-y-6",children:[r.jsxs(bt,{className:`${qI} border-b border-slate-700`,children:[r.jsx(ae,{value:"sites_list",className:`${Mi} ${$i}`,children:"Entities List"}),r.jsx(ae,{value:"hierarchy_view",className:`${Mi} ${$i}`,children:"Hierarchy View"}),r.jsx(ae,{value:"regional_dashboard",className:`${Mi} ${$i}`,children:"Regional View"}),r.jsx(ae,{value:"national_dashboard",className:`${Mi} ${$i}`,children:"National View"}),r.jsx(ae,{value:"global_dashboard",className:`${Mi} ${$i}`,children:"Global View"})]}),r.jsx(oe,{value:"sites_list",children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-xl text-white",children:"All Entities"}),r.jsx(he,{className:"text-gray-400",children:"View and manage all registered sites, regions, and national/global entities."})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-3 sm:mt-0",children:[r.jsxs(be,{onValueChange:P=>w(P==="all"?"":P),children:[r.jsx(ge,{className:`${Hs} w-auto text-xs`,children:r.jsx(je,{placeholder:"Filter by Type..."})}),r.jsxs(ye,{children:[r.jsx(Z,{value:"all",children:"All Types"}),mS.map(P=>r.jsx(Z,{value:P,children:P.charAt(0).toUpperCase()+P.slice(1).replace("_"," ")},P))]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search entities...",value:y,onChange:P=>w(P.target.value),className:"pl-10 w-full sm:w-64 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]})]})}),r.jsx(CI,{sites:D,loading:l&&t.length===0,onEdit:R,onDelete:T})]})}),r.jsx(oe,{value:"hierarchy_view",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[r.jsxs(G,{className:"text-xl text-white flex items-center mb-2 sm:mb-0",children:[r.jsx(vt,{className:"w-5 h-5 mr-2 text-blue-400"}),"Flexible Hierarchy View"]}),r.jsxs(be,{onValueChange:P=>j(P==="none"?null:parseInt(P)),value:b||"none",children:[r.jsx(ge,{className:`${Hs} w-full sm:w-auto sm:max-w-xs`,children:r.jsx(je,{placeholder:"Select parent entity..."})}),r.jsxs(ye,{children:[r.jsx(Z,{value:"none",children:"Overview (All Entities)"}),t.map(P=>r.jsxs(Z,{value:P.id.toString(),children:[P.name," (",P.type,")"]},P.id))]})]})]}),r.jsx(he,{className:"text-gray-400 mt-2",children:b?`Showing children of ${((k=t.find(P=>P.id===b))==null?void 0:k.name)||"selected entity"}.`:"View all entities and their relationships. Select a parent to see its children."})]}),r.jsx(V,{children:l?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Loading data..."}):t.length===0?r.jsxs("div",{className:"text-center py-12 min-h-[200px] flex flex-col items-center justify-center",children:[r.jsx(vt,{className:"w-12 h-12 mx-auto text-slate-500 mb-3 opacity-70"}),r.jsx("p",{className:"text-gray-400",children:"No entities found."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(b?t.filter(P=>P.parent_id===b):t).map(P=>r.jsxs(B,{className:"bg-slate-800/50 border-slate-700 hover-lift",children:[r.jsxs(W,{children:[r.jsx(G,{className:"text-lg text-sky-300",children:P.name}),r.jsx(he,{className:"text-slate-400",children:P.type?P.type.charAt(0).toUpperCase()+P.type.slice(1).replace("_"," "):"N/A"})]}),r.jsxs(V,{children:[r.jsxs("p",{className:"text-xs text-slate-500",children:["Parent: ",P.parent_name||"None"]}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Address: ",P.address?JSON.stringify(P.address):"N/A"]}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Client: ",P.client_name||"N/A"]}),r.jsx(I,{size:"sm",variant:"link",className:"text-blue-400 hover:text-blue-300 p-0 mt-2 text-xs",onClick:()=>{_(P),C(!0)},children:"View Details"})]})]},P.id))})})]})}),r.jsx(oe,{value:"regional_dashboard",children:r.jsx(bh,{title:"Regional Dashboard",parentTypeForSelection:"region",childTypeToDisplay:"site",allSites:t,loading:l,selectedParent:b,setSelectedParent:j,getDashboardData:N})}),r.jsx(oe,{value:"national_dashboard",children:r.jsx(bh,{title:"National Dashboard",parentTypeForSelection:"national",childTypeToDisplay:"region",allSites:t,loading:l,selectedParent:b,setSelectedParent:j,getDashboardData:N})}),r.jsx(oe,{value:"global_dashboard",children:r.jsx(bh,{title:"Global Dashboard",parentTypeForSelection:"global",childTypeToDisplay:"national",allSites:t,loading:l,selectedParent:b,setSelectedParent:j,getDashboardData:N})})]}),r.jsx(fS,{isOpen:E,onClose:()=>{C(!1),_(null)},entity:S})]})},pS=({employee:e=null,onClose:t,onSuccess:s,staffType:n="security"})=>{var q;const[a,i]=f.useState({name:"",role:"",type:"Standard Officer",site:"",status:"Active",compliance:100,certifications:"",email:"",phone:"",hire_date:new Date().toISOString().split("T")[0],department_id:null,supervisor_id:null,notes:""}),[o,l]=f.useState(!1),[c,d]=f.useState([]),[u,h]=f.useState(!1),[m,g]=f.useState([]),[x,y]=f.useState(!1),[w,p]=f.useState(!1),[v,b]=f.useState(""),[j,S]=f.useState(!1),[_,E]=f.useState([]),[C,O]=f.useState(!1),{toast:A}=ce(),R=!!e,T=f.useCallback(async()=>{h(!0);try{const{data:L,error:J}=await $.from("sites").select(`
          id, 
          name, 
          type, 
          parent_id
        `);if(J)throw J;const ne=[...new Set(L.map(pe=>pe.parent_id).filter(pe=>pe!==null))];let re=[];if(ne.length>0){const{data:pe,error:le}=await $.from("sites").select("id, name").in("id",ne);le||(re=pe||[])}const Ne=L.map(pe=>{var le;return{...pe,parent_name:pe.parent_id&&((le=re.find(Se=>Se.id===pe.parent_id))==null?void 0:le.name)||null}});d(Ne)}catch(L){A({variant:"destructive",title:"Error fetching sites",description:L.message})}finally{h(!1)}},[A]),D=f.useCallback(async()=>{y(!0);try{const{data:L,error:J}=await cS();if(J)throw J;g(L||[])}catch(L){A({variant:"destructive",title:"Error fetching departments",description:L.message})}finally{y(!1)}},[A]),N=f.useCallback(async()=>{O(!0);try{const{data:L,error:J}=await PI(e==null?void 0:e.id);if(J)throw J;E(L||[])}catch(L){A({variant:"destructive",title:"Error fetching supervisors",description:L.message})}finally{O(!1)}},[A,e==null?void 0:e.id]);f.useEffect(()=>{T(),D(),N()},[T,D,N]),f.useEffect(()=>{e&&i({name:e.name||"",role:e.role||"",type:e.type||"Standard Officer",site:e.site||"",status:e.status||"Active",compliance:e.compliance||100,certifications:Array.isArray(e.certifications)?e.certifications.join(", "):e.certifications||"",email:e.email||"",phone:e.phone||"",hire_date:e.hire_date||new Date().toISOString().split("T")[0],department_id:e.department_id||null,supervisor_id:e.supervisor_id||null,notes:e.notes||""})},[e]),f.useEffect(()=>{const L=J=>{j&&!J.target.closest(".supervisor-dropdown")&&S(!1)};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[j]);const k=(L,J)=>{i(ne=>({...ne,[L]:J}))},P=L=>{if(L==="add_new")p(!0),b("");else{p(!1);const J=m.find(ne=>ne.name===L);i(ne=>({...ne,department_id:J?J.id:null}))}},U=async()=>{if(v.trim())try{const{data:L,error:J}=await dS({name:v.trim(),description:`Department for ${v.trim()}`,is_active:!0});if(J)throw J;g(ne=>[...ne,L]),i(ne=>({...ne,department_id:L.id})),p(!1),b(""),A({title:"Department Created",description:`${v.trim()} has been added successfully.`,variant:"default"})}catch(L){console.error("Error creating department:",L),A({title:"Error",description:"Failed to create department. Please try again.",variant:"destructive"})}},M=async L=>{L.preventDefault(),l(!0);try{const J=II(a);if(!J.isValid)throw new Error(J.errors.join(", "));const ne={...a,certifications:a.certifications.split(",").map(pe=>pe.trim()).filter(pe=>pe.length>0)};let re;if(R?re=n==="entity"?await ld(e.id,ne):await cd(e.id,ne):re=n==="entity"?await kI(ne):await uS(ne),re.error)throw re.error;const Ne=n==="entity"?"Entity Staff":"Security Staff";A({title:R?`${Ne} Updated`:`${Ne} Added`,description:`${a.name} has been ${R?"updated":"added"} successfully.`,variant:"default"}),s==null||s(re.data),t()}catch(J){console.error("Error saving employee:",J);const ne=n==="entity"?"Entity Staff":"Security Staff";A({title:"Error",description:J.message||`Failed to save ${ne.toLowerCase()}. Please try again.`,variant:"destructive"})}finally{l(!1)}},F=Object.keys(n==="entity"?lS:vx);return r.jsx(Et,{children:r.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:L=>L.stopPropagation(),children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[R?r.jsx(Ns,{className:"w-5 h-5 text-blue-400"}):r.jsx(Fj,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:R?`Edit ${n==="entity"?"Entity Staff":"Security Staff"}`:`Add New ${n==="entity"?"Entity Staff":"Security Staff"}`})]}),r.jsx(I,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Bt,{className:"w-4 h-4"})})]}),r.jsx(V,{children:r.jsxs("form",{onSubmit:M,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"name",className:"text-white",children:"Full Name"}),r.jsx(ee,{id:"name",value:a.name,onChange:L=>k("name",L.target.value),placeholder:"Enter full name",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"role",className:"text-white",children:"Role"}),r.jsx(ee,{id:"role",value:a.role,onChange:L=>k("role",L.target.value),placeholder:"Security Officer",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"department",className:"text-white",children:"Department"}),w?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:v,onChange:L=>b(L.target.value),placeholder:"Enter new department name",className:"bg-slate-700/50 border-slate-600 text-white",onKeyPress:L=>{L.key==="Enter"&&(L.preventDefault(),U())}}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(I,{type:"button",size:"sm",onClick:U,className:"bg-green-600 hover:bg-green-700 text-xs",children:"Add Department"}),r.jsx(I,{type:"button",size:"sm",variant:"outline",onClick:()=>{p(!1),b("")},className:"border-slate-600 text-slate-300 hover:bg-slate-700 text-xs",children:"Cancel"})]})]}):r.jsxs(be,{value:a.department_id&&((q=m.find(L=>L.id===a.department_id))==null?void 0:q.name)||"",onValueChange:P,disabled:x,children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:x?"Loading departments...":"Select department or add new..."})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[m.map(L=>r.jsx(Z,{value:L.name,className:"text-white",children:L.name},L.id)),r.jsx(Z,{value:"add_new",className:"text-blue-400 font-medium",children:"+ Add New Department"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"supervisor",className:"text-white",children:"Supervisor"}),r.jsxs("div",{className:"relative supervisor-dropdown",children:[r.jsxs("div",{onClick:()=>S(!j),className:"flex items-center justify-between w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg cursor-pointer hover:bg-slate-700/70",children:[r.jsx("div",{className:"flex flex-wrap gap-1",children:a.supervisor_id?(()=>{const L=_.find(J=>J.id===a.supervisor_id);return L?r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-600/20 text-green-300 text-xs rounded border border-green-500/30",children:[L.name," (",L.role,")",r.jsx("button",{onClick:J=>{J.stopPropagation(),i(ne=>({...ne,supervisor_id:null}))},className:"ml-1 text-green-400 hover:text-green-300",children:""})]}):r.jsx("span",{className:"text-slate-400",children:"Supervisor not found"})})():r.jsx("span",{className:"text-slate-400",children:"Select supervisor..."})}),r.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:_.map(L=>r.jsxs("div",{onClick:()=>{i(J=>({...J,supervisor_id:L.id})),S(!1)},className:`p-3 cursor-pointer hover:bg-slate-700 ${a.supervisor_id===L.id?"bg-green-600/20 text-green-300":"text-white"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{children:[L.name," (",L.role,")"]}),a.supervisor_id===L.id&&r.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:L.type})]},L.id))})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Select the supervisor this person reports to"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Y,{htmlFor:"type",className:"text-white",children:[n==="entity"?"Entity Staff":"Security Staff"," Type"]}),r.jsxs(be,{value:a.type,onValueChange:L=>k("type",L),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:`Select ${n==="entity"?"entity staff":"security staff"} type`})}),r.jsx(ye,{className:"bg-slate-800 border-slate-600",children:F.map(L=>r.jsx(Z,{value:L,className:"text-white",children:L},L))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"site",className:"text-white",children:"Site"}),r.jsxs(be,{value:a.site,onValueChange:L=>k("site",L),disabled:u,children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:u?"Loading sites...":"Select site..."})}),r.jsx(ye,{className:"bg-slate-800 border-slate-600",children:c.map(L=>r.jsx(Z,{value:L.name,className:"text-white",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{children:[L.name," (",L.type,")"]}),L.parent_name&&r.jsxs("span",{className:"text-xs text-slate-400",children:["Parent: ",L.parent_name]})]})},L.id))})]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Select the primary site for this staff member"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"email",className:"text-white",children:"Email"}),r.jsx(ee,{id:"email",type:"email",value:a.email,onChange:L=>k("email",L.target.value),placeholder:"employee@gs3.com",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"phone",className:"text-white",children:"Phone"}),r.jsx(ee,{id:"phone",value:a.phone,onChange:L=>k("phone",L.target.value),placeholder:"+1-555-0123",className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(be,{value:a.status,onValueChange:L=>k("status",L),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"Active",className:"text-white",children:"Active"}),r.jsx(Z,{value:"Inactive",className:"text-white",children:"Inactive"}),r.jsx(Z,{value:"On Leave",className:"text-white",children:"On Leave"}),r.jsx(Z,{value:"Terminated",className:"text-white",children:"Terminated"}),r.jsx(Z,{value:"Archived",className:"text-white",children:"Archived"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"compliance",className:"text-white",children:"Compliance Score (%)"}),r.jsx(ee,{id:"compliance",type:"number",min:"0",max:"100",value:a.compliance,onChange:L=>k("compliance",parseInt(L.target.value)||0),className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"hire_date",className:"text-white",children:"Hire Date"}),r.jsx(ee,{id:"hire_date",type:"date",value:a.hire_date,onChange:L=>k("hire_date",L.target.value),className:"bg-slate-700/50 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"certifications",className:"text-white",children:"Certifications"}),r.jsx(mt,{id:"certifications",value:a.certifications,onChange:L=>k("certifications",L.target.value),placeholder:"Basic Security, First Aid, Firearms (comma-separated)",className:"bg-slate-700/50 border-slate-600 text-white min-h-[80px]"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Enter certifications separated by commas"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"notes",className:"text-white",children:"Notes & Comments"}),r.jsx(mt,{id:"notes",value:a.notes,onChange:L=>k("notes",L.target.value),placeholder:"Add any notes, comments, or observations about this employee...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Optional notes for internal reference"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(I,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"}),r.jsx(I,{type:"submit",disabled:o,className:"bg-blue-600 hover:bg-blue-700",children:o?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ss,{className:"w-4 h-4"}),r.jsxs("span",{children:[R?"Update":"Save"," ",n==="entity"?"Entity Staff":"Security Staff"]})]})})]})]})})]})})})})},xS=({employee:e,onClose:t,onUpdate:s,staffType:n="security"})=>{const[a,i]=f.useState(!1),{toast:o}=ce(),l=async()=>{if(window.confirm(`Are you sure you want to archive ${e.name}? They will be moved to the archive.`))try{const g=n==="entity"?ld:cd,{error:x}=await g(e.id,{...e,status:"Archived"});if(x)throw x;o({title:"Employee Archived",description:`${e.name} has been moved to the archive.`,variant:"default"}),s==null||s({...e,status:"Archived"}),t()}catch(g){console.error("Error archiving employee:",g),o({title:"Error",description:"Failed to archive employee.",variant:"destructive"})}},c=async()=>{try{const g=n==="entity"?ld:cd,{error:x}=await g(e.id,{...e,status:"Active"});if(x)throw x;o({title:"Employee Restored",description:`${e.name} has been restored to active status.`,variant:"default"}),s==null||s({...e,status:"Active"}),t()}catch(g){console.error("Error restoring employee:",g),o({title:"Error",description:"Failed to restore employee.",variant:"destructive"})}},d=g=>{switch(g){case"Active":return"bg-green-500/20 text-green-400 border-green-500/30";case"Inactive":return"bg-red-500/20 text-red-400 border-red-500/30";case"On Leave":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"Terminated":return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"Archived":return"bg-purple-500/20 text-purple-400 border-purple-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},u=g=>g>=95?"text-green-400":g>=85?"text-yellow-400":"text-red-400",h=g=>g>=95?r.jsx(ze,{className:"w-4 h-4 text-green-400"}):g>=85?r.jsx(gr,{className:"w-4 h-4 text-yellow-400"}):r.jsx(gr,{className:"w-4 h-4 text-red-400"}),m=g=>{s==null||s(g),i(!1),o({title:"Employee Updated",description:`${g.name} has been updated successfully.`,variant:"default"})};return a?r.jsx(pS,{employee:e,onClose:()=>i(!1),onSuccess:m,staffType:n}):r.jsx(Et,{children:r.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:g=>g.stopPropagation(),children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Fn,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Employee Profile"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>i(!0),className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[r.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsx(I,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Bt,{className:"w-4 h-4"})})]})]}),r.jsxs(V,{className:"space-y-6",children:[r.jsx("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xl font-bold",children:e.name.split(" ").map(g=>g[0]).join("")}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:e.name}),r.jsx("p",{className:"text-gray-400",children:e.role}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[r.jsx(Ve,{className:d(e.status),children:e.status}),r.jsxs("div",{className:"flex items-center space-x-1",children:[h(e.compliance),r.jsxs("span",{className:`text-sm font-medium ${u(e.compliance)}`,children:[e.compliance,"% Compliant"]})]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsx(G,{className:"text-white text-lg",children:"Contact Information"})}),r.jsxs(V,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Qa,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-gray-300",children:e.email})]}),e.phone&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Gn,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-gray-300",children:e.phone})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(gt,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-gray-300",children:e.entities&&e.entities.length>0?e.entities.map((g,x)=>{var y;return r.jsxs("span",{className:"inline-flex items-center",children:[((y=g.sites)==null?void 0:y.name)||"Unknown Entity",g.is_primary&&r.jsx(Ve,{className:"ml-2 bg-green-500/20 text-green-400 border-green-500/30 text-xs",children:"Primary"}),x<e.entities.length-1&&r.jsx("span",{className:"mx-1",children:", "})]},g.site_id)}):e.site||"No entities assigned"})]}),e.supervisor_name&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Fn,{className:"w-4 h-4 text-purple-400"}),r.jsxs("span",{className:"text-gray-300",children:["Reports to: ",r.jsx("span",{className:"text-purple-300 font-medium",children:e.supervisor_name}),e.supervisor_role&&r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",e.supervisor_role,")"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ls,{className:"w-4 h-4 text-blue-400"}),r.jsxs("span",{className:"text-gray-300",children:["Hired: ",new Date(e.hire_date).toLocaleDateString()]})]})]})]}),r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsx(G,{className:"text-white text-lg",children:"Employment Details"})}),r.jsxs(V,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Employee Type:"}),r.jsx(Ve,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:e.type})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Compliance Score:"}),r.jsxs("span",{className:`font-semibold ${u(e.compliance)}`,children:[e.compliance,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Status:"}),r.jsx(Ve,{className:d(e.status),children:e.status})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Certifications:"}),r.jsx("span",{className:"text-white font-medium",children:Array.isArray(e.certifications)?e.certifications.length:0})]})]})]})]}),e.certifications&&e.certifications.length>0&&r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"text-white text-lg flex items-center space-x-2",children:[r.jsx(Ke,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Certifications & Training"})]})}),r.jsx(V,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Array.isArray(e.certifications)?e.certifications.map((g,x)=>r.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg bg-slate-700/50",children:[r.jsx(ze,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-white text-sm",children:g})]},x)):r.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg bg-slate-700/50",children:[r.jsx(ze,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-white text-sm",children:e.certifications})]})})})]}),e.notes&&r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"text-white text-lg flex items-center space-x-2",children:[r.jsx(Fn,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Notes & Comments"})]})}),r.jsx(V,{children:r.jsx("div",{className:"p-4 rounded-lg bg-slate-700/50 border border-slate-600",children:r.jsx("p",{className:"text-white whitespace-pre-wrap",children:e.notes})})})]}),r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsx(G,{className:"text-white text-lg",children:"Quick Actions"})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs(I,{variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>o({title:"Feature coming soon",description:"Training management will be available soon."}),children:[r.jsx(rt,{className:"w-4 h-4 mr-2"}),"Manage Training"]}),r.jsxs(I,{variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>o({title:"Feature coming soon",description:"Schedule management will be available soon."}),children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),"View Schedule"]}),r.jsxs(I,{variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>o({title:"Feature coming soon",description:"Performance tracking will be available soon."}),children:[r.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Performance Review"]}),e.status==="Archived"?r.jsxs(I,{onClick:c,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(xa,{className:"w-4 h-4 mr-2"}),"Restore"]}):r.jsxs(I,{variant:"outline",onClick:l,className:"border-purple-600 text-purple-300 hover:bg-purple-700/20",children:[r.jsx(Hc,{className:"w-4 h-4 mr-2"}),"Archive"]})]})})]})]})]})})})})},GI=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(""),[o,l]=f.useState(!0);f.useState(null);const[c,d]=f.useState(null),[u,h]=f.useState(null),[m,g]=f.useState(!1),[x,y]=f.useState(null),{toast:w}=ce();f.useEffect(()=>{p(),v(),b()},[]),f.useEffect(()=>{if(a.trim()==="")n(e);else{const T=e.filter(D=>D.name.toLowerCase().includes(a.toLowerCase())||D.role.toLowerCase().includes(a.toLowerCase())||D.site.toLowerCase().includes(a.toLowerCase()));n(T)}},[a,e]);const p=async()=>{l(!0);try{const{data:T,error:D}=await yx();if(D)throw D;if(t(T||[]),!T||T.length===0){const{data:N}=await MI();N&&t(N)}}catch(T){console.error("Error loading entity staff:",T),w({title:"Error",description:"Failed to load entity staff. Please try again.",variant:"destructive"})}finally{l(!1)}},v=async()=>{try{const{data:T,error:D}=await $I();if(D)throw D;d(T)}catch(T){console.error("Error loading background stats:",T)}},b=async()=>{try{const{data:T,error:D}=await LI();if(D)throw D;h(T)}catch(T){console.error("Error loading onboarding stats:",T)}},j=()=>{g(!0)},S=T=>{y(T)},_=T=>{t(D=>D.map(N=>N.id===T.id?T:N)),y(null),v(),b()},E=T=>{t(D=>[T,...D]),g(!1),v(),b()},C=Object.entries(lS).map(([T,D])=>{const N=e.filter(k=>k.type===T).length;return{type:T,description:D.description,requirements:D.requirements,count:N,icon:D.icon==="Shield"?Ke:D.icon==="Users"?xe:D.icon==="Star"?Ct:D.icon==="Briefcase"?vs:D.icon==="GraduationCap"?rt:Ke}}),O="bg-transparent p-0 space-x-1",A="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",R="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(xe,{className:"w-8 h-8 mr-3 text-blue-400"}),"Entity Staff Management"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage entity personnel, credentials, and compliance efficiently."})]}),r.jsxs(I,{onClick:j,className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add Employee"]})]}),r.jsxs(Ot,{defaultValue:"employees",className:"space-y-6",children:[r.jsxs(bt,{className:`${O} border-b border-slate-700`,children:[r.jsx(ae,{value:"employees",className:`${A} ${R}`,children:"Entity Staff"}),r.jsx(ae,{value:"types",className:`${A} ${R}`,children:"Employee Types"}),r.jsx(ae,{value:"background",className:`${A} ${R}`,children:"Background Checks"}),r.jsx(ae,{value:"onboarding",className:`${A} ${R}`,children:"Onboarding"})]}),r.jsx(oe,{value:"employees",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(xe,{className:"w-5 h-5 text-blue-400"}),r.jsxs("span",{children:["Active Entity Staff (",s.length,")"]})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search entity staff...",value:a,onChange:T=>i(T.target.value),className:"pl-10 w-full sm:w-80 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]})}),r.jsx(V,{children:o?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(ft,{className:"w-8 h-8 animate-spin text-blue-400"}),r.jsx("span",{className:"ml-3 text-gray-400",children:"Loading entity staff..."})]}):s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(xe,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400 mb-2",children:a?"No entity staff found matching your search.":"No entity staff found."}),!a&&r.jsxs(I,{onClick:j,className:"mt-4",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add First Entity Staff"]})]}):r.jsx("div",{className:"space-y-4",children:s.map(T=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer",onClick:()=>S(T),children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold text-lg",children:T.name}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.type==="Operations Management"?"bg-purple-500/20 text-purple-400":T.type==="Supervisor"?"bg-blue-500/20 text-blue-400":T.type==="Consultant"?"bg-green-500/20 text-green-400":T.type==="Dual-Role Hybrid"?"bg-orange-500/20 text-orange-400":"bg-gray-500/20 text-gray-400"}`,children:T.type}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${T.compliance>=95?"bg-green-500":T.compliance>=85?"bg-yellow-500":"bg-red-500"}`}),r.jsxs("span",{className:"text-xs text-gray-400",children:[T.compliance,"% Compliant"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsx("span",{children:T.role}),r.jsx("span",{children:""}),r.jsx("span",{children:T.site}),r.jsx("span",{children:""}),r.jsxs("span",{children:[Array.isArray(T.certifications)?T.certifications.length:0," Certs"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:`text-sm font-medium ${T.status==="Active"?"text-green-400":"text-red-400"}`,children:T.status}),r.jsx(I,{variant:"outline",size:"sm",onClick:D=>{D.stopPropagation(),S(T)},className:"ios-button border-slate-600 hover:bg-slate-700",children:"View Profile"})]})]})},T.id))})})]})}),r.jsx(oe,{value:"types",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsx(G,{className:"text-white",children:"Entity Staff Role Definitions"}),r.jsx(he,{className:"text-gray-400",children:"Overview of different entity staff types and their requirements."})]}),r.jsx(V,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map((T,D)=>r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:D*.05},children:r.jsxs(B,{className:"ios-card h-full hover-lift",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center justify-between text-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(T.icon,{className:"w-6 h-6 text-blue-400"}),r.jsx("span",{className:"text-lg",children:T.type})]}),r.jsx("span",{className:"text-2xl font-bold text-blue-400",children:T.count})]})}),r.jsxs(V,{children:[r.jsx("p",{className:"text-gray-400 text-sm mb-3 h-12 overflow-hidden",children:T.description}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("h4",{className:"text-white font-medium text-xs",children:"Key Requirements:"}),T.requirements.slice(0,2).map((N,k)=>r.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-400",children:[r.jsx(ln,{className:"w-3 h-3 text-green-400 flex-shrink-0"}),r.jsx("span",{children:N})]},k)),T.requirements.length>2&&r.jsx("p",{className:"text-xs text-slate-500",children:"...and more"})]})]})]})},T.type))})})]})}),r.jsx(oe,{value:"background",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ke,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Background Check & Credentialing"})]}),r.jsx(he,{className:"text-gray-400",children:"System for managing employee vetting and credentials."})]}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4 p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Background Check Components"}),["Criminal History Verification","Employment History Verification","Education Verification","Reference Checks","Credit History (if applicable)","Drug Screening","Security Clearance"].map((T,D)=>r.jsxs("div",{className:"flex items-center space-x-2 p-2.5 rounded-md bg-slate-700/50",children:[r.jsx(Dd,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-white text-sm",children:T})]},D))]}),r.jsxs("div",{className:"space-y-4 p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Credentialing Status"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-green-500/10",children:[r.jsx("span",{className:"text-white",children:"Completed Checks"}),r.jsx("span",{className:"text-green-400 font-semibold",children:c?c.completedChecks:"..."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-yellow-500/10",children:[r.jsx("span",{className:"text-white",children:"In Progress"}),r.jsx("span",{className:"text-yellow-400 font-semibold",children:c?c.inProgress:"..."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-red-500/10",children:[r.jsx("span",{className:"text-white",children:"Pending Review"}),r.jsx("span",{className:"text-red-400 font-semibold",children:c?c.pendingReview:"..."})]})]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Total Entity Staff: ",c?c.totalEmployees:"..."]}),r.jsx(I,{variant:"outline",className:"w-full mt-4 glass-button",onClick:()=>w({title:" Feature Not Implemented"}),children:"Manage Credentials"})]})]})})]})}),r.jsx(oe,{value:"onboarding",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(rt,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Onboarding & Qualification System"})]}),r.jsx(he,{className:"text-gray-400",children:"Streamlined process for new hires."})]}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-500/10",children:[r.jsx(Ct,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"New Hires"}),r.jsx("p",{className:"text-2xl font-bold text-blue-400",children:u?u.newHires:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"This Month"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-yellow-500/10",children:[r.jsx(nt,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"In Training"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:u?u.inTraining:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Active"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-500/10",children:[r.jsx(ln,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"Qualified"}),r.jsx("p",{className:"text-2xl font-bold text-green-400",children:u?u.qualified:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Ready for Duty"})]})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold mb-3",children:"Onboarding Process Steps"}),r.jsx("div",{className:"space-y-3",children:["Document Collection & Verification","Background Check Completion","Basic Security Training","Site-Specific Training","Equipment Assignment","Supervisor Introduction","First Week Mentoring"].map((T,D)=>r.jsxs("div",{className:"flex items-center space-x-3 p-2.5 rounded-md bg-slate-700/50",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-semibold flex-shrink-0",children:D+1}),r.jsx("span",{className:"text-white text-sm",children:T})]},D))})]})]})})]})})]}),m&&r.jsx(pS,{onClose:()=>g(!1),onSuccess:E,staffType:"entity"}),x&&r.jsx(xS,{employee:x,onClose:()=>y(null),onUpdate:_,staffType:"entity"})]})},iv=({securityStaff:e=null,onClose:t,onSuccess:s})=>{const[n,a]=f.useState({name:"",role:"",type:"",entities:[],department:"",status:"Active",compliance:100,certifications:"",email:"",phone:"",hire_date:new Date().toISOString().split("T")[0],notes:"",supervisor_ids:[],security_company_id:null}),[i,o]=f.useState(!1),[l,c]=f.useState([]),[d,u]=f.useState(!1),[h,m]=f.useState([]),[g,x]=f.useState(!1),[y,w]=f.useState(!1),[p,v]=f.useState(""),[b,j]=f.useState(!1),[S,_]=f.useState(!1),[E,C]=f.useState(!1),[O,A]=f.useState([]),[R,T]=f.useState(!1),[D,N]=f.useState([]),[k,P]=f.useState(!1),{toast:U}=ce(),M=!!e,F=()=>{if(!n.security_company_id)return;const H=D.find(X=>X.id===n.security_company_id);return H?`${H.company_name} - ${H.service_specialization}`:void 0},q=f.useCallback(async()=>{u(!0);try{const{data:H,error:X}=await $.from("sites").select(`
          id, 
          name, 
          type, 
          parent_id
        `);if(X)throw X;const ie=[...new Set(H.map(Te=>Te.parent_id).filter(Te=>Te!==null))];let me=[];if(ie.length>0){const{data:Te,error:zt}=await $.from("sites").select("id, name").in("id",ie);zt||(me=Te||[])}const Ze=H.map(Te=>{var zt;return{...Te,parent_name:Te.parent_id&&((zt=me.find(vn=>vn.id===Te.parent_id))==null?void 0:zt.name)||null}});c(Ze)}catch(H){U({variant:"destructive",title:"Error fetching sites",description:H.message})}finally{u(!1)}},[U]),L=f.useCallback(async()=>{x(!0);try{const{data:H,error:X}=await cS();if(X)throw X;m(H||[])}catch(H){U({variant:"destructive",title:"Error fetching departments",description:H.message})}finally{x(!1)}},[U]),J=f.useCallback(async()=>{T(!0);try{const{data:H,error:X}=await UI(e==null?void 0:e.id);if(X)throw X;A(H||[])}catch(H){U({variant:"destructive",title:"Error fetching supervisors",description:H.message})}finally{T(!1)}},[U,e==null?void 0:e.id]),ne=f.useCallback(async()=>{P(!0);try{const{data:H,error:X}=await zI();if(X)throw X;N(H||[])}catch(H){U({variant:"destructive",title:"Error fetching security companies",description:H.message})}finally{P(!1)}},[U]);f.useEffect(()=>{q(),L(),J(),ne()},[q,L,J,ne]),f.useEffect(()=>{var H,X;e&&a({name:e.name||"",role:e.role||"",type:e.type||"",entities:((H=e.entities)==null?void 0:H.map(ie=>ie.site_id))||[],department:((X=e.departments)==null?void 0:X.name)||"",status:e.status||"Active",compliance:e.compliance||100,certifications:Array.isArray(e.certifications)?e.certifications.join(", "):e.certifications||"",email:e.email||"",phone:e.phone||"",hire_date:e.hire_date||new Date().toISOString().split("T")[0],notes:e.notes||"",supervisor_ids:e.supervisor_ids||[e.supervisor_id].filter(Boolean)||[],security_company_id:e.security_company_id||null})},[e]),f.useEffect(()=>{const H=X=>{b&&!X.target.closest(".entity-dropdown")&&j(!1),S&&!X.target.closest(".supervisor-dropdown")&&_(!1),E&&!X.target.closest(".security-company-dropdown")&&C(!1)};return document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[b,S,E]);const re=(H,X)=>{a(ie=>({...ie,[H]:X}))},Ne=H=>{H==="add_new"?(w(!0),v("")):(w(!1),a(X=>({...X,department:H})))},pe=async()=>{if(p.trim())try{const{data:H,error:X}=await dS({name:p.trim(),description:`Department for ${p.trim()}`,is_active:!0});if(X)throw X;m(ie=>[...ie,H]),a(ie=>({...ie,department:H.name})),w(!1),v(""),U({title:"Department Created",description:`${p.trim()} has been added successfully.`,variant:"default"})}catch(H){console.error("Error creating department:",H),U({title:"Error",description:"Failed to create department. Please try again.",variant:"destructive"})}},le=async H=>{H.preventDefault(),o(!0);try{const X=n.name.trim().split(" "),ie=X[0]||"",me=X.slice(1).join(" ")||"",Ze={first_name:ie,last_name:me,employee_id:`SEC${Date.now()}`,position:n.role,status:n.status,hire_date:n.hire_date,email:n.email,phone:n.phone,compliance_score:n.compliance,certifications:n.certifications.split(",").map(zt=>zt.trim()).filter(zt=>zt.length>0),notes:n.notes,supervisor_ids:n.supervisor_ids,security_company_id:n.security_company_id,entities:n.entities};let Te;if(M?Te=await cd(e.id,Ze):Te=await uS(Ze),Te.error)throw Te.error;U({title:M?"Security Staff Updated":"Security Staff Added",description:`${n.name} has been ${M?"updated":"added"} successfully.`,variant:"default"}),s==null||s(Te.data),t()}catch(X){console.error("Error saving security staff:",X),U({title:"Error",description:X.message||"Failed to save security staff. Please try again.",variant:"destructive"})}finally{o(!1)}},Se=Object.keys(vx);return r.jsx(Et,{children:r.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:H=>H.stopPropagation(),children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[M?r.jsx(Ns,{className:"w-5 h-5 text-blue-400"}):r.jsx(Fj,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:M?"Edit Security Staff":"Add New Security Staff"})]}),r.jsx(I,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Bt,{className:"w-4 h-4"})})]}),r.jsx(V,{children:r.jsxs("form",{onSubmit:le,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"name",className:"text-white",children:"Full Name"}),r.jsx(ee,{id:"name",value:n.name,onChange:H=>re("name",H.target.value),placeholder:"Enter full name",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"role",className:"text-white",children:"Role"}),r.jsx(ee,{id:"role",value:n.role,onChange:H=>re("role",H.target.value),placeholder:"Security Officer",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"department",className:"text-white",children:"Department"}),y?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:p,onChange:H=>v(H.target.value),placeholder:"Enter new department name",className:"bg-slate-700/50 border-slate-600 text-white",onKeyPress:H=>{H.key==="Enter"&&(H.preventDefault(),pe())}}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(I,{type:"button",size:"sm",onClick:pe,className:"bg-green-600 hover:bg-green-700 text-xs",children:"Add Department"}),r.jsx(I,{type:"button",size:"sm",variant:"outline",onClick:()=>{w(!1),v("")},className:"border-slate-600 text-slate-300 hover:bg-slate-700 text-xs",children:"Cancel"})]})]}):r.jsxs(be,{value:n.department,onValueChange:Ne,disabled:g,children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:g?"Loading departments...":"Select department or add new..."})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[h.map(H=>r.jsx(Z,{value:H.name,className:"text-white",children:H.name},H.id)),r.jsx(Z,{value:"add_new",className:"text-blue-400 font-medium",children:"+ Add New Department"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"security_company",className:"text-white",children:"Security Company"}),r.jsxs("div",{className:"relative security-company-dropdown",children:[r.jsxs("div",{onClick:()=>C(!E),className:"flex items-center justify-between w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg cursor-pointer hover:bg-slate-700/70",children:[r.jsx("div",{className:"flex flex-wrap gap-1",children:n.security_company_id?r.jsx("span",{className:"text-white",children:F()}):r.jsx("span",{className:"text-slate-400",children:"Select security company (optional)"})}),r.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),E&&r.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[r.jsx("div",{onClick:()=>{a(H=>({...H,security_company_id:null})),C(!1)},className:"p-3 cursor-pointer hover:bg-slate-700 text-white border-b border-slate-600",children:"No Security Company"}),D.map(H=>r.jsxs("div",{onClick:()=>{a(X=>({...X,security_company_id:H.id})),C(!1)},className:"p-3 cursor-pointer hover:bg-slate-700 text-white border-b border-slate-600 last:border-b-0",children:[r.jsx("div",{className:"text-sm",children:H.company_name}),r.jsx("div",{className:"text-xs text-gray-400",children:H.service_specialization})]},H.id))]})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Select the security company this person works for"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"supervisors",className:"text-white",children:"Supervisors"}),r.jsxs("div",{className:"relative supervisor-dropdown",children:[r.jsxs("div",{onClick:()=>_(!S),className:"flex items-center justify-between w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg cursor-pointer hover:bg-slate-700/70",children:[r.jsx("div",{className:"flex flex-wrap gap-1",children:n.supervisor_ids.length>0?n.supervisor_ids.map(H=>{const X=O.find(ie=>ie.id===H);return X?r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-600/20 text-green-300 text-xs rounded border border-green-500/30",children:[X.name," (",X.role,")",r.jsx("button",{onClick:ie=>{ie.stopPropagation(),a(me=>({...me,supervisor_ids:me.supervisor_ids.filter(Ze=>Ze!==H)}))},className:"ml-1 text-green-400 hover:text-green-300",children:""})]},H):null}):r.jsx("span",{className:"text-slate-400",children:"Select supervisors..."})}),r.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),S&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:O.map(H=>r.jsxs("div",{onClick:()=>{n.supervisor_ids.includes(H.id)?a(X=>({...X,supervisor_ids:X.supervisor_ids.filter(ie=>ie!==H.id)})):a(X=>({...X,supervisor_ids:[...X.supervisor_ids,H.id]}))},className:`p-3 cursor-pointer hover:bg-slate-700 ${n.supervisor_ids.includes(H.id)?"bg-green-600/20 text-green-300":"text-white"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{children:[H.name," (",H.role,")"]}),n.supervisor_ids.includes(H.id)&&r.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:H.type})]},H.id))})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Select the supervisors this person reports to"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"type",className:"text-white",children:"Security Staff Type"}),r.jsxs(be,{value:n.type,onValueChange:H=>re("type",H),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:"Select security staff type"})}),r.jsx(ye,{className:"bg-slate-800 border-slate-600",children:Se.map(H=>r.jsx(Z,{value:H,className:"text-white",children:H},H))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{className:"text-white",children:"Entities"}),r.jsxs("div",{className:"relative entity-dropdown",children:[r.jsxs("div",{onClick:()=>j(!b),className:"flex items-center justify-between w-full p-3 bg-slate-700/50 border border-slate-600 rounded-lg cursor-pointer hover:bg-slate-700/70",children:[r.jsx("div",{className:"flex flex-wrap gap-1",children:n.entities.length>0?n.entities.map(H=>{const X=l.find(ie=>ie.id===H);return X?r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-600/20 text-blue-300 text-xs rounded border border-blue-500/30",children:[X.name,r.jsx("button",{onClick:ie=>{ie.stopPropagation(),a(me=>({...me,entities:me.entities.filter(Ze=>Ze!==H)}))},className:"ml-1 text-blue-400 hover:text-blue-300",children:""})]},H):null}):r.jsx("span",{className:"text-slate-400",children:"Select entities..."})}),r.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:l.map(H=>r.jsxs("div",{onClick:()=>{n.entities.includes(H.id)?a(X=>({...X,entities:X.entities.filter(ie=>ie!==H.id)})):a(X=>({...X,entities:[...X.entities,H.id]}))},className:`flex items-center justify-between p-3 cursor-pointer hover:bg-slate-700/50 ${n.entities.includes(H.id)?"bg-blue-600/20":""}`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"text-white text-sm",children:[H.name," (",H.type,")"]}),H.parent_name&&r.jsxs("div",{className:"text-slate-400 text-xs",children:["Parent: ",H.parent_name]})]}),n.entities.includes(H.id)&&r.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},H.id))})]}),n.entities.length>0&&r.jsxs("div",{className:"text-xs text-slate-400",children:["Selected: ",n.entities.length," entity",n.entities.length!==1?"s":"",n.entities.length>1&&r.jsx("span",{className:"ml-2 text-blue-400",children:"(First selected will be primary)"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"email",className:"text-white",children:"Email"}),r.jsx(ee,{id:"email",type:"email",value:n.email,onChange:H=>re("email",H.target.value),placeholder:"employee@gs3.com",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"phone",className:"text-white",children:"Phone"}),r.jsx(ee,{id:"phone",value:n.phone,onChange:H=>re("phone",H.target.value),placeholder:"+1-555-0123",className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(be,{value:n.status,onValueChange:H=>re("status",H),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"Active",className:"text-white",children:"Active"}),r.jsx(Z,{value:"Inactive",className:"text-white",children:"Inactive"}),r.jsx(Z,{value:"On Leave",className:"text-white",children:"On Leave"}),r.jsx(Z,{value:"Terminated",className:"text-white",children:"Terminated"}),r.jsx(Z,{value:"Archived",className:"text-white",children:"Archived"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"compliance",className:"text-white",children:"Compliance Score (%)"}),r.jsx(ee,{id:"compliance",type:"number",min:"0",max:"100",value:n.compliance,onChange:H=>re("compliance",parseInt(H.target.value)||0),className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"hire_date",className:"text-white",children:"Hire Date"}),r.jsx(ee,{id:"hire_date",type:"date",value:n.hire_date,onChange:H=>re("hire_date",H.target.value),className:"bg-slate-700/50 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"certifications",className:"text-white",children:"Certifications"}),r.jsx(mt,{id:"certifications",value:n.certifications,onChange:H=>re("certifications",H.target.value),placeholder:"Basic Security, First Aid, Firearms (comma-separated)",className:"bg-slate-700/50 border-slate-600 text-white min-h-[80px]"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Enter certifications separated by commas"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"notes",className:"text-white",children:"Notes & Comments"}),r.jsx(mt,{id:"notes",value:n.notes,onChange:H=>re("notes",H.target.value),placeholder:"Add any notes, comments, or observations about this employee...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Optional notes for internal reference"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(I,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"}),r.jsx(I,{type:"submit",disabled:i,className:"bg-blue-600 hover:bg-blue-700",children:i?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ss,{className:"w-4 h-4"}),r.jsxs("span",{children:[M?"Update":"Save"," Security Staff"]})]})})]})]})})]})})})})},KI=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(""),[o,l]=f.useState(!0);f.useState(null);const[c,d]=f.useState(null),[u,h]=f.useState(null),[m,g]=f.useState(!1),[x,y]=f.useState(null),{toast:w}=ce();f.useEffect(()=>{p(),v(),b()},[]),f.useEffect(()=>{const T=e.filter(D=>D.status!=="Archived");if(a.trim()==="")n(T);else{const D=T.filter(N=>N.name.toLowerCase().includes(a.toLowerCase())||N.role.toLowerCase().includes(a.toLowerCase())||N.site.toLowerCase().includes(a.toLowerCase()));n(D)}},[a,e]);const p=async()=>{l(!0);try{const{data:T,error:D}=await hS();if(D)throw D;if(t(T||[]),!T||T.length===0){const{data:N}=await FI();N&&t(N)}}catch(T){console.error("Error loading security staff:",T),w({title:"Error",description:"Failed to load security staff. Please try again.",variant:"destructive"})}finally{l(!1)}},v=async()=>{try{const{data:T,error:D}=await VI();if(D)throw D;d(T)}catch(T){console.error("Error loading background stats:",T)}},b=async()=>{try{const{data:T,error:D}=await BI();if(D)throw D;h(T)}catch(T){console.error("Error loading onboarding stats:",T)}},j=()=>{g(!0)},S=T=>{y(T)},_=T=>{t(D=>D.map(N=>N.id===T.id?T:N)),y(null),v(),b()},E=T=>{t(D=>[T,...D]),g(!1),v(),b()},C=Object.entries(vx).map(([T,D])=>{const N=e.filter(k=>k.type===T).length;return{type:T,description:D.description,requirements:D.requirements,count:N,icon:D.icon==="Shield"?Ke:D.icon==="Users"?xe:D.icon==="Star"?Ct:D.icon==="Briefcase"?vs:D.icon==="GraduationCap"?rt:Ke}}),O="bg-transparent p-0 space-x-1",A="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",R="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(xe,{className:"w-8 h-8 mr-3 text-blue-400"}),"Security Staff Management"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage security personnel, credentials, and compliance efficiently."})]}),r.jsxs(I,{onClick:j,className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add Security Staff"]})]}),r.jsxs(Ot,{defaultValue:"employees",className:"space-y-6",children:[r.jsxs(bt,{className:`${O} border-b border-slate-700`,children:[r.jsx(ae,{value:"employees",className:`${A} ${R}`,children:"Security Staff"}),r.jsx(ae,{value:"types",className:`${A} ${R}`,children:"Employee Types"}),r.jsx(ae,{value:"background",className:`${A} ${R}`,children:"Background Checks"}),r.jsx(ae,{value:"onboarding",className:`${A} ${R}`,children:"Onboarding"})]}),r.jsx(oe,{value:"employees",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(xe,{className:"w-5 h-5 text-blue-400"}),r.jsxs("span",{children:["Active Security Staff (",s.length,")"]})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search security staff...",value:a,onChange:T=>i(T.target.value),className:"pl-10 w-full sm:w-80 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]})}),r.jsx(V,{children:o?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(ft,{className:"w-8 h-8 animate-spin text-blue-400"}),r.jsx("span",{className:"ml-3 text-gray-400",children:"Loading security staff..."})]}):s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(xe,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400 mb-2",children:a?"No security staff found matching your search.":"No security staff found."}),!a&&r.jsxs(I,{onClick:j,className:"mt-4",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add First Security Staff"]})]}):r.jsx("div",{className:"space-y-4",children:s.map(T=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer",onClick:()=>S(T),children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold text-lg",children:T.name}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.type==="Operations Management"?"bg-purple-500/20 text-purple-400":T.type==="Supervisor"?"bg-blue-500/20 text-blue-400":T.type==="Consultant"?"bg-green-500/20 text-green-400":T.type==="Dual-Role Hybrid"?"bg-orange-500/20 text-orange-400":"bg-gray-500/20 text-gray-400"}`,children:T.type}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${T.compliance>=95?"bg-green-500":T.compliance>=85?"bg-yellow-500":"bg-red-500"}`}),r.jsxs("span",{className:"text-xs text-gray-400",children:[T.compliance,"% Compliant"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsx("span",{children:T.role}),r.jsx("span",{children:""}),r.jsxs("span",{children:[T.primaryEntity||T.site||"No entity assigned",T.entities&&T.entities.length>1&&r.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["(+",T.entities.length-1," more)"]})]}),r.jsx("span",{children:""}),r.jsxs("span",{children:[Array.isArray(T.certifications)?T.certifications.length:0," Certs"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:`text-sm font-medium ${T.status==="Active"?"text-green-400":"text-red-400"}`,children:T.status}),r.jsx(I,{variant:"outline",size:"sm",onClick:D=>{D.stopPropagation(),S(T)},className:"ios-button border-slate-600 hover:bg-slate-700",children:"View Profile"})]})]})},T.id))})})]})}),r.jsx(oe,{value:"types",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsx(G,{className:"text-white",children:"Security Staff Role Definitions"}),r.jsx(he,{className:"text-gray-400",children:"Overview of different security staff types and their requirements."})]}),r.jsx(V,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map((T,D)=>r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:D*.05},children:r.jsxs(B,{className:"ios-card h-full hover-lift",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center justify-between text-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(T.icon,{className:"w-6 h-6 text-blue-400"}),r.jsx("span",{className:"text-lg",children:T.type})]}),r.jsx("span",{className:"text-2xl font-bold text-blue-400",children:T.count})]})}),r.jsxs(V,{children:[r.jsx("p",{className:"text-gray-400 text-sm mb-3 h-12 overflow-hidden",children:T.description}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("h4",{className:"text-white font-medium text-xs",children:"Key Requirements:"}),T.requirements.slice(0,2).map((N,k)=>r.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-400",children:[r.jsx(ln,{className:"w-3 h-3 text-green-400 flex-shrink-0"}),r.jsx("span",{children:N})]},k)),T.requirements.length>2&&r.jsx("p",{className:"text-xs text-slate-500",children:"...and more"})]})]})]})},T.type))})})]})}),r.jsx(oe,{value:"background",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ke,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Background Check & Credentialing"})]}),r.jsx(he,{className:"text-gray-400",children:"System for managing employee vetting and credentials."})]}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4 p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Background Check Components"}),["Criminal History Verification","Employment History Verification","Education Verification","Reference Checks","Credit History (if applicable)","Drug Screening","Security Clearance"].map((T,D)=>r.jsxs("div",{className:"flex items-center space-x-2 p-2.5 rounded-md bg-slate-700/50",children:[r.jsx(Dd,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-white text-sm",children:T})]},D))]}),r.jsxs("div",{className:"space-y-4 p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Credentialing Status"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-green-500/10",children:[r.jsx("span",{className:"text-white",children:"Completed Checks"}),r.jsx("span",{className:"text-green-400 font-semibold",children:c?c.completedChecks:"..."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-yellow-500/10",children:[r.jsx("span",{className:"text-white",children:"In Progress"}),r.jsx("span",{className:"text-yellow-400 font-semibold",children:c?c.inProgress:"..."})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-red-500/10",children:[r.jsx("span",{className:"text-white",children:"Pending Review"}),r.jsx("span",{className:"text-red-400 font-semibold",children:c?c.pendingReview:"..."})]})]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Total Security Staff: ",c?c.totalEntityStaff:"..."]}),r.jsx(I,{variant:"outline",className:"w-full mt-4 glass-button",onClick:()=>w({title:" Feature Not Implemented"}),children:"Manage Credentials"})]})]})})]})}),r.jsx(oe,{value:"onboarding",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(rt,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Onboarding & Qualification System"})]}),r.jsx(he,{className:"text-gray-400",children:"Streamlined process for new hires."})]}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-500/10",children:[r.jsx(Ct,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"New Hires"}),r.jsx("p",{className:"text-2xl font-bold text-blue-400",children:u?u.newHires:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"This Month"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-yellow-500/10",children:[r.jsx(nt,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"In Training"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:u?u.inTraining:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Active"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-500/10",children:[r.jsx(ln,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"Qualified"}),r.jsx("p",{className:"text-2xl font-bold text-green-400",children:u?u.qualified:"..."}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Ready for Duty"})]})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold mb-3",children:"Onboarding Process Steps"}),r.jsx("div",{className:"space-y-3",children:["Document Collection & Verification","Background Check Completion","Basic Security Training","Site-Specific Training","Equipment Assignment","Supervisor Introduction","First Week Mentoring"].map((T,D)=>r.jsxs("div",{className:"flex items-center space-x-3 p-2.5 rounded-md bg-slate-700/50",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-semibold flex-shrink-0",children:D+1}),r.jsx("span",{className:"text-white text-sm",children:T})]},D))})]})]})})]})})]}),m&&r.jsx(iv,{onClose:()=>g(!1),onSuccess:E}),x&&r.jsx(iv,{securityStaff:x,onClose:()=>y(null),onSuccess:_})]})},YI={"General Security":{description:"Basic security services for various environments",requirements:["Security License","Background Check","Basic Training"],icon:"Shield"},"Event Security":{description:"Specialized security for events and gatherings",requirements:["Event Security Certification","Crowd Management Training","Emergency Response"],icon:"Users"},"Corporate Security":{description:"High-level security for corporate environments",requirements:["Corporate Security Certification","Access Control Training","Executive Protection"],icon:"Building"},"Healthcare Security":{description:"Specialized security for healthcare facilities",requirements:["Healthcare Security Certification","HIPAA Training","Medical Emergency Response"],icon:"Heart"},"Retail Security":{description:"Loss prevention and retail security services",requirements:["Retail Security Certification","Loss Prevention Training","Customer Service"],icon:"ShoppingBag"},"Industrial Security":{description:"Security for industrial and manufacturing facilities",requirements:["Industrial Security Certification","Safety Training","Hazmat Awareness"],icon:"Factory"}},dr={1:{name:"Tier 1 - Primary",description:"Premium security companies with highest standards and capabilities",color:"bg-gradient-to-r from-blue-600 to-purple-600",textColor:"text-blue-400",badgeColor:"bg-blue-500/20 text-blue-400",requirements:["Minimum 5 years operational experience","ISO 9001 certification","Comprehensive insurance coverage ($5M+)","Advanced training programs","24/7 support capabilities","Multi-site management experience"],benefits:["Priority assignment to high-value contracts","Exclusive access to premium sites","Reduced vetting requirements","Direct client communication","Performance bonus eligibility"]},2:{name:"Tier 2 - Standard",description:"Established security companies with proven track record",color:"bg-gradient-to-r from-green-600 to-teal-600",textColor:"text-green-400",badgeColor:"bg-green-500/20 text-green-400",requirements:["Minimum 2 years operational experience","State security license","Basic insurance coverage ($1M+)","Standard training programs","Business hours support","Single-site management capability"],benefits:["Standard contract assignments","Regular site access","Standard vetting process","Supervised client communication","Standard performance metrics"]},3:{name:"Tier 3 - Development",description:"New or developing security companies building capabilities",color:"bg-gradient-to-r from-orange-600 to-red-600",textColor:"text-orange-400",badgeColor:"bg-orange-500/20 text-orange-400",requirements:["Valid security license","Basic insurance coverage ($500K+)","Fundamental training programs","Limited support hours","Single-site focus"],benefits:["Limited contract assignments","Restricted site access","Enhanced monitoring","Supervised operations","Development-focused metrics"]}},QI=async e=>{try{const t={...e,client_id:e.client_id||null},{data:s,error:n}=await $.from("subcontractor_profiles").insert([t]).select().single();if(n)throw n;return{data:s,error:null}}catch(t){return console.error("Error creating security company:",t),{data:null,error:t}}},JI=async()=>{try{const{data:e,error:t}=await $.from("subcontractor_profiles").select(`
        *,
        sites_assigned:subcontractor_sites(count)
      `).order("created_at",{ascending:!1});if(t){if(t.code==="42501")return console.error("RLS Policy Error: User not authenticated or missing permissions"),{data:null,error:{message:"Authentication required. Please log in or contact administrator to disable RLS for development."}};throw t}return{data:e,error:null}}catch(e){return console.error("Error fetching security companies:",e),{data:null,error:e}}},XI=async(e,t)=>{try{const s={...t,client_id:t.client_id||null},{data:n,error:a}=await $.from("subcontractor_profiles").update(s).eq("id",e).select().single();if(a)throw a;return{data:n,error:null}}catch(s){return console.error("Error updating security company:",s),{data:null,error:s}}},ZI=async()=>{try{const{count:e,error:t}=await $.from("subcontractor_profiles").select("*",{count:"exact",head:!0});if(t)throw t;const{data:s,error:n}=await $.from("subcontractor_profiles").select("status");if(n)throw n;const{data:a,error:i}=await $.from("subcontractor_profiles").select("vetting_status");if(i)throw i;const{data:o,error:l}=await $.from("subcontractor_profiles").select("tier");if(l)throw l;const c=s.reduce((g,x)=>(g[x.status]=(g[x.status]||0)+1,g),{}),d=a.reduce((g,x)=>(g[x.vetting_status]=(g[x.vetting_status]||0)+1,g),{}),u=o.reduce((g,x)=>(g[x.tier]=(g[x.tier]||0)+1,g),{}),{count:h,error:m}=await $.from("subcontractor_profiles").select("*",{count:"exact",head:!0}).gte("performance_rating",4);if(m)throw m;return{data:{total:e,byStatus:c,byVettingStatus:d,byTier:u,topPerformers:h},error:null}}catch(e){return console.error("Error fetching security company stats:",e),{data:null,error:e}}},e8=({securityCompany:e=null,onClose:t,onSuccess:s})=>{var E,C,O,A;const[n,a]=f.useState({company_name:"",contact_person:"",contact_email:"",contact_phone:"",service_specialization:"",status:"Active",vetting_status:"Pending",tier:1,client_id:null,hourly_rate:"",max_workers:"",current_workers:"",performance_rating:"",contract_start_date:new Date().toISOString().split("T")[0],contract_end_date:"",notes:"",address:{street:"",city:"",state:"",zip:""},insurance_coverage:{general_liability:"",workers_comp:"",professional_liability:""},certifications:""}),[i,o]=f.useState(!1),[l,c]=f.useState([]),[d,u]=f.useState(!0),[h,m]=f.useState(!1),[g,x]=f.useState(""),{toast:y}=ce(),w=!!e;f.useEffect(()=>{(async()=>{try{const{data:T,error:D}=await mx();if(D)throw D;c(T||[])}catch(T){console.error("Error loading clients:",T),y({title:"Error",description:"Failed to load clients.",variant:"destructive"})}finally{u(!1)}})()},[y]),f.useEffect(()=>{var R,T,D,N;e&&a({company_name:e.company_name||"",contact_person:e.contact_person||"",contact_email:e.contact_email||"",contact_phone:e.contact_phone||"",service_specialization:e.service_specialization||"",status:e.status||"Active",vetting_status:e.vetting_status||"Pending",tier:e.tier||1,client_id:e.client_id||null,hourly_rate:((R=e.hourly_rate)==null?void 0:R.toString())||"",max_workers:((T=e.max_workers)==null?void 0:T.toString())||"",current_workers:((D=e.current_workers)==null?void 0:D.toString())||"",performance_rating:((N=e.performance_rating)==null?void 0:N.toString())||"",contract_start_date:e.contract_start_date||new Date().toISOString().split("T")[0],contract_end_date:e.contract_end_date||"",notes:e.notes||"",address:e.address||{street:"",city:"",state:"",zip:""},insurance_coverage:e.insurance_coverage||{general_liability:"",workers_comp:"",professional_liability:""},certifications:Array.isArray(e.certifications)?e.certifications.join(", "):e.certifications||""})},[e]);const p=(R,T)=>{a(D=>({...D,[R]:T}))},v=R=>{R==="add_new"?(m(!0),x("")):(m(!1),a(T=>({...T,client_id:R?parseInt(R):null})))},b=async()=>{if(g.trim())try{const{data:R,error:T}=await oS({name:g.trim(),contact_person:"",email:"",phone:"",industry:"General",status:"Active",address:{street:"",city:"",state:"",zip:""}});if(T)throw T;c(D=>[...D,R]),a(D=>({...D,client_id:R.id})),m(!1),x(""),y({title:"Client Created",description:`${g.trim()} has been added successfully.`,variant:"default"})}catch(R){console.error("Error creating client:",R),y({title:"Error",description:"Failed to create client. Please try again.",variant:"destructive"})}},j=(R,T)=>{a(D=>({...D,address:{...D.address,[R]:T}}))},S=(R,T)=>{a(D=>({...D,insurance_coverage:{...D.insurance_coverage,[R]:T}}))},_=async R=>{R.preventDefault(),o(!0);try{const T={...n,certifications:n.certifications.split(",").map(N=>N.trim()).filter(N=>N),hourly_rate:n.hourly_rate?parseFloat(n.hourly_rate):null,max_workers:n.max_workers?parseInt(n.max_workers):null,current_workers:n.current_workers?parseInt(n.current_workers):null,performance_rating:n.performance_rating?parseFloat(n.performance_rating):null,contract_start_date:n.contract_start_date&&n.contract_start_date.trim()!==""?n.contract_start_date:null,contract_end_date:n.contract_end_date&&n.contract_end_date.trim()!==""?n.contract_end_date:null};let D;if(w?D=await XI(e.id,T):D=await QI(T),D.error)throw D.error;y({title:w?"Security Company Updated":"Security Company Created",description:w?"Security company information has been updated successfully.":"New security company has been added successfully.",variant:"default"}),s(D.data)}catch(T){console.error("Error saving security company:",T),y({title:"Error",description:T.message||"Failed to save security company. Please try again.",variant:"destructive"})}finally{o(!1)}};return r.jsx(Et,{children:r.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(z.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto bg-slate-900 rounded-lg border border-slate-700",onClick:R=>R.stopPropagation(),children:r.jsxs(B,{className:"border-0 bg-transparent",children:[r.jsx(W,{className:"border-b border-slate-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(_j,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:w?"Edit Security Company":"Add New Security Company"})]}),r.jsx(I,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Bt,{className:"w-4 h-4"})})]})}),r.jsx(V,{className:"p-6",children:r.jsxs("form",{onSubmit:_,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"company_name",className:"text-white",children:"Company Name *"}),r.jsx(ee,{id:"company_name",value:n.company_name,onChange:R=>p("company_name",R.target.value),className:"bg-slate-800 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"contact_person",className:"text-white",children:"Contact Person"}),r.jsx(ee,{id:"contact_person",value:n.contact_person,onChange:R=>p("contact_person",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"contact_email",className:"text-white",children:"Contact Email"}),r.jsx(ee,{id:"contact_email",type:"email",value:n.contact_email,onChange:R=>p("contact_email",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"contact_phone",className:"text-white",children:"Contact Phone"}),r.jsx(ee,{id:"contact_phone",value:n.contact_phone,onChange:R=>p("contact_phone",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"service_specialization",className:"text-white",children:"Service Specialization"}),r.jsxs(be,{value:n.service_specialization,onValueChange:R=>p("service_specialization",R),children:[r.jsx(ge,{className:"bg-slate-800 border-slate-600 text-white",children:r.jsx(je,{placeholder:"Select specialization"})}),r.jsx(ye,{className:"bg-slate-800 border-slate-600",children:Object.keys(YI).map(R=>r.jsx(Z,{value:R,className:"text-white",children:R},R))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(be,{value:n.status,onValueChange:R=>p("status",R),children:[r.jsx(ge,{className:"bg-slate-800 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"Active",className:"text-white",children:"Active"}),r.jsx(Z,{value:"Inactive",className:"text-white",children:"Inactive"}),r.jsx(Z,{value:"Pending Review",className:"text-white",children:"Pending Review"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"vetting_status",className:"text-white",children:"Vetting Status"}),r.jsxs(be,{value:n.vetting_status,onValueChange:R=>p("vetting_status",R),children:[r.jsx(ge,{className:"bg-slate-800 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"Pending",className:"text-white",children:"Pending"}),r.jsx(Z,{value:"In Progress",className:"text-white",children:"In Progress"}),r.jsx(Z,{value:"Approved",className:"text-white",children:"Approved"}),r.jsx(Z,{value:"Rejected",className:"text-white",children:"Rejected"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"tier",className:"text-white",children:"Tier Classification"}),r.jsxs(be,{value:(E=n.tier)==null?void 0:E.toString(),onValueChange:R=>p("tier",parseInt(R)),children:[r.jsx(ge,{className:"bg-slate-800 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsx(ye,{className:"bg-slate-800 border-slate-600",children:Object.entries(dr).map(([R,T])=>r.jsx(Z,{value:R,className:"text-white",children:T.name},R))})]}),n.tier&&dr[n.tier]&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:dr[n.tier].description})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"client_id",className:"text-white",children:"Assigned Client"}),h?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:g,onChange:R=>x(R.target.value),placeholder:"Enter new client name",className:"bg-slate-700/50 border-slate-600 text-white",onKeyPress:R=>{R.key==="Enter"&&(R.preventDefault(),b())}}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(I,{type:"button",size:"sm",onClick:b,className:"bg-green-600 hover:bg-green-700 text-xs",children:"Add Client"}),r.jsx(I,{type:"button",size:"sm",variant:"outline",onClick:()=>{m(!1),x("")},className:"border-slate-600 text-slate-300 hover:bg-slate-700 text-xs",children:"Cancel"})]})]}):r.jsxs(be,{value:((C=n.client_id)==null?void 0:C.toString())||"",onValueChange:v,disabled:d,children:[r.jsx(ge,{className:"bg-slate-800 border-slate-600 text-white",children:r.jsx(je,{placeholder:d?"Loading clients...":"Select a client or add new..."})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"",className:"text-white",children:"No client assigned"}),d?r.jsx(Z,{value:"",disabled:!0,className:"text-white",children:"Loading clients..."}):r.jsxs(r.Fragment,{children:[l.map(R=>r.jsxs(Z,{value:R.id.toString(),className:"text-white",children:[R.name," - ",R.industry]},R.id)),r.jsx(Z,{value:"add_new",className:"text-blue-400 font-medium",children:"+ Add New Client"})]})]})]}),n.client_id&&!h&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:((O=l.find(R=>R.id===n.client_id))==null?void 0:O.contact_person)&&`Contact: ${(A=l.find(R=>R.id===n.client_id))==null?void 0:A.contact_person}`})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"hourly_rate",className:"text-white",children:"Hourly Rate ($)"}),r.jsx(ee,{id:"hourly_rate",type:"number",step:"0.01",value:n.hourly_rate,onChange:R=>p("hourly_rate",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"max_workers",className:"text-white",children:"Max Workers"}),r.jsx(ee,{id:"max_workers",type:"number",value:n.max_workers,onChange:R=>p("max_workers",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"current_workers",className:"text-white",children:"Current Workers"}),r.jsx(ee,{id:"current_workers",type:"number",value:n.current_workers,onChange:R=>p("current_workers",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"performance_rating",className:"text-white",children:"Performance Rating"}),r.jsx(ee,{id:"performance_rating",type:"number",step:"0.1",min:"0",max:"5",value:n.performance_rating,onChange:R=>p("performance_rating",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"contract_start_date",className:"text-white",children:"Contract Start Date"}),r.jsx(ee,{id:"contract_start_date",type:"date",value:n.contract_start_date,onChange:R=>p("contract_start_date",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"contract_end_date",className:"text-white",children:"Contract End Date"}),r.jsx(ee,{id:"contract_end_date",type:"date",value:n.contract_end_date,onChange:R=>p("contract_end_date",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Address Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"street",className:"text-white",children:"Street Address"}),r.jsx(ee,{id:"street",value:n.address.street,onChange:R=>j("street",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"city",className:"text-white",children:"City"}),r.jsx(ee,{id:"city",value:n.address.city,onChange:R=>j("city",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"state",className:"text-white",children:"State"}),r.jsx(ee,{id:"state",value:n.address.state,onChange:R=>j("state",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"zip",className:"text-white",children:"ZIP Code"}),r.jsx(ee,{id:"zip",value:n.address.zip,onChange:R=>j("zip",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Insurance Coverage"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"general_liability",className:"text-white",children:"General Liability ($)"}),r.jsx(ee,{id:"general_liability",type:"number",value:n.insurance_coverage.general_liability,onChange:R=>S("general_liability",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"workers_comp",className:"text-white",children:"Workers Comp ($)"}),r.jsx(ee,{id:"workers_comp",type:"number",value:n.insurance_coverage.workers_comp,onChange:R=>S("workers_comp",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"professional_liability",className:"text-white",children:"Professional Liability ($)"}),r.jsx(ee,{id:"professional_liability",type:"number",value:n.insurance_coverage.professional_liability,onChange:R=>S("professional_liability",R.target.value),className:"bg-slate-800 border-slate-600 text-white"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"certifications",className:"text-white",children:"Certifications (comma-separated)"}),r.jsx(mt,{id:"certifications",value:n.certifications,onChange:R=>p("certifications",R.target.value),placeholder:"e.g., State Security License, CPR Certification, First Aid Training",className:"bg-slate-800 border-slate-600 text-white",rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"notes",className:"text-white",children:"Notes"}),r.jsx(mt,{id:"notes",value:n.notes,onChange:R=>p("notes",R.target.value),placeholder:"Additional notes about the security company...",className:"bg-slate-800 border-slate-600 text-white",rows:4})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-slate-700",children:[r.jsx(I,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-gray-400 hover:text-white",children:"Cancel"}),r.jsx(I,{type:"submit",disabled:i,className:"bg-blue-600 hover:bg-blue-700",children:i?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[w?r.jsx(Ns,{className:"w-4 h-4"}):r.jsx(Ss,{className:"w-4 h-4"}),r.jsx("span",{children:w?"Update Security Company":"Create Security Company"})]})})]})]})})]})})})})},t8=()=>{const[e,t]=f.useState(""),[s,n]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState(null),[c,d]=f.useState(!0),[u,h]=f.useState(!0),[m,g]=f.useState(!1),[x,y]=f.useState(null),[w,p]=f.useState(1),{toast:v}=ce();f.useEffect(()=>{b(),j(),S()},[]);const b=async()=>{d(!0);const{data:N,error:k}=await JI();if(k)console.error("Error fetching security companies:",k),v({variant:"destructive",title:"Error",description:k.message||"Could not fetch security companies."}),n([]);else{const P=N.map(U=>{var M,F;return{...U,sites_count:((F=(M=U.sites_assigned)==null?void 0:M[0])==null?void 0:F.count)||0}});n(P)}d(!1)},j=async()=>{h(!0);const{data:N,error:k}=await ZI();k?console.error("Error fetching stats:",k):l(N),h(!1)},S=async()=>{try{const{data:N,error:k}=await mx();if(k)throw k;i(N||[])}catch(N){console.error("Error fetching clients:",N)}},_=()=>{y(null),g(!0)},E=N=>{y(N),g(!0)},C=s.filter(N=>{const k=N.company_name.toLowerCase().includes(e.toLowerCase())||N.contact_person&&N.contact_person.toLowerCase().includes(e.toLowerCase())||N.service_specialization&&N.service_specialization.toLowerCase().includes(e.toLowerCase()),P=w===0||N.tier===w;return k&&P}),O=N=>{if(!N)return null;const k=a.find(P=>P.id===N);return(k==null?void 0:k.name)||"Unknown Client"},A=N=>{if(!N)return null;const k=a.find(P=>P.id===N);return(k==null?void 0:k.industry)||"Unknown Industry"},R="bg-transparent p-0 space-x-1",T="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",D="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(vs,{className:"w-8 h-8 mr-3 text-blue-400"}),"Security Companies Management"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage security company partnerships, performance, and client assignments."})]}),r.jsxs(I,{onClick:_,className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add Security Company"]})]}),r.jsxs(Ot,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(bt,{className:`${R} border-b border-slate-700`,children:[r.jsx(ae,{value:"overview",className:`${T} ${D}`,children:"Overview"}),r.jsx(ae,{value:"tiers",className:`${T} ${D}`,children:"Tier System"}),r.jsx(ae,{value:"performance",className:`${T} ${D}`,children:"Performance"}),r.jsx(ae,{value:"compliance",className:`${T} ${D}`,children:"Compliance"}),r.jsx(ae,{value:"access",className:`${T} ${D}`,children:"Data Access"})]}),r.jsx(oe,{value:"overview",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(vs,{className:"w-5 h-5 text-blue-400"}),r.jsxs("span",{children:["Active Security Companies (",C.length,")"]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-3 sm:mt-0",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(I,{variant:w===0?"default":"outline",size:"sm",onClick:()=>p(0),className:"text-xs",children:"All Tiers"}),Object.entries(dr).map(([N,k])=>r.jsxs(I,{variant:w===parseInt(N)?"default":"outline",size:"sm",onClick:()=>p(parseInt(N)),className:`text-xs ${w===parseInt(N)?k.badgeColor:""}`,children:["Tier ",N]},N))]}),r.jsxs("div",{className:"relative",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search security companies...",value:e,onChange:N=>t(N.target.value),className:"pl-10 w-full sm:w-64 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]})]})}),r.jsx(V,{children:c?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"}),r.jsx("span",{className:"ml-3 text-gray-400",children:"Loading security companies..."})]}):C.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(vs,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400 mb-2",children:e?"No security companies found matching your search.":"No security companies found."}),!e&&r.jsxs(I,{onClick:_,className:"mt-4",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add First Security Company"]})]}):r.jsx("div",{className:"space-y-4",children:C.map(N=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer",onClick:()=>E(N),children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-1.5",children:[r.jsx("h3",{className:"text-white font-semibold text-lg",children:N.company_name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${N.status==="Active"?"bg-green-500/20 text-green-400":N.status==="Pending Review"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:N.status||"N/A"}),N.tier&&dr[N.tier]&&r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${dr[N.tier].badgeColor}`,children:dr[N.tier].name}),N.vetting_status&&r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${N.vetting_status==="Approved"?"bg-blue-500/20 text-blue-400":N.vetting_status==="In Progress"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:N.vetting_status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsx("span",{children:N.service_specialization||"General Security"}),r.jsx("span",{children:""}),r.jsx("span",{children:N.contact_person}),N.client_id&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Fn,{className:"w-3 h-3"}),r.jsxs("span",{children:[O(N.client_id)," (",A(N.client_id),")"]})]})]}),r.jsx("span",{children:""}),r.jsxs("span",{children:[N.sites_count||0," Sites"]}),N.performance_rating&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Ct,{className:"w-3 h-3 text-yellow-400"}),r.jsxs("span",{children:[N.performance_rating,"/5.0"]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2 text-xs text-gray-500",children:[N.contact_email&&r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Qa,{className:"w-3 h-3"}),r.jsx("span",{children:N.contact_email})]}),N.contact_phone&&r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Gn,{className:"w-3 h-3"}),r.jsx("span",{children:N.contact_phone})]})]})]}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsx(I,{variant:"outline",size:"sm",onClick:k=>{k.stopPropagation(),E(N)},className:"ios-button border-slate-600 hover:bg-slate-700",children:"View Details"})})]})},N.id))})})]})}),r.jsx(oe,{value:"tiers",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ct,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Security Company Tier System"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Manage and view security companies by their tier classification."})]}),r.jsxs(V,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.entries(dr).map(([N,k])=>{var M;const P=s.filter(F=>F.tier===parseInt(N)),U=((M=o==null?void 0:o.byTier)==null?void 0:M[N])||0;return r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:parseInt(N)*.1},children:r.jsxs(B,{className:`ios-card h-full ${k.color} bg-opacity-10 border-opacity-30`,children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center justify-between text-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ct,{className:`w-6 h-6 ${k.textColor}`}),r.jsx("span",{className:"text-lg",children:k.name})]}),r.jsx("span",{className:"text-2xl font-bold text-white",children:U})]})}),r.jsxs(V,{children:[r.jsx("p",{className:"text-gray-400 text-sm mb-4 h-12 overflow-hidden",children:k.description}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium text-xs mb-2",children:"Requirements:"}),r.jsxs("div",{className:"space-y-1",children:[k.requirements.slice(0,3).map((F,q)=>r.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-400",children:[r.jsx(ze,{className:"w-3 h-3 text-green-400 flex-shrink-0"}),r.jsx("span",{children:F})]},q)),k.requirements.length>3&&r.jsxs("p",{className:"text-xs text-slate-500",children:["...and ",k.requirements.length-3," more"]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium text-xs mb-2",children:"Benefits:"}),r.jsxs("div",{className:"space-y-1",children:[k.benefits.slice(0,2).map((F,q)=>r.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-400",children:[r.jsx(Ct,{className:"w-3 h-3 text-yellow-400 flex-shrink-0"}),r.jsx("span",{children:F})]},q)),k.benefits.length>2&&r.jsxs("p",{className:"text-xs text-slate-500",children:["...and ",k.benefits.length-2," more"]})]})]})]}),r.jsxs(I,{variant:"outline",size:"sm",className:"w-full mt-4",onClick:()=>p(parseInt(N)),children:["View Tier ",N," Companies (",P.length,")"]})]})]})},N)})}),u?r.jsxs("div",{className:"flex justify-center items-center h-20 mt-6",children:[r.jsx(Ct,{className:"w-6 h-6 text-purple-400 animate-spin"}),r.jsx("p",{className:"ml-2 text-white",children:"Loading tier statistics..."})]}):r.jsxs("div",{className:"mt-6 p-4 rounded-lg bg-slate-800/40",children:[r.jsx("h3",{className:"text-white font-semibold mb-3",children:"Tier Distribution"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(dr).map(([N,k])=>{var F;const P=((F=o==null?void 0:o.byTier)==null?void 0:F[N])||0,U=(o==null?void 0:o.total)||0,M=U>0?Math.round(P/U*100):0;return r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-16 h-16 rounded-full ${k.color} mx-auto mb-2 flex items-center justify-center`,children:r.jsx("span",{className:"text-white font-bold text-lg",children:P})}),r.jsx("p",{className:"text-white font-medium",children:k.name}),r.jsxs("p",{className:"text-gray-400 text-sm",children:[M,"% of total"]})]},N)})})]})]})]})}),r.jsx(oe,{value:"performance",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Pt,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Performance Metrics"})]}),r.jsx(he,{className:"text-gray-400",children:"Track security company performance and KPIs."})]}),r.jsx(V,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Pt,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Performance metrics dashboard coming soon..."})]})})]})}),r.jsx(oe,{value:"compliance",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Yn,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Compliance & Vetting"})]}),r.jsx(he,{className:"text-gray-400",children:"Monitor compliance status and vetting processes."})]}),r.jsx(V,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Yn,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Compliance dashboard coming soon..."})]})})]})}),r.jsx(oe,{value:"access",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ke,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Data Access Control"})]}),r.jsx(he,{className:"text-gray-400",children:"Configure access permissions and data sharing."})]}),r.jsx(V,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ke,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Access control configuration coming soon..."})]})})]})})]}),m&&r.jsx(e8,{securityCompany:x,onClose:()=>g(!1),onSuccess:N=>{n(x?k=>k.map(P=>P.id===N.id?N:P):k=>[N,...k]),g(!1),y(null),j()}})]})},s8=async()=>{try{const{data:e,error:t}=await $.from("training_courses").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}catch(e){throw console.error("Error fetching training courses:",e),e}},r8=async e=>{try{const{data:t,error:s}=await $.from("training_courses").insert([e]).select().single();if(s)throw s;return t}catch(t){throw console.error("Error creating training course:",t),t}},n8=async(e,t)=>{try{const{data:s,error:n}=await $.from("training_courses").update(t).eq("id",e).select().single();if(n)throw n;return s}catch(s){throw console.error("Error updating training course:",s),s}},a8=async e=>{try{const{error:t}=await $.from("training_courses").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){throw console.error("Error deleting training course:",t),t}},i8=async()=>{try{const{data:e,error:t}=await $.from("certificates").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}catch(e){throw console.error("Error fetching certificates:",e),e}},o8=async()=>{try{const{data:e,error:t}=await $.from("training_courses").select("id",{count:"exact"});if(t)throw t;const{data:s,error:n}=await $.from("training_enrollments").select("id",{count:"exact"});if(n)throw n;const{data:a,error:i}=await $.from("training_enrollments").select("id",{count:"exact"}).eq("status","Completed");if(i)throw i;const{data:o,error:l}=await $.from("certificate_issuances").select("id",{count:"exact"});if(l)throw l;return{totalCourses:(e==null?void 0:e.length)||0,totalEnrollments:(s==null?void 0:s.length)||0,completedEnrollments:(a==null?void 0:a.length)||0,totalCertificatesIssued:(o==null?void 0:o.length)||0,completionRate:(s==null?void 0:s.length)>0?((a==null?void 0:a.length)/(s==null?void 0:s.length)*100).toFixed(1):0}}catch(e){throw console.error("Error fetching training stats:",e),e}},l8=async e=>{try{const{data:t,error:s}=await $.from("training_courses").select("*").or(`title.ilike.%${e}%,description.ilike.%${e}%,type.ilike.%${e}%`).order("created_at",{ascending:!1});if(s)throw s;return t}catch(t){throw console.error("Error searching training courses:",t),t}},ov={"Core Training":"Essential training required for all security personnel",Specialized:"Advanced training for specific roles or skills",Management:"Leadership and management training for supervisors",Compliance:"Training required for regulatory compliance",Elective:"Optional training for professional development"},c8=({course:e=null,onClose:t,onSuccess:s})=>{const[n,a]=f.useState({title:"",description:"",type:"",duration_hours:8,status:"Active",created_by:"System Admin"}),[i,o]=f.useState(!1),{toast:l}=ce(),c=!!e;f.useEffect(()=>{e&&a({title:e.title||"",description:e.description||"",type:e.type||"",duration_hours:e.duration_hours||8,status:e.status||"Active",created_by:e.created_by||"System Admin"})},[e]);const d=(m,g)=>{a(x=>({...x,[m]:g}))},u=async m=>{m.preventDefault(),o(!0);try{let g;if(c?g=await n8(e.id,n):g=await r8(n),g.error)throw g.error;l({title:c?"Course Updated":"Course Created",description:`${n.title} has been ${c?"updated":"created"} successfully.`,variant:"default"}),s==null||s(g),t()}catch(g){console.error("Error saving course:",g),l({title:"Error",description:g.message||"Failed to save course. Please try again.",variant:"destructive"})}finally{o(!1)}},h=Object.keys(ov);return r.jsx(Et,{children:r.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:m=>m.stopPropagation(),children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[c?r.jsx(Ns,{className:"w-5 h-5 text-blue-400"}):r.jsx(rt,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:c?"Edit Course":"Create New Course"})]}),r.jsx(I,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Bt,{className:"w-4 h-4"})})]}),r.jsx(V,{children:r.jsxs("form",{onSubmit:u,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"title",className:"text-white",children:"Course Title"}),r.jsx(ee,{id:"title",value:n.title,onChange:m=>d("title",m.target.value),placeholder:"Enter course title",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"description",className:"text-white",children:"Description"}),r.jsx(mt,{id:"description",value:n.description,onChange:m=>d("description",m.target.value),placeholder:"Enter detailed course description",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"type",className:"text-white",children:"Course Type"}),r.jsxs(be,{value:n.type,onValueChange:m=>d("type",m),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:"Select course type"})}),r.jsx(ye,{className:"bg-slate-800 border-slate-600",children:h.map(m=>r.jsx(Z,{value:m,className:"text-white",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:m}),r.jsx("span",{className:"text-xs text-gray-400",children:ov[m]})]})},m))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"duration_hours",className:"text-white",children:"Duration (Hours)"}),r.jsx(ee,{id:"duration_hours",type:"number",min:"1",max:"200",value:n.duration_hours,onChange:m=>d("duration_hours",parseInt(m.target.value)||1),className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(be,{value:n.status,onValueChange:m=>d("status",m),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"Active",className:"text-white",children:"Active"}),r.jsx(Z,{value:"Inactive",className:"text-white",children:"Inactive"}),r.jsx(Z,{value:"Draft",className:"text-white",children:"Draft"}),r.jsx(Z,{value:"Archived",className:"text-white",children:"Archived"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"created_by",className:"text-white",children:"Created By"}),r.jsx(ee,{id:"created_by",value:n.created_by,onChange:m=>d("created_by",m.target.value),placeholder:"System Admin",className:"bg-slate-700/50 border-slate-600 text-white"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(I,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"}),r.jsx(I,{type:"submit",disabled:i,className:"bg-blue-600 hover:bg-blue-700",children:i?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ss,{className:"w-4 h-4"}),r.jsxs("span",{children:[c?"Update":"Create"," Course"]})]})})]})]})})]})})})})},d8=()=>{const[e,t]=f.useState(""),[s,n]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState({}),[c,d]=f.useState(!0),[u,h]=f.useState(!1),[m,g]=f.useState(!1),[x,y]=f.useState(null),{toast:w}=ce();f.useEffect(()=>{p()},[]);const p=async()=>{try{d(!0);const[A,R,T]=await Promise.all([s8(),i8(),o8()]);n(A||[]),i(R||[]),l(T||{})}catch(A){console.error("Error loading training data:",A),w({title:"Error loading training data",description:"Please try again later.",variant:"destructive"})}finally{d(!1)}},v=async A=>{if(t(A),A.trim()){h(!0);try{const R=await l8(A);n(R||[])}catch(R){console.error("Error searching courses:",R),w({title:"Error searching courses",description:"Please try again.",variant:"destructive"})}finally{h(!1)}}else p()},b=()=>{y(null),g(!0)},j=A=>{y(A),g(!0)},S=()=>{p()},_=()=>{g(!1),y(null)},E=async A=>{if(confirm(`Are you sure you want to delete "${A.title}"? This action cannot be undone.`))try{await a8(A.id),w({title:"Course Deleted",description:`${A.title} has been deleted successfully.`,variant:"default"}),p()}catch(R){console.error("Error deleting course:",R),w({title:"Error",description:"Failed to delete course. Please try again.",variant:"destructive"})}},C=()=>{w({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},O=()=>{w({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-white",children:"Training & Certification"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Create, manage, and deliver comprehensive training programs"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(I,{onClick:b,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Create Course"]}),r.jsxs(I,{onClick:C,variant:"outline",className:"border-white/20",children:[r.jsx(Vu,{className:"w-4 h-4 mr-2"}),"Upload Template"]})]})]}),r.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsx(B,{className:"bg-blue-500/10 border-blue-500/20",children:r.jsx(V,{className:"p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(rt,{className:"w-8 h-8 text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Courses"}),r.jsx("p",{className:"text-white text-2xl font-bold",children:o.totalCourses||0})]})]})})}),r.jsx(B,{className:"bg-green-500/10 border-green-500/20",children:r.jsx(V,{className:"p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(xe,{className:"w-8 h-8 text-green-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Enrollments"}),r.jsx("p",{className:"text-white text-2xl font-bold",children:o.totalEnrollments||0})]})]})})}),r.jsx(B,{className:"bg-purple-500/10 border-purple-500/20",children:r.jsx(V,{className:"p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"w-8 h-8 text-purple-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),r.jsx("p",{className:"text-white text-2xl font-bold",children:o.completedEnrollments||0})]})]})})}),r.jsx(B,{className:"bg-yellow-500/10 border-yellow-500/20",children:r.jsx(V,{className:"p-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ke,{className:"w-8 h-8 text-yellow-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Completion Rate"}),r.jsxs("p",{className:"text-white text-2xl font-bold",children:[o.completionRate||0,"%"]})]})]})})})]}),r.jsxs(Ot,{defaultValue:"courses",className:"space-y-6",children:[r.jsxs(bt,{className:"bg-white/10 border border-white/20",children:[r.jsx(ae,{value:"courses",children:"Training Courses"}),r.jsx(ae,{value:"certificates",children:"Certificates"}),r.jsx(ae,{value:"content",children:"Content Creator"}),r.jsx(ae,{value:"delivery",children:"Training Delivery"})]}),r.jsx(oe,{value:"courses",className:"space-y-6",children:r.jsxs(B,{children:[r.jsx(W,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(G,{className:"flex items-center space-x-2",children:[r.jsx(rt,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Active Training Programs"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search courses...",value:e,onChange:A=>v(A.target.value),className:"pl-10 w-80 bg-white/5 border-white/10"}),u&&r.jsx(ft,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 animate-spin"})]})]})}),r.jsx(V,{children:c?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ft,{className:"w-6 h-6 text-blue-400 animate-spin mr-2"}),r.jsx("span",{className:"text-gray-400",children:"Loading training courses..."})]}):s.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(rt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-white font-medium mb-2",children:"No courses found"}),r.jsx("p",{className:"text-gray-400 text-sm",children:e?"No courses match your search criteria.":"No training courses available yet."})]}):r.jsx("div",{className:"space-y-4",children:s.map(A=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:A.title}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.type==="Core Training"?"bg-blue-500/20 text-blue-400":A.type==="Specialized"?"bg-purple-500/20 text-purple-400":"bg-yellow-500/20 text-yellow-400"}`,children:A.type})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[r.jsxs("span",{children:["Duration: ",A.duration_hours," hours"]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Status: ",A.status]})]}),A.description&&r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:A.description})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:`text-sm ${A.status==="Active"?"text-green-400":"text-gray-400"}`,children:A.status}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(I,{variant:"outline",size:"sm",onClick:()=>j(A),className:"border-white/20 hover:bg-white/10",children:"Edit"}),r.jsx(I,{variant:"outline",size:"sm",onClick:()=>E(A),className:"border-red-500/20 text-red-400 hover:bg-red-500/10 hover:text-red-300",children:r.jsx(kn,{className:"w-4 h-4"})})]})]})]})},A.id))})})]})}),r.jsxs(oe,{value:"certificates",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-white",children:"Certificate Management"}),r.jsxs(I,{onClick:O,className:"bg-purple-600 hover:bg-purple-700",children:[r.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Certificate Builder"]})]}),c?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ft,{className:"w-6 h-6 text-blue-400 animate-spin mr-2"}),r.jsx("span",{className:"text-gray-400",children:"Loading certificates..."})]}):a.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ur,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-white font-medium mb-2",children:"No certificates found"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"No certificates available yet."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((A,R)=>r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:R*.1},children:r.jsxs(B,{className:"hover:scale-105 transition-transform duration-200",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2",children:[r.jsx(ur,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{className:"text-lg",children:A.name})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Template"}),r.jsx("span",{className:"text-white text-sm",children:A.template_name})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Valid For"}),r.jsxs("span",{className:"text-white text-sm",children:[A.validity_months," months"]})]}),A.description&&r.jsx("div",{className:"text-gray-400 text-sm mt-2",children:A.description}),r.jsx(I,{className:"w-full mt-4",variant:"outline",onClick:()=>w({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),children:"Customize Template"})]})})]})},A.id))}),r.jsxs(B,{children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2",children:[r.jsx(Vu,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Drag & Drop Certificate Builder"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"border-2 border-dashed border-white/20 rounded-lg p-8 text-center",children:[r.jsx(Vu,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-white font-medium mb-2",children:"Upload PDF Background"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Upload a PDF template and use our drag-and-drop editor to create custom certificates"}),r.jsx(I,{onClick:C,className:"bg-green-600 hover:bg-green-700",children:"Choose PDF File"})]})})]})]}),r.jsx(oe,{value:"content",className:"space-y-6",children:r.jsxs(B,{children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2",children:[r.jsx(ke,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Dynamic Content Creator & Manager"})]})}),r.jsx(V,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{title:"Create Course",icon:rt,color:"blue"},{title:"Build Lesson",icon:ke,color:"green"},{title:"Design Program",icon:ur,color:"purple"},{title:"Manage Content",icon:Ns,color:"yellow"}].map((A,R)=>r.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:R*.1},className:`p-6 rounded-lg bg-${A.color}-500/10 border border-${A.color}-500/20 hover:bg-${A.color}-500/20 transition-colors cursor-pointer`,onClick:()=>w({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),children:[r.jsx(A.icon,{className:`w-8 h-8 text-${A.color}-400 mb-3`}),r.jsx("h3",{className:"text-white font-medium",children:A.title}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Create and manage training content"})]},A.title))})})]})}),r.jsx(oe,{value:"delivery",className:"space-y-6",children:r.jsxs(B,{children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2",children:[r.jsx($j,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Training Delivery Options"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Internal Training"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(xe,{className:"w-5 h-5 text-blue-400"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium",children:"Employee Training"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Internal staff and security personnel"})]})]})}),r.jsx("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(rt,{className:"w-5 h-5 text-green-400"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium",children:"Certification Programs"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Professional development and compliance"})]})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"External Training"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"w-5 h-5 text-purple-400"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium",children:"Client Training"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Training services for client organizations"})]})]})}),r.jsx("div",{className:"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ke,{className:"w-5 h-5 text-yellow-400"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium",children:"Commercial Courses"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Sellable training programs and content"})]})]})})]})]})]})})]})})]}),m&&r.jsx(c8,{course:x,onClose:_,onSuccess:S})]})},u8=()=>{const[e,t]=f.useState(!1),[s,n]=f.useState(0),{toast:a}=ce(),i=[{id:1,title:"Advanced Threat Assessment Techniques",instructor:"Sarah Johnson",participants:23,status:"Live",startTime:"2:00 PM",duration:"2 hours"},{id:2,title:"Emergency Response Protocols Update",instructor:"Mike Rodriguez",participants:0,status:"Scheduled",startTime:"4:00 PM",duration:"1.5 hours"},{id:3,title:"Latest Security Technology Briefing",instructor:"Lisa Chen",participants:0,status:"Scheduled",startTime:"Tomorrow 10:00 AM",duration:"1 hour"}],o=()=>{t(!0),n(Math.floor(Math.random()*30)+5),a({title:"Live Class Started!",description:"Students can now join using the QR code or link."})},l=()=>{t(!1),n(0),a({title:"Class Ended",description:"Recording saved to class library. Attendance logged."})},c=()=>{a({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},d=()=>{a({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})};return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Od,{className:"w-8 h-8 mr-3 text-blue-400"}),"Live Training Classes"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Conduct real-time training sessions with interactive features."})]}),r.jsxs(I,{onClick:e?l:o,className:`ios-button mt-4 sm:mt-0 ${e?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:[e?r.jsx(e5,{className:"w-4 h-4 mr-2"}):r.jsx($j,{className:"w-4 h-4 mr-2"}),e?"End Current Class":"Start New Class"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center justify-between text-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Bu,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Live Stream Control Panel"})]}),e&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-red-400 text-sm font-medium",children:"LIVE"})]})]}),r.jsx(he,{className:"text-gray-400",children:"Manage your ongoing or upcoming live session."})]}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"aspect-video bg-slate-900 rounded-lg border-2 border-slate-700 flex items-center justify-center",children:e?r.jsxs("div",{className:"text-center p-4",children:[r.jsx(Bu,{className:"w-16 h-16 text-red-400 mx-auto mb-3"}),r.jsx("p",{className:"text-white font-medium text-lg",children:"Live Stream Active"}),r.jsxs("p",{className:"text-gray-400 text-sm",children:[s," participants connected"]})]}):r.jsxs("div",{className:"text-center p-4",children:[r.jsx(Xi,{className:"w-16 h-16 text-gray-500 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-400",children:"Camera Preview / Waiting Room"}),r.jsx("p",{className:"text-gray-500 text-sm",children:'Click "Start New Class" to begin broadcasting.'})]})}),r.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[r.jsx(I,{variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",children:r.jsx(Np,{className:"w-4 h-4"})}),r.jsx(I,{variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",children:r.jsx(Xi,{className:"w-4 h-4"})}),r.jsx(I,{variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",onClick:c,children:r.jsx(JT,{className:"w-4 h-4"})}),r.jsx(I,{variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",onClick:()=>a({title:" Feature Not Implemented"}),children:r.jsx(xe,{className:"w-4 h-4"})})]})]})})]})}),r.jsxs(z.div,{className:"space-y-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:[r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(WT,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Student Access"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"text-center space-y-3",children:[r.jsx("div",{className:"w-36 h-36 bg-white p-2 rounded-lg mx-auto flex items-center justify-center",children:r.jsx("img",{alt:"QR Code for Live Class",className:"w-full h-full",src:"https://images.unsplash.com/photo-1626682561113-d1db402cc866"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:"Scan to Join Live Class"}),r.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Or share direct link: secureops.pro/live/classXYZ"})]}),r.jsx(I,{onClick:c,className:"w-full ios-button bg-purple-600 hover:bg-purple-700",children:"Generate New Access Link"})]})})]}),r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(eg,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Interactive Tools"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-2.5",children:[r.jsxs(I,{onClick:d,className:"w-full ios-button bg-yellow-600 hover:bg-yellow-700 justify-start",children:[r.jsx(eg,{className:"w-4 h-4 mr-2"}),"Send Pop Quiz"]}),r.jsxs(I,{onClick:()=>a({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),className:"w-full ios-button bg-blue-600 hover:bg-blue-700 justify-start",children:[r.jsx(Oo,{className:"w-4 h-4 mr-2"}),"Open Q&A Session"]})]})})]})]})]}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Bu,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Scheduled & Upcoming Classes"})]}),r.jsx(he,{className:"text-gray-400",children:"Manage your planned live training sessions."})]}),r.jsx(V,{children:r.jsx("div",{className:"space-y-4",children:i.map(u=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-1.5",children:[r.jsx("h3",{className:"text-white font-semibold",children:u.title}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${u.status==="Live"?"bg-red-500/20 text-red-400 animate-pulse":"bg-blue-500/20 text-blue-400"}`,children:u.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsxs("span",{children:["Instructor: ",u.instructor]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Start: ",u.startTime]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Duration: ",u.duration]}),u.status==="Live"&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsxs("span",{children:[u.participants," participants"]})]})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx(I,{variant:"outline",size:"sm",onClick:()=>a({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),className:"ios-button border-slate-600 hover:bg-slate-700",children:u.status==="Live"?"Join Session":"Manage Class"})})]})},u.id))})})]})})]})},h8=()=>{const[e,t]=f.useState(""),{toast:s}=ce(),n=[{id:1,tagId:"NFC-001-ALPHA",location:"Main Entrance - Building A",site:"Corporate HQ Alpha",status:"Active",lastScan:"2 hours ago",coordinates:{lat:40.7128,lng:-74.006}},{id:2,tagId:"NFC-002-BETA",location:"Emergency Exit - East Wing",site:"Metro Hospital East",status:"Active",lastScan:"45 minutes ago",coordinates:{lat:40.7589,lng:-73.9851}},{id:3,tagId:"NFC-003-GAMMA",location:"Security Checkpoint C",site:"Retail Plaza Central",status:"Inactive",lastScan:"3 days ago",coordinates:{lat:40.7505,lng:-73.9934}}],a=[{id:1,name:"Perimeter Point Alpha (North Gate)",site:"Corporate HQ Alpha",coordinates:{lat:40.7128,lng:-74.006},radius:50,status:"Active",lastCheck:"1 hour ago"},{id:2,name:"Parking Lot Patrol Zone 3",site:"Metro Hospital East",coordinates:{lat:40.7589,lng:-73.9851},radius:100,status:"Active",lastCheck:"30 minutes ago"}],i=()=>{s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},o=m=>{s({title:"NFC Tag Scanned",description:`Tag ${m} scanned successfully. Location and time logged.`})},l=()=>{s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},c=()=>{s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},d="bg-transparent p-0 space-x-1",u="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",h="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(lc,{className:"w-8 h-8 mr-3 text-blue-400"}),"NFC & GPS Management"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage NFC tags and GPS locations for automated check-ins and patrols."})]}),r.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[r.jsxs(I,{onClick:i,className:"ios-button bg-blue-600 hover:bg-blue-700",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add NFC Tag"]}),r.jsxs(I,{onClick:l,variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(gt,{className:"w-4 h-4 mr-2"}),"Add GPS Location"]})]})]}),r.jsxs(Ot,{defaultValue:"nfc_tags",className:"space-y-6",children:[r.jsxs(bt,{className:`${d} border-b border-slate-700`,children:[r.jsx(ae,{value:"nfc_tags",className:`${u} ${h}`,children:"NFC Tags"}),r.jsx(ae,{value:"gps_locations",className:`${u} ${h}`,children:"GPS Locations"}),r.jsx(ae,{value:"mobile_scanner",className:`${u} ${h}`,children:"Mobile Scanner"}),r.jsx(ae,{value:"media_attachments",className:`${u} ${h}`,children:"Media Attachments"})]}),r.jsx(oe,{value:"nfc_tags",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Mf,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"NFC Tag Registry"})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-3 sm:mt-0",children:[r.jsxs(I,{variant:"outline",size:"sm",className:"glass-button text-xs",children:[r.jsx(LT,{className:"w-3.5 h-3.5 mr-1.5"})," Filter by Site"]}),r.jsxs("div",{className:"relative",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search NFC tags...",value:e,onChange:m=>t(m.target.value),className:"pl-10 w-full sm:w-64 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Manage all deployed NFC tags for patrol verification."})]}),r.jsx(V,{children:r.jsx("div",{className:"space-y-4",children:n.filter(m=>m.tagId.toLowerCase().includes(e.toLowerCase())||m.location.toLowerCase().includes(e.toLowerCase())).map(m=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-1.5",children:[r.jsx("h3",{className:"text-white font-semibold",children:m.tagId}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${m.status==="Active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:m.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(gt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:m.location})]}),r.jsx("span",{children:""}),r.jsx("span",{children:m.site}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Last scan: ",m.lastScan]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>o(m.tagId),className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(lc,{className:"w-4 h-4 mr-1"}),"Log Scan"]}),r.jsx(I,{variant:"outline",size:"sm",onClick:()=>s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),className:"ios-button border-slate-600 hover:bg-slate-700",children:"Edit"})]})]})},m.id))})})]})}),r.jsx(oe,{value:"gps_locations",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Df,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:'GPS "Air Tag" Locations'})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Manage geofenced GPS locations for automated check-ins."})]}),r.jsx(V,{children:r.jsx("div",{className:"space-y-4",children:a.map(m=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-1.5",children:[r.jsx("h3",{className:"text-white font-semibold",children:m.name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${m.status==="Active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:m.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsx("span",{children:m.site}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Radius: ",m.radius,"m"]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Last check: ",m.lastCheck]})]}),r.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Coords: ",m.coordinates.lat.toFixed(4),", ",m.coordinates.lng.toFixed(4)]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>s({title:"GPS location marked as visited",description:"Automatic check-in logged for officer."}),className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Manual Check-In"]})})]})},m.id))})})]})}),r.jsx(oe,{value:"mobile_scanner",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Ij,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Mobile NFC Scanner Interface"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Simulated mobile scanner for NFC tag interactions."})]}),r.jsx(V,{children:r.jsxs("div",{className:"text-center space-y-6 p-6 rounded-lg bg-slate-800/40 border border-slate-700",children:[r.jsx("div",{className:"w-48 h-48 mx-auto bg-gradient-to-br from-blue-600/20 to-purple-700/30 rounded-full flex items-center justify-center border-4 border-blue-500/40 shadow-xl",children:r.jsx(lc,{className:"w-24 h-24 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold text-lg mb-1",children:"Ready to Scan"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Hold your device near an NFC tag to automatically log location and time."})]}),r.jsx(I,{className:"ios-button bg-purple-600 hover:bg-purple-700 px-8 py-3 text-base",onClick:()=>o("DEMO-TAG-001"),children:"Simulate Scan"})]})})]})}),r.jsx(oe,{value:"media_attachments",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Xi,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Media Attachments to Scans"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Attach photos, audio, or notes to NFC/GPS check-ins."})]}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[{icon:Xi,label:"Take Photo",color:"blue"},{icon:ke,label:"Add Note",color:"green"},{icon:Np,label:"Record Audio",color:"purple"},{icon:gt,label:"Confirm GPS",color:"yellow"}].map((m,g)=>r.jsxs(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:g*.05},className:`p-6 rounded-lg bg-${m.color}-500/10 border border-${m.color}-500/30 hover:bg-${m.color}-500/20 transition-colors cursor-pointer text-center flex flex-col items-center justify-center h-36`,onClick:c,children:[r.jsx(m.icon,{className:`w-8 h-8 text-${m.color}-400 mb-2`}),r.jsx("h3",{className:"text-white font-medium text-sm",children:m.label})]},m.label))}),r.jsx("div",{className:"border-2 border-dashed border-slate-700 rounded-lg p-8 bg-slate-800/30",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Xi,{className:"w-12 h-12 text-gray-500 mx-auto mb-3"}),r.jsx("h3",{className:"text-white font-medium mb-1",children:"Attach Media to Location Scan"}),r.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Enhance patrol reports with visual or audio context."}),r.jsxs(I,{onClick:c,className:"ios-button bg-yellow-600 hover:bg-yellow-700",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add Media to Last Scan"]})]})})]})})]})})]})]})},pm={async checkNewColumnsExist(){try{const{data:e,error:t}=await $.from("reports").select("site_id, entity_officer_id, security_officer_id").limit(1);return!t}catch{return!1}},async getReports(e={}){try{const t=await this.checkNewColumnsExist(),[s,n,a]=await Promise.all([(async()=>{try{let o=$.from("reports").select(t?`
                *,
                site:site_id(id, name, type),
                entity_officer:entity_officer_id(id, name, role),
                security_officer:security_officer_id(id, first_name, last_name, position)
              `:"*").order("created_at",{ascending:!1});e.status&&(o=o.eq("status",e.status)),e.type&&e.type!=="Violation"&&e.type!=="Observation"&&(o=o.eq("report_type",e.type)),e.site&&t&&(o=o.eq("site_id",e.site)),e.entityOfficer&&t&&(o=o.eq("entity_officer_id",e.entityOfficer)),e.securityOfficer&&t&&(o=o.eq("security_officer_id",e.securityOfficer)),e.dateFrom&&(o=o.gte("report_date",e.dateFrom)),e.dateTo&&(o=o.lte("report_date",e.dateTo));const{data:l,error:c}=await o;if(c)throw c;return l.map(u=>{var h,m,g;return{...u,site_name:t?((h=u.site)==null?void 0:h.name)||"Not assigned":u.site_name||"Not assigned",site_type:t&&((m=u.site)==null?void 0:m.type)||null,entity_officer_name:t?((g=u.entity_officer)==null?void 0:g.name)||"Not assigned":u.officer_name||"Not assigned",security_officer_name:t&&u.security_officer?`${u.security_officer.first_name} ${u.security_officer.last_name}`:"Not assigned",original_table:"reports"}})}catch(o){return console.error("Error fetching reports:",o),[]}})(),(async()=>{try{let o=$.from("violations").select(t?`
                *,
                site:site_id(id, name, type),
                entity_officer:entity_officer_id(id, name, role),
                security_officer:security_officer_id(id, first_name, last_name, position)
              `:"*").order("created_at",{ascending:!1});if(e.status&&(o=o.eq("status",e.status)),e.type!=="Violation"){if(e.type&&e.type!=="Violation")return[]}e.site&&t&&(o=o.eq("site_id",e.site)),e.entityOfficer&&t&&(o=o.eq("entity_officer_id",e.entityOfficer)),e.securityOfficer&&t&&(o=o.eq("security_officer_id",e.securityOfficer)),e.dateFrom&&(o=o.gte("violation_date",e.dateFrom)),e.dateTo&&(o=o.lte("violation_date",e.dateTo));const{data:l,error:c}=await o;if(c)throw c;return l.map(u=>{var h,m,g;return{id:u.id,title:u.type,report_type:"Violation",doc_number:`VR-${u.id}`,site_id:u.site_id,site_name:t?((h=u.site)==null?void 0:h.name)||"Not assigned":u.site_name||"Not assigned",site_type:t&&((m=u.site)==null?void 0:m.type)||null,entity_officer_id:u.entity_officer_id,entity_officer_name:t?((g=u.entity_officer)==null?void 0:g.name)||"Not assigned":u.reported_by_name||"Not assigned",security_officer_id:u.security_officer_id,security_officer_name:t&&u.security_officer?`${u.security_officer.first_name} ${u.security_officer.last_name}`:"Not assigned",report_date:u.violation_date,status:u.status,priority:u.severity,description:u.description,findings:u.resolution_notes,recommendations:u.corrective_actions,attachments:u.attachments,created_at:u.created_at,updated_at:u.updated_at,original_table:"violations"}})}catch(o){return console.error("Error fetching violations:",o),[]}})(),(async()=>{try{let o=$.from("observations").select(t?`
                *,
                site:site_id(id, name, type),
                entity_officer:entity_officer_id(id, name, role),
                security_officer:security_officer_id(id, first_name, last_name, position)
              `:"*").order("created_at",{ascending:!1});if(e.status&&(o=o.eq("status",e.status)),e.type!=="Observation"){if(e.type&&e.type!=="Observation")return[]}e.site&&t&&(o=o.eq("site_id",e.site)),e.entityOfficer&&t&&(o=o.eq("entity_officer_id",e.entityOfficer)),e.securityOfficer&&t&&(o=o.eq("security_officer_id",e.securityOfficer)),e.dateFrom&&(o=o.gte("observation_date",e.dateFrom)),e.dateTo&&(o=o.lte("observation_date",e.dateTo));const{data:l,error:c}=await o;if(c)throw c;return l.map(u=>{var h,m,g;return{id:u.id,title:u.type,report_type:"Observation",doc_number:`OL-${u.id}`,site_id:u.site_id,site_name:t?((h=u.site)==null?void 0:h.name)||"Not assigned":u.site_name||"Not assigned",site_type:t&&((m=u.site)==null?void 0:m.type)||null,entity_officer_id:u.entity_officer_id,entity_officer_name:t?((g=u.entity_officer)==null?void 0:g.name)||"Not assigned":u.observer_name||"Not assigned",security_officer_id:u.security_officer_id,security_officer_name:t&&u.security_officer?`${u.security_officer.first_name} ${u.security_officer.last_name}`:"Not assigned",report_date:u.observation_date,status:u.status,priority:u.priority,description:u.description,findings:u.follow_up_notes,recommendations:u.follow_up_notes,attachments:u.attachments,created_at:u.created_at,updated_at:u.updated_at,original_table:"observations"}})}catch(o){return console.error("Error fetching observations:",o),[]}})()]),i=[...s,...n,...a];return i.sort((o,l)=>new Date(l.created_at)-new Date(o.created_at)),i}catch(t){throw console.error("Error fetching reports:",t),t}},async getReport(e){var t,s,n;try{if(await this.checkNewColumnsExist()){const{data:i,error:o}=await $.from("reports").select(`
            *,
            site:site_id(id, name, type),
            entity_officer:entity_officer_id(id, name, role),
            security_officer:security_officer_id(id, first_name, last_name, position)
          `).eq("id",e).single();if(o)throw o;return{...i,site_name:((t=i.site)==null?void 0:t.name)||"Not assigned",site_type:((s=i.site)==null?void 0:s.type)||null,entity_officer_name:((n=i.entity_officer)==null?void 0:n.name)||"Not assigned",security_officer_name:i.security_officer?`${i.security_officer.first_name} ${i.security_officer.last_name}`:"Not assigned"}}else{const{data:i,error:o}=await $.from("reports").select("*").eq("id",e).single();if(o)throw o;return{...i,site_name:i.site_name||"Not assigned",site_type:null,entity_officer_name:i.officer_name||"Not assigned",security_officer_name:"Not assigned",entity_officer_id:null,security_officer_id:null,site_id:null}}}catch(a){throw console.error("Error fetching report:",a),a}},async createReport(e){try{const t=await this.checkNewColumnsExist(),s=e.report_type;let n="reports",a=e;if(s==="Violation"?(n="violations",a={type:e.title,description:e.description,severity:e.priority==="Critical"?"High":e.priority,location:e.site_name||"Not specified",site_id:e.site_id,site_name:e.site_name,reported_by_id:e.entity_officer_id||e.security_officer_id,reported_by_name:e.entity_officer_name||e.security_officer_name,violation_date:e.report_date,status:e.status,resolution_notes:e.findings,corrective_actions:e.recommendations,attachments:e.attachments,entity_officer_id:e.entity_officer_id,security_officer_id:e.security_officer_id}):s==="Observation"&&(n="observations",a={type:e.title,description:e.description,priority:e.priority,location:e.site_name||"Not specified",site_id:e.site_id,site_name:e.site_name,observer_id:e.entity_officer_id||e.security_officer_id,observer_name:e.entity_officer_name||e.security_officer_name,observation_date:e.report_date,status:e.status,follow_up_required:e.priority==="High"||e.priority==="Critical",follow_up_notes:e.recommendations,attachments:e.attachments,entity_officer_id:e.entity_officer_id,security_officer_id:e.security_officer_id}),console.log(` Creating ${s} in ${n} table`),n==="reports")if(t){const{data:i,error:o}=await $.from("reports").insert([a]).select().single();if(o)throw o;return i}else{const{site_id:i,entity_officer_id:o,security_officer_id:l,...c}=a,{data:d,error:u}=await $.from("reports").insert([c]).select().single();if(u)throw u;return d}else if(n==="violations"){const{data:i,error:o}=await $.from("violations").insert([a]).select().single();if(o)throw o;return{...i,report_type:"Violation",original_table:"violations"}}else if(n==="observations"){const{data:i,error:o}=await $.from("observations").insert([a]).select().single();if(o)throw o;return{...i,report_type:"Observation",original_table:"observations"}}}catch(t){throw console.error("Error creating report:",t),t}},async updateReport(e,t){try{if(await this.checkNewColumnsExist()){const{data:n,error:a}=await $.from("reports").update(t).eq("id",e).select().single();if(a)throw a;return n}else{const{site_id:n,entity_officer_id:a,security_officer_id:i,...o}=t,{data:l,error:c}=await $.from("reports").update(o).eq("id",e).select().single();if(c)throw c;return l}}catch(s){throw console.error("Error updating report:",s),s}},async deleteReport(e){try{const{error:t}=await $.from("reports").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting report:",t),t}}},f8={async getViolations(e={}){try{let t=$.from("violations").select("*").order("created_at",{ascending:!1});e.status&&(t=t.eq("status",e.status)),e.severity&&(t=t.eq("severity",e.severity)),e.type&&(t=t.eq("type",e.type)),e.site&&(t=t.ilike("site_name",`%${e.site}%`)),e.dateFrom&&(t=t.gte("violation_date",e.dateFrom)),e.dateTo&&(t=t.lte("violation_date",e.dateTo));const{data:s,error:n}=await t;if(n)throw n;return s}catch(t){throw console.error("Error fetching violations:",t),t}},async getViolation(e){try{const{data:t,error:s}=await $.from("violations").select("*").eq("id",e).single();if(s)throw s;return t}catch(t){throw console.error("Error fetching violation:",t),t}},async createViolation(e){try{const{data:t,error:s}=await $.from("violations").insert([e]).select().single();if(s)throw s;return t}catch(t){throw console.error("Error creating violation:",t),t}},async updateViolation(e,t){try{const{data:s,error:n}=await $.from("violations").update(t).eq("id",e).select().single();if(n)throw n;return s}catch(s){throw console.error("Error updating violation:",s),s}},async deleteViolation(e){try{const{error:t}=await $.from("violations").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting violation:",t),t}}},m8={async getObservations(e={}){try{let t=$.from("observations").select("*").order("created_at",{ascending:!1});e.status&&(t=t.eq("status",e.status)),e.priority&&(t=t.eq("priority",e.priority)),e.type&&(t=t.eq("type",e.type)),e.site&&(t=t.ilike("site_name",`%${e.site}%`)),e.followUpRequired!==void 0&&(t=t.eq("follow_up_required",e.followUpRequired)),e.dateFrom&&(t=t.gte("observation_date",e.dateFrom)),e.dateTo&&(t=t.lte("observation_date",e.dateTo));const{data:s,error:n}=await t;if(n)throw n;return s}catch(t){throw console.error("Error fetching observations:",t),t}},async getObservation(e){try{const{data:t,error:s}=await $.from("observations").select("*").eq("id",e).single();if(s)throw s;return t}catch(t){throw console.error("Error fetching observation:",t),t}},async createObservation(e){try{const{data:t,error:s}=await $.from("observations").insert([e]).select().single();if(s)throw s;return t}catch(t){throw console.error("Error creating observation:",t),t}},async updateObservation(e,t){try{const{data:s,error:n}=await $.from("observations").update(t).eq("id",e).select().single();if(n)throw n;return s}catch(s){throw console.error("Error updating observation:",s),s}},async deleteObservation(e){try{const{error:t}=await $.from("observations").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting observation:",t),t}}},p8={async getTemplates(e={}){try{let t=$.from("report_templates").select("*").order("created_at",{ascending:!1});e.type&&(t=t.eq("template_type",e.type)),e.isActive!==void 0&&(t=t.eq("is_active",e.isActive));const{data:s,error:n}=await t;if(n)throw n;return s}catch(t){throw console.error("Error fetching templates:",t),t}},async getTemplate(e){try{const{data:t,error:s}=await $.from("report_templates").select("*").eq("id",e).single();if(s)throw s;return t}catch(t){throw console.error("Error fetching template:",t),t}},async createTemplate(e){try{const{data:t,error:s}=await $.from("report_templates").insert([e]).select().single();if(s)throw s;return t}catch(t){throw console.error("Error creating template:",t),t}},async updateTemplate(e,t){try{const{data:s,error:n}=await $.from("report_templates").update(t).eq("id",e).select().single();if(n)throw n;return s}catch(s){throw console.error("Error updating template:",s),s}},async deleteTemplate(e){try{const{error:t}=await $.from("report_templates").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting template:",t),t}}},lv=(e,t=new Date)=>{const s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${{Incident:"SIR",Patrol:"DPR",Inspection:"EIR",Assessment:"SAR",Violation:"VR",Observation:"OL"}[e]||"RPT"}-${s}-${n}${a}-${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`},x8=["Incident","Patrol","Inspection","Assessment","Violation","Observation","Equipment","Training","Maintenance","Other"],g8=["Low","Medium","High","Critical"],y8=["Draft","Under Review","Completed","Archived"],gS=({report:e=null,onClose:t,onSuccess:s})=>{var S,_,E;const[n,a]=f.useState({title:"",report_type:"",doc_number:"",site_id:null,entity_officer_id:null,security_officer_id:null,report_date:new Date().toISOString().split("T")[0],status:"Draft",priority:"Medium",description:"",findings:"",recommendations:"",attachments:[]}),[i,o]=f.useState(!1),[l,c]=f.useState([]),[d,u]=f.useState([]),[h,m]=f.useState([]),[g,x]=f.useState(!0),{toast:y}=ce(),w=!!e;f.useEffect(()=>{(async()=>{try{x(!0);const[O,A,R]=await Promise.all([yx(),hS(),$.from("sites").select("id, name, type").order("name")]);O.error?console.error("Error fetching entity staff:",O.error):c(O.data||[]),A.error?console.error("Error fetching security staff:",A.error):u(A.data||[]),R.error?console.error("Error fetching entities:",R.error):m(R.data||[])}catch(O){console.error("Error fetching data:",O),y({title:"Error",description:"Failed to load form data. Please try again.",variant:"destructive"})}finally{x(!1)}})()},[y]),f.useEffect(()=>{if(e)a({title:e.title||"",report_type:e.report_type||"",doc_number:e.doc_number||"",site_id:e.site_id||null,site_name:e.site_name||"",entity_officer_id:e.entity_officer_id||null,security_officer_id:e.security_officer_id||null,report_date:e.report_date||new Date().toISOString().split("T")[0],status:e.status||"Draft",priority:e.priority||"Medium",description:e.description||"",findings:e.findings||"",recommendations:e.recommendations||"",attachments:e.attachments||[]});else{const C=lv("Report",new Date);a(O=>({...O,doc_number:C}))}},[e]);const p=(C,O)=>{a(A=>({...A,[C]:O}))},v=C=>{const O=C?parseInt(C):null,A=h.find(R=>R.id===O);a(R=>({...R,site_id:O,site_name:(A==null?void 0:A.name)||""}))},b=C=>{const O=lv(C,new Date);a(A=>({...A,report_type:C,doc_number:O}))},j=async C=>{C.preventDefault(),o(!0);try{let O;if(w?O=await pm.updateReport(e.id,n):O=await pm.createReport(n),O.error)throw O.error;y({title:w?"Report Updated":"Report Created",description:`${n.title} has been ${w?"updated":"created"} successfully.`,variant:"default"}),s==null||s(O),t()}catch(O){console.error("Error saving report:",O),y({title:"Error",description:O.message||"Failed to save report. Please try again.",variant:"destructive"})}finally{o(!1)}};return r.jsx(Et,{children:r.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:C=>C.stopPropagation(),children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[w?r.jsx(Ns,{className:"w-5 h-5 text-blue-400"}):r.jsx(ct,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:w?"Edit Report":"Create New Report"})]}),r.jsx(I,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Bt,{className:"w-4 h-4"})})]}),r.jsx(V,{children:r.jsxs("form",{onSubmit:j,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white border-b border-slate-600 pb-2",children:"Basic Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"title",className:"text-white",children:"Report Title"}),r.jsx(ee,{id:"title",value:n.title,onChange:C=>p("title",C.target.value),placeholder:"Enter report title",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"report_type",className:"text-white",children:"Report Type"}),r.jsxs(be,{value:n.report_type,onValueChange:b,children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:"Select report type"})}),r.jsx(ye,{className:"bg-slate-800 border-slate-600",children:x8.map(C=>r.jsx(Z,{value:C,className:"text-white",children:C},C))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"doc_number",className:"text-white",children:"Document Number"}),r.jsx(ee,{id:"doc_number",value:n.doc_number,onChange:C=>p("doc_number",C.target.value),placeholder:"Auto-generated",className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"report_date",className:"text-white",children:"Report Date"}),r.jsx(ee,{id:"report_date",type:"date",value:n.report_date,onChange:C=>p("report_date",C.target.value),className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"site_id",className:"text-white",children:"Entity"}),r.jsxs(be,{value:((S=n.site_id)==null?void 0:S.toString())||"",onValueChange:v,disabled:g,children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:g?"Loading...":"Select entity"})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"",className:"text-white",children:"No entity selected"}),h.map(C=>r.jsxs(Z,{value:C.id.toString(),className:"text-white",children:[C.name," (",C.type,")"]},C.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"entity_officer_id",className:"text-white",children:"Entity Officer"}),r.jsxs(be,{value:((_=n.entity_officer_id)==null?void 0:_.toString())||"",onValueChange:C=>p("entity_officer_id",C?parseInt(C):null),disabled:g,children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:g?"Loading...":"Select entity officer"})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"",className:"text-white",children:"No entity officer assigned"}),l.map(C=>r.jsxs(Z,{value:C.id.toString(),className:"text-white",children:[C.name," - ",C.role]},C.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"security_officer_id",className:"text-white",children:"Security Officer"}),r.jsxs(be,{value:((E=n.security_officer_id)==null?void 0:E.toString())||"",onValueChange:C=>p("security_officer_id",C?parseInt(C):null),disabled:g,children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:g?"Loading...":"Select security officer"})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"",className:"text-white",children:"No security officer assigned"}),d.map(C=>r.jsxs(Z,{value:C.id.toString(),className:"text-white",children:[C.name," - ",C.role]},C.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"priority",className:"text-white",children:"Priority"}),r.jsxs(be,{value:n.priority,onValueChange:C=>p("priority",C),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsx(ye,{className:"bg-slate-800 border-slate-600",children:g8.map(C=>r.jsx(Z,{value:C,className:"text-white",children:C},C))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"status",className:"text-white",children:"Status"}),r.jsxs(be,{value:n.status,onValueChange:C=>p("status",C),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsx(ye,{className:"bg-slate-800 border-slate-600",children:y8.map(C=>r.jsx(Z,{value:C,className:"text-white",children:C},C))})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white border-b border-slate-600 pb-2",children:"Report Content"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"description",className:"text-white",children:"Description"}),r.jsx(mt,{id:"description",value:n.description,onChange:C=>p("description",C.target.value),placeholder:"Provide a detailed description of the incident, observation, or event...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"findings",className:"text-white",children:"Findings"}),r.jsx(mt,{id:"findings",value:n.findings,onChange:C=>p("findings",C.target.value),placeholder:"Document any findings, evidence, or observations...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"recommendations",className:"text-white",children:"Recommendations"}),r.jsx(mt,{id:"recommendations",value:n.recommendations,onChange:C=>p("recommendations",C.target.value),placeholder:"Provide recommendations for improvement, corrective actions, or follow-up...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[100px]"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white border-b border-slate-600 pb-2",children:"Attachments"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{className:"text-white",children:"File Attachments"}),r.jsxs("div",{className:"border-2 border-dashed border-slate-600 rounded-lg p-6 text-center",children:[r.jsx(ke,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),r.jsxs("p",{className:"text-slate-400 text-sm",children:[w?"Update attachments":"Add attachments"," (Coming Soon)"]}),r.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Support for images, documents, and other files"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-600",children:[r.jsx(I,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"}),r.jsx(I,{type:"submit",disabled:i,className:"bg-blue-600 hover:bg-blue-700",children:i?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ss,{className:"w-4 h-4"}),r.jsxs("span",{children:[w?"Update":"Create"," Report"]})]})})]})]})})]})})})})},v8=()=>{const e=er(),t=gn(),{toast:s}=ce(),[n,a]=f.useState(!1),i=()=>{a(!0)},o=()=>t.pathname.includes("/reports/list")?"list":t.pathname.includes("/reports/violations")?"violations":t.pathname.includes("/reports/observations")?"observations":t.pathname.includes("/reports/templates")?"templates":"list";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-white",children:"Reports & Documentation"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Manage security reports, violations, and observations"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(I,{onClick:i,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Create Report"]}),r.jsxs(I,{variant:"outline",className:"border-white/20",onClick:()=>s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),children:[r.jsx(jp,{className:"w-4 h-4 mr-2"}),"Filter"]})]})]}),r.jsxs(Ot,{defaultValue:o(),onValueChange:l=>e(`/reports/${l}`),className:"space-y-6",children:[r.jsxs(bt,{className:"bg-white/10 border border-white/20",children:[r.jsx(ae,{value:"list",children:"Reports"}),r.jsx(ae,{value:"violations",children:"Violations"}),r.jsx(ae,{value:"observations",children:"Observations"}),r.jsx(ae,{value:"templates",children:"Templates"})]}),r.jsx(Bb,{})]}),n&&r.jsx(gS,{onClose:()=>a(!1),onSuccess:l=>{s({title:"Report Created",description:"The report has been created successfully.",variant:"default"}),window.location.reload()}})]})},w8=()=>{const[e,t]=f.useState(""),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(!1),[c,d]=f.useState(null),{toast:u}=ce(),h=p=>{u({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},m=p=>{d(p),l(!0)},g=p=>{u({title:"Report Export",description:"Report exported successfully to PDF format"})},x=p=>{u({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},y=async()=>{try{i(!0);const p=await pm.getReports();n(p)}catch(p){console.error("Error fetching reports:",p),u({variant:"destructive",title:"Error",description:"Failed to load reports. Please try again."})}finally{i(!1)}};f.useEffect(()=>{y()},[u]);const w=s.filter(p=>p.title.toLowerCase().includes(e.toLowerCase())||p.doc_number.toLowerCase().includes(e.toLowerCase())||p.officer_name.toLowerCase().includes(e.toLowerCase()));return r.jsxs(B,{children:[r.jsx(W,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(G,{className:"flex items-center space-x-2",children:[r.jsx(ke,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Security Reports"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search reports...",value:e,onChange:p=>t(p.target.value),className:"pl-10 w-80 bg-white/5 border-white/10"})]})]})}),r.jsx(V,{children:w.length===0&&!e?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ke,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Reports Yet"}),r.jsx("p",{className:"text-gray-400",children:"Create a new report to get started."})]}):w.length===0&&e?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(Rt,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Reports Found"}),r.jsx("p",{className:"text-gray-400",children:"Try adjusting your search terms."})]}):a?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ft,{className:"w-8 h-8 text-blue-400 mx-auto mb-4 animate-spin"}),r.jsx("p",{className:"text-gray-400",children:"Loading reports..."})]}):r.jsx("div",{className:"space-y-4",children:w.map(p=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:p.title}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.priority==="High"?"bg-red-500/20 text-red-400":p.priority==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[p.priority," Priority"]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.status==="Completed"?"bg-green-500/20 text-green-400":p.status==="Under Review"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:p.status})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400 mb-2",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(OT,{className:"w-4 h-4 mr-1"}),p.doc_number]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),p.report_type]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Ls,{className:"w-4 h-4 mr-1"}),new Date(p.report_date).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[r.jsxs("span",{children:["Site: ",p.site_name]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Entity Officer: ",p.entity_officer_name]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Security Officer: ",p.security_officer_name]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>h(p.id),className:"border-blue-500/30 hover:bg-blue-500/10",children:[r.jsx(qn,{className:"w-4 h-4 mr-1"}),"View"]}),r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>m(p),className:"border-yellow-500/30 hover:bg-yellow-500/10",children:[r.jsx(Ns,{className:"w-4 h-4 mr-1"}),"Edit"]}),r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>g(p.id),className:"border-green-500/30 hover:bg-green-500/10",children:[r.jsx(kj,{className:"w-4 h-4 mr-1"}),"Export"]}),r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>x(p.id),className:"border-purple-500/30 hover:bg-purple-500/10",children:[r.jsx(XT,{className:"w-4 h-4 mr-1"}),"Share"]})]})]})},p.id))})}),o&&c&&r.jsx(gS,{report:c,onClose:()=>{l(!1),d(null)},onSuccess:p=>{u({title:"Report Updated",description:"The report has been updated successfully.",variant:"default"}),y(),l(!1),d(null)}})]})},b8=()=>{const[e,t]=f.useState([]),[s,n]=f.useState(!0),{toast:a}=ce();return f.useEffect(()=>{(async()=>{try{n(!0);const o=await f8.getViolations();t(o)}catch(o){console.error("Error fetching violations:",o),a({variant:"destructive",title:"Error",description:"Failed to load violations. Please try again."})}finally{n(!1)}})()},[a]),r.jsxs(B,{children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2",children:[r.jsx(nt,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Violations & Events"})]})}),r.jsx(V,{children:s?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ft,{className:"w-8 h-8 text-red-400 mx-auto mb-4 animate-spin"}),r.jsx("p",{className:"text-gray-400",children:"Loading violations..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(nt,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Violations Found"}),r.jsx("p",{className:"text-gray-400",children:"No violations have been reported yet."})]}):r.jsx("div",{className:"space-y-4",children:e.map(i=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-red-500/10 border border-red-500/20 hover:bg-red-500/20 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:i.type}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.severity==="High"?"bg-red-500/20 text-red-400":i.severity==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[i.severity," Severity"]})]}),r.jsx("p",{className:"text-gray-300 text-sm mb-2",children:i.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[r.jsx("span",{children:i.location}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Reported by: ",i.reported_by_name]}),r.jsx("span",{children:""}),r.jsx("span",{children:new Date(i.violation_date).toLocaleDateString()})]})]}),r.jsx(I,{variant:"outline",size:"sm",onClick:()=>a({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),className:"border-red-500/30 hover:bg-red-500/10",children:"View Details"})]})},i.id))})})]})},j8=()=>{const[e,t]=f.useState([]),[s,n]=f.useState(!0),{toast:a}=ce();return f.useEffect(()=>{(async()=>{try{n(!0);const o=await m8.getObservations();t(o)}catch(o){console.error("Error fetching observations:",o),a({variant:"destructive",title:"Error",description:"Failed to load observations. Please try again."})}finally{n(!1)}})()},[a]),r.jsxs(B,{children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2",children:[r.jsx(qn,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Observations & Notes"})]})}),r.jsx(V,{children:s?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ft,{className:"w-8 h-8 text-blue-400 mx-auto mb-4 animate-spin"}),r.jsx("p",{className:"text-gray-400",children:"Loading observations..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(qn,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Observations Found"}),r.jsx("p",{className:"text-gray-400",children:"No observations have been recorded yet."})]}):r.jsx("div",{className:"space-y-4",children:e.map(i=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20 hover:bg-blue-500/20 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:i.type}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.priority==="High"?"bg-red-500/20 text-red-400":i.priority==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[i.priority," Priority"]})]}),r.jsx("p",{className:"text-gray-300 text-sm mb-2",children:i.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[r.jsx("span",{children:i.location}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Observer: ",i.observer_name]}),r.jsx("span",{children:""}),r.jsx("span",{children:new Date(i.observation_date).toLocaleDateString()})]})]}),r.jsx(I,{variant:"outline",size:"sm",onClick:()=>a({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),className:"border-blue-500/30 hover:bg-blue-500/10",children:"View Details"})]})},i.id))})})]})},N8=()=>{const[e,t]=f.useState([]),[s,n]=f.useState(!0),{toast:a}=ce();return f.useEffect(()=>{(async()=>{try{n(!0);const o=await p8.getTemplates();t(o)}catch(o){console.error("Error fetching templates:",o),a({variant:"destructive",title:"Error",description:"Failed to load templates. Please try again."})}finally{n(!1)}})()},[a]),r.jsxs(B,{children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2",children:[r.jsx(ke,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Dynamic Report Templates"})]})}),r.jsx(V,{children:s?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ft,{className:"w-8 h-8 text-purple-400 mx-auto mb-4 animate-spin"}),r.jsx("p",{className:"text-gray-400",children:"Loading templates..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(ke,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"No Templates Found"}),r.jsx("p",{className:"text-gray-400",children:"No report templates are available."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((i,o)=>r.jsxs(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:o*.1},className:"p-4 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors cursor-pointer",onClick:()=>a({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),children:[r.jsx(ke,{className:"w-8 h-8 text-purple-400 mb-3"}),r.jsx("h3",{className:"text-white font-medium mb-2",children:i.title}),r.jsx("p",{className:"text-gray-400 text-sm",children:i.description})]},i))})})]})},S8=r.jsxs(_e,{path:"reports",element:r.jsx(v8,{}),children:[r.jsx(_e,{index:!0,element:r.jsx(bf,{to:"list",replace:!0})}),r.jsx(_e,{path:"list",element:r.jsx(w8,{})}),r.jsx(_e,{path:"violations",element:r.jsx(b8,{})}),r.jsx(_e,{path:"observations",element:r.jsx(j8,{})}),r.jsx(_e,{path:"templates",element:r.jsx(N8,{})})]}),_8=({schedule:e})=>{const{toast:t}=ce();return r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.officer}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.status==="Confirmed"?"bg-green-500/20 text-green-400":e.status==="Pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:e.status}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.compliance==="Qualified"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:e.compliance})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-400",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(gt,{className:"w-4 h-4"}),r.jsx("span",{children:e.site})]}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsx("span",{children:e.shift}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Is,{className:"w-4 h-4"}),r.jsx("span",{children:e.time})]}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsx("span",{children:e.date})]})]}),r.jsx("div",{className:"flex items-center space-x-3 ml-2",children:r.jsx(I,{variant:"outline",size:"sm",onClick:()=>t({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),className:"border-slate-600 hover:bg-slate-700 text-gray-300",children:"Edit"})})]})})},C8=({person:e,onSchedule:t})=>(ce(),r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.name}),r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:e.position})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Start Date"}),r.jsx("p",{className:"text-white",children:e.startDate})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Training Status"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[e.trainingStatus==="Completed"?r.jsx(ze,{className:"w-4 h-4 text-green-400"}):r.jsx(Is,{className:"w-4 h-4 text-yellow-400"}),r.jsx("span",{className:e.trainingStatus==="Completed"?"text-green-400":"text-yellow-400",children:e.trainingStatus})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Credentials"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[e.credentialsStatus==="Approved"?r.jsx(ze,{className:"w-4 h-4 text-green-400"}):r.jsx(Bt,{className:"w-4 h-4 text-red-400"}),r.jsx("span",{className:e.credentialsStatus==="Approved"?"text-green-400":"text-red-400",children:e.credentialsStatus})]})]})]})]}),r.jsx("div",{className:"flex items-center space-x-3 ml-2",children:r.jsx(I,{variant:e.canSchedule?"default":"outline",size:"sm",onClick:()=>t(e.id,e.canSchedule),className:e.canSchedule?"bg-green-600 hover:bg-green-700":"border-red-500/30 text-red-400",disabled:!e.canSchedule,children:e.canSchedule?r.jsxs(r.Fragment,{children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Ready"]}):r.jsxs(r.Fragment,{children:[r.jsx(nt,{className:"w-4 h-4 mr-1"}),"Cannot Schedule"]})})})]})})),E8=({event:e})=>{const{toast:t}=ce();return r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.title}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.type==="Training"?"bg-blue-500/20 text-blue-400":e.type==="Audit"?"bg-purple-500/20 text-purple-400":"bg-yellow-500/20 text-yellow-400"}`,children:e.type}),r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-500/20 text-green-400",children:e.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-400",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ls,{className:"w-4 h-4"}),r.jsx("span",{children:e.date})]}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsxs("span",{children:["Duration: ",e.duration]}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(xe,{className:"w-4 h-4"}),r.jsx("span",{children:e.participants})]})]})]}),r.jsx("div",{className:"flex items-center space-x-3 ml-2",children:r.jsx(I,{variant:"outline",size:"sm",onClick:()=>t({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),className:"border-slate-600 hover:bg-slate-700 text-gray-300",children:"Manage"})})]})})},k8=()=>{const e=["Current Security Training Certification","Valid Background Check (within 2 years)","Site-Specific Training Completion","Equipment Certification","Health & Safety Training","Emergency Response Training"];return r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ze,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Compliance Verification System"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-500/10",children:[r.jsx(ze,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"Compliant Officers"}),r.jsx("p",{className:"text-2xl font-bold text-green-400",children:"234"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Ready for Scheduling"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-yellow-500/10",children:[r.jsx(nt,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"Training Due"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:"12"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Cannot Schedule"})]}),r.jsxs("div",{className:"text-center p-4 rounded-lg bg-red-500/10",children:[r.jsx(Bt,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),r.jsx("h3",{className:"text-white font-semibold",children:"Non-Compliant"}),r.jsx("p",{className:"text-2xl font-bold text-red-400",children:"3"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Immediate Action Required"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Compliance Requirements"}),e.map((t,s)=>r.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-slate-800/50",children:[r.jsx(ze,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-white",children:t})]},s))]})]})})]})},T8=()=>{const[e,t]=f.useState(""),{toast:s}=ce(),n=[{id:1,officer:"John Smith",site:"Corporate HQ Alpha",shift:"Day Shift",time:"08:00 - 16:00",date:"2025-07-15",status:"Confirmed",compliance:"Qualified"},{id:2,officer:"Sarah Johnson",site:"Metro Hospital East",shift:"Night Shift",time:"20:00 - 06:00",date:"2025-07-15",status:"Pending",compliance:"Training Due"},{id:3,officer:"Mike Rodriguez",site:"Retail Plaza Central",shift:"Evening Shift",time:"16:00 - 00:00",date:"2025-07-16",status:"Confirmed",compliance:"Qualified"}],a=[{id:1,title:"Annual Security Refresher Training",type:"Training",date:"2025-09-15",duration:"3 days",participants:"All Officers",status:"Scheduled"},{id:2,title:"ISO 18788 Compliance Audit",type:"Audit",date:"2025-11-20",duration:"2 days",participants:"Management Team",status:"Scheduled"},{id:3,title:"Emergency Response Full-Scale Drill",type:"Drill",date:"2026-01-10",duration:"1 day",participants:"Site Teams & ERT",status:"Planned"}],i=[{id:1,name:"Alex Thompson",position:"Security Officer",startDate:"2025-07-20",trainingStatus:"In Progress",credentialsStatus:"Pending",canSchedule:!1},{id:2,name:"Maria Garcia",position:"Site Supervisor",startDate:"2025-07-18",trainingStatus:"Completed",credentialsStatus:"Approved",canSchedule:!0},{id:3,name:"David Lee",position:"Security Officer",startDate:"2025-07-22",trainingStatus:"Scheduled",credentialsStatus:"Pending",canSchedule:!1}],o=()=>{s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},l=(h,m)=>{s(m?{title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}:{variant:"destructive",title:"Cannot Schedule Officer",description:"Officer must complete all training and credentials before scheduling."})},c="bg-transparent p-0 space-x-1",d="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",u="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(yr,{className:"w-8 h-8 mr-3 text-blue-400"}),"Scheduling System"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage employee schedules with integrated compliance verification."})]}),r.jsxs(I,{onClick:o,className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Create New Schedule"]})]}),r.jsxs(Ot,{defaultValue:"schedules",className:"space-y-6",children:[r.jsxs(bt,{className:`${c} border-b border-slate-700`,children:[r.jsx(ae,{value:"schedules",className:`${d} ${u}`,children:"Current Schedules"}),r.jsx(ae,{value:"onboarding",className:`${d} ${u}`,children:"Onboarding Queue"}),r.jsx(ae,{value:"yearly",className:`${d} ${u}`,children:"Yearly Events"}),r.jsx(ae,{value:"compliance",className:`${d} ${u}`,children:"Compliance Check"})]}),r.jsx(oe,{value:"schedules",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(bT,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Active Schedules"})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search schedules (officer, site)...",value:e,onChange:h=>t(h.target.value),className:"pl-10 w-full sm:w-80 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Overview of all current and upcoming employee schedules."})]}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[n.filter(h=>h.officer.toLowerCase().includes(e.toLowerCase())||h.site.toLowerCase().includes(e.toLowerCase())).map(h=>r.jsx(_8,{schedule:h},h.id)),n.length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"No active schedules found."})]})})]})}),r.jsx(oe,{value:"onboarding",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(xe,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Onboarding & Qualification Queue"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Track new hires through the onboarding and qualification process."})]}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[i.map(h=>r.jsx(C8,{person:h,onSchedule:l},h.id)),i.length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"Onboarding queue is empty."})]})})]})}),r.jsx(oe,{value:"yearly",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(yr,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Annual Event Scheduler"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Plan and manage yearly recurring events and compliance deadlines."})]}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[a.map(h=>r.jsx(E8,{event:h},h.id)),a.length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"No annual events scheduled."})]})})]})}),r.jsx(oe,{value:"compliance",className:"space-y-6",children:r.jsx(k8,{})})]})]})},P8=()=>{const[e,t]=f.useState(""),{toast:s}=ce(),n=[{title:"Incident Response Time",value:"4.2 min",change:"-12%",trend:"down",color:"green",icon:Xs},{title:"Officer Efficiency",value:"94.8%",change:"+3.2%",trend:"up",color:"blue",icon:xe},{title:"Site Coverage",value:"98.1%",change:"+1.5%",trend:"up",color:"purple",icon:gt},{title:"Training Compliance",value:"96.3%",change:"+2.1%",trend:"up",color:"yellow",icon:rt}],a=[{type:"Performance",title:"Peak Incident Hours Identified",description:"Analysis shows 67% of security incidents occur between 10 PM - 2 AM. Recommend increasing patrol frequency during these hours.",priority:"High",action:"Adjust Scheduling"},{type:"Efficiency",title:"Officer Rotation Optimization",description:"Current rotation patterns show 15% efficiency loss. AI suggests new rotation schedule to improve coverage by 23%.",priority:"Medium",action:"Review Schedule"},{type:"Training",title:"Skills Gap Analysis",description:"Emergency response training completion correlates with 34% faster incident resolution. Prioritize training for 12 officers.",priority:"Medium",action:"Schedule Training"}],i=()=>{if(!e.trim()){s({title:"Please enter a query",description:"Ask the AI about your security operations data"});return}s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},o=()=>{s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},l=()=>{s({title:" Data Export Not Implemented",description:"This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})};return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Pt,{className:"w-8 h-8 mr-3 text-blue-400"}),"AI-Assisted Analytics"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Unlock actionable insights from your operational data."})]}),r.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[r.jsxs(I,{onClick:o,className:"ios-button bg-purple-600 hover:bg-purple-700",children:[r.jsx(ke,{className:"w-4 h-4 mr-2"}),"Generate Report"]}),r.jsxs(I,{onClick:l,variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(kj,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(I,{variant:"outline",className:"glass-button",children:[r.jsx(jT,{className:"w-4 h-4 mr-2"})," Date Range"]}),r.jsxs(I,{variant:"outline",className:"glass-button",children:[r.jsx(jp,{className:"w-4 h-4 mr-2"})," Filters"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map((c,d)=>r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.05},children:r.jsx(B,{className:"ios-card hover-lift",children:r.jsx(V,{className:"p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:c.title}),r.jsx("p",{className:"text-2xl font-bold text-white",children:c.value}),r.jsxs("p",{className:`text-xs flex items-center mt-1 ${c.trend==="up"?"text-green-400":"text-red-400"}`,children:[r.jsx(ws,{className:`w-3 h-3 mr-1 ${c.trend==="down"?"transform rotate-180":""}`}),c.change]})]}),r.jsx("div",{className:`p-2.5 rounded-lg bg-gradient-to-br from-${c.color}-500/20 to-${c.color}-600/30`,children:r.jsx(c.icon,{className:`w-5 h-5 text-${c.color}-400`})})]})})})},c.title))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Rf,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"AI Analytics Assistant"})]}),r.jsx(he,{className:"text-gray-400",children:"Ask natural language questions about your data."})]}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(ee,{placeholder:"E.g., 'Show incident trends for Site Alpha last month'",value:e,onChange:c=>t(c.target.value),className:"flex-1 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500",onKeyPress:c=>c.key==="Enter"&&i()}),r.jsxs(I,{onClick:i,className:"ios-button bg-purple-600 hover:bg-purple-700",children:[r.jsx(Do,{className:"w-4 h-4 mr-1"}),"Query AI"]})]}),r.jsxs("div",{className:"space-y-2 pt-2",children:[r.jsx("h4",{className:"text-white font-medium text-sm",children:"Suggested Queries:"}),["Incident trends last 30 days?","Highest risk sites?","Officer performance by region?","Predict staffing needs next month."].map((c,d)=>r.jsx("button",{onClick:()=>t(c),className:"block w-full text-left p-2.5 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors text-gray-300 text-sm",children:c},d))]})]})})]})}),r.jsx(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Pt,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Performance Overview"})]}),r.jsx(he,{className:"text-gray-400",children:"Key operational charts and visualizations."})]}),r.jsx(V,{children:r.jsx("div",{className:"space-y-4",children:r.jsx("div",{className:"h-64 bg-gradient-to-br from-blue-600/20 to-purple-700/20 rounded-lg border border-slate-700 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Pt,{className:"w-16 h-16 text-blue-400 mx-auto mb-4 opacity-70"}),r.jsx("p",{className:"text-white font-medium",children:"Interactive Charts Area"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time performance visualization (Coming Soon)"})]})})})})]})})]}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Rf,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"AI-Generated Insights"})]}),r.jsx(he,{className:"text-gray-400",children:"Actionable recommendations based on data analysis."})]}),r.jsx(V,{children:r.jsx("div",{className:"space-y-4",children:a.map((c,d)=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5+d*.1},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.type==="Performance"?"bg-blue-500/20 text-blue-400":c.type==="Efficiency"?"bg-green-500/20 text-green-400":"bg-purple-500/20 text-purple-400"}`,children:c.type}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.priority==="High"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:[c.priority," Priority"]})]}),r.jsx("h3",{className:"text-white font-semibold mb-1",children:c.title}),r.jsx("p",{className:"text-gray-300 text-sm mb-3",children:c.description})]}),r.jsx(I,{variant:"outline",size:"sm",onClick:()=>s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),className:"ios-button border-slate-600 hover:bg-slate-700 ml-4 mt-1",children:c.action})]})},d))})})]})})]})},A8=()=>{var w;const[e,t]=f.useState(""),[s,n]=f.useState("Channel 1 - Main"),[a,i]=f.useState(""),{toast:o}=ce(),l=[{id:1,name:"Site Alpha Team",lastMessage:"All clear on perimeter check. Standing by for next instructions.",time:"2 min ago",unread:0,type:"group",status:"online",avatar:"SA"},{id:2,name:"John Smith (Officer)",lastMessage:"Incident report #IR-0045 submitted for review.",time:"15 min ago",unread:2,type:"direct",status:"online",avatar:"JS"},{id:3,name:"Emergency Response Channel",lastMessage:"Drill completed successfully. All teams accounted for.",time:"1 hour ago",unread:0,type:"emergency",status:"active",avatar:"ER"},{id:4,name:"Management Group",lastMessage:"Weekly operations meeting scheduled for Friday 10 AM.",time:"3 hours ago",unread:1,type:"group",status:"online",avatar:"MG"}],c=[{id:1,name:"Channel 1 - Main Ops",users:23,status:"active"},{id:2,name:"Channel 2 - Emergency",users:8,status:"standby"},{id:3,name:"Channel 3 - Site Bravo",users:12,status:"active"},{id:4,name:"Channel 4 - Management",users:5,status:"private"}],d=[{id:1,sender:"Sarah Johnson",content:"Perimeter check complete. All secure.",time:"14:32",type:"received"},{id:2,sender:"You",content:"Copy that. Good work. Any anomalies to report?",time:"14:33",type:"sent"},{id:3,sender:"Sarah Johnson",content:"Negative, all clear. Sector 4 camera seems a bit foggy, might need cleaning.",time:"14:34",type:"received"},{id:4,sender:"Mike Rodriguez",content:"Maintenance crew arriving at 15:00 for camera checks.",time:"14:35",type:"received"}],u=()=>{e.trim()&&(o({title:"Message Sent",description:"Your message has been delivered to Site Alpha Team."}),t(""))},h=()=>{o({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},m=()=>{o({title:"Emergency Broadcast Sent",description:"Critical alert dispatched to all active personnel and channels."})},g="bg-transparent p-0 space-x-1",x="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",y="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Oo,{className:"w-8 h-8 mr-3 text-blue-400"}),"Real-Time Communications"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Instant messaging and radio system for seamless operations."})]}),r.jsxs(I,{onClick:m,className:"ios-button bg-red-600 hover:bg-red-700 mt-4 sm:mt-0",children:[r.jsx(nt,{className:"w-4 h-4 mr-2"}),"Emergency Broadcast"]})]}),r.jsxs(Ot,{defaultValue:"messaging",className:"space-y-6",children:[r.jsxs(bt,{className:`${g} border-b border-slate-700`,children:[r.jsx(ae,{value:"messaging",className:`${x} ${y}`,children:"Instant Messaging"}),r.jsx(ae,{value:"radio",className:`${x} ${y}`,children:"Radio System"}),r.jsx(ae,{value:"emergency_log",className:`${x} ${y}`,children:"Emergency Log"})]}),r.jsx(oe,{value:"messaging",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-280px)] min-h-[500px]",children:[r.jsx(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:r.jsxs(B,{className:"ios-card h-full flex flex-col",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(xe,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Conversations"})]}),r.jsxs("div",{className:"relative mt-2",children:[r.jsx(Rt,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search chats...",className:"pl-8 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500",value:a,onChange:p=>i(p.target.value)})]})]}),r.jsx(V,{className:"flex-grow overflow-y-auto scrollbar-hide pr-1",children:r.jsx("div",{className:"space-y-2",children:l.filter(p=>p.name.toLowerCase().includes(a.toLowerCase())).map(p=>r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/40 hover:bg-slate-700/60 transition-colors cursor-pointer border border-slate-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${p.status==="online"?"bg-green-500":"bg-gray-500"}`}),r.jsx("span",{className:"text-white font-medium text-sm",children:p.name})]}),p.unread>0&&r.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full px-1.5 py-0.5 font-semibold",children:p.unread})]}),r.jsx("p",{className:"text-gray-400 text-xs truncate",children:p.lastMessage}),r.jsx("p",{className:"text-gray-500 text-xs mt-0.5 text-right",children:p.time})]},p.id))})})]})}),r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:r.jsxs(B,{className:"ios-card h-full flex flex-col",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center justify-between text-white",children:[r.jsx("span",{children:"Site Alpha Team"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2.5 h-2.5 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-400",children:"23 online"})]})]})}),r.jsxs(V,{className:"flex-grow flex flex-col overflow-hidden",children:[r.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4 p-2 bg-slate-900/30 rounded-lg scrollbar-hide",children:d.map(p=>r.jsx("div",{className:`flex ${p.type==="sent"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[70%] p-2.5 rounded-xl shadow ${p.type==="sent"?"bg-blue-600 text-white rounded-br-none":"bg-slate-700 text-white rounded-bl-none"}`,children:[p.type==="received"&&r.jsx("p",{className:"text-xs text-blue-300 mb-0.5 font-medium",children:p.sender}),r.jsx("p",{className:"text-sm",children:p.content}),r.jsx("p",{className:`text-xs opacity-70 mt-1 ${p.type==="sent"?"text-blue-200":"text-slate-400"} text-right`,children:p.time})]})},p.id))}),r.jsxs("div",{className:"flex space-x-2 items-center pt-2 border-t border-slate-700",children:[r.jsx(I,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-blue-400",children:r.jsx(UT,{className:"w-5 h-5"})}),r.jsx(ee,{placeholder:"Type your message...",value:e,onChange:p=>t(p.target.value),className:"flex-1 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500",onKeyPress:p=>p.key==="Enter"&&u()}),r.jsx(I,{onClick:u,className:"ios-button bg-blue-600 hover:bg-blue-700",children:r.jsx(YT,{className:"w-4 h-4"})})]})]})]})})]})}),r.jsx(oe,{value:"radio",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(z.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ng,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Radio Control Panel"})]}),r.jsx(he,{className:"text-gray-400",children:"Push-to-talk and channel management."})]}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-6 text-center",children:[r.jsx("div",{className:"w-40 h-40 bg-gradient-to-br from-green-600/20 to-emerald-700/30 rounded-full flex items-center justify-center mx-auto mb-4 border-4 border-green-500/40 shadow-lg",children:r.jsx(ng,{className:"w-20 h-20 text-green-400"})}),r.jsx("p",{className:"text-white font-semibold text-lg",children:s}),r.jsxs("p",{className:"text-gray-400 text-sm -mt-2",children:[((w=c.find(p=>p.name===s))==null?void 0:w.users)||0," users connected"]}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsxs(I,{onClick:h,className:"ios-button bg-green-600 hover:bg-green-700 px-8 py-6 text-lg rounded-xl",children:[r.jsx(Np,{className:"w-5 h-5 mr-2"}),"Push to Talk"]}),r.jsx(I,{variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700 p-4 rounded-xl",onClick:()=>o({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),children:r.jsx(HT,{className:"w-5 h-5"})})]})]})})]})}),r.jsx(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:r.jsxs(B,{className:"ios-card h-full",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(xe,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Radio Channels"})]}),r.jsx(he,{className:"text-gray-400",children:"Select an active radio channel."})]}),r.jsx(V,{className:"overflow-y-auto scrollbar-hide max-h-[300px]",children:r.jsx("div",{className:"space-y-2.5",children:c.map(p=>r.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-all duration-150 ${p.name===s?"bg-green-500/20 border-green-500/40 ring-2 ring-green-500":"bg-slate-800/40 border-slate-700 hover:bg-slate-700/60"}`,onClick:()=>n(p.name),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium text-sm",children:p.name}),r.jsxs("p",{className:"text-gray-400 text-xs",children:[p.users," users"]})]}),r.jsxs("div",{className:"flex items-center space-x-1.5",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${p.status==="active"?"bg-green-500":p.status==="standby"?"bg-yellow-500":"bg-gray-500"}`}),r.jsx("span",{className:"text-xs text-gray-400 capitalize",children:p.status})]})]})},p.id))})})]})})]})}),r.jsx(oe,{value:"emergency_log",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(nt,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:"Emergency Communications Log"})]}),r.jsx(he,{className:"text-gray-400",children:"Record of all critical alerts and broadcasts."})]}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-3",children:[[{type:"Drill",message:"Fire drill completed - All personnel accounted for. Duration: 15 mins.",time:"2 hours ago",status:"resolved"},{type:"Alert",message:"Severe weather warning issued for Sector Gamma. Secure outdoor equipment immediately.",time:"1 day ago",status:"resolved"},{type:"Incident",message:"Medical emergency reported at Building A, Floor 3. EMS dispatched.",time:"3 days ago",status:"active_monitoring"}].map((p,v)=>r.jsx("div",{className:"p-3.5 rounded-lg bg-slate-800/40 border border-slate-700",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2.5 mb-1.5",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${p.type==="Drill"?"bg-blue-500/20 text-blue-400":p.type==="Alert"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:p.type}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${p.status==="resolved"?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:p.status.replace("_"," ").toUpperCase()})]}),r.jsx("p",{className:"text-white text-sm",children:p.message})]}),r.jsx("p",{className:"text-gray-400 text-xs mt-0.5 ml-3 whitespace-nowrap",children:p.time})]})},v)),d.length===0&&r.jsx("p",{className:"text-center text-gray-500 py-4",children:"No emergency communications logged yet."})]})})]})})]})]})},R8=({standard:e,index:t})=>{const s=()=>e.standard==="ISO 18788"?r.jsx(Ke,{className:"w-5 h-5 text-blue-400"}):e.standard==="ISO 14001"?r.jsx($T,{className:"w-5 h-5 text-green-400"}):r.jsx(xe,{className:"w-5 h-5 text-yellow-400"});return r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:t*.1},children:r.jsxs(B,{className:"ios-card hover-lift",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[s(),r.jsx("span",{className:"text-lg text-white",children:e.standard})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.status==="Certified"?"bg-green-500/20 text-green-400":e.status==="In Progress"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:e.status})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-400 text-sm",children:e.title}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Compliance"}),r.jsxs("span",{className:"text-white font-semibold",children:[e.compliance,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${e.compliance>=95?"bg-green-500":e.compliance>=85?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.compliance}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Last Audit"}),r.jsx("p",{className:"text-white",children:e.lastAudit})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Next Audit"}),r.jsx("p",{className:"text-white",children:e.nextAudit})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Open Findings"}),r.jsx("span",{className:`font-semibold ${e.findings===0?"text-green-400":e.findings<=3?"text-yellow-400":"text-red-400"}`,children:e.findings})]})]})})]})})},O8=({audit:e})=>{const{toast:t}=ce(),s=n=>{t({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})};return r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.type}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.standard==="ISO 18788"?"bg-blue-500/20 text-blue-400":e.standard==="ISO 14001"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:e.standard}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.status==="Completed"?"bg-green-500/20 text-green-400":e.status==="In Progress"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:e.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-400",children:[r.jsxs("span",{children:["Auditor: ",e.auditor]}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ls,{className:"w-4 h-4"}),r.jsx("span",{children:e.date})]}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsx("span",{children:e.site}),e.findings>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsxs("span",{className:"text-yellow-400",children:[e.findings," findings"]})]})]})]}),r.jsx("div",{className:"flex items-center space-x-3 ml-2",children:r.jsx(I,{variant:"outline",size:"sm",onClick:()=>s(e.id),className:"border-slate-600 hover:bg-slate-700 text-gray-300",children:"View Details"})})]})})};var jh="focusScope.autoFocusOnMount",Nh="focusScope.autoFocusOnUnmount",cv={bubbles:!1,cancelable:!0},D8="FocusScope",yS=f.forwardRef((e,t)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=f.useState(null),d=$s(a),u=$s(i),h=f.useRef(null),m=Zt(t,y=>c(y)),g=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let y=function(b){if(g.paused||!l)return;const j=b.target;l.contains(j)?h.current=j:Ir(h.current,{select:!0})},w=function(b){if(g.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||Ir(h.current,{select:!0}))},p=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&Ir(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const v=new MutationObserver(p);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),v.disconnect()}}},[n,l,g.paused]),f.useEffect(()=>{if(l){uv.add(g);const y=document.activeElement;if(!l.contains(y)){const p=new CustomEvent(jh,cv);l.addEventListener(jh,d),l.dispatchEvent(p),p.defaultPrevented||(M8(V8(vS(l)),{select:!0}),document.activeElement===y&&Ir(l))}return()=>{l.removeEventListener(jh,d),setTimeout(()=>{const p=new CustomEvent(Nh,cv);l.addEventListener(Nh,u),l.dispatchEvent(p),p.defaultPrevented||Ir(y??document.body,{select:!0}),l.removeEventListener(Nh,u),uv.remove(g)},0)}}},[l,d,u,g]);const x=f.useCallback(y=>{if(!s&&!n||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,p=document.activeElement;if(w&&p){const v=y.currentTarget,[b,j]=$8(v);b&&j?!y.shiftKey&&p===j?(y.preventDefault(),s&&Ir(b,{select:!0})):y.shiftKey&&p===b&&(y.preventDefault(),s&&Ir(j,{select:!0})):p===v&&y.preventDefault()}},[s,n,g.paused]);return r.jsx(Oe.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});yS.displayName=D8;function M8(e,{select:t=!1}={}){const s=document.activeElement;for(const n of e)if(Ir(n,{select:t}),document.activeElement!==s)return}function $8(e){const t=vS(e),s=dv(t,e),n=dv(t.reverse(),e);return[s,n]}function vS(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function dv(e,t){for(const s of e)if(!L8(s,{upTo:t}))return s}function L8(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function I8(e){return e instanceof HTMLInputElement&&"select"in e}function Ir(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&I8(e)&&t&&e.select()}}var uv=F8();function F8(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=hv(e,t),e.unshift(t)},remove(t){var s;e=hv(e,t),(s=e[0])==null||s.resume()}}}function hv(e,t){const s=[...e],n=s.indexOf(t);return n!==-1&&s.splice(n,1),s}function V8(e){return e.filter(t=>t.tagName!=="A")}var Sh=0;function B8(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??fv()),document.body.insertAdjacentElement("beforeend",e[1]??fv()),Sh++,()=>{Sh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Sh--}},[])}function fv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var wS=z2(),_h=function(){},ru=f.forwardRef(function(e,t){var s=f.useRef(null),n=f.useState({onScrollCapture:_h,onWheelCapture:_h,onTouchMoveCapture:_h}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,g=e.noRelative,x=e.noIsolation,y=e.inert,w=e.allowPinchZoom,p=e.as,v=p===void 0?"div":p,b=e.gapMode,j=dx(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,_=B2([s,t]),E=kt(kt({},j),a);return f.createElement(f.Fragment,null,u&&f.createElement(S,{sideCar:wS,removeScrollBar:d,shards:h,noRelative:g,noIsolation:x,inert:y,setCallbacks:i,allowPinchZoom:!!w,lockRef:s,gapMode:b}),o?f.cloneElement(f.Children.only(l),kt(kt({},E),{ref:_})):f.createElement(v,kt({},E,{className:c,ref:_}),l))});ru.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ru.classNames={fullWidth:lo,zeroRight:oo};var xm=!1;if(typeof window<"u")try{var Wl=Object.defineProperty({},"passive",{get:function(){return xm=!0,!0}});window.addEventListener("test",Wl,Wl),window.removeEventListener("test",Wl,Wl)}catch{xm=!1}var ma=xm?{passive:!1}:!1,z8=function(e){return e.tagName==="TEXTAREA"},bS=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!z8(e)&&s[t]==="visible")},U8=function(e){return bS(e,"overflowY")},H8=function(e){return bS(e,"overflowX")},mv=function(e,t){var s=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=jS(e,n);if(a){var i=NS(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},q8=function(e){var t=e.scrollTop,s=e.scrollHeight,n=e.clientHeight;return[t,s,n]},W8=function(e){var t=e.scrollLeft,s=e.scrollWidth,n=e.clientWidth;return[t,s,n]},jS=function(e,t){return e==="v"?U8(t):H8(t)},NS=function(e,t){return e==="v"?q8(t):W8(t)},G8=function(e,t){return e==="h"&&t==="rtl"?-1:1},K8=function(e,t,s,n,a){var i=G8(e,window.getComputedStyle(t).direction),o=i*n,l=s.target,c=t.contains(l),d=!1,u=o>0,h=0,m=0;do{if(!l)break;var g=NS(e,l),x=g[0],y=g[1],w=g[2],p=y-w-i*x;(x||p)&&jS(e,l)&&(h+=p,m+=x);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(a&&Math.abs(h)<1||!a&&o>h)||!u&&(a&&Math.abs(m)<1||!a&&-o>m))&&(d=!0),d},Gl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},pv=function(e){return[e.deltaX,e.deltaY]},xv=function(e){return e&&"current"in e?e.current:e},Y8=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Q8=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},J8=0,pa=[];function X8(e){var t=f.useRef([]),s=f.useRef([0,0]),n=f.useRef(),a=f.useState(J8++)[0],i=f.useState(ux)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var y=V2([e.lockRef.current],(e.shards||[]).map(xv),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var p=Gl(y),v=s.current,b="deltaX"in y?y.deltaX:v[0]-p[0],j="deltaY"in y?y.deltaY:v[1]-p[1],S,_=y.target,E=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in y&&E==="h"&&_.type==="range")return!1;var C=mv(E,_);if(!C)return!0;if(C?S=E:(S=E==="v"?"h":"v",C=mv(E,_)),!C)return!1;if(!n.current&&"changedTouches"in y&&(b||j)&&(n.current=S),!S)return!0;var O=n.current||S;return K8(O,w,y,O==="h"?b:j,!0)},[]),c=f.useCallback(function(y){var w=y;if(!(!pa.length||pa[pa.length-1]!==i)){var p="deltaY"in w?pv(w):Gl(w),v=t.current.filter(function(S){return S.name===w.type&&(S.target===w.target||w.target===S.shadowParent)&&Y8(S.delta,p)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(xv).filter(Boolean).filter(function(S){return S.contains(w.target)}),j=b.length>0?l(w,b[0]):!o.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),d=f.useCallback(function(y,w,p,v){var b={name:y,delta:w,target:p,should:v,shadowParent:Z8(p)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),u=f.useCallback(function(y){s.current=Gl(y),n.current=void 0},[]),h=f.useCallback(function(y){d(y.type,pv(y),y.target,l(y,e.lockRef.current))},[]),m=f.useCallback(function(y){d(y.type,Gl(y),y.target,l(y,e.lockRef.current))},[]);f.useEffect(function(){return pa.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ma),document.addEventListener("touchmove",c,ma),document.addEventListener("touchstart",u,ma),function(){pa=pa.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,ma),document.removeEventListener("touchmove",c,ma),document.removeEventListener("touchstart",u,ma)}},[]);var g=e.removeScrollBar,x=e.inert;return f.createElement(f.Fragment,null,x?f.createElement(i,{styles:Q8(a)}):null,g?f.createElement(W2,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Z8(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const e7=H2(wS,X8);var SS=f.forwardRef(function(e,t){return f.createElement(ru,kt({},e,{ref:t,sideCar:e7}))});SS.classNames=ru.classNames;const t7=SS;var nu="Dialog",[_S,CF]=ta(nu),[s7,Bs]=_S(nu),CS=e=>{const{__scopeDialog:t,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=f.useRef(null),c=f.useRef(null),[d,u]=Qo({prop:n,defaultProp:a??!1,onChange:i,caller:nu});return r.jsx(s7,{scope:t,triggerRef:l,contentRef:c,contentId:io(),titleId:io(),descriptionId:io(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(h=>!h),[u]),modal:o,children:s})};CS.displayName=nu;var ES="DialogTrigger",r7=f.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Bs(ES,s),i=Zt(t,a.triggerRef);return r.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":jx(a.open),...n,ref:i,onClick:Re(e.onClick,a.onOpenToggle)})});r7.displayName=ES;var wx="DialogPortal",[n7,kS]=_S(wx,{forceMount:void 0}),TS=e=>{const{__scopeDialog:t,forceMount:s,children:n,container:a}=e,i=Bs(wx,t);return r.jsx(n7,{scope:t,forceMount:s,children:f.Children.map(n,o=>r.jsx(li,{present:s||i.open,children:r.jsx(mp,{asChild:!0,container:a,children:o})}))})};TS.displayName=wx;var dd="DialogOverlay",PS=f.forwardRef((e,t)=>{const s=kS(dd,e.__scopeDialog),{forceMount:n=s.forceMount,...a}=e,i=Bs(dd,e.__scopeDialog);return i.modal?r.jsx(li,{present:n||i.open,children:r.jsx(i7,{...a,ref:t})}):null});PS.displayName=dd;var a7=Ro("DialogOverlay.RemoveScroll"),i7=f.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Bs(dd,s);return r.jsx(t7,{as:a7,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(Oe.div,{"data-state":jx(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Jn="DialogContent",AS=f.forwardRef((e,t)=>{const s=kS(Jn,e.__scopeDialog),{forceMount:n=s.forceMount,...a}=e,i=Bs(Jn,e.__scopeDialog);return r.jsx(li,{present:n||i.open,children:i.modal?r.jsx(o7,{...a,ref:t}):r.jsx(l7,{...a,ref:t})})});AS.displayName=Jn;var o7=f.forwardRef((e,t)=>{const s=Bs(Jn,e.__scopeDialog),n=f.useRef(null),a=Zt(t,s.contentRef,n);return f.useEffect(()=>{const i=n.current;if(i)return F2(i)},[]),r.jsx(RS,{...e,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Re(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Re(e.onFocusOutside,i=>i.preventDefault())})}),l7=f.forwardRef((e,t)=>{const s=Bs(Jn,e.__scopeDialog),n=f.useRef(!1),a=f.useRef(!1);return r.jsx(RS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=s.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=s.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),RS=f.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Bs(Jn,s),c=f.useRef(null),d=Zt(t,c);return B8(),r.jsxs(r.Fragment,{children:[r.jsx(yS,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(fp,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":jx(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(c7,{titleId:l.titleId}),r.jsx(u7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),bx="DialogTitle",OS=f.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Bs(bx,s);return r.jsx(Oe.h2,{id:a.titleId,...n,ref:t})});OS.displayName=bx;var DS="DialogDescription",MS=f.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Bs(DS,s);return r.jsx(Oe.p,{id:a.descriptionId,...n,ref:t})});MS.displayName=DS;var $S="DialogClose",LS=f.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Bs($S,s);return r.jsx(Oe.button,{type:"button",...n,ref:t,onClick:Re(e.onClick,()=>a.onOpenChange(!1))})});LS.displayName=$S;function jx(e){return e?"open":"closed"}var IS="DialogTitleWarning",[EF,FS]=Ek(IS,{contentName:Jn,titleName:bx,docsSlug:"dialog"}),c7=({titleId:e})=>{const t=FS(IS),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},d7="DialogDescriptionWarning",u7=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${FS(d7).contentName}}.`;return f.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},h7=CS,f7=TS,VS=PS,BS=AS,zS=OS,US=MS,m7=LS;const Nx=h7,p7=f7,HS=te.forwardRef(({className:e,...t},s)=>r.jsx(VS,{ref:s,className:ue("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));HS.displayName=VS.displayName;const au=te.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(p7,{children:[r.jsx(HS,{}),r.jsxs(BS,{ref:n,className:ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg","dark:bg-slate-900 dark:border-slate-800",e),...s,children:[t,r.jsxs(m7,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Bt,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));au.displayName=BS.displayName;const iu=({className:e,...t})=>r.jsx("div",{className:ue("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});iu.displayName="DialogHeader";const qS=({className:e,...t})=>r.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});qS.displayName="DialogFooter";const ou=te.forwardRef(({className:e,...t},s)=>r.jsx(zS,{ref:s,className:ue("text-lg font-semibold leading-none tracking-tight","dark:text-white",e),...t}));ou.displayName=zS.displayName;const lu=te.forwardRef(({className:e,...t},s)=>r.jsx(US,{ref:s,className:ue("text-sm text-muted-foreground","dark:text-slate-400",e),...t}));lu.displayName=US.displayName;const x7=({isOpen:e,setIsOpen:t,inspection:s,onSuccess:n})=>{const{toast:a}=ce(),[i,o]=f.useState(!1),[l,c]=f.useState([]),[d,u]=f.useState({inspection_id:null,site_id:null,iso_standard:"",issue_description:"",corrective_action_required:"",assigned_poc_id:null,priority_level:"Medium",due_date:"",status:"Pending"});f.useEffect(()=>{s&&u(y=>({...y,inspection_id:s.id,site_id:s.site_id,iso_standard:s.standard||"General",issue_description:`Finding from ${s.type} inspection on ${s.date}.`}))},[s]);const h=f.useCallback(async()=>{try{const{data:y,error:w}=await $.from("users").select("id, full_name");if(w)throw w;c(y)}catch(y){a({variant:"destructive",title:"Error fetching users",description:y.message})}},[a]);f.useEffect(()=>{e&&h()},[e,h]);const m=y=>{const{name:w,value:p}=y.target;u(v=>({...v,[w]:p}))},g=(y,w)=>{u(p=>({...p,[y]:w}))},x=async y=>{y.preventDefault(),o(!0);try{const{error:w}=await $.from("iso_corrective_actions").insert([d]);if(w)throw w;a({title:"Corrective action logged successfully"}),n()}catch(w){a({variant:"destructive",title:"Error logging action",description:w.message})}finally{o(!1)}};return r.jsx(Nx,{open:e,onOpenChange:t,children:r.jsxs(au,{className:"sm:max-w-[600px]",children:[r.jsxs(iu,{children:[r.jsx(ou,{children:"Log Corrective Action"}),r.jsx(lu,{children:"Create a new corrective action plan for an inspection finding."})]}),r.jsxs("form",{onSubmit:x,className:"space-y-4 pt-4",children:[r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"issue_description",children:"Issue Description"}),r.jsx(mt,{id:"issue_description",name:"issue_description",value:d.issue_description,onChange:m,required:!0})]}),r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"corrective_action_required",children:"Corrective Action Required"}),r.jsx(mt,{id:"corrective_action_required",name:"corrective_action_required",value:d.corrective_action_required,onChange:m,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"assigned_poc_id",children:"Point of Contact"}),r.jsxs(be,{name:"assigned_poc_id",onValueChange:y=>g("assigned_poc_id",y),children:[r.jsx(ge,{children:r.jsx(je,{placeholder:"Assign a user..."})}),r.jsx(ye,{children:l.map(y=>r.jsx(Z,{value:y.id,children:y.full_name},y.id))})]})]}),r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"priority_level",children:"Priority Level"}),r.jsxs(be,{name:"priority_level",defaultValue:"Medium",onValueChange:y=>g("priority_level",y),children:[r.jsx(ge,{children:r.jsx(je,{})}),r.jsxs(ye,{children:[r.jsx(Z,{value:"Low",children:"Low"}),r.jsx(Z,{value:"Medium",children:"Medium"}),r.jsx(Z,{value:"High",children:"High"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(Y,{htmlFor:"due_date",children:"Due Date"}),r.jsx(ee,{id:"due_date",name:"due_date",type:"date",value:d.due_date,onChange:m,required:!0})]}),r.jsxs(qS,{children:[r.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),r.jsxs(I,{type:"submit",disabled:i,children:[i?r.jsx(ft,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(Ss,{className:"w-4 h-4 mr-2"}),i?"Saving...":"Save Action"]})]})]})]})})},g7=({inspection:e,onActionAdded:t})=>{const[s,n]=f.useState(!1),a=e.status!=="Passed";return r.jsxs(r.Fragment,{children:[r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.title}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.type==="Security"?"bg-blue-500/20 text-blue-400":e.type==="Environmental"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:e.type}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.status==="Passed"?"bg-green-500/20 text-green-400":e.status==="Minor Issues"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:e.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-400",children:[r.jsxs("span",{children:["Inspector: ",e.inspector]}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsx("span",{children:e.site}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ls,{className:"w-4 h-4"}),r.jsx("span",{children:e.date})]}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsxs("span",{className:`font-medium ${e.score>=95?"text-green-400":e.score>=85?"text-yellow-400":"text-red-400"}`,children:["Score: ",e.score,"%"]})]})]}),r.jsx("div",{className:"flex items-center space-x-3 ml-2",children:a&&r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>n(!0),className:"border-yellow-600 hover:bg-yellow-700/50 text-yellow-400",children:[r.jsx(qT,{className:"w-4 h-4 mr-2"}),"Log Action"]})})]})}),r.jsx(x7,{isOpen:s,setIsOpen:n,inspection:e,onSuccess:()=>{n(!1),t&&t()}})]})},y7=({template:e,index:t})=>{const{toast:s}=ce();return r.jsxs(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:t*.1},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer",onClick:()=>s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),children:[r.jsx(Dd,{className:"w-8 h-8 text-blue-400 mb-3"}),r.jsx("h3",{className:"text-white font-medium mb-2",children:e}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Generate comprehensive ISO compliance reports"})]})},v7=({action:e})=>{var n,a;const t=i=>{switch(i){case"Completed":return r.jsxs("span",{className:"flex items-center text-xs font-medium text-green-400 bg-green-500/20 px-2 py-1 rounded-full",children:[r.jsx(ze,{className:"w-3 h-3 mr-1.5"}),i]});case"In Progress":return r.jsxs("span",{className:"flex items-center text-xs font-medium text-yellow-400 bg-yellow-500/20 px-2 py-1 rounded-full",children:[r.jsx(Is,{className:"w-3 h-3 mr-1.5"}),i]});default:return r.jsxs("span",{className:"flex items-center text-xs font-medium text-red-400 bg-red-500/20 px-2 py-1 rounded-full",children:[r.jsx(gr,{className:"w-3 h-3 mr-1.5"}),i]})}},s=i=>{switch(i){case"High":return r.jsxs("span",{className:"flex items-center text-xs font-medium text-red-400",children:[r.jsx(oc,{className:"w-3 h-3 mr-1.5"}),i]});case"Medium":return r.jsxs("span",{className:"flex items-center text-xs font-medium text-yellow-400",children:[r.jsx(oc,{className:"w-3 h-3 mr-1.5"}),i]});default:return r.jsxs("span",{className:"flex items-center text-xs font-medium text-green-400",children:[r.jsx(oc,{className:"w-3 h-3 mr-1.5"}),i]})}};return r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/50 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-white font-semibold",children:e.iso_standard}),t(e.status)]}),r.jsx("p",{className:"text-sm text-slate-300 mb-3",children:e.issue_description}),r.jsxs("p",{className:"text-sm text-slate-400",children:[r.jsx("span",{className:"font-semibold text-slate-300",children:"Required Action:"})," ",e.corrective_action_required]})]}),r.jsxs("div",{className:"w-full sm:w-64 flex-shrink-0 sm:pl-4 sm:border-l sm:border-slate-700 space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center text-slate-400",children:[r.jsx(_j,{className:"w-4 h-4 mr-2 text-sky-400"}),r.jsxs("span",{children:["Site: ",r.jsx("span",{className:"text-slate-200",children:((n=e.sites)==null?void 0:n.name)||"N/A"})]})]}),r.jsxs("div",{className:"flex items-center text-slate-400",children:[r.jsx(Fn,{className:"w-4 h-4 mr-2 text-sky-400"}),r.jsxs("span",{children:["POC: ",r.jsx("span",{className:"text-slate-200",children:((a=e.users)==null?void 0:a.full_name)||"Unassigned"})]})]}),r.jsxs("div",{className:"flex items-center text-slate-400",children:[r.jsx(Ls,{className:"w-4 h-4 mr-2 text-sky-400"}),r.jsxs("span",{children:["Due: ",r.jsx("span",{className:"text-slate-200",children:e.due_date})]})]}),r.jsx("div",{className:"flex items-center text-slate-400",children:s(e.priority_level)})]})]})})},w7=()=>{const[e,t]=f.useState(""),{toast:s}=ce(),[n,a]=f.useState([]),[i,o]=f.useState(!0),l=f.useCallback(async()=>{o(!0);try{const{data:p,error:v}=await $.from("iso_corrective_actions").select(`
          *,
          users (full_name),
          sites (name)
        `).order("created_at",{ascending:!1});if(v)throw v;a(p)}catch(p){s({variant:"destructive",title:"Error fetching corrective actions",description:p.message})}finally{o(!1)}},[s]);f.useEffect(()=>{l()},[l]);const c=[{id:1,standard:"ISO 18788",title:"Security Operations Management Systems",status:"Certified",lastAudit:"2024-11-15",nextAudit:"2025-11-15",compliance:98,findings:2},{id:2,standard:"ISO 14001",title:"Environmental Management Systems",status:"Certified",lastAudit:"2024-09-20",nextAudit:"2025-09-20",compliance:95,findings:3},{id:3,standard:"ISO 45001",title:"Occupational Health & Safety Management Systems",status:"In Progress",lastAudit:"2025-02-10",nextAudit:"2025-08-10",compliance:87,findings:5}],d=[{id:1,type:"Internal Audit",standard:"ISO 18788",auditor:"Sarah Johnson",date:"2025-01-15",status:"Completed",findings:2,site:"Corporate HQ Alpha"},{id:2,type:"External Audit",standard:"ISO 14001",auditor:"External Auditor Ltd.",date:"2025-03-20",status:"Scheduled",findings:0,site:"All Sites"},{id:3,type:"Surveillance Audit",standard:"ISO 45001",auditor:"Mike Rodriguez",date:"2025-04-12",status:"In Progress",findings:1,site:"Metro Hospital East"}],u=[{id:1,title:"Security Equipment Inspection",type:"Security",inspector:"John Smith",site:"Corporate HQ Alpha",date:"2025-01-15",status:"Passed",score:95},{id:2,title:"Environmental Compliance Check",type:"Environmental",inspector:"Lisa Chen",site:"Retail Plaza Central",date:"2025-02-14",status:"Minor Issues",score:88},{id:3,title:"Safety Protocol Review",type:"Safety",inspector:"Mike Rodriguez",site:"Metro Hospital East",date:"2025-03-13",status:"Passed",score:92}],h=["Monthly Compliance Report","Audit Findings Summary","Corrective Actions Report","Management Review Report","Risk Assessment Report","Training Compliance Report"],m=()=>{s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},g=()=>{s({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},x="bg-transparent p-0 space-x-1",y="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",w="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Tj,{className:"w-8 h-8 mr-3 text-blue-400"}),"ISO Compliance Management"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage ISO 18788, 14001, and 45001 standards, audits, and inspections."})]}),r.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[r.jsxs(I,{onClick:m,className:"ios-button bg-blue-600 hover:bg-blue-700",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Schedule Audit"]}),r.jsxs(I,{onClick:g,variant:"outline",className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(NT,{className:"w-4 h-4 mr-2"}),"New Inspection"]})]})]}),r.jsxs(Ot,{defaultValue:"standards",className:"space-y-6",children:[r.jsxs(bt,{className:`${x} border-b border-slate-700`,children:[r.jsx(ae,{value:"standards",className:`${y} ${w}`,children:"ISO Standards"}),r.jsx(ae,{value:"audits",className:`${y} ${w}`,children:"Audits"}),r.jsx(ae,{value:"inspections",className:`${y} ${w}`,children:"Inspections"}),r.jsx(ae,{value:"corrective_actions",className:`${y} ${w}`,children:"Corrective Actions"}),r.jsx(ae,{value:"reports",className:`${y} ${w}`,children:"Reports"})]}),r.jsx(oe,{value:"standards",className:"space-y-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((p,v)=>r.jsx(R8,{standard:p,index:v},p.id))})}),r.jsx(oe,{value:"audits",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ur,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"ISO Audits Log"})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search audits...",value:e,onChange:p=>t(p.target.value),className:"pl-10 w-full sm:w-80 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Track internal and external ISO audits."})]}),r.jsx(V,{children:r.jsx("div",{className:"space-y-4",children:d.filter(p=>p.type.toLowerCase().includes(e.toLowerCase())||p.standard.toLowerCase().includes(e.toLowerCase())).map(p=>r.jsx(O8,{audit:p},p.id))})})]})}),r.jsx(oe,{value:"inspections",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Rj,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Security, Safety & Environmental Inspections"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Log and manage site inspections and security tours."})]}),r.jsx(V,{children:r.jsx("div",{className:"space-y-4",children:u.map(p=>r.jsx(g7,{inspection:p,onActionAdded:l},p.id))})})]})}),r.jsx(oe,{value:"corrective_actions",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Yn,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Corrective Actions Tracker"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Monitor and manage all open and completed corrective actions."})]}),r.jsx(V,{children:i?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Loading actions..."}):r.jsx("div",{className:"space-y-4",children:n.map(p=>r.jsx(v7,{action:p},p.id))})})]})}),r.jsx(oe,{value:"reports",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Dd,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"ISO Compliance Reports"})]}),r.jsx(he,{className:"text-gray-400 mt-1",children:"Generate and manage ISO compliance documentation."})]}),r.jsx(V,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map((p,v)=>r.jsx(y7,{template:p,index:v},p))})})]})})]})]})},b7=({isOpen:e,setIsOpen:t,siteId:s,onSuccess:n})=>(ce(),r.jsx(Nx,{open:e,onOpenChange:t,children:r.jsx(au,{children:r.jsxs(iu,{children:[r.jsx(ou,{children:"Guide Form"}),r.jsx(lu,{children:"This feature is not yet implemented."})]})})})),j7=({isOpen:e,setIsOpen:t,siteId:s,onSuccess:n})=>(ce(),r.jsx(Nx,{open:e,onOpenChange:t,children:r.jsx(au,{children:r.jsxs(iu,{children:[r.jsx(ou,{children:"Contact Form"}),r.jsx(lu,{children:"This feature is not yet implemented."})]})})})),N7=()=>{const{toast:e}=ce(),[t,s]=f.useState([]),[n,a]=f.useState(null),[i,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState(!0),[h,m]=f.useState(!1),[g,x]=f.useState(!1),y=f.useCallback(async()=>{try{const{data:j,error:S}=await $.from("sites").select("id, name");if(S)throw S;s(j),j.length>0&&a(j[0].id)}catch(j){e({variant:"destructive",title:"Error fetching sites",description:j.message})}},[e]),w=f.useCallback(async()=>{if(n){u(!0);try{const{data:j,error:S}=await $.from("incident_command_guides").select("*").eq("site_id",n);if(S)throw S;o(j);const{data:_,error:E}=await $.from("incident_command_contacts").select("*").eq("site_id",n);if(E)throw E;c(_)}catch(j){e({variant:"destructive",title:"Error fetching site data",description:j.message})}finally{u(!1)}}},[n,e]);f.useEffect(()=>{y()},[y]),f.useEffect(()=>{w()},[w]);const p="bg-transparent p-0 space-x-1",v="text-gray-400 data-[state=active]:text-blue-400 data-[state=active]:border-blue-400 border-b-2 border-transparent rounded-none px-4 py-2.5 hover:text-blue-300 transition-all duration-200 text-sm font-medium",b="data-[state=active]:bg-transparent data-[state=active]:shadow-none";return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(ZT,{className:"w-8 h-8 mr-3 text-red-500"}),"Incident Command Center"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage emergency guides and contacts for each site."})]}),r.jsx("div",{className:"w-full sm:w-auto mt-4 sm:mt-0",children:r.jsxs(be,{onValueChange:j=>a(j),value:n||"",children:[r.jsx(ge,{className:"w-full sm:w-72",children:r.jsx(je,{placeholder:"Select a site..."})}),r.jsx(ye,{children:t.map(j=>r.jsx(Z,{value:j.id,children:j.name},j.id))})]})})]}),r.jsxs(Ot,{defaultValue:"guides",className:"space-y-6",children:[r.jsxs(bt,{className:`${p} border-b border-slate-700`,children:[r.jsx(ae,{value:"guides",className:`${v} ${b}`,children:"Quick Guides"}),r.jsx(ae,{value:"contacts",className:`${v} ${b}`,children:"Emergency Contacts"})]}),r.jsx(oe,{value:"guides",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(G,{className:"flex items-center",children:[r.jsx(Od,{className:"mr-2 text-blue-400"}),"Emergency Guides"]}),r.jsxs(I,{onClick:()=>e({title:" Feature not implemented"}),children:[r.jsx(ct,{className:"mr-2 h-4 w-4"}),"Add Guide"]})]}),r.jsx(he,{children:"Site-specific procedures for emergencies."})]}),r.jsx(V,{children:d?r.jsx("p",{children:"Loading..."}):i.map(j=>r.jsx("div",{className:"p-2 border-b border-slate-700",children:j.guide_title},j.id))})]})}),r.jsx(oe,{value:"contacts",children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(G,{className:"flex items-center",children:[r.jsx(Gn,{className:"mr-2 text-green-400"}),"Emergency Contacts"]}),r.jsxs(I,{onClick:()=>e({title:" Feature not implemented"}),children:[r.jsx(ct,{className:"mr-2 h-4 w-4"}),"Add Contact"]})]}),r.jsx(he,{children:"Key personnel and services to contact during an incident."})]}),r.jsx(V,{children:d?r.jsx("p",{children:"Loading..."}):l.map(j=>r.jsxs("div",{className:"p-2 border-b border-slate-700",children:[j.contact_name," - ",j.contact_title]},j.id))})]})})]}),r.jsx(b7,{isOpen:h,setIsOpen:m,siteId:n,onSuccess:w}),r.jsx(j7,{isOpen:g,setIsOpen:x,siteId:n,onSuccess:w})]})},S7=()=>{const[e,t]=f.useState(""),[s,n]=f.useState(""),{toast:a}=ce(),i=[{id:1,name:"Visitor Management System",type:"Web Application",url:"https://visitor.example.com",status:"Connected",lastSync:"2 minutes ago",icon:xe},{id:2,name:"Asset Tracking Mobile App",type:"Mobile Application",url:"https://assets.example.com",status:"Connected",lastSync:"15 minutes ago",icon:Ij},{id:3,name:"Emergency Response Portal",type:"Web Portal",url:"https://emergency.example.com",status:"Disconnected",lastSync:"2 hours ago",icon:nt}],o=[{title:"Web Application",description:"Embed external web apps via iframe for seamless integration.",icon:Wn,features:["Full screen embedding","Responsive design support","Cross-domain communication (if configured)"]},{title:"API Integration",description:"Connect mobile or backend services via secure API endpoints.",icon:Do,features:["REST/GraphQL support","Real-time data sync","OAuth 2.0 authentication"]},{title:"Desktop Connector",description:"Bridge desktop apps with web services for data exchange.",icon:sg,features:["Local network access","Secure data tunneling","Scheduled sync tasks"]}],l=()=>{if(!e.trim()){a({variant:"destructive",title:"URL Required",description:"Please enter the URL of the external application."});return}if(!e.startsWith("http://")&&!e.startsWith("https://")){a({variant:"destructive",title:"Invalid URL",description:"Please enter a valid URL starting with http:// or https://."});return}n(e),a({title:"Application Preview Loaded",description:`Previewing ${e}. Note: Full integration may require further configuration.`})},c=u=>{a({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})},d=u=>{a({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "})};return r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(tg,{className:"w-8 h-8 mr-3 text-blue-400"}),"External App Integrations"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Connect and manage third-party applications within SecureOps Pro."})]}),r.jsxs(I,{onClick:()=>a({title:" This feature isn't implemented yetbut don't worry! You can request it in your next prompt! "}),className:"ios-button bg-blue-600 hover:bg-blue-700 mt-4 sm:mt-0",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add New Integration"]})]}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Do,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Quick Connect Web App"})]}),r.jsx(he,{className:"text-gray-400",children:"Enter a URL to preview and embed a web application."})]}),r.jsx(V,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:[r.jsx(ee,{placeholder:"Enter external application URL (e.g., https://example.com)",value:e,onChange:u=>t(u.target.value),className:"flex-1 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"}),r.jsxs(I,{onClick:l,className:"ios-button bg-green-600 hover:bg-green-700",children:[r.jsx(tg,{className:"w-4 h-4 mr-2"}),"Preview & Connect"]})]})})]})}),s&&r.jsx(z.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{delay:.2},children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center justify-between text-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(sg,{className:"w-5 h-5 text-yellow-400"}),r.jsx("span",{children:"Integrated Application Preview"})]}),r.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>n(""),className:"text-red-400 hover:text-red-300",children:[r.jsx(rg,{className:"w-4 h-4 mr-1"})," Close Preview"]})]})}),r.jsxs(V,{children:[r.jsx("iframe",{src:s,title:"External Application Preview",className:"w-full h-[500px] rounded-lg border border-slate-700 bg-white",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Note: Some applications may not allow embedding due to security policies (X-Frame-Options)."})]})]})}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s?.3:.2},children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Kn,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Integration Methods"})]}),r.jsx(he,{className:"text-gray-400",children:"Explore different ways to integrate external services."})]}),r.jsx(V,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map((u,h)=>r.jsxs(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:(s?.4:.3)+h*.1},className:"p-6 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors flex flex-col h-full",children:[r.jsx(u.icon,{className:"w-10 h-10 text-blue-400 mb-3"}),r.jsx("h3",{className:"text-white font-semibold text-lg mb-2",children:u.title}),r.jsx("p",{className:"text-gray-400 text-sm mb-3 flex-grow",children:u.description}),r.jsx("div",{className:"space-y-1.5 mt-auto",children:u.features.map((m,g)=>r.jsxs("div",{className:"flex items-center space-x-1.5 text-xs text-gray-300",children:[r.jsx(ze,{className:"w-3.5 h-3.5 text-green-400 flex-shrink-0"}),r.jsx("span",{children:m})]},g))})]},u.title))})})]})}),r.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s?.5:.4},children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(Z0,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{children:"Currently Connected Applications"})]}),r.jsx(he,{className:"text-gray-400",children:"Manage your existing integrations."})]}),r.jsx(V,{children:r.jsx("div",{className:"space-y-4",children:i.map(u=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-1.5",children:[r.jsx(u.icon,{className:`w-5 h-5 ${u.status==="Connected"?"text-green-400":"text-red-400"}`}),r.jsx("h3",{className:"text-white font-semibold",children:u.name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${u.status==="Connected"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:u.status})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-400",children:[r.jsx("span",{className:"truncate max-w-[200px] sm:max-w-xs",title:u.url,children:u.url}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Last sync: ",u.lastSync]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2 sm:mt-0",children:[r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>d(u.id),className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(Kn,{className:"w-3.5 h-3.5 mr-1 sm:mr-0"})," ",r.jsx("span",{className:"hidden sm:inline ml-1",children:"Config"})]}),r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>window.open(u.url,"_blank"),className:"ios-button border-slate-600 hover:bg-slate-700",children:[r.jsx(Z0,{className:"w-3.5 h-3.5 mr-1 sm:mr-0"})," ",r.jsx("span",{className:"hidden sm:inline ml-1",children:"Open"})]}),r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>c(u.id),className:"ios-button border-red-500/50 text-red-400 hover:bg-red-500/20",children:[r.jsx(rg,{className:"w-3.5 h-3.5 mr-1 sm:mr-0"})," ",r.jsx("span",{className:"hidden sm:inline ml-1",children:"Off"})]})]})]})},u.id))})})]})})]})};function _7(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function C7(e){const[t,s]=f.useState(void 0);return Js(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;s({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else s(void 0)},[e]),t}var cu="Switch",[E7,kF]=ta(cu),[k7,T7]=E7(cu),WS=f.forwardRef((e,t)=>{const{__scopeSwitch:s,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[m,g]=f.useState(null),x=Zt(t,b=>g(b)),y=f.useRef(!1),w=m?u||!!m.closest("form"):!0,[p,v]=Qo({prop:a,defaultProp:i??!1,onChange:d,caller:cu});return r.jsxs(k7,{scope:s,checked:p,disabled:l,children:[r.jsx(Oe.button,{type:"button",role:"switch","aria-checked":p,"aria-required":o,"data-state":QS(p),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onClick:Re(e.onClick,b=>{v(j=>!j),w&&(y.current=b.isPropagationStopped(),y.current||b.stopPropagation())})}),w&&r.jsx(YS,{control:m,bubbles:!y.current,name:n,value:c,checked:p,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});WS.displayName=cu;var GS="SwitchThumb",KS=f.forwardRef((e,t)=>{const{__scopeSwitch:s,...n}=e,a=T7(GS,s);return r.jsx(Oe.span,{"data-state":QS(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});KS.displayName=GS;var P7="SwitchBubbleInput",YS=f.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:n=!0,...a},i)=>{const o=f.useRef(null),l=Zt(o,i),c=_7(s),d=C7(t);return f.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==s&&g){const x=new Event("click",{bubbles:n});g.call(u,s),u.dispatchEvent(x)}},[c,s,n]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});YS.displayName=P7;function QS(e){return e?"checked":"unchecked"}var JS=WS,A7=KS;const XS=te.forwardRef(({className:e,...t},s)=>r.jsx(JS,{className:ue("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input","data-[state=checked]:bg-blue-600 data-[state=unchecked]:bg-slate-700",e),...t,ref:s,children:r.jsx(A7,{className:ue("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0","bg-white")})}));XS.displayName=JS.displayName;const R7=()=>{const{toast:e}=ce(),[t,s]=f.useState({}),[n,a]=f.useState(!0),[i,o]=f.useState(!1),l=[{key:"default_incident_distribution_high_severity",label:"High Severity Incident Distribution",type:"json",description:'JSON defining levels (e.g., ["national"]) and roles (e.g., ["executive"]) for high severity incident report distribution.',icon:X0,category:"Distribution"},{key:"default_violation_distribution_critical",label:"Critical Violation Distribution",type:"json",description:"JSON defining distribution for critical violations.",icon:X0,category:"Distribution"},{key:"allow_security_company_data_sharing",label:"Allow Security Company Data Sharing with Client",type:"boolean",description:"If enabled, clients can view relevant data from assigned security companies.",icon:xe,category:"Access Control"},{key:"max_incident_attachment_size_mb",label:"Max Incident Attachment Size (MB)",type:"number",description:"Maximum file size in MB for attachments to incident reports.",icon:Ke,category:"System"},{key:"auto_archive_reports_days",label:"Auto-Archive Reports After (Days)",type:"number",description:"Number of days after which completed reports are auto-archived. 0 to disable.",icon:Ss,category:"System"},{key:"api_key_external_integrations",label:"External Integrations API Key",type:"text",description:"API Key for secure communication with external partner applications.",icon:Pj,category:"Integrations"}],c=f.useCallback(async()=>{a(!0);try{const{data:m,error:g}=await $.from("admin_settings").select("setting_key, setting_value");if(g)throw g;const x=m.reduce((w,{setting_key:p,setting_value:v})=>(w[p]=v,w),{}),y={};l.forEach(w=>{y[w.key]=x[w.key]??(w.type==="json"?{}:w.type==="boolean"?!1:w.type==="number"?0:"")}),s(y)}catch(m){e({variant:"destructive",title:"Error fetching settings",description:m.message})}finally{a(!1)}},[e]);f.useEffect(()=>{c()},[c]);const d=(m,g,x)=>{s(x==="number"?y=>({...y,[m]:g===""?"":Number(g)}):y=>({...y,[m]:g}))},u=async()=>{o(!0);const m=l.map(g=>{let x=t[g.key];if(g.type==="json"&&typeof x=="string")try{x=x.trim()===""?{}:JSON.parse(x)}catch{return e({variant:"destructive",title:`Invalid JSON for ${g.label}`,description:"Please correct the JSON format."}),Promise.reject(new Error(`Invalid JSON for ${g.label}`))}return $.from("admin_settings").upsert({setting_key:g.key,setting_value:x,description:g.description},{onConflict:"setting_key"})});try{await Promise.all(m),e({title:"Settings Saved",description:"All admin settings have been updated successfully."})}catch(g){g.message.startsWith("Invalid JSON")||e({variant:"destructive",title:"Error Saving Settings",description:g.message})}finally{o(!1)}};if(n)return r.jsx("div",{className:"text-center py-10 text-white",children:"Loading Admin Settings..."});const h=l.reduce((m,g)=>{const x=g.category||"General";return m[x]=m[x]?[...m[x],g]:[g],m},{});return r.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8 pb-10",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Kn,{className:"w-8 h-8 mr-3 text-blue-400"}),"Admin Settings"]})}),Object.entries(h).map(([m,g])=>r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"text-xl text-white flex items-center",children:[te.createElement(g[0].icon,{className:"w-6 h-6 mr-2 text-blue-400"}),m," Settings"]})}),r.jsx(V,{className:"space-y-6",children:g.map(x=>r.jsxs("div",{className:"space-y-2 p-4 border border-slate-700 rounded-lg bg-slate-800/40",children:[r.jsxs(Y,{htmlFor:x.key,className:"text-base font-medium text-gray-200 flex items-center",children:[te.createElement(x.icon,{className:"w-4 h-4 mr-2 text-slate-400"})," ",x.label]}),r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:x.description}),x.type==="json"&&r.jsx(mt,{id:x.key,value:typeof t[x.key]=="object"?JSON.stringify(t[x.key],null,2):t[x.key],onChange:y=>d(x.key,y.target.value,"json"),rows:3}),x.type==="boolean"&&r.jsxs("div",{className:"flex items-center space-x-2 pt-1",children:[r.jsx(XS,{id:x.key,checked:!!t[x.key],onCheckedChange:y=>d(x.key,y,"boolean"),className:"data-[state=checked]:bg-blue-500"}),r.jsx(Y,{htmlFor:x.key,className:"text-sm text-gray-300",children:t[x.key]?"Enabled":"Disabled"})]}),x.type==="number"&&r.jsx(ee,{id:x.key,type:"number",value:t[x.key]??"",onChange:y=>d(x.key,y.target.value,"number")}),x.type==="text"&&r.jsx(ee,{id:x.key,type:"text",value:t[x.key]||"",onChange:y=>d(x.key,y.target.value,"text")})]},x.key))})]},m)),r.jsx("div",{className:"flex justify-end mt-8",children:r.jsxs(I,{onClick:u,disabled:i||n,className:"bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg text-base",children:[r.jsx(Ss,{className:"w-5 h-5 mr-2"}),i?"Saving...":"Save All Settings"]})})]})},co={async getIncidents(){const{data:e,error:t}=await $.from("health_safety_incidents").select(`
        id, 
        site_id, 
        description, 
        incident_date, 
        investigation_status, 
        report_url,
        created_at,
        sites ( name )
      `).order("incident_date",{ascending:!1});if(t)throw t;return e.map(s=>{var n;return{...s,site_name:((n=s.sites)==null?void 0:n.name)||"N/A",reported_by_name:"N/A (User info not available)"}})},async getSites(){const{data:e,error:t}=await $.from("sites").select("id, name").order("name");if(t)throw t;return e},async createIncident(e){const{data:t,error:s}=await $.from("health_safety_incidents").insert([e]).select();if(s)throw s;return t[0]},async updateIncident(e,t){const{data:s,error:n}=await $.from("health_safety_incidents").update(t).eq("id",e).select();if(n)throw n;return s[0]},async updateIncidentStatus(e,t){const{data:s,error:n}=await $.from("health_safety_incidents").update({investigation_status:t}).eq("id",e).select();if(n)throw n;return s[0]},async deleteIncident(e){const{error:t}=await $.from("health_safety_incidents").delete().eq("id",e);if(t)throw t;return!0},async getIncidentStats(){const{data:e,error:t}=await $.from("health_safety_incidents").select("investigation_status, incident_date");if(t)throw t;return{total:e.length,open:e.filter(n=>n.investigation_status==="open").length,inProgress:e.filter(n=>n.investigation_status==="in_progress").length,closed:e.filter(n=>n.investigation_status==="closed").length,thisMonth:e.filter(n=>{const a=new Date(n.incident_date),i=new Date;return a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear()}).length}},async searchIncidents(e){const{data:t,error:s}=await $.from("health_safety_incidents").select(`
        id, 
        site_id, 
        description, 
        incident_date, 
        investigation_status, 
        report_url,
        created_at,
        sites ( name )
      `).or(`description.ilike.%${e}%,sites.name.ilike.%${e}%`).order("incident_date",{ascending:!1});if(s)throw s;return t.map(n=>{var a;return{...n,site_name:((a=n.sites)==null?void 0:a.name)||"N/A",reported_by_name:"N/A (User info not available)"}})}},O7=({incident:e=null,onClose:t,onSuccess:s})=>{const[n,a]=f.useState({site_id:"",description:"",incident_date:new Date().toISOString().split("T")[0],investigation_status:"open",report_file:null}),[i,o]=f.useState([]),[l,c]=f.useState(!1),[d,u]=f.useState(null),{toast:h}=ce(),m=!!e;f.useEffect(()=>{(async()=>{try{const{data:{user:p}}=await $.auth.getUser();u(p);const v=await co.getSites();o(v)}catch(p){console.error("Error fetching initial data:",p),h({title:"Error",description:"Failed to load form data. Please try again.",variant:"destructive"})}})()},[h]),f.useEffect(()=>{e&&a({site_id:e.site_id||"",description:e.description||"",incident_date:e.incident_date?new Date(e.incident_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],investigation_status:e.investigation_status||"open",report_file:null})},[e]);const g=(w,p)=>{a(v=>({...v,[w]:p}))},x=w=>{var v;const p=(v=w.target.files)==null?void 0:v[0];p&&(a(b=>({...b,report_file:p})),h({title:"File Selected",description:`File "${p.name}" selected for upload.`}))},y=async w=>{if(w.preventDefault(),!d){h({title:"Authentication Required",description:"Please log in to report an incident.",variant:"destructive"});return}c(!0);try{const p={site_id:n.site_id,description:n.description,incident_date:n.incident_date,reported_by_id:d.id,investigation_status:n.investigation_status};let v;m?v=await co.updateIncident(e.id,p):v=await co.createIncident(p),h({title:m?"Incident Updated":"Incident Reported",description:`Health & safety incident has been ${m?"updated":"reported"} successfully.`,variant:"default"}),s==null||s(v),t()}catch(p){console.error("Error saving incident:",p),h({title:"Error",description:p.message||"Failed to save incident. Please try again.",variant:"destructive"})}finally{c(!1)}};return r.jsx(Et,{children:r.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:r.jsx(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:w=>w.stopPropagation(),children:r.jsxs(B,{className:"ios-card",children:[r.jsxs(W,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[m?r.jsx(Ns,{className:"w-5 h-5 text-blue-400"}):r.jsx(nt,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{children:m?"Edit Incident":"Report New Incident"})]}),r.jsx(I,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(Bt,{className:"w-4 h-4"})})]}),r.jsx(V,{children:r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"site_id",className:"text-white",children:"Site"}),r.jsxs(be,{value:n.site_id,onValueChange:w=>g("site_id",w),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{placeholder:"Select site"})}),r.jsx(ye,{className:"bg-slate-800 border-slate-600",children:i.map(w=>r.jsx(Z,{value:w.id,className:"text-white",children:w.name},w.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"incident_date",className:"text-white",children:"Incident Date"}),r.jsx(ee,{id:"incident_date",type:"date",value:n.incident_date,onChange:w=>g("incident_date",w.target.value),className:"bg-slate-700/50 border-slate-600 text-white",required:!0})]}),m&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"investigation_status",className:"text-white",children:"Investigation Status"}),r.jsxs(be,{value:n.investigation_status,onValueChange:w=>g("investigation_status",w),children:[r.jsx(ge,{className:"bg-slate-700/50 border-slate-600 text-white",children:r.jsx(je,{})}),r.jsxs(ye,{className:"bg-slate-800 border-slate-600",children:[r.jsx(Z,{value:"open",className:"text-white",children:"Open"}),r.jsx(Z,{value:"in_progress",className:"text-white",children:"In Progress"}),r.jsx(Z,{value:"closed",className:"text-white",children:"Closed"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"description",className:"text-white",children:"Description of Incident"}),r.jsx(mt,{id:"description",value:n.description,onChange:w=>g("description",w.target.value),placeholder:"Describe what happened, when, where, and any relevant details...",className:"bg-slate-700/50 border-slate-600 text-white min-h-[120px]",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{htmlFor:"report_file",className:"text-white",children:"Upload Report/Media (Optional)"}),r.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-600 border-dashed rounded-md bg-slate-800/30",children:r.jsxs("div",{className:"space-y-1 text-center",children:[r.jsx(s5,{className:"mx-auto h-12 w-12 text-slate-400"}),r.jsxs("div",{className:"flex text-sm text-slate-500",children:[r.jsxs("label",{htmlFor:"report_file",className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500 focus-within:ring-offset-slate-900",children:[r.jsx("span",{children:"Upload a file"}),r.jsx(ee,{id:"report_file",name:"report_file",type:"file",className:"sr-only",onChange:x,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx"})]}),r.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"PDF, JPG, PNG, DOC up to 10MB"})]})}),n.report_file&&r.jsxs("p",{className:"text-sm text-green-400 mt-2",children:["File selected: ",n.report_file.name]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(I,{type:"button",variant:"outline",onClick:t,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"}),r.jsx(I,{type:"submit",disabled:l,className:"bg-red-600 hover:bg-red-700",children:l?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ss,{className:"w-4 h-4"}),r.jsxs("span",{children:[m?"Update":"Report"," Incident"]})]})})]})]})})]})})})})},D7=()=>{const{toast:e}=ce(),[t,s]=f.useState([]),[n,a]=f.useState(!0),[i,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState(""),h=f.useCallback(async()=>{a(!0);try{const p=await co.getIncidents();s(p)}catch(p){e({variant:"destructive",title:"Error fetching data",description:p.message})}finally{a(!1)}},[e]);f.useEffect(()=>{h()},[h]);const m=()=>{h()},g=p=>{c(p),o(!0)},x=()=>{o(!1),c(null)},y=async(p,v)=>{if(window.confirm(`Are you sure you want to change status to "${v.replace("_"," ")}"?`)){a(!0);try{await co.updateIncidentStatus(p,v),e({title:"Incident status updated successfully"}),h()}catch(b){e({variant:"destructive",title:"Error updating status",description:b.message})}finally{a(!1)}}},w=t.filter(p=>p.site_name.toLowerCase().includes(d.toLowerCase())||p.description.toLowerCase().includes(d.toLowerCase())||p.reported_by_name.toLowerCase().includes(d.toLowerCase()));return n&&t.length===0&&!i?r.jsx("div",{className:"text-center py-10 text-white",children:"Loading Health & Safety Incidents..."}):r.jsxs("div",{className:"space-y-8 pb-10",children:[r.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Yo,{to:"/",className:"p-2 rounded-full hover:bg-slate-700/50 transition-colors bg-[#607D8B] hover:bg-[#546E7A] text-white",children:r.jsx(vp,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(Lj,{className:"w-8 h-8 mr-3 text-red-400"}),"Health & Safety"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Report and manage workplace health and safety incidents."})]})]}),!i&&r.jsxs(I,{onClick:()=>o(!0),className:"bg-[#607D8B] hover:bg-[#546E7A] text-white mt-4 sm:mt-0",children:[r.jsx(ct,{className:"w-4 h-4 mr-2"}),"Report New Incident"]})]}),i&&r.jsx(O7,{incident:l,onClose:x,onSuccess:m}),!i&&r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-xl text-white",children:"Incident Log"}),r.jsx(he,{className:"text-gray-400",children:"Review all reported health and safety incidents."})]}),r.jsxs("div",{className:"relative mt-3 sm:mt-0",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(ee,{placeholder:"Search incidents...",value:d,onChange:p=>u(p.target.value),className:"pl-10 w-full sm:w-72 bg-slate-700/50 border-slate-600 text-gray-200 focus:ring-blue-500 focus:border-blue-500"})]})]})}),r.jsx(V,{children:n&&t.length===0?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Loading incidents..."}):!n&&t.length===0?r.jsx("p",{className:"text-center text-gray-400 py-4",children:'No health & safety incidents reported yet. Click "Report New Incident" to get started.'}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(px,{children:[r.jsx(xx,{className:"ios-table-header",children:r.jsxs(zo,{children:[r.jsx(ps,{children:"Site"}),r.jsx(ps,{children:"Description"}),r.jsx(ps,{children:"Date"}),r.jsx(ps,{children:"Status"}),r.jsx(ps,{children:"Reported By"}),r.jsx(ps,{className:"text-right",children:"Actions"})]})}),r.jsx(gx,{className:"dark-table-row-hover",children:w.map(p=>r.jsxs(zo,{children:[r.jsx(xs,{className:"font-medium text-white",children:p.site_name}),r.jsx(xs,{className:"max-w-xs truncate",title:p.description,children:p.description}),r.jsx(xs,{children:new Date(p.incident_date).toLocaleDateString()}),r.jsx(xs,{children:r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${p.investigation_status==="open"?"bg-yellow-500/20 text-yellow-400":p.investigation_status==="in_progress"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:p.investigation_status.replace("_"," ").toUpperCase()})}),r.jsx(xs,{children:p.reported_by_name}),r.jsxs(xs,{className:"text-right space-x-1 md:space-x-2",children:[r.jsx(I,{variant:"ghost",size:"icon",onClick:()=>g(p),className:"hover:bg-blue-500/20 text-blue-400 bg-[#607D8B] hover:bg-[#546E7A] p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8",children:r.jsx(Ns,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),p.investigation_status==="open"&&r.jsx(I,{variant:"ghost",size:"icon",onClick:()=>y(p.id,"in_progress"),className:"hover:bg-orange-500/20 text-orange-400 bg-[#607D8B] hover:bg-[#546E7A] p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8",children:r.jsx(Rt,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),p.investigation_status==="in_progress"&&r.jsx(I,{variant:"ghost",size:"icon",onClick:()=>y(p.id,"closed"),className:"hover:bg-green-500/20 text-green-400 bg-[#607D8B] hover:bg-[#546E7A] p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8",children:r.jsx(Cj,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})}),p.report_url&&r.jsx(I,{variant:"ghost",size:"icon",onClick:()=>e({title:"Feature Not Implemented",description:"Viewing/downloading reports is not yet implemented. "}),className:"hover:bg-purple-500/20 text-purple-400 bg-[#607D8B] hover:bg-[#546E7A] p-1.5 md:p-2 h-auto md:h-8 w-auto md:w-8",children:r.jsx(ke,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]})]},p.id))})]})})})]})]})},gv={title:"GS-3 SecureOps Pro Platform",version:"1.0.0",lastUpdated:new Date().toISOString().split("T")[0],description:"A comprehensive security operations management platform designed to streamline and enhance protective services through real-time monitoring, AI-driven analytics, and robust reporting tools. This portal provides an in-depth look at the project's architecture and codebase.",keyFeatures:[{title:"Unified Dashboard",description:"Centralized view of all operational metrics, active alerts, and system statuses.",icon:"LayoutDashboard"},{title:"Hierarchical Site Management",description:"Flexible system to define and manage sites, regions, and national entities.",icon:"Network"},{title:"Real-time Alerts & Notifications",description:"A dynamic ticker and notification system for immediate operational awareness.",icon:"AlertTriangle"},{title:"Role-Based Access Control (RBAC)",description:"Granular permission system to tailor user access based on roles like Admin, Supervisor, and Client.",icon:"Users"},{title:"ISO & Health/Safety Compliance",description:"Dedicated modules for tracking compliance, incidents, and audits.",icon:"ShieldCheck"},{title:"Extensible Admin Settings",description:"UI for configuring system-wide parameters and integration settings.",icon:"Settings"}],techStack:[{name:"React",version:"18.2.0",type:"Frontend Library"},{name:"Vite",version:"4.4.5",type:"Build Tool"},{name:"TailwindCSS",version:"3.3.3",type:"CSS Framework"},{name:"Supabase",version:"2.30.0",type:"Backend as a Service"},{name:"Framer Motion",version:"10.16.4",type:"Animation Library"},{name:"shadcn/ui",version:"Latest",type:"Component Library"}]},M7={name:"package.json",type:"file",content:`{
  "name": "security-management-platform",
  "type": "module",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@radix-ui/react-alert-dialog": "^1.0.5",
    "@radix-ui/react-avatar": "^1.0.3",
    "@radix-ui/react-checkbox": "^1.0.4",
    "@radix-ui/react-dialog": "^1.0.5",
    "@radix-ui/react-dropdown-menu": "^2.0.5",
    "@radix-ui/react-label": "^2.0.2",
    "@radix-ui/react-slot": "^1.0.2",
    "@radix-ui/react-tabs": "^1.0.4",
    "@radix-ui/react-toast": "^1.1.5",
    "@radix-ui/react-slider": "^1.1.2",
    "@radix-ui/react-select": "^1.2.2",
    "@radix-ui/react-switch": "^1.0.3",
    "@supabase/supabase-js": "2.30.0",
    "class-variance-authority": "^0.7.0",
    "clsx": "^2.0.0",
    "framer-motion": "^10.16.4",
    "lucide-react": "^0.285.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-helmet": "^6.1.0",
    "react-router-dom": "^6.16.0",
    "tailwind-merge": "^1.14.0",
    "tailwindcss-animate": "^1.0.7"
  },
  "devDependencies": {
    "@types/node": "^20.8.3",
    "@types/react": "^18.2.15",
    "@types/react-dom": "^18.2.7",
    "@vitejs/plugin-react": "^4.0.3",
    "autoprefixer": "^10.4.16",
    "postcss": "^8.4.31",
    "tailwindcss": "^3.3.3",
    "vite": "^4.4.5"
  }
}`},$7=[M7,{name:"tailwind.config.js",type:"file",content:"// Not relevant for this snapshot"},{name:"postcss.config.js",type:"file",content:"// Not relevant for this snapshot"},{name:"index.html",type:"file",content:"// Not relevant for this snapshot"},{name:"vite.config.js",type:"file",content:"// Not relevant for this snapshot"}],L7=`import React, { useEffect, useState, useCallback } from 'react';
import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import { Helmet } from 'react-helmet';
import { Toaster } from '@/components/ui/toaster';
import Layout from '@/components/Layout';
import Dashboard from '@/pages/Dashboard';
import Assessments from '@/pages/Assessments';
import Sites from '@/pages/Sites';
import Employees from '@/pages/Employees';
import SecurityCompanies from '@/pages/SecurityCompanies';
import Training from '@/pages/Training';
import LiveClasses from '@/pages/LiveClasses';
import NFCManagement from '@/pages/NFCManagement';
import reportRoutes from '@/routes/reportRoutes';
import Scheduling from '@/pages/Scheduling';
import Analytics from '@/pages/Analytics';
import Messaging from '@/pages/Messaging';
import ISO from '@/pages/ISO';
import ExternalApp from '@/pages/ExternalApp';
import AdminSettings from '@/pages/AdminSettings';
import HealthSafety from '@/pages/HealthSafety';
import DeveloperPage from '@/pages/DeveloperPage';
import { supabase } from '@/lib/supabaseClient';
import { useToast } from '@/components/ui/use-toast';

const PerformancePage = () => <div className="text-white p-5"><h1>Performance Evaluations Page</h1><p>Content coming soon...</p></div>;
const IncidentsPage = () => <div className="text-white p-5"><h1>Incidents Page</h1><p>Content coming soon...</p></div>;
const ObservationsPage = () => <div className="text-white p-5"><h1>Observations Page</h1><p>Content coming soon...</p></div>;
const LoginManagementPage = () => <div className="text-white p-5"><h1>Login Management Page</h1><p>Content coming soon...</p></div>;

function App() {
  const { toast } = useToast();
  const [userRole, setUserRole] = useState(null);
  const [loadingRole, setLoadingRole] = useState(true);

  const checkUserSession = useCallback(async () => {
    try {
      const { data: { session }, error: sessionError } = await supabase.auth.getSession();

      if (sessionError) {
        if (sessionError.message.includes('bad_jwt')) {
          console.error("Bad JWT detected. Forcing sign-out.");
          await supabase.auth.signOut();
          setUserRole(null);
          toast({
            variant: "destructive",
            title: "Session Invalid",
            description: "Your session has expired or is invalid. Please log in again.",
          });
          return;
        }
        throw new Error(\`Supabase session error: \${sessionError.message}\`);
      }

      if (session?.user) {
        const { data: userData, error: userError } = await supabase
          .from('users')
          .select('role, full_name')
          .eq('auth_user_id', session.user.id)
          .single();

        if (userError || !userData) {
          console.error('Error fetching user profile or user not found. Forcing sign-out.', userError?.message);
          await supabase.auth.signOut();
          setUserRole(null);
          toast({
            variant: "destructive",
            title: "User Profile Error",
            description: "Could not find your user profile. Please log in again or contact support.",
          });
        } else {
          setUserRole(userData.role);
        }
      } else {
        setUserRole(null);
      }
    } catch (error) {
      console.error('Critical error in user session check. Forcing sign-out.', error);
      await supabase.auth.signOut().catch(e => console.error("Sign out failed during error handling:", e));
      setUserRole(null);
      toast({
        variant: "destructive",
        title: "Application Error",
        description: "An unexpected error occurred. Please try logging in again.",
      });
    } finally {
      setLoadingRole(false);
    }
  }, [toast]);

  useEffect(() => {
    checkUserSession();

    const { data: { subscription } } = supabase.auth.onAuthStateChange((event) => {
      if (event === 'SIGNED_OUT') {
        setUserRole(null);
      } else if (event === 'SIGNED_IN' || event === 'TOKEN_REFRESHED' || event === 'USER_UPDATED') {
        checkUserSession();
      }
    });

    return () => {
      subscription?.unsubscribe();
    };
  }, [checkUserSession]);

  if (loadingRole) {
    return (
      <div className="min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 to-black text-white p-4">
        <img  alt="GS-3 SecureOps Pro Logo loading" className="w-32 h-32 mb-6 animate-pulse" src="https://images.unsplash.com/photo-1575821104894-b683ce7525ff" />
        <h1 className="text-2xl font-semibold mb-2">GS-3 SecureOps Pro</h1>
        <p className="text-slate-400">Initializing Security Management Platform...</p>
        <div className="mt-8 w-16 h-16 border-4 border-dashed rounded-full animate-spin border-blue-500"></div>
      </div>
    );
  }

  return (
    <>
      <Helmet>
        <title>GS-3 SecureOps Pro | Advanced Security Management</title>
        <meta name="description" content="GS-3 SecureOps Pro: Leading security operations platform with AI analytics, real-time monitoring, and comprehensive tools for protective services. Domain: gs-3.pro" />
        <link rel="canonical" href="https://gs-3.pro" />
      </Helmet>
      <Router>
        <div className="min-h-screen bg-gradient-to-br from-slate-900 to-black">
          <Routes>
            <Route path="/developer" element={<DeveloperPage />} />
            <Route path="/" element={<Layout userRole={userRole} />}>
              <Route index element={<Dashboard userRole={userRole} />} />
              <Route path="assessments" element={<Assessments />} />
              <Route path="sites" element={<Sites />} />
              <Route path="employees" element={<Employees />} />
              <Route path="performance" element={<PerformancePage />} />
              <Route path="security-companies" element={<SecurityCompanies />} />
              <Route path="training" element={<Training />} />
              <Route path="live-classes" element={<LiveClasses />} />
              <Route path="nfc" element={<NFCManagement />} />
              {reportRoutes}
              <Route path="reports/incidents" element={<IncidentsPage />} />
              <Route path="reports/observations" element={<ObservationsPage />} />
              <Route path="scheduling" element={<Scheduling />} />
              <Route path="analytics" element={<Analytics />} />
              <Route path="messaging" element={<Messaging />} />
              <Route path="iso" element={<ISO />} />
              <Route path="health-safety" element={<HealthSafety />} />
              <Route path="external-app" element={<ExternalApp />} />
              <Route path="login-management" element={<LoginManagementPage />} />
              <Route path="admin-settings" element={userRole === 'admin' ? <AdminSettings /> : <Navigate to="/" replace />} />
              <Route path="*" element={<Navigate to="/" replace />} />
            </Route>
          </Routes>
          <Toaster />
        </div>
      </Router>
    </>
  );
}

export default App;
`,I7=`import React from 'react';
import ReactDOM from 'react-dom/client';
import App from '@/App';
import '@/index.css';

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
`,F7=`@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 224 71% 4%;
    --foreground: 210 40% 98%;
    --card: 224 71% 10%;
    --card-foreground: 210 40% 98%;
    --popover: 224 71% 4%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 50.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217 32.6% 17.5%;
    --input: 217 32.6% 17.5%;
    --ring: 216 80% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-thin::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
.scrollbar-thin::-webkit-scrollbar-track {
  @apply bg-slate-800/50 rounded-full;
}
.scrollbar-thin::-webkit-scrollbar-thumb {
  @apply bg-slate-700 rounded-full;
}
.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  @apply bg-slate-600;
}

.glass-effect {
  background: rgba(30, 41, 59, 0.6);
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.ios-card {
  @apply bg-slate-800/70 backdrop-blur-md border border-slate-700/80 rounded-xl shadow-xl;
}
.ios-card .card-header { @apply p-4 sm:p-5; }
.ios-card .card-content { @apply p-4 sm:p-5; }
.ios-card .card-title { @apply text-lg sm:text-xl; }

.ios-table-header {
  @apply border-b border-slate-700;
}
.ios-table-header th {
  @apply text-xs uppercase text-slate-400 tracking-wider font-semibold py-3 px-4;
}
.dark-table-row-hover tbody tr {
  @apply border-b border-slate-700/50 transition-colors duration-150;
}
.dark-table-row-hover tbody tr:hover {
  @apply bg-slate-700/30;
}
.dark-table-row-hover tbody tr td {
  @apply py-3 px-4 text-sm text-slate-300;
}

.hover-lift {
  @apply transition-all duration-300 ease-in-out;
}
.hover-lift:hover {
  @apply transform -translate-y-1 shadow-2xl;
}

.glass-button {
  @apply bg-slate-700/50 backdrop-blur-sm border border-slate-600/70 text-slate-200 hover:bg-slate-600/70 hover:border-slate-500/70 transition-all duration-200;
}

.nav-blur {
  background: rgba(15, 23, 42, 0.85);
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  border-right: 1px solid rgba(51, 65, 85, 0.5);
}

.ticker-red { @apply bg-red-600/70 hover:bg-red-500/70; }
.ticker-orange { @apply bg-orange-500/70 hover:bg-orange-400/70; }
.ticker-yellow { @apply bg-yellow-500/70 hover:bg-yellow-400/70; }
.ticker-green { @apply bg-green-600/70 hover:bg-green-500/70; }
.ticker-blue { @apply bg-blue-600/70 hover:bg-blue-500/70; }
.ticker-slate { @apply bg-slate-600/70 hover:bg-slate-500/70; }
`,V7=`import React, { useState, useEffect } from 'react';
import { motion } from 'framer-motion';
import { Loader2, AlertTriangle, Code } from 'lucide-react';

const CodeViewer = ({ file }) => {
  const [content, setContent] = useState('Select a file to view its content.');
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState(null);

  useEffect(() => {
    if (file) {
      setIsLoading(true);
      setError(null);
      
      setTimeout(() => {
        if (file.content) {
          setContent(file.content);
        } else {
          setError('File content is not available or could not be loaded.');
          setContent('');
        }
        setIsLoading(false);
      }, 200);
    }
  }, [file]);

  const renderContent = () => {
    if (isLoading) {
      return (
        <div className="flex flex-col items-center justify-center h-full text-slate-400">
          <Loader2 className="w-8 h-8 animate-spin mb-4" />
          <p>Loading file content...</p>
        </div>
      );
    }
    if (error) {
      return (
        <div className="flex flex-col items-center justify-center h-full text-yellow-400">
          <AlertTriangle className="w-8 h-8 mb-4" />
          <p>{error}</p>
        </div>
      );
    }
    if (!file) {
        return (
             <div className="flex flex-col items-center justify-center h-full text-slate-400">
                <Code className="w-12 h-12 mb-4 text-sky-400" />
                <h3 className="text-lg font-semibold text-white">Select a file</h3>
                <p>Choose a file from the tree on the left to view its source code.</p>
            </div>
        )
    }
    return (
      <pre className="p-4"><code className="text-sm">{content}</code></pre>
    );
  };

  return (
    <div className="bg-slate-900/70 text-white font-mono rounded-lg h-full overflow-auto scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-800/50">
      {renderContent()}
    </div>
  );
};

export default CodeViewer;
`,B7=`import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { File, Folder, ChevronRight, ChevronDown, Loader2 } from 'lucide-react';
import { projectFiles } from '@/data/projectFiles.js';

const FileNode = ({ node, onFileSelect, level = 0 }) => {
  const [isOpen, setIsOpen] = useState(level < 1);

  const handleToggle = () => {
    if (node.type === 'folder') {
      setIsOpen(!isOpen);
    } else {
      onFileSelect(node);
    }
  };

  const isFolder = node.type === 'folder';

  return (
    <div>
      <div
        onClick={handleToggle}
        className="flex items-center p-1.5 rounded-md hover:bg-slate-700/50 cursor-pointer transition-colors"
        style={{ paddingLeft: \`\${level * 1.25 + 0.5}rem\` }}
      >
        {isFolder ? (
          isOpen ? <ChevronDown className="w-4 h-4 mr-2 flex-shrink-0" /> : <ChevronRight className="w-4 h-4 mr-2 flex-shrink-0" />
        ) : (
          <File className="w-4 h-4 mr-2 flex-shrink-0 text-sky-400" />
        )}
        {isFolder ? (
          <Folder className="w-4 h-4 mr-2 flex-shrink-0 text-yellow-400" />
        ) : null}
        <span className="text-sm text-slate-300 truncate">{node.name}</span>
      </div>
      <AnimatePresence>
        {isFolder && isOpen && (
          <motion.div
            initial={{ height: 0, opacity: 0 }}
            animate={{ height: 'auto', opacity: 1 }}
            exit={{ height: 0, opacity: 0 }}
            className="overflow-hidden"
          >
            {node.children.map((childNode, index) => (
              <FileNode key={index} node={childNode} onFileSelect={onFileSelect} level={level + 1} />
            ))}
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
};

const FileTree = ({ onFileSelect }) => {
  const [fileStructure, setFileStructure] = useState(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    setTimeout(() => {
      setFileStructure(projectFiles);
      setIsLoading(false);
    }, 100);
  }, []);

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-full text-slate-400">
        <Loader2 className="w-6 h-6 animate-spin mr-2" />
        <span>Loading Project...</span>
      </div>
    );
  }

  return (
    <div className="bg-slate-800/50 text-white rounded-lg p-2 h-full overflow-y-auto border-r border-slate-700">
      {fileStructure.map((node, index) => (
        <FileNode key={index} node={node} onFileSelect={onFileSelect} />
      ))}
    </div>
  );
};

export default FileTree;
`,z7={name:"App.jsx",type:"file",content:L7},U7={name:"main.jsx",type:"file",content:I7},H7={name:"index.css",type:"file",content:F7},q7={name:"CodeViewer.jsx",type:"file",content:V7},W7={name:"FileTree.jsx",type:"file",content:B7},G7={name:"developer",type:"folder",children:[q7,W7]},K7={name:"components",type:"folder",children:[G7]},Y7={name:"src",type:"folder",children:[z7,U7,H7,K7]},Q7=[...$7,Y7],ZS=({node:e,onFileSelect:t,level:s=0})=>{const[n,a]=f.useState(s<1),i=()=>{e.type==="folder"?a(!n):t(e)},o=e.type==="folder";return r.jsxs("div",{children:[r.jsxs("div",{onClick:i,className:"flex items-center p-1.5 rounded-md hover:bg-slate-700/50 cursor-pointer transition-colors",style:{paddingLeft:`${s*1.25+.5}rem`},children:[o?n?r.jsx(bp,{className:"w-4 h-4 mr-2 flex-shrink-0"}):r.jsx(_T,{className:"w-4 h-4 mr-2 flex-shrink-0"}):r.jsx(kT,{className:"w-4 h-4 mr-2 flex-shrink-0 text-sky-400"}),o?r.jsx(TT,{className:"w-4 h-4 mr-2 flex-shrink-0 text-yellow-400"}):null,r.jsx("span",{className:"text-sm text-slate-300 truncate",children:e.name})]}),r.jsx(Et,{children:o&&n&&r.jsx(z.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.children.map((l,c)=>r.jsx(ZS,{node:l,onFileSelect:t,level:s+1},c))})})]})},J7=({onFileSelect:e})=>{const[t,s]=f.useState(null),[n,a]=f.useState(!0);return f.useEffect(()=>{setTimeout(()=>{s(Q7),a(!1)},100)},[]),n?r.jsxs("div",{className:"flex items-center justify-center h-full text-slate-400",children:[r.jsx(ft,{className:"w-6 h-6 animate-spin mr-2"}),r.jsx("span",{children:"Loading Project..."})]}):r.jsx("div",{className:"bg-slate-800/50 text-white rounded-lg p-2 h-full overflow-y-auto border-r border-slate-700",children:t.map((i,o)=>r.jsx(ZS,{node:i,onFileSelect:e},o))})},X7=({file:e})=>{const[t,s]=f.useState("Select a file to view its content."),[n,a]=f.useState(!1),[i,o]=f.useState(null);f.useEffect(()=>{e&&(a(!0),o(null),setTimeout(()=>{e.content?s(e.content):(o("File content is not available or could not be loaded."),s("")),a(!1)},200))},[e]);const l=()=>n?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[r.jsx(ft,{className:"w-8 h-8 animate-spin mb-4"}),r.jsx("p",{children:"Loading file content..."})]}):i?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-yellow-400",children:[r.jsx(nt,{className:"w-8 h-8 mb-4"}),r.jsx("p",{children:i})]}):e?r.jsx("pre",{className:"p-4",children:r.jsx("code",{className:"text-sm",children:t})}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[r.jsx(Xo,{className:"w-12 h-12 mb-4 text-sky-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Select a file"}),r.jsx("p",{children:"Choose a file from the tree on the left to view its source code."})]});return r.jsx("div",{className:"bg-slate-900/70 text-white font-mono rounded-lg h-full overflow-auto scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-800/50",children:l()})},Z7={LayoutDashboard:Aj,Network:vt,AlertTriangle:nt,Users:xe,ShieldCheck:Yn,Settings:Kn,Database:Of,Cpu:Ej,Wrench:n5,Package:Dj,Code:Xo,Eye:qn},eF=()=>{const[e,t]=f.useState(!1),[s,n]=f.useState(""),[a,i]=f.useState(""),[o,l]=f.useState(!1),[c,d]=f.useState(null),[u,h]=f.useState(gv),[m,g]=f.useState([]),[x,y]=f.useState(!1),[w,p]=f.useState(!0),{toast:v}=ce(),b=f.useCallback(async()=>{p(!0);const{data:E,error:C}=await $.from("developer_portal_snapshots").select("id, created_at, version_name").order("created_at",{ascending:!1});C?v({variant:"destructive",title:"Error fetching snapshots",description:C.message}):g(E),p(!1)},[v]);f.useEffect(()=>{e&&b()},[e,b]);const j=E=>{E.preventDefault(),l(!0),setTimeout(()=>{s==="mg@gs-3.com"&&a==="Developer2025!"?(t(!0),v({title:"Login Successful",description:"Welcome to the Developer Portal."})):v({variant:"destructive",title:"Login Failed",description:"Invalid credentials."}),l(!1)},500)},S=async()=>{y(!0);const E=`v${u.version} - ${new Date().toISOString()}`,{error:C}=await $.from("developer_portal_snapshots").insert([{version_name:E,snapshot_content:u}]);C?v({variant:"destructive",title:"Failed to save snapshot",description:C.message}):(v({title:"Snapshot Saved",description:`Version "${E}" has been saved.`}),b()),y(!1)},_=async E=>{if(!E||E==="latest"){h(gv),v({title:"Loaded Latest Version",description:"Displaying the current project overview."});return}const{data:C,error:O}=await $.from("developer_portal_snapshots").select("snapshot_content").eq("id",E).single();O?v({variant:"destructive",title:"Failed to load snapshot",description:O.message}):(h(C.snapshot_content),v({title:"Snapshot Loaded",description:"Version data has been loaded into the overview."}))};return e?r.jsxs(r.Fragment,{children:[r.jsx(Ao,{children:r.jsx("title",{children:"Developer Portal | GS-3 SecureOps"})}),r.jsxs("div",{className:"text-white p-4 sm:p-6 lg:p-8",children:[r.jsx(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-6",children:r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(t5,{className:"w-8 h-8 mr-3 text-sky-400"}),"Developer Portal"]})}),r.jsxs(Ot,{defaultValue:"overview",className:"w-full",children:[r.jsxs(bt,{className:"grid w-full grid-cols-2 max-w-md bg-slate-800/80 border border-slate-700",children:[r.jsxs(ae,{value:"overview",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:[r.jsx(qn,{className:"w-4 h-4 mr-2"}),"Overview"]}),r.jsxs(ae,{value:"code",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-300",children:[r.jsx(Xo,{className:"w-4 h-4 mr-2"}),"Code Artifacts"]})]}),r.jsx(oe,{value:"overview",className:"mt-4",children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx(G,{className:"text-2xl text-white",children:u.title}),r.jsxs(he,{className:"text-slate-400",children:["Version: ",u.version," | Last Updated: ",u.lastUpdated]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-4 sm:mt-0",children:[r.jsxs(be,{onValueChange:_,disabled:w,children:[r.jsxs(ge,{className:"w-[240px] glass-button",children:[r.jsx(DT,{className:"w-4 h-4 mr-2"}),r.jsx(je,{placeholder:"Load Version Snapshot..."})]}),r.jsxs(ye,{children:[r.jsx(Z,{value:"latest",children:"Latest Version (Default)"}),m.map(E=>r.jsxs(Z,{value:E.id,children:[new Date(E.created_at).toLocaleString()," - ",E.version_name]},E.id))]})]}),r.jsxs(I,{onClick:S,disabled:x,className:"bg-sky-600 hover:bg-sky-700",children:[x?r.jsx(ft,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(Ss,{className:"w-4 h-4 mr-2"}),x?"Saving...":"Save Snapshot"]})]})]})}),r.jsxs(V,{className:"space-y-6 pt-4",children:[r.jsx("p",{className:"text-slate-300",children:u.description}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Key Features"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.keyFeatures.map(E=>{const C=Z7[E.icon]||qn;return r.jsxs("div",{className:"p-4 bg-slate-800/60 rounded-lg border border-slate-700 hover-lift",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(C,{className:"w-5 h-5 mr-3 text-sky-400"}),r.jsx("h4",{className:"font-semibold text-white",children:E.title})]}),r.jsx("p",{className:"text-sm text-slate-400",children:E.description})]},E.title)})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Technology Stack"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.techStack.map(E=>r.jsxs("div",{className:"p-4 bg-slate-800/60 rounded-lg border border-slate-700",children:[r.jsxs("h4",{className:"font-semibold text-white",children:[E.name," ",r.jsx("span",{className:"text-xs text-slate-400 font-normal ml-1",children:E.version})]}),r.jsx("p",{className:"text-sm text-slate-400",children:E.type})]},E.name))})]})]})]})}),r.jsx(oe,{value:"code",className:"mt-4",children:r.jsx(B,{className:"ios-card",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 h-[calc(100vh-220px)] min-h-[600px]",children:[r.jsx("div",{className:"md:col-span-3 lg:col-span-3 border-r border-slate-700 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-800/50",children:r.jsx(J7,{onFileSelect:d})}),r.jsx("div",{className:"md:col-span-9 lg:col-span-9 overflow-hidden",children:r.jsx(X7,{file:c})})]})})})]})]})]}):r.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-900 to-black p-4",children:[r.jsx(Ao,{children:r.jsx("title",{children:"Developer Portal Login"})}),r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:r.jsxs(B,{className:"w-[380px] ios-card",children:[r.jsxs(W,{className:"text-center",children:[r.jsx("div",{className:"mx-auto bg-slate-700/50 p-3 rounded-full w-fit mb-4",children:r.jsx(Pj,{className:"w-8 h-8 text-sky-400"})}),r.jsx(G,{className:"text-2xl text-white",children:"Developer Portal Access"}),r.jsx(he,{className:"text-slate-400",children:"Enter credentials to continue"})]}),r.jsx(V,{children:r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{className:"text-slate-300",htmlFor:"username",children:"Username"}),r.jsx(ee,{id:"username",type:"email",placeholder:"mg@gs-3.com",value:s,onChange:E=>n(E.target.value),required:!0,className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Y,{className:"text-slate-300",htmlFor:"password",children:"Password"}),r.jsx(ee,{id:"password",type:"password",placeholder:"",value:a,onChange:E=>i(E.target.value),required:!0,className:"bg-slate-700/50 border-slate-600 text-white"})]}),r.jsxs(I,{type:"submit",disabled:o,className:"w-full bg-sky-600 hover:bg-sky-700 text-white",children:[o?r.jsx(ft,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(IT,{className:"w-4 h-4 mr-2"}),"Sign In"]})]})})]})})]})},tF=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState([]),[u,h]=f.useState(!0),[m,g]=f.useState(""),[x,y]=f.useState(null),[w,p]=f.useState(!1),[v,b]=f.useState("employees"),{toast:j}=ce(),S=async()=>{h(!0);try{const{data:N,error:k}=await yx();if(k)throw k;const P=N.filter(Ne=>Ne.status==="Archived");t(P);const{data:U,error:M}=await $.from("sites").select("*").eq("is_active",!1);M||n(U||[]);const{data:F,error:q}=await $.from("subcontractor_profiles").select("*").eq("status","Archived");q||i(F||[]);const{data:L,error:J}=await $.from("training_courses").select("*").eq("status","Archived");J||l(L||[]);const{data:ne,error:re}=await $.from("health_safety_incidents").select("*").eq("status","Archived");re||d(ne||[])}catch(N){console.error("Error fetching archived data:",N),j({title:"Error",description:"Failed to load archived data.",variant:"destructive"})}finally{h(!1)}};f.useEffect(()=>{S()},[]);const _=async(N,k)=>{try{let P;switch(k){case"employee":P=await ld(N.id,{...N,status:"Active"});break;case"site":P=await $.from("sites").update({is_active:!0}).eq("id",N.id);break;case"security-company":P=await $.from("subcontractor_profiles").update({status:"Active"}).eq("id",N.id);break;case"training":P=await $.from("training_courses").update({status:"Active"}).eq("id",N.id);break;case"incident":P=await $.from("health_safety_incidents").update({status:"Active"}).eq("id",N.id);break;default:throw new Error("Unknown item type")}if(P!=null&&P.error)throw P.error;j({title:"Item Restored",description:`${N.name||N.title||"Item"} has been restored to active status.`,variant:"default"}),S(),p(!1)}catch(P){console.error("Error restoring item:",P),j({title:"Error",description:"Failed to restore item.",variant:"destructive"})}},E=async(N,k)=>{const P=N.name||N.title||"Item";if(window.confirm(`Are you sure you want to permanently delete ${P}? This action cannot be undone.`))try{let U;switch(k){case"employee":U=await TI(N.id);break;case"site":U=await $.from("sites").delete().eq("id",N.id);break;case"security-company":U=await $.from("subcontractor_profiles").delete().eq("id",N.id);break;case"training":U=await $.from("training_courses").delete().eq("id",N.id);break;case"incident":U=await $.from("health_safety_incidents").delete().eq("id",N.id);break;default:throw new Error("Unknown item type")}if(U!=null&&U.error)throw U.error;j({title:"Item Deleted",description:`${P} has been permanently deleted.`,variant:"default"}),S(),p(!1)}catch(U){console.error("Error deleting item:",U),j({title:"Error",description:"Failed to delete item.",variant:"destructive"})}},C=N=>{switch(N){case"Active":return"bg-green-500/20 text-green-400 border-green-500/30";case"Inactive":return"bg-red-500/20 text-red-400 border-red-500/30";case"On Leave":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"Terminated":return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"Archived":return"bg-purple-500/20 text-purple-400 border-purple-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},O=N=>N>=95?"text-green-400":N>=85?"text-yellow-400":"text-red-400",A=N=>N>=95?r.jsx(ze,{className:"w-4 h-4 text-green-400"}):N>=85?r.jsx(gr,{className:"w-4 h-4 text-yellow-400"}):r.jsx(gr,{className:"w-4 h-4 text-red-400"}),R=(N,k)=>k?N.filter(P=>[P.name||P.title||"",P.role||"",P.site||P.location||"",P.type||P.category||""].join(" ").toLowerCase().includes(k.toLowerCase())):N,D=(()=>{const N=R(e,m),k=R(s,m),P=R(a,m),U=R(o,m),M=R(c,m);return{employees:{total:e.length,filtered:N.length},sites:{total:s.length,filtered:k.length},securityCompanies:{total:a.length,filtered:P.length},training:{total:o.length,filtered:U.length},incidents:{total:c.length,filtered:M.length}}})();return u?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-white",children:"Loading archived data..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Hc,{className:"w-8 h-8 text-purple-400"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"System Archive"}),r.jsx("p",{className:"text-slate-400",children:"Manage archived items across all system modules"})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs(I,{variant:"outline",onClick:S,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[r.jsx(KT,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsx(B,{className:"ios-card",children:r.jsxs(V,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(xe,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{className:"text-white font-semibold",children:"Employees"})]}),r.jsx("p",{className:"text-2xl font-bold text-white mt-2",children:D.employees.total})]})}),r.jsx(B,{className:"ios-card",children:r.jsxs(V,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(As,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-white font-semibold",children:"Sites"})]}),r.jsx("p",{className:"text-2xl font-bold text-white mt-2",children:D.sites.total})]})}),r.jsx(B,{className:"ios-card",children:r.jsxs(V,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(vs,{className:"w-5 h-5 text-orange-400"}),r.jsx("span",{className:"text-white font-semibold",children:"Security Companies"})]}),r.jsx("p",{className:"text-2xl font-bold text-white mt-2",children:D.securityCompanies.total})]})}),r.jsx(B,{className:"ios-card",children:r.jsxs(V,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(rt,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{className:"text-white font-semibold",children:"Training"})]}),r.jsx("p",{className:"text-2xl font-bold text-white mt-2",children:D.training.total})]})}),r.jsx(B,{className:"ios-card",children:r.jsxs(V,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(nt,{className:"w-5 h-5 text-red-400"}),r.jsx("span",{className:"text-white font-semibold",children:"Incidents"})]}),r.jsx("p",{className:"text-2xl font-bold text-white mt-2",children:D.incidents.total})]})})]}),r.jsx(B,{className:"ios-card",children:r.jsx(V,{className:"p-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx(ee,{placeholder:"Search archived items...",value:m,onChange:N=>g(N.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white"})]})})}),r.jsxs(Ot,{value:v,onValueChange:b,className:"space-y-6",children:[r.jsxs(bt,{className:"grid w-full grid-cols-5 bg-slate-800 border border-slate-600",children:[r.jsxs(ae,{value:"employees",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white",children:[r.jsx(xe,{className:"w-4 h-4 mr-2"}),"Employees (",D.employees.filtered,")"]}),r.jsxs(ae,{value:"sites",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white",children:[r.jsx(As,{className:"w-4 h-4 mr-2"}),"Sites (",D.sites.filtered,")"]}),r.jsxs(ae,{value:"security-companies",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white",children:[r.jsx(vs,{className:"w-4 h-4 mr-2"}),"Security Companies (",D.securityCompanies.filtered,")"]}),r.jsxs(ae,{value:"training",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white",children:[r.jsx(rt,{className:"w-4 h-4 mr-2"}),"Training (",D.training.filtered,")"]}),r.jsxs(ae,{value:"incidents",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white",children:[r.jsx(nt,{className:"w-4 h-4 mr-2"}),"Incidents (",D.incidents.filtered,")"]})]}),r.jsx(oe,{value:"employees",className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(Et,{children:R(e,m).map(N=>r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:r.jsx(B,{className:"ios-card hover:bg-slate-700/30 transition-all duration-200 cursor-pointer group",children:r.jsxs(V,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:N.name.split(" ").map(k=>k[0]).join("")}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold group-hover:text-purple-300 transition-colors",children:N.name}),r.jsx("p",{className:"text-slate-400 text-sm",children:N.role})]})]}),r.jsx(Ve,{className:C(N.status),children:N.status})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Qa,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.email})]}),N.phone&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Gn,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.phone})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(gt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.site})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[A(N.compliance),r.jsxs("span",{className:`font-medium ${O(N.compliance)}`,children:[N.compliance,"% Compliant"]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(I,{size:"sm",variant:"outline",onClick:()=>{y(N),p(!0)},className:"flex-1 border-slate-600 text-slate-300 hover:bg-slate-700",children:[r.jsx(Fn,{className:"w-4 h-4 mr-2"}),"View"]}),r.jsxs(I,{size:"sm",onClick:()=>_(N,"employee"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(xa,{className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsx(I,{size:"sm",variant:"destructive",onClick:()=>E(N,"employee"),className:"bg-red-600 hover:bg-red-700",children:r.jsx(kn,{className:"w-4 h-4"})})]})]})})},N.id))})})}),r.jsx(oe,{value:"sites",className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(Et,{children:R(s,m).map(N=>r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:r.jsx(B,{className:"ios-card hover:bg-slate-700/30 transition-all duration-200",children:r.jsxs(V,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:N.name.split(" ").map(k=>k[0]).join("")}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:N.name}),r.jsx("p",{className:"text-slate-400 text-sm",children:N.type})]})]}),r.jsx(Ve,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"Archived"})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(gt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.location||"No location"})]}),N.description&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(ke,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-300",children:[N.description.substring(0,50),"..."]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(I,{size:"sm",onClick:()=>_(N,"site"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(xa,{className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsx(I,{size:"sm",variant:"destructive",onClick:()=>E(N,"site"),className:"bg-red-600 hover:bg-red-700",children:r.jsx(kn,{className:"w-4 h-4"})})]})]})})},N.id))})})}),r.jsx(oe,{value:"security-companies",className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(Et,{children:R(a,m).map(N=>{var k;return r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:r.jsx(B,{className:"ios-card hover:bg-slate-700/30 transition-all duration-200",children:r.jsxs(V,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:N.company_name.split(" ").map(P=>P[0]).join("")}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:N.company_name}),r.jsx("p",{className:"text-slate-400 text-sm",children:N.service_specialization})]})]}),r.jsx(Ve,{className:C(N.status),children:N.status})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[N.contact_email&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Qa,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.contact_email})]}),N.contact_phone&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Gn,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.contact_phone})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(gt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:((k=N.address)==null?void 0:k.city)||"No location"})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(I,{size:"sm",onClick:()=>_(N,"security-company"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(xa,{className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsx(I,{size:"sm",variant:"destructive",onClick:()=>E(N,"security-company"),className:"bg-red-600 hover:bg-red-700",children:r.jsx(kn,{className:"w-4 h-4"})})]})]})})},N.id)})})})}),r.jsx(oe,{value:"training",className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(Et,{children:R(o,m).map(N=>r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:r.jsx(B,{className:"ios-card hover:bg-slate-700/30 transition-all duration-200",children:r.jsxs(V,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:N.title.split(" ").map(k=>k[0]).join("")}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:N.title}),r.jsx("p",{className:"text-slate-400 text-sm",children:N.category})]})]}),r.jsx(Ve,{className:C(N.status),children:N.status})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(rt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.duration||"No duration"})]}),N.description&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(ke,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-300",children:[N.description.substring(0,50),"..."]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(I,{size:"sm",onClick:()=>_(N,"training"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(xa,{className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsx(I,{size:"sm",variant:"destructive",onClick:()=>E(N,"training"),className:"bg-red-600 hover:bg-red-700",children:r.jsx(kn,{className:"w-4 h-4"})})]})]})})},N.id))})})}),r.jsx(oe,{value:"incidents",className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.jsx(Et,{children:R(c,m).map(N=>r.jsx(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:r.jsx(B,{className:"ios-card hover:bg-slate-700/30 transition-all duration-200",children:r.jsxs(V,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-orange-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:N.title.split(" ").map(k=>k[0]).join("")}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:N.title}),r.jsx("p",{className:"text-slate-400 text-sm",children:N.type})]})]}),r.jsx(Ve,{className:C(N.status),children:N.status})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(Ls,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:new Date(N.incident_date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(gt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-300",children:N.location||"No location"})]}),N.description&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(ke,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-300",children:[N.description.substring(0,50),"..."]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(I,{size:"sm",onClick:()=>_(N,"incident"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[r.jsx(xa,{className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsx(I,{size:"sm",variant:"destructive",onClick:()=>E(N,"incident"),className:"bg-red-600 hover:bg-red-700",children:r.jsx(kn,{className:"w-4 h-4"})})]})]})})},N.id))})})})]}),Object.values(D).every(N=>N.filtered===0)&&r.jsx(B,{className:"ios-card",children:r.jsxs(V,{className:"p-8 text-center",children:[r.jsx(Hc,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:m?"No matching archived items":"No archived items"}),r.jsx("p",{className:"text-slate-400",children:m?"Try adjusting your search criteria.":"Items will appear here when they are archived."})]})}),w&&x&&r.jsx(xS,{employee:x,onClose:()=>{p(!1),y(null)},onUpdate:N=>{S(),p(!1),y(null)}})]})},sF=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState([]),[u,h]=f.useState([]),[m,g]=f.useState("org_chart"),{toast:x}=ce();f.useEffect(()=>{y()},[]);const y=async()=>{i(!0);try{const[j,S]=await Promise.all([OI(),DI()]);if(j.error)throw j.error;if(S.error)throw S.error;t(j.data||[]),n(S.data||[])}catch(j){x({variant:"destructive",title:"Error loading chain of command data",description:j.message})}finally{i(!1)}},w=async j=>{l(j);try{const[S,_]=await Promise.all([AI(j.id),RI(j.id)]);if(S.error)throw S.error;if(_.error)throw _.error;d(S.data||[]),h(_.data||[])}catch(S){x({variant:"destructive",title:"Error loading employee details",description:S.message})}},p=j=>{switch(j){case"Operations Management":return r.jsx(qc,{className:"w-4 h-4 text-purple-400"});case"Supervisor":return r.jsx(Ct,{className:"w-4 h-4 text-yellow-400"});case"Consultant":return r.jsx(rt,{className:"w-4 h-4 text-green-400"});case"Standard Officer":return r.jsx(Ke,{className:"w-4 h-4 text-blue-400"});default:return r.jsx(xe,{className:"w-4 h-4 text-gray-400"})}},v=j=>{switch(j){case"Active":return"bg-green-500/20 text-green-400 border-green-500/30";case"Inactive":return"bg-red-500/20 text-red-400 border-red-500/30";case"On Leave":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},b=(j,S=0)=>r.jsx("div",{className:"space-y-4",children:j.map(_=>r.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`relative ${S>0?"ml-8 border-l-2 border-slate-600 pl-4":""}`,children:[r.jsx(B,{className:`cursor-pointer transition-all hover:bg-slate-700/50 ${(o==null?void 0:o.id)===_.id?"ring-2 ring-blue-500":""}`,onClick:()=>w(_),children:r.jsx(V,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[p(_.type),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-white",children:_.name}),r.jsx("p",{className:"text-sm text-gray-400",children:_.role}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx(Ve,{className:`text-xs ${v(_.status)}`,children:_.status}),r.jsx(Ve,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30 text-xs",children:_.type}),_.has_reports&&r.jsx(Ve,{className:"bg-green-500/20 text-green-400 border-green-500/30 text-xs",children:"Has Reports"})]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"text-sm text-gray-400",children:[_.compliance,"% Compliant"]})})]})})}),_.has_reports&&r.jsx("div",{className:"mt-4",children:b(e.filter(E=>E.supervisor_id===_.id),S+1)})]},_.id))});return a?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),r.jsx("span",{className:"ml-3 text-gray-400",children:"Loading chain of command..."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[r.jsx(vt,{className:"w-8 h-8 mr-3 text-blue-400"}),"Chain of Command"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"View and manage organizational hierarchy and reporting relationships."})]})}),r.jsxs(Ot,{value:m,onValueChange:g,className:"space-y-6",children:[r.jsxs(bt,{className:"bg-slate-800 border border-slate-600",children:[r.jsx(ae,{value:"org_chart",className:"text-white",children:"Organizational Chart"}),r.jsx(ae,{value:"employee_list",className:"text-white",children:"Employee List"}),r.jsx(ae,{value:"employee_detail",className:"text-white",children:"Employee Details"})]}),r.jsx(oe,{value:"org_chart",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(vt,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Organizational Hierarchy"})]})}),r.jsx(V,{children:e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(vt,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"No organizational data available."})]}):r.jsx("div",{className:"space-y-6",children:b(e.filter(j=>j.level===0))})})]})}),r.jsx(oe,{value:"employee_list",className:"space-y-6",children:r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(xe,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"All Employees with Supervisors"})]})}),r.jsx(V,{children:r.jsx("div",{className:"space-y-4",children:s.map(j=>r.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-slate-800/40 border border-slate-700 hover:bg-slate-700/60 transition-colors cursor-pointer",onClick:()=>w(j),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[p(j.type),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-white",children:j.name}),r.jsx("p",{className:"text-sm text-gray-400",children:j.role}),j.supervisor_name&&r.jsxs("p",{className:"text-xs text-blue-400",children:["Reports to: ",j.supervisor_name]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(Ve,{className:`text-xs ${v(j.status)}`,children:j.status}),r.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[j.compliance,"% Compliant"]})]})]})},j.id))})})]})}),r.jsx(oe,{value:"employee_detail",className:"space-y-6",children:o?r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ln,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{children:"Employee Information"})]})}),r.jsx(V,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[p(o.type),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-white text-lg",children:o.name}),r.jsx("p",{className:"text-gray-400",children:o.role})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Type"}),r.jsx("p",{className:"text-white",children:o.type})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Status"}),r.jsx(Ve,{className:`text-xs ${v(o.status)}`,children:o.status})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Compliance"}),r.jsxs("p",{className:"text-white",children:[o.compliance,"%"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Hire Date"}),r.jsx("p",{className:"text-white",children:new Date(o.hire_date).toLocaleDateString()})]})]})]})})]}),r.jsxs(B,{className:"ios-card",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(ws,{className:"w-5 h-5 text-green-400"}),r.jsxs("span",{children:["Direct Reports (",c.length,")"]})]})}),r.jsx(V,{children:c.length===0?r.jsx("p",{className:"text-gray-400",children:"No direct reports"}):r.jsx("div",{className:"space-y-3",children:c.map(j=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[p(j.type),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:j.name}),r.jsx("p",{className:"text-sm text-gray-400",children:j.role})]})]}),r.jsx(Ve,{className:`text-xs ${v(j.status)}`,children:j.status})]},j.id))})})]}),r.jsxs(B,{className:"ios-card lg:col-span-2",children:[r.jsx(W,{children:r.jsxs(G,{className:"flex items-center space-x-2 text-white",children:[r.jsx(J0,{className:"w-5 h-5 text-purple-400"}),r.jsx("span",{children:"Reporting Chain"})]})}),r.jsx(V,{children:u.length===0?r.jsx("p",{className:"text-gray-400",children:"No supervisors in chain"}):r.jsx("div",{className:"flex items-center space-x-4",children:u.map((j,S)=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-slate-700/30 rounded-lg",children:[p(j.type),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-white",children:j.name}),r.jsx("p",{className:"text-sm text-gray-400",children:j.role})]})]}),S<u.length-1&&r.jsx(J0,{className:"w-4 h-4 text-gray-400"})]},j.id))})})]})]}):r.jsx(B,{className:"ios-card",children:r.jsxs(V,{className:"text-center py-12",children:[r.jsx(ln,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Select an employee to view detailed information"})]})})})]})]})},rF=()=>r.jsx(sF,{}),nF=()=>r.jsxs("div",{className:"text-white p-5",children:[r.jsx("h1",{children:"Performance Evaluations Page"}),r.jsx("p",{children:"Content coming soon..."})]}),aF=()=>r.jsxs("div",{className:"text-white p-5",children:[r.jsx("h1",{children:"Incidents Page"}),r.jsx("p",{children:"Content coming soon..."})]}),iF=()=>r.jsxs("div",{className:"text-white p-5",children:[r.jsx("h1",{children:"Observations Page"}),r.jsx("p",{children:"Content coming soon..."})]}),oF=()=>r.jsxs("div",{className:"text-white p-5",children:[r.jsx("h1",{children:"Login Management Page"}),r.jsx("p",{children:"Content coming soon..."})]});function lF(){const{toast:e}=ce(),[t,s]=f.useState("vice_president"),[n,a]=f.useState(!1),i=o=>{s(o||null)};return f.useCallback(async()=>{try{const{data:{session:o},error:l}=await $.auth.getSession();if(l){if(l.message.includes("bad_jwt")){console.error("Bad JWT detected. Forcing sign-out."),await $.auth.signOut(),s(null),e({variant:"destructive",title:"Session Invalid",description:"Your session has expired or is invalid. Please log in again."});return}throw new Error(`Supabase session error: ${l.message}`)}if(o!=null&&o.user){const{data:c,error:d}=await $.from("users").select("role, full_name").eq("auth_user_id",o.user.id).single();d||!c?(console.error("Error fetching user profile or user not found. Forcing sign-out.",d==null?void 0:d.message),await $.auth.signOut(),s(null),e({variant:"destructive",title:"User Profile Error",description:"Could not find your user profile. Please log in again or contact support."})):s(c.role)}else s(null)}catch(o){console.error("Critical error in user session check. Forcing sign-out.",o),await $.auth.signOut().catch(l=>console.error("Sign out failed during error handling:",l)),s(null),e({variant:"destructive",title:"Application Error",description:"An unexpected error occurred. Please try logging in again."})}finally{a(!1)}},[e]),n?r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 to-black text-white p-4",children:[r.jsx("img",{alt:"GS-3 SecureOps Pro Logo loading",className:"w-32 h-32 mb-6 animate-pulse",src:"https://images.unsplash.com/photo-1575821104894-b683ce7525ff"}),r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"GS-3 SecureOps Pro"}),r.jsx("p",{className:"text-slate-400",children:"Initializing Security Management Platform..."}),r.jsx("div",{className:"mt-8 w-16 h-16 border-4 border-dashed rounded-full animate-spin border-blue-500"})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Ao,{children:[r.jsx("title",{children:"GS-3 SecureOps Pro | Advanced Security Management"}),r.jsx("meta",{name:"description",content:"GS-3 SecureOps Pro: Leading security operations platform with AI analytics, real-time monitoring, and comprehensive tools for protective services. Domain: gs-3.pro"}),r.jsx("link",{rel:"canonical",href:"https://gs-3.pro"})]}),r.jsx(CE,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-black",children:[r.jsxs(yE,{children:[r.jsx(_e,{path:"/developer",element:r.jsx(eF,{})}),r.jsxs(_e,{path:"/",element:r.jsx(k6,{userRole:t,onRoleChange:i}),children:[r.jsx(_e,{index:!0,element:r.jsx($6,{userRole:t})}),r.jsx(_e,{path:"assessments",element:r.jsx(jI,{})}),r.jsx(_e,{path:"sites",element:r.jsx(WI,{})}),r.jsx(_e,{path:"employees",element:r.jsx(KI,{})}),r.jsx(_e,{path:"chain-of-command",element:r.jsx(rF,{})}),r.jsx(_e,{path:"entity-staff",element:r.jsx(GI,{})}),r.jsx(_e,{path:"performance",element:r.jsx(nF,{})}),r.jsx(_e,{path:"security-companies",element:r.jsx(t8,{})}),r.jsx(_e,{path:"training",element:r.jsx(d8,{})}),r.jsx(_e,{path:"live-classes",element:r.jsx(u8,{})}),r.jsx(_e,{path:"nfc",element:r.jsx(h8,{})}),S8,r.jsx(_e,{path:"reports/incidents",element:r.jsx(aF,{})}),r.jsx(_e,{path:"reports/observations",element:r.jsx(iF,{})}),r.jsx(_e,{path:"scheduling",element:r.jsx(T8,{})}),r.jsx(_e,{path:"analytics",element:r.jsx(P8,{})}),r.jsx(_e,{path:"messaging",element:r.jsx(A8,{})}),r.jsx(_e,{path:"iso",element:r.jsx(w7,{})}),r.jsx(_e,{path:"incident-command",element:r.jsx(N7,{})}),r.jsx(_e,{path:"health-safety",element:r.jsx(D7,{})}),r.jsx(_e,{path:"archive",element:r.jsx(tF,{})}),r.jsx(_e,{path:"external-app",element:r.jsx(S7,{})}),r.jsx(_e,{path:"login-management",element:r.jsx(oF,{})}),r.jsx(_e,{path:"admin-settings",element:t==="admin"?r.jsx(R7,{}):r.jsx(bf,{to:"/",replace:!0})}),r.jsx(_e,{path:"*",element:r.jsx(bf,{to:"/",replace:!0})})]})]}),r.jsx(B5,{})]})})]})}Ch.createRoot(document.getElementById("root")).render(r.jsx(te.StrictMode,{children:r.jsx(lF,{})}));export{s_ as g};
